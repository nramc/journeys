import{a as Ee}from"./chunk-DLS2IXCB.js";import{a as he,b as we,c as Ce,d as be,e as Se}from"./chunk-5KCN7324.js";import"./chunk-UCIFE4H3.js";import{b as ve,h as Ne,i as xe,j as je,k as Je}from"./chunk-I3LXRWA2.js";import{a as Me,b as Te}from"./chunk-GJIRK35P.js";import"./chunk-GYUILPC2.js";import{a as fe}from"./chunk-CPB4CRZX.js";import{b as ye,i as ge}from"./chunk-GF3ULKSG.js";import"./chunk-OAP2WDXR.js";import{a as _e}from"./chunk-QS7RPCLH.js";import{f as H}from"./chunk-SNVCUL6N.js";import"./chunk-AOMZEFOI.js";import"./chunk-NWXFWB74.js";import{c as Z,h as $,i as ee,j as te,k as ne,l as ie,m as re,o as oe,p as ae,q as le,r as de,s as me,t as pe,v as ue,w as se,y as ce}from"./chunk-6OHNXZFP.js";import"./chunk-BZBETYD3.js";import{a as Q,b as X}from"./chunk-RYITIG3B.js";import"./chunk-R6MPEOK3.js";import"./chunk-A2N4MVAO.js";import{g as z}from"./chunk-EGCIWAOK.js";import"./chunk-HLWHUVVB.js";import{k as Y}from"./chunk-T74QBNJG.js";import{Ac as K,Da as c,Ea as y,Hb as _,M as D,Mb as o,R as B,Ub as O,Vb as P,Wb as q,Xb as t,Yb as i,Zb as L,a as N,aa as G,b as x,ba as A,bc as j,gc as f,ic as C,ob as r,qa as V,sa as R,sc as g,t as F,tc as d,uc as U,vc as k,wc as v,xc as h,yb as W,yc as w}from"./chunk-VRY62XD3.js";function Ve(n,p){if(n&1&&(t(0,"div",71),d(1),i()),n&2){let l=C();r(),k(" ",l.successMessage," ")}}function We(n,p){if(n&1&&(t(0,"div",72),d(1),i()),n&2){let l=C();r(),k(" ",l.errorMessage," ")}}function ke(n,p){if(n&1){let l=j();t(0,"div",15)(1,"div",73)(2,"span",74),d(3,"ID"),i(),t(4,"input",75),w("ngModelChange",function(e){c(l);let m=C();return h(m.journey().id,e)||(m.journey().id=e),y(e)}),i()()()}if(n&2){let l=C();r(4),v("ngModel",l.journey().id)}}function Oe(n,p){n&1&&(t(0,"div"),d(1,"Name is required."),i())}function Pe(n,p){n&1&&(t(0,"div"),d(1,"Name must be at least 5 characters long."),i())}function qe(n,p){n&1&&(t(0,"div"),d(1,"Name must be at most 50 characters long."),i())}function Le(n,p){n&1&&(t(0,"div"),d(1,"Category is required."),i())}function Fe(n,p){n&1&&(t(0,"div"),d(1,"Category must be at least 3 characters long."),i())}function De(n,p){n&1&&(t(0,"div"),d(1,"Category must be at most 16 characters long."),i())}function Be(n,p){n&1&&(t(0,"div"),d(1,"Title is required."),i())}function Ge(n,p){n&1&&(t(0,"div"),d(1,"Title must be at least 10 characters long."),i())}function Ae(n,p){n&1&&(t(0,"div"),d(1,"Title must be at most 100 characters long."),i())}function Re(n,p){if(n&1&&(t(0,"option",34),d(1),i()),n&2){let l=p.$implicit;o("value",l),r(),U(l)}}function Ue(n,p){n&1&&(t(0,"div"),d(1,"Icon is required."),i())}function Ke(n,p){n&1&&(t(0,"div"),d(1,"City is required."),i())}function Ye(n,p){n&1&&(t(0,"div"),d(1,"City must be at least 3 characters long."),i())}function ze(n,p){n&1&&(t(0,"div"),d(1,"City must be at most 50 characters long."),i())}function He(n,p){n&1&&(t(0,"div"),d(1,"Country is required."),i())}function Qe(n,p){n&1&&(t(0,"div"),d(1,"Country must be at least 3 characters long."),i())}function Xe(n,p){n&1&&(t(0,"div"),d(1,"Country must be at most 50 characters long."),i())}function Ze(n,p){n&1&&(t(0,"div"),d(1,"Journey Date is required."),i())}function $e(n,p){n&1&&(t(0,"div"),d(1,"Longitude is required."),i())}function et(n,p){n&1&&(t(0,"div"),d(1,"Longitude must be between -180.0 to 180.0."),i())}function tt(n,p){n&1&&(t(0,"div"),d(1,"Longitude must be between -180.0 to 180.0."),i())}function nt(n,p){n&1&&(t(0,"div"),d(1,"Latitude is required."),i())}function it(n,p){n&1&&(t(0,"div"),d(1,"Latitude must be between -90.0 to 90.0."),i())}function rt(n,p){n&1&&(t(0,"div"),d(1,"Latitude must be between -9 0.0 to 90.0."),i())}function ot(n,p){n&1&&(t(0,"div"),d(1,"Memories is required."),i())}function at(n,p){n&1&&(t(0,"div"),d(1,"Memories must be at least 10 characters long."),i())}function lt(n,p){n&1&&(t(0,"div"),d(1,"Memories must be at most 5000 characters long."),i())}function dt(n,p){if(n&1){let l=j();t(0,"mat-chip-row",76),f("removed",function(){let e=c(l).$implicit,m=C();return y(m.removeTag(e))}),d(1),t(2,"button",77),f("click",function(){let e=c(l).$implicit,m=C();return y(m.removeTag(e))}),t(3,"mat-icon"),d(4,"cancel"),i()()()}if(n&2){let l=p.$implicit,u=C();o("highlighted",!0)("editable",!1)("removable",!u.journey().id),r(),k(" ",l," "),r(),o("disabled",u.journey().id!=="")}}function mt(n,p){if(n&1&&(t(0,"button",78),d(1," Save "),i()),n&2){C();let l=g(3);o("disabled",!l.form.valid)}}function pt(n,p){n&1&&(t(0,"button",79),d(1,"Reset"),i())}function ut(n,p){if(n&1){let l=j();t(0,"button",80),f("click",function(){c(l);let e=C();return y(e.continue())}),d(1,"Continue"),i()}}var Ft=(()=>{class n{constructor(){this.NEW_JOURNEY_PAGE_INFO=H,this.separatorKeysCodes=[13,188,32],this.SUPPORTED_ICONS=Me,this.router=V(z),this.journeyService=V(fe),this.autoCompleteService=V(Ee),this.journey=W(new ve),this.coordinates=W([]),this.markdownStyle=W("Source"),this.successMessage="",this.errorMessage="",this.searchCategory=l=>l.pipe(G(""),D(200),B(),A(u=>u.length<1?F([]):this.autoCompleteService.getAvailableCategories(u.toLowerCase())))}setSuccess(l){this.successMessage=l,this.errorMessage=""}setError(l){this.successMessage="",this.errorMessage=l}onSubmit(l){l.submitted&&l.valid&&this.journeyService.createJourney(this.journey()).subscribe({next:u=>this.onCreateSuccess(u),error:u=>this.setError(u)})}onCreateSuccess(l){this.setSuccess("Journey added successfully."),this.journey.set(l)}continue(){this.journey().id&&this.router.navigate(["/journey",this.journey().id,"edit"]).then()}addTag(l){let u=(l.value||"").toLowerCase().trim();u&&this.journey.update(e=>x(N({},e),{tags:e.tags.concat(u)})),l.chipInput.clear()}removeTag(l){this.journey.update(u=>x(N({},u),{tags:u.tags.filter(e=>e!==l)}))}refreshMapWithCoordinates(){this.coordinates()[0]&&this.coordinates()[1]&&this.journey.update(l=>x(N({},l),{location:{type:"Point",coordinates:[this.coordinates()?.[0],this.coordinates()?.[1]]}}))}async copyCoordinatesFromGoogleMap(){let l=await navigator.clipboard.readText();if(console.debug("Value copied from clipboard:",l),l&&l.split(",").length>1){let u=l.split(",");this.coordinates.set([Number(u[1]),Number(u[0])]),this.refreshMapWithCoordinates()}}async copyCoordinatesFromClipboard(){let l=await navigator.clipboard.readText();if(console.debug("Value copied from clipboard:",l),l){let u=l.split(",");this.coordinates.set([Number(u[0]),Number(u[1])]),this.refreshMapWithCoordinates()}}addGeoCodingLocation(l){this.coordinates.set([l.location.coordinates[0],l.location.coordinates[1]]),this.journey.update(u=>x(N({},u),{title:l.name,city:l.state,country:l.country,location:{type:"Point",coordinates:[l.location.coordinates[0],l.location.coordinates[1]]}}))}static{this.\u0275fac=function(u){return new(u||n)}}static{this.\u0275cmp=R({type:n,selectors:[["app-new-journey"]],standalone:!0,features:[K],decls:137,vars:78,consts:[["journeyForm","ngForm"],["name","ngModel"],["category","ngModel"],["title","ngModel"],["iconType","ngModel"],["city","ngModel"],["country","ngModel"],["journeyDate","ngModel","d","ngbDatepicker"],["longitude","ngModel"],["latitude","ngModel"],["description","ngModel"],["chipGrid",""],[3,"pageInfo"],[1,"container"],[3,"ngSubmit"],[1,"row"],[1,"col-md-8","col-12"],[1,"row","mb-3"],[1,"col-12"],["class","bg-success text-light input-group p-2 border border-2",4,"ngIf"],["class","bg-danger text-light input-group p-2 border border-2",4,"ngIf"],["class","row",4,"ngIf"],[1,"mb-3","col-12","col-md-8"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","","maxlength","50","minlength","5","placeholder","Name your Journey",1,"form-control",3,"ngModelChange","ngModel","readOnly"],[1,"form-text","text-danger",3,"hidden"],[4,"ngIf"],[1,"mb-3","col-12","col-md-4"],["for","category",1,"form-label"],["id","category","type","text","required","","minlength","3","maxlength","50","name","category",1,"form-control",3,"ngModelChange","ngModel","ngbTypeahead","disabled"],["for","title",1,"form-label"],["type","text","id","title","name","title","required","","maxlength","100","minlength","10","placeholder","Shortly describe the Journey",1,"form-control",3,"ngModelChange","ngModel","readOnly"],["for","iconType",1,"form-label"],["id","iconType","aria-label","Icon","required","","name","iconType",1,"form-select","form-select-sm",3,"ngModelChange","ngModel","disabled"],[3,"value"],[1,"mb-3","col-md-4"],["for","city",1,"form-label"],["type","text","id","city","name","city","required","","minlength","3","maxlength","50",1,"form-control",3,"ngModelChange","ngModel","readOnly"],["for","country",1,"form-label"],["type","text","id","country","name","country","required","","minlength","3","maxlength","50",1,"form-control",3,"ngModelChange","ngModel","readOnly"],["for","journeyDate",1,"form-label"],[1,"input-group"],["type","text","id","journeyDate","name","journeyDate","required","","placeholder","yyyy-mm-dd","ngbDatepicker","",1,"form-control",3,"ngModelChange","ngModel","readOnly"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click","disabled"],[1,"col-12","col-md-4"],[1,"row","justify-content-evenly"],[1,"col-12",2,"position","relative","min-height","25vh"],[1,"h-50",3,"location","geoJsonData","iconType","enableGeoCoding"],[1,"input-group","mb-3"],["type","number","placeholder","Longitude","aria-label","Longitude","id","longitude","name","longitude","required","","min","-180.0","max","180.0",1,"form-control",3,"ngModelChange","blur","ngModel","readOnly"],["data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-primary","input-group-text","dropdown-toggle",3,"disabled"],[1,"dropdown-menu"],["type","button",1,"dropdown-item",3,"click"],["type","number","placeholder","Latitude","aria-label","Latitude","id","latitude","name","latitude","required","","min","-90.0","max","90.0",1,"form-control",3,"ngModelChange","blur","ngModel","readOnly"],[1,"form-text","text-danger"],[3,"hidden"],[1,"mb-3","col"],["for","description",1,"form-label"],["name","markdownStyle","aria-label","Markdown Style","hideSingleSelectionIndicator","true",1,"ignore-highlight","ms-2","small",3,"ngModelChange","ngModel"],["value","Source"],["value","Preview"],["rows","15","id","description","name","description","required","","minlength","10","maxlength","5000","placeholder","Detailed information about the Journey",1,"form-control",3,"ngModelChange","hidden","ngModel","readOnly"],[2,"height","25rem",3,"hidden"],[3,"title","markdownText"],["aria-label","Tags"],["color","primary",3,"highlighted","editable","removable"],["placeholder","Favorite Tags",1,"form-control",3,"matChipInputTokenEnd","readOnly","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[1,"col-12","d-flex","gap-2","justify-content-center"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["type","reset","class","btn btn-outline-primary",4,"ngIf"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[1,"bg-success","text-light","input-group","p-2","border","border-2"],[1,"bg-danger","text-light","input-group","p-2","border","border-2"],[1,"input-group","mb-3","col-12"],["id","idLabel",1,"input-group-text"],["type","text","aria-describedby","idLabel","id","id","name","id","readonly","readonly",1,"form-control",3,"ngModelChange","ngModel"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","reset",1,"btn","btn-outline-primary"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(u,e){if(u&1){let m=j();L(0,"app-page-header",12),t(1,"section",13)(2,"form",14,0),f("ngSubmit",function(){c(m);let a=g(3);return y(e.onSubmit(a))}),t(4,"div",15)(5,"div",16)(6,"div",17)(7,"div",18),_(8,Ve,2,1,"div",19)(9,We,2,1,"div",20),i()(),_(10,ke,5,1,"div",21),t(11,"div",15)(12,"div",22)(13,"label",23),d(14,"Name"),i(),t(15,"input",24,1),w("ngModelChange",function(a){return c(m),h(e.journey().name,a)||(e.journey().name=a),y(a)}),i(),t(17,"div",25),_(18,Oe,2,0,"div",26)(19,Pe,2,0,"div",26)(20,qe,2,0,"div",26),i()(),t(21,"div",27)(22,"label",28),d(23,"Category"),i(),t(24,"input",29,2),w("ngModelChange",function(a){return c(m),h(e.journey().category,a)||(e.journey().category=a),y(a)}),i(),t(26,"div",25),_(27,Le,2,0,"div",26)(28,Fe,2,0,"div",26)(29,De,2,0,"div",26),i()()(),t(30,"div",15)(31,"div",22)(32,"label",30),d(33,"Title"),i(),t(34,"input",31,3),w("ngModelChange",function(a){return c(m),h(e.journey().title,a)||(e.journey().title=a),y(a)}),i(),t(36,"div",25),_(37,Be,2,0,"div",26)(38,Ge,2,0,"div",26)(39,Ae,2,0,"div",26),i()(),t(40,"div",27)(41,"label",32),d(42,"Icon"),i(),t(43,"select",33,4),f("ngModelChange",function(){return c(m),y(e.refreshMapWithCoordinates())}),w("ngModelChange",function(a){return c(m),h(e.journey().icon,a)||(e.journey().icon=a),y(a)}),P(45,Re,2,2,"option",34,O),i(),t(47,"div",25),_(48,Ue,2,0,"div",26),i()()(),t(49,"div",15)(50,"div",35)(51,"label",36),d(52,"City"),i(),t(53,"input",37,5),w("ngModelChange",function(a){return c(m),h(e.journey().city,a)||(e.journey().city=a),y(a)}),i(),t(55,"div",25),_(56,Ke,2,0,"div",26)(57,Ye,2,0,"div",26)(58,ze,2,0,"div",26),i()(),t(59,"div",35)(60,"label",38),d(61,"Country"),i(),t(62,"input",39,6),w("ngModelChange",function(a){return c(m),h(e.journey().country,a)||(e.journey().country=a),y(a)}),i(),t(64,"div",25),_(65,He,2,0,"div",26)(66,Qe,2,0,"div",26)(67,Xe,2,0,"div",26),i()(),t(68,"div",35)(69,"label",40),d(70,"Journey Date"),i(),t(71,"div",41)(72,"input",42,7),w("ngModelChange",function(a){return c(m),h(e.journey().journeyDate,a)||(e.journey().journeyDate=a),y(a)}),i(),t(75,"button",43),f("click",function(){c(m);let a=g(74);return y(a.toggle())}),i(),t(76,"div",25),_(77,Ze,2,0,"div",26),i()()()()(),t(78,"div",44)(79,"div",45)(80,"div",46)(81,"app-world-map",47),f("location",function(a){return c(m),y(e.addGeoCodingLocation(a))}),i()(),t(82,"div",18)(83,"div",48)(84,"input",49,8),w("ngModelChange",function(a){return c(m),h(e.coordinates()[0],a)||(e.coordinates()[0]=a),y(a)}),f("blur",function(){return c(m),y(e.refreshMapWithCoordinates())}),i(),t(86,"button",50),d(87," Quick Actions "),i(),t(88,"ul",51)(89,"li")(90,"button",52),f("click",function(){return c(m),y(e.copyCoordinatesFromGoogleMap())}),d(91,"Paste coordinates copied from Google Map "),i()(),t(92,"li")(93,"button",52),f("click",function(){return c(m),y(e.copyCoordinatesFromClipboard())}),d(94,"Paste from clipboard "),i()()(),t(95,"input",53,9),w("ngModelChange",function(a){return c(m),h(e.coordinates()[1],a)||(e.coordinates()[1]=a),y(a)}),f("blur",function(){return c(m),y(e.refreshMapWithCoordinates())}),i()(),t(97,"div",54)(98,"div",55),_(99,$e,2,0,"div",26)(100,et,2,0,"div",26)(101,tt,2,0,"div",26),i(),t(102,"div",25),_(103,nt,2,0,"div",26)(104,it,2,0,"div",26)(105,rt,2,0,"div",26),i()()()()()(),t(106,"div")(107,"div")(108,"div",15)(109,"div",56)(110,"label",57),d(111,"Memories"),i(),t(112,"mat-button-toggle-group",58),w("ngModelChange",function(a){return c(m),h(e.markdownStyle,a)||(e.markdownStyle=a),y(a)}),t(113,"mat-button-toggle",59),d(114,"Edit"),i(),t(115,"mat-button-toggle",60),d(116,"Preview"),i()(),t(117,"textarea",61,10),w("ngModelChange",function(a){return c(m),h(e.journey().description,a)||(e.journey().description=a),y(a)}),i(),t(119,"div",62),L(120,"app-display-markdown-component",63),i(),t(121,"div",25),_(122,ot,2,0,"div",26)(123,at,2,0,"div",26)(124,lt,2,0,"div",26),i()()(),t(125,"div",17)(126,"div",18)(127,"mat-chip-grid",64,11),P(129,dt,5,5,"mat-chip-row",65,O),t(131,"input",66),f("matChipInputTokenEnd",function(a){return c(m),y(e.addTag(a))}),i()()()()()(),t(132,"div",15)(133,"div",67),_(134,mt,2,1,"button",68)(135,pt,2,0,"button",69)(136,ut,2,0,"button",70),i()()()()}if(u&2){let m=g(16),s=g(25),a=g(35),J=g(44),b=g(54),S=g(63),I=g(73),M=g(85),T=g(96),E=g(118),Ie=g(128);o("pageInfo",e.NEW_JOURNEY_PAGE_INFO),r(8),o("ngIf",e.successMessage),r(),o("ngIf",e.errorMessage),r(),o("ngIf",e.journey().id),r(5),v("ngModel",e.journey().name),o("readOnly",e.journey().id),r(2),o("hidden",m.valid||m.pristine),r(),o("ngIf",m.errors==null?null:m.errors.required),r(),o("ngIf",m.errors==null?null:m.errors.minlength),r(),o("ngIf",m.errors==null?null:m.errors.maxlength),r(4),v("ngModel",e.journey().category),o("ngbTypeahead",e.searchCategory)("disabled",e.journey().id!=""),r(2),o("hidden",s.valid||s.pristine),r(),o("ngIf",s.errors==null?null:s.errors.required),r(),o("ngIf",s.errors==null?null:s.errors.minlength),r(),o("ngIf",s.errors==null?null:s.errors.maxlength),r(5),v("ngModel",e.journey().title),o("readOnly",e.journey().id),r(2),o("hidden",a.valid||a.pristine),r(),o("ngIf",a.errors==null?null:a.errors.required),r(),o("ngIf",a.errors==null?null:a.errors.minlength),r(),o("ngIf",a.errors==null?null:a.errors.maxlength),r(4),v("ngModel",e.journey().icon),o("disabled",e.journey().id!=""),r(2),q(e.SUPPORTED_ICONS),r(2),o("hidden",J.valid||J.pristine),r(),o("ngIf",J.errors==null?null:J.errors.required),r(5),v("ngModel",e.journey().city),o("readOnly",e.journey().id),r(2),o("hidden",b.valid||b.pristine),r(),o("ngIf",b.errors==null?null:b.errors.required),r(),o("ngIf",b.errors==null?null:b.errors.minlength),r(),o("ngIf",b.errors==null?null:b.errors.maxlength),r(4),v("ngModel",e.journey().country),o("readOnly",e.journey().id),r(2),o("hidden",S.valid||S.pristine),r(),o("ngIf",S.errors==null?null:S.errors.required),r(),o("ngIf",S.errors==null?null:S.errors.minlength),r(),o("ngIf",S.errors==null?null:S.errors.maxlength),r(5),v("ngModel",e.journey().journeyDate),o("readOnly",e.journey().id),r(3),o("disabled",e.journey().id),r(),o("hidden",I.valid||I.pristine),r(),o("ngIf",I.errors==null?null:I.errors.required),r(4),o("geoJsonData",e.journey().location)("iconType",e.journey().icon)("enableGeoCoding",!0),r(3),v("ngModel",e.coordinates()[0]),o("readOnly",e.journey().id),r(2),o("disabled",e.journey().id),r(9),v("ngModel",e.coordinates()[1]),o("readOnly",e.journey().id),r(3),o("hidden",M.valid||M.pristine),r(),o("ngIf",M.errors==null?null:M.errors.required),r(),o("ngIf",M.errors==null?null:M.errors.min),r(),o("ngIf",M.errors==null?null:M.errors.max),r(),o("hidden",T.valid||T.pristine),r(),o("ngIf",T.errors==null?null:T.errors.required),r(),o("ngIf",T.errors==null?null:T.errors.min),r(),o("ngIf",T.errors==null?null:T.errors.max),r(7),v("ngModel",e.markdownStyle),r(5),o("hidden",e.markdownStyle()=="Preview"),v("ngModel",e.journey().description),o("readOnly",e.journey().id),r(2),o("hidden",e.markdownStyle()!="Preview"),r(),o("title",e.journey().title)("markdownText",e.journey().description),r(),o("hidden",E.valid||E.pristine),r(),o("ngIf",E.errors==null?null:E.errors.required),r(),o("ngIf",E.errors==null?null:E.errors.minlength),r(),o("ngIf",E.errors==null?null:E.errors.maxlength),r(5),q(e.journey().tags),r(2),o("readOnly",e.journey().id)("matChipInputFor",Ie)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),r(3),o("ngIf",!e.journey().id),r(),o("ngIf",!e.journey().id),r(),o("ngIf",e.journey().id)}},dependencies:[ce,ie,ae,le,Z,re,oe,$,ee,pe,ue,se,me,de,ne,te,ge,X,Q,Se,Ce,be,he,we,Y,ye,_e,Te,Ne,Je,xe,je],styles:[".map-marker-container[_ngcontent-%COMP%]{min-height:150px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"],changeDetection:0})}}return n})();export{Ft as NewJourneyComponent};
