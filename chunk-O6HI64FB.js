import{a as $,b as ee}from"./chunk-JOTTREAM.js";import{a as Z}from"./chunk-MQXQJMTM.js";import"./chunk-CQOS5N2Q.js";import{a as Y}from"./chunk-K4EDNWTC.js";import{a as Q}from"./chunk-AZEJM2DM.js";import{o as k}from"./chunk-YFHJRQYX.js";import{a as X}from"./chunk-OF4NWUCZ.js";import{b as J,c as K}from"./chunk-6SBMUNL6.js";import{a as j,f as q,g as z}from"./chunk-36ZEBUIF.js";import"./chunk-5WHZVVNO.js";import"./chunk-XV2LRFPF.js";import"./chunk-7RLVC7KT.js";import"./chunk-6N2ZAFKI.js";import{b as N,g as V,h as O,i as T,j as R,k as W,p as H,u as L}from"./chunk-YMHN4OAJ.js";import"./chunk-KXRI7F4O.js";import{c as I}from"./chunk-457AHRSD.js";import{b as v,c as G}from"./chunk-G24K2AOA.js";import{h as U,k as B}from"./chunk-ZQ4W7CNR.js";import"./chunk-3VSBFCFV.js";import{c as F}from"./chunk-EMIR7HSH.js";import"./chunk-AYWYMZFO.js";import{g as A,h as D}from"./chunk-RDHEKL6H.js";import{$b as h,Db as _,Ec as s,Fc as S,Ic as C,Jc as M,Kc as E,Yb as m,Zb as n,_b as t,_c as w,hc as y,lb as l,mc as b,pa as p,pc as d,va as f,wa as u,xb as P,zc as x}from"./chunk-QG3GL7MT.js";var g=class{constructor(e,o,i,a,c,te,ie){this._username=e,this._name=o,this._createdDate=i,this._passwordChangedAt=a,this._enabled=c,this._roles=te,this._mfaEnabled=ie}set name(e){this._name=e}get name(){return this._name}get username(){return this._username}get createdDate(){return this._createdDate}get passwordChangedAt(){return this._passwordChangedAt}get enabled(){return this._enabled}get roles(){return this._roles}set mfaEnabled(e){this._mfaEnabled=e}get mfaEnabled(){return this._mfaEnabled}};function ae(r,e){if(r&1&&(n(0,"div",17)(1,"mat-checkbox",18),s(2),t()()),r&2){let o=e.$implicit;l(),m("checked",!0),l(),S(o)}}function re(r,e){if(r&1&&(n(0,"button",19),s(1," Save "),t()),r&2){d();let o=x(1);m("disabled",!o.valid)}}function ne(r,e){if(r&1){let o=y();n(0,"button",20),b("click",function(){f(o);let a=d(2);return u(a.cancel())}),s(1," Cancel "),t()}}function oe(r,e){if(r&1){let o=y();n(0,"form",4,0),b("submit",function(){f(o);let a=x(1),c=d();return u(c.save(a))}),n(2,"mat-form-field",5)(3,"mat-label"),s(4,"Username"),t(),h(5,"input",6),t(),n(6,"div")(7,"h3",7),s(8,"Status:"),t(),n(9,"mat-checkbox",8),s(10," Active "),t()(),n(11,"div")(12,"h3",7),s(13,"Role(s)"),t(),_(14,ae,3,2,"div",9),t(),n(15,"mat-form-field",10)(16,"mat-label",11),s(17,"Created"),t(),h(18,"input",12),t(),n(19,"mat-form-field",10)(20,"mat-label",11),s(21,"Name"),t(),n(22,"input",13),E("ngModelChange",function(a){f(o);let c=d();return M(c.myProfileData().name,a)||(c.myProfileData().name=a),u(a)}),t()(),n(23,"div",14),_(24,re,2,1,"button",15)(25,ne,2,0,"button",16),t()()}if(r&2){let o,i=d();l(5),m("value",i.myProfileData().username),l(4),m("checked",i.myProfileData().enabled),l(5),m("ngForOf",(o=i.myProfileData())==null?null:o.roles),l(4),m("value",i.myProfileData().createdDate),l(4),C("ngModel",i.myProfileData().name),m("readOnly",!i.hasAccess())}}var Ne=(()=>{let e=class e{constructor(){this.MY_PROFILE_PAGE_INFO=k,this.Role=v,this.notificationService=p(Q),this.myAccountService=p(X),this.router=p(F),this.authService=p(G),this.myProfileData=I(this.myAccountService.getProfileData(),{initialValue:new g("","","","",!1,[],!1)}),this.hasAccess=w(()=>this.authService.hasAnyRole([v.AUTHENTICATED_USER]))}save(i){i.valid&&i.dirty&&this.myAccountService.saveProfileData(this.myProfileData()).subscribe({next:a=>this.onSuccessCallback(),error:a=>this.onErrorCallback()})}onSuccessCallback(){this.notificationService.showSuccess("Profile data saved successfully")}onErrorCallback(){this.notificationService.showError("Update failed. Please check data.")}cancel(){this.router.navigate(["/"]).then(console.log)}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=P({type:e,selectors:[["app-my-profile-page"]],decls:5,vars:2,consts:[["profileForm","ngForm"],[3,"pageInfo"],[1,"container","mx-auto","mt-6"],["class","w-full max-w-4xl flex flex-col gap-2",3,"submit",4,"ngIf"],[1,"w-full","max-w-4xl","flex","flex-col","gap-2",3,"submit"],["appearance","outline",1,"w-full"],["matInput","","id","username","name","username","type","text","readonly","",3,"value"],[1,"text-sm","font-medium","text-primary"],["id","isAccountActive","name","isAccountActive","disabled","",3,"checked"],["class","pl-4",4,"ngFor","ngForOf"],[1,"w-full"],[1,"font-bold","text-primary"],["matInput","","id","createdDate","type","datetime-local","disabled","",3,"value"],["matInput","","id","name","name","name","required","",3,"ngModelChange","ngModel","readOnly"],[1,"flex","justify-center","gap-2"],["mat-flat-button","","color","primary","type","submit",3,"disabled",4,"appHasWriteAccess"],["mat-raised-button","","color","warn","type","button",3,"click",4,"appHasWriteAccess"],[1,"pl-4"],["disabled","",3,"checked"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","warn","type","button",3,"click"]],template:function(a,c){a&1&&(n(0,"header"),h(1,"app-page-header",1),t(),n(2,"main")(3,"section",2),_(4,oe,26,6,"form",3),t()()),a&2&&(l(),m("pageInfo",c.MY_PROFILE_PAGE_INFO),l(3),m("ngIf",c.myProfileData()))},dependencies:[Z,D,L,W,N,V,O,H,R,T,A,Y,z,q,j,K,J,B,U,ee,$],encapsulation:2,changeDetection:0});let r=e;return r})();export{Ne as MyProfilePageComponent};
