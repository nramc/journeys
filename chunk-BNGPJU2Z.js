import{a as I}from"./chunk-JN357QYC.js";import{b as C}from"./chunk-QHHZC6SW.js";import{a as A}from"./chunk-2VBTUSAQ.js";import"./chunk-4AQSK3KV.js";import{a as D}from"./chunk-6NMX424Q.js";import{g as b}from"./chunk-6IY7YVM2.js";import"./chunk-R6KC7QZL.js";import"./chunk-3TVQIQ7Q.js";import"./chunk-FIKRSNUT.js";import{r as _}from"./chunk-6TOOB3QO.js";import{Kb as c,Mb as d,Rb as h,Tb as g,Ub as v,Vb as a,Wb as s,Xb as l,gc as S,oc as m,pc as u,qb as o,rb as y,vc as x,ya as f}from"./chunk-ZMWQM3UH.js";var E=(t,i)=>i[0];function O(t,i){t&1&&(a(0,"div",1),l(1,"mat-spinner"),s())}function F(t,i){if(t&1&&(a(0,"div",9)(1,"span",10),m(2),s(),a(3,"div",11),m(4),s()()),t&2){let p=i.$implicit;o(2),u(p[1]),o(2),u(p[0])}}function B(t,i){if(t&1&&(a(0,"div",8),g(1,F,5,2,"div",9,E),s()),t&2){let p=S();o(),v(p.stats.entries())}}var k=(()=>{let i=class i{constructor(e){this.journeyService=e,this.DASHBOARD_PAGE_INFO=b,this.stats=new Map,this.isLoadingResults=!0}ngOnInit(){this.journeyService.getAllJourneysAsGeoJson().subscribe(e=>this.onFetchSuccessCallback(e))}onFetchSuccessCallback(e){this.featureCollection=e,this.collectStats(e),this.isLoadingResults=!1}collectStats(e){this.stats.set("Journeys",e.features.length),this.stats.set("Places",this.uniqueJourneysByProperty(e,"location")),this.stats.set("Country",this.uniqueJourneysByProperty(e,"country")),this.stats.set("City",this.uniqueJourneysByProperty(e,"city"))}uniqueJourneysByProperty(e,n){return e.features.filter(r=>r.properties?.[n]).filter((r,J,P)=>P.findIndex(w=>JSON.stringify(w.properties?.[n])===JSON.stringify(r.properties?.[n]))===J).length}};i.\u0275fac=function(n){return new(n||i)(y(A))},i.\u0275cmp=f({type:i,selectors:[["app-dashboard"]],standalone:!0,features:[x],decls:8,vars:4,consts:[[3,"pageInfo"],[1,"loading-shade"],[1,"container"],[1,"row","mb-2"],["class","col-12 d-flex gap-2 flex-wrap justify-content-center align-content-center",4,"ngIf"],[1,"row"],[1,"col",2,"position","relative","height","70vh"],["enablePopup","true",3,"geoJsonData"],[1,"col-12","d-flex","gap-2","flex-wrap","justify-content-center","align-content-center"],[1,"text-center","border","border-primary","border-2","rounded","rounded-2","p-2",2,"min-width","75px"],[1,"fs-3","gradient-text","text-primary","fw-bold"],[1,"small","gradient-text"]],template:function(n,r){n&1&&(l(0,"app-page-header",0),c(1,O,2,0,"div",1),a(2,"section",2)(3,"div",3),c(4,B,3,0,"div",4),s(),a(5,"div",5)(6,"div",6),l(7,"app-world-map",7),s()()()),n&2&&(d("pageInfo",r.DASHBOARD_PAGE_INFO),o(),h(r.isLoadingResults?1:-1),o(3),d("ngIf",r.stats),o(3),d("geoJsonData",r.featureCollection))},dependencies:[D,C,_,I]});let t=i;return t})();export{k as DashboardComponent};
