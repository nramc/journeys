import{a as q}from"./chunk-E7ICUXXM.js";import{b as R,d as G,e as p,f as M}from"./chunk-3CYA2F3S.js";import{a as u}from"./chunk-BZBETYD3.js";import{b as B}from"./chunk-R6MPEOK3.js";import{c as U}from"./chunk-HLWHUVVB.js";import{k as $}from"./chunk-T74QBNJG.js";import{$b as v,$c as V,Ac as F,Da as g,Ea as _,Hb as c,Mb as r,Qa as A,Sb as j,Xb as a,Yb as s,Zb as d,_b as x,a as I,bc as C,gc as y,ic as m,ka as w,ob as o,qa as h,qc as z,rc as E,sa as k,t as S,tc as f,uc as T,yb as D,zb as P}from"./chunk-VRY62XD3.js";var oe=(()=>{class t{constructor(){this.httpClient=h(U),this.authService=h(B)}getTimelineForUpcomingJourniversaries(e){let i=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${i.accessToken}`},params:{upcoming:e}})}getTimelineForJourney(e){let i=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${i.accessToken}`},params:{IDs:e}})}getTimelineForCity(e){let i=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${i.accessToken}`},params:{city:e}})}getTimelineForCountry(e){let i=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${i.accessToken}`},params:{country:e}})}getTimelineForYear(e){let i=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${i.accessToken}`},params:{year:e}})}getTimelineForCategory(e){let i=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${i.accessToken}`},params:{category:e}})}getTimelineForToday(){let e=this.authService.getCurrentUserContext();return e.isAuthenticated?this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`,"X-Async-Process":"true"},params:{today:!0}}):S()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function J(t,l){if(t&1){let e=C();a(0,"button",6),y("click",function(){g(e);let n=m(3);return _(n.togglePlayer())}),d(1,"i",7),s()}t&2&&r("matTooltip","Pause")}function N(t,l){if(t&1){let e=C();a(0,"button",6),y("click",function(){g(e);let n=m(3);return _(n.togglePlayer())}),d(1,"i",8),s()}t&2&&r("matTooltip","Play")}function H(t,l){if(t&1&&(x(0),c(1,J,2,1,"button",5)(2,N,2,1,"button",5),v()),t&2){let e=m(2);o(),r("ngIf",e.isPlayerRunning()),o(),r("ngIf",!e.isPlayerRunning())}}function X(t,l){if(t&1&&(a(0,"div",2)(1,"p"),d(2,"span",3),c(3,H,3,2,"ng-container",4),s()()),t&2){let e,i,n=m();o(2),r("textContent",(e=n.timelineData())==null?null:e.heading),o(),r("ngIf",(i=n.images())==null?null:i.length)}}function Y(t,l){if(t&1&&(a(0,"div",14)(1,"span",15),f(2),s()()),t&2){let e=m().$implicit;o(2),T(e==null||e.args==null?null:e.args.title)}}function K(t,l){if(t&1&&(x(0),c(1,Y,3,1,"div",11),a(2,"div",12)(3,"p",13),f(4),s()(),v()),t&2){let e=l.$implicit;o(),r("ngIf",e==null||e.args==null?null:e.args.title),o(3),T(e==null||e.args==null?null:e.args.caption)}}function L(t,l){if(t&1){let e=C();a(0,"gallery",9),y("itemClick",function(){g(e);let n=m();return _(n.togglePlayer())}),c(1,K,5,2,"ng-container",10),s()}if(t&2){let e=m();r("items",e.images())("thumb",!1)("imageSize","contain")("dots",!0)("playerInterval",3e3)("loop",!0)("slidingDuration",500)("autoPlay",!0)}}function O(t,l){t&1&&(a(0,"div")(1,"p",16),f(2,"No events found."),s()())}function W(t){return new R({src:t.src,args:I({caption:t.caption,title:t.title},t.args)})}var _e=(()=>{class t{constructor(){this.timelineData=A.required({alias:"data"}),this.images=V(()=>this.timelineData()?.images?.map(W)??[]),this.galleryComponent=P.required(p),this.isPlayerRunning=D(!0)}togglePlayer(){this.isPlayerRunning()?(this.galleryComponent().stop(),this.isPlayerRunning.set(!1)):(this.galleryComponent().next(),this.galleryComponent().play(),this.isPlayerRunning.set(!0))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=k({type:t,selectors:[["app-timeline"]],viewQuery:function(i,n){i&1&&z(n.galleryComponent,p,5),i&2&&E()},inputs:{timelineData:[1,"data","timelineData"]},standalone:!0,features:[F],decls:3,vars:2,consts:[["class","fs-5",4,"ngIf"],[1,"gallery",3,"items","thumb","imageSize","dots","playerInterval","loop","slidingDuration","autoPlay"],[1,"fs-5"],[1,"gradient-text","me-2",3,"textContent"],[4,"ngIf"],["class","btn btn-sm btn-outline-primary",3,"matTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary",3,"click","matTooltip"],[1,"bi","bi-pause-circle"],[1,"bi","bi-play-circle"],[1,"gallery",3,"itemClick","items","thumb","imageSize","dots","playerInterval","loop","slidingDuration","autoPlay"],[4,"galleryImageDef"],["class","text-start d-flex flex-row w-100",4,"ngIf"],[1,"h-100","w-100","text-end","d-flex","flex-column","justify-content-end","mb-2","fs-5"],[1,"text-center","bg-light","bg-opacity-25"],[1,"text-start","d-flex","flex-row","w-100"],[1,"text-light","me-2","fs-5","bg-dark","bg-opacity-50","m-2","border","border-2","border-light","ps-2","pe-2","rounded-2"],[1,"gradient-text"]],template:function(i,n){if(i&1&&c(0,X,4,2,"div",0)(1,L,2,8,"gallery",1)(2,O,3,0,"div"),i&2){let b;r("ngIf",(b=n.timelineData())==null?null:b.heading),o(),j(n.images()&&n.images().length>0?1:2)}},dependencies:[M,p,G,$,q],encapsulation:2,changeDetection:0})}}return t})();export{oe as a,_e as b};
