import"./chunk-MS4AQ6UA.js";import{a as le,b as se}from"./chunk-ATWYNK4P.js";import{a as re}from"./chunk-YDNGBBHQ.js";import{m as Z,o as ee,p as v,q as te}from"./chunk-SOSTMYA5.js";import{c as ae}from"./chunk-NABGVLJB.js";import"./chunk-F5X5MWHG.js";import{a as H}from"./chunk-SU3OMI2O.js";import"./chunk-F5E4D66H.js";import"./chunk-NF5ZLOBB.js";import"./chunk-NMS73BKN.js";import{j as q}from"./chunk-BS35BKX7.js";import{a as ie,f as ne,g as oe}from"./chunk-HMFONO7X.js";import"./chunk-JQXD7EH6.js";import"./chunk-LE5T557K.js";import"./chunk-22ADO4DZ.js";import"./chunk-VHYXY7OV.js";import{g as W,j as L,u as Y}from"./chunk-YQ2IFANT.js";import{a as p}from"./chunk-UYEVJUVR.js";import{c as Q}from"./chunk-OXPTOEN6.js";import{a as G,b as $}from"./chunk-QCOWUISP.js";import{g as X,j as K}from"./chunk-WZV44MZJ.js";import"./chunk-P47HP3AW.js";import{a as V}from"./chunk-46BTBU6F.js";import{f as B}from"./chunk-TVRC5D5R.js";import"./chunk-6Z5N4UCC.js";import{Cb as E,Dc as s,Ec as S,Fa as _,Hc as J,Ic as R,Jc as j,Sb as g,Tb as h,Xb as c,Yb as r,Zb as a,Zc as O,_b as M,a as F,cc as w,cd as U,dc as k,dd as z,gc as D,ka as P,lb as l,lc as f,oc as u,pa as y,u as I,va as x,wa as T,wc as A,xb as b,xc as N}from"./chunk-LHMNFXGQ.js";function pe(i,n){if(i&1){let o=D();r(0,"button",5),f("click",function(){x(o);let e=u(3);return T(e.togglePlayer())}),r(1,"mat-icon",6),s(2,"pause_circle"),a()()}}function de(i,n){if(i&1){let o=D();r(0,"button",7),f("click",function(){x(o);let e=u(3);return T(e.togglePlayer())}),r(1,"mat-icon",8),s(2,"play_circle"),a()()}}function ge(i,n){if(i&1&&(g(0,pe,3,0,"button",3),g(1,de,3,0,"button",4)),i&2){let o=u(2);h(o.isPlayerRunning()?0:-1),l(),h(o.isPlayerRunning()?-1:1)}}function he(i,n){if(i&1&&(r(0,"div",0)(1,"h2",2),s(2),a(),g(3,ge,2,2),a()),i&2){let o,t=u();l(2),S((o=t.data())==null?null:o.heading),l(),h(t.images().length?3:-1)}}function Ce(i,n){if(i&1&&(r(0,"div",11)(1,"span",14),s(2),a()()),i&2){let o=u().$implicit;l(2),S(o==null||o.args==null?null:o.args.title)}}function ye(i,n){if(i&1&&(w(0),g(1,Ce,3,1,"div",11),r(2,"div",12)(3,"p",13),s(4),a()(),k()),i&2){let o=n.$implicit;l(),h(!(o==null||o.args==null)&&o.args.title?1:-1),l(3),S(o==null||o.args==null?null:o.args.caption)}}function fe(i,n){if(i&1){let o=D();r(0,"gallery",9),f("itemClick",function(){x(o);let e=u();return T(e.togglePlayer())}),E(1,ye,5,2,"ng-container",10),a()}if(i&2){let o=u();c("items",o.images())("thumbs",!1)("imageSize","contain")("bullets",!0)("autoplayInterval",3e3)("loop",!0)("scrollDuration",500)("autoplay",!0)}}function _e(i,n){i&1&&(r(0,"div")(1,"p",15),s(2,"No events found."),a()())}function ve(i){return new Z({src:i.src,args:F({caption:i.caption,title:i.title},i.args)})}var ce=(()=>{let n=class n{constructor(){this.data=U.required(),this.images=O(()=>this.data()?.images?.map(ve)??[]),this.galleryComponent=z.required(v),this.isPlayerRunning=_(!0)}togglePlayer(){this.isPlayerRunning()?(this.galleryComponent().stop(),this.isPlayerRunning.set(!1)):(this.galleryComponent().next(),this.galleryComponent().play(),this.isPlayerRunning.set(!0))}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=b({type:n,selectors:[["app-timeline"]],viewQuery:function(e,m){e&1&&A(m.galleryComponent,v,5),e&2&&N()},inputs:{data:[1,"data"]},decls:3,vars:2,consts:[[1,"inline-flex","mb-2"],[1,"gallery",3,"items","thumbs","imageSize","bullets","autoplayInterval","loop","scrollDuration","autoplay"],[1,"gradient-text","me-2"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Pause"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Play"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Pause",3,"click"],[1,"text-danger"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Play",3,"click"],[1,"text-success"],[1,"gallery",3,"itemClick","items","thumbs","imageSize","bullets","autoplayInterval","loop","scrollDuration","autoplay"],[4,"galleryImageDef"],[1,"w-full","text-start","flex","flex-row"],[1,"h-full","w-full","text-end","flex","flex-col","justify-end","p-2","mb-4"],[1,"text-center","bg-black/50"],[1,"me-2","m-2","border-2","ps-2","pe-2","bg-black/25"],[1,"text-primary"]],template:function(e,m){if(e&1&&(g(0,he,4,2,"div",0),g(1,fe,2,8,"gallery",1)(2,_e,3,0,"div")),e&2){let d;h((d=m.data())!=null&&d.heading?0:-1),l(),h(m.images()&&m.images().length>0?1:2)}},dependencies:[te,v,ee,H,$,G,K,X],encapsulation:2,changeDetection:0});let i=n;return i})();var ue=(()=>{let n=class n{constructor(){this.httpClient=y(B),this.authService=y(Q)}getTimelineForUpcomingJourniversaries(t){let e=this.authService.getCurrentUserContext();return this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`},params:{upcoming:t}})}getTimelineForJourney(t){let e=this.authService.getCurrentUserContext();return this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`},params:{IDs:t}})}getTimelineForCity(t){let e=this.authService.getCurrentUserContext();return this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`},params:{city:t}})}getTimelineForCountry(t){let e=this.authService.getCurrentUserContext();return this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`},params:{country:t}})}getTimelineForYear(t){let e=this.authService.getCurrentUserContext();return this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`},params:{year:t}})}getTimelineForCategory(t){let e=this.authService.getCurrentUserContext();return this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`},params:{category:t}})}getTimelineForToday(){let t=this.authService.getCurrentUserContext();return t.isAuthenticated?this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`,"X-Async-Process":"true"},params:{today:!0}}):I()}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();var et=(()=>{let n=class n{constructor(){this.TIMELINE_PAGE_INFO=q,this.timelineService=y(ue),this.activatedRoute=y(V),this.numberOfDaysJourniversaries=_(7),this.timelineData=_(void 0)}ngOnInit(){let t=this.activatedRoute.snapshot.queryParams.id,e=this.activatedRoute.snapshot.queryParams.city,m=this.activatedRoute.snapshot.queryParams.country,d=this.activatedRoute.snapshot.queryParams.year,C=this.activatedRoute.snapshot.queryParams.category;t?this.getDataForJourney(t):e?this.getDataForCity(e):m?this.getDataForCountry(m):d?this.getDataForYear(d):C?this.getDataForCategory(C):this.getDataForUpcomingJourniversaries()}getDataForJourney(t){this.timelineService.getTimelineForJourney(t).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}getDataForCity(t){this.timelineService.getTimelineForCity(t).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}getDataForCountry(t){this.timelineService.getTimelineForCountry(t).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}getDataForYear(t){this.timelineService.getTimelineForYear(t).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}getDataForCategory(t){this.timelineService.getTimelineForCategory(t).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}getDataForUpcomingJourniversaries(){this.timelineService.getTimelineForUpcomingJourniversaries(this.numberOfDaysJourniversaries()).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=b({type:n,selectors:[["app-timeline-page"]],decls:24,vars:10,consts:[[3,"pageInfo"],[1,"mt-2","container","flex","flex-col"],["appearance","fill"],[1,"!outline-offset-0","!border-0",3,"ngModelChange","selectionChange","ngModel"],[3,"value"],[1,"flex","flex-col"],[3,"data"]],template:function(e,m){e&1&&(r(0,"header"),M(1,"app-page-header",0),a(),r(2,"main")(3,"section",1)(4,"mat-form-field",2)(5,"mat-label"),s(6,"Choose interval to display Journiversaries"),a(),r(7,"mat-select",3),j("ngModelChange",function(C){return R(m.numberOfDaysJourniversaries,C)||(m.numberOfDaysJourniversaries=C),C}),f("selectionChange",function(){return m.getDataForUpcomingJourniversaries()}),r(8,"mat-option",4),s(9,"Tomorrow"),a(),r(10,"mat-option",4),s(11,"Next One Week"),a(),r(12,"mat-option",4),s(13,"Next Two Week"),a(),r(14,"mat-option",4),s(15,"Next Three Week"),a(),r(16,"mat-option",4),s(17,"Next One Month"),a(),r(18,"mat-option",4),s(19,"Next Two Months"),a(),r(20,"mat-option",4),s(21,"Next Three Months"),a()()()(),r(22,"section",5),M(23,"app-timeline",6),a()()),e&2&&(l(),c("pageInfo",m.TIMELINE_PAGE_INFO),l(6),J("ngModel",m.numberOfDaysJourniversaries),l(),c("value",1),l(2),c("value",7),l(2),c("value",14),l(2),c("value",21),l(2),c("value",30),l(2),c("value",60),l(2),c("value",90),l(3),c("data",m.timelineData()))},dependencies:[ce,re,Y,W,L,oe,ne,ie,se,le,ae],encapsulation:2,changeDetection:0});let i=n;return i})();export{et as TimelinePageComponent};
