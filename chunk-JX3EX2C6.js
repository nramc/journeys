import{a as ie,b as ae}from"./chunk-H67SMGQ5.js";import{a as te}from"./chunk-3W36CHB7.js";import"./chunk-5XHSEHAJ.js";import{a as z}from"./chunk-GGG2HDDJ.js";import{a as $}from"./chunk-VSHXB745.js";import{o as V}from"./chunk-BS35BKX7.js";import{a as ee}from"./chunk-K4J65KC6.js";import{b as X,c as Z}from"./chunk-46C5OQ3F.js";import{a as J,f as K,g as Q}from"./chunk-X7YUYQ54.js";import"./chunk-FSERETJE.js";import"./chunk-F4DSFHW7.js";import"./chunk-CHGDWI4X.js";import"./chunk-66AFA25Q.js";import{b as R,g as O,h as W,i as H,j as L,k as B,p as G,u as U}from"./chunk-WYGIYYQO.js";import"./chunk-5HCI3JVT.js";import{c as T}from"./chunk-RL25V5BE.js";import{b as x,c as Y}from"./chunk-OG5DQ5VQ.js";import{h as j,j as q}from"./chunk-OLDPWYQ6.js";import"./chunk-SUU2CJAS.js";import{c as N}from"./chunk-CLWH3GUL.js";import"./chunk-LVLQ6W55.js";import{Bc as m,Cc as A,Db as v,Fc as D,Gc as k,Hc as F,Qb as P,Rb as M,Sb as S,Tb as E,Ub as w,Vb as c,Wb as a,Wc as I,Xb as t,Yb as _,ec as y,jb as l,jc as g,ma as p,mc as d,sa as u,ta as f,wc as b,yb as C}from"./chunk-JOM6ROGP.js";var h=class{constructor(r,e,o,n,s,ne,oe){this._username=r,this._name=e,this._createdDate=o,this._passwordChangedAt=n,this._enabled=s,this._roles=ne,this._mfaEnabled=oe}set name(r){this._name=r}get name(){return this._name}get username(){return this._username}get createdDate(){return this._createdDate}get passwordChangedAt(){return this._passwordChangedAt}get enabled(){return this._enabled}get roles(){return this._roles}set mfaEnabled(r){this._mfaEnabled=r}get mfaEnabled(){return this._mfaEnabled}};function re(i,r){if(i&1&&(a(0,"div",9)(1,"mat-checkbox",17),m(2),t()()),i&2){let e=r.$implicit;l(),c("checked",!0),l(),A(e)}}function le(i,r){if(i&1&&(a(0,"button",18),m(1," Save "),t()),i&2){d();let e=b(1);c("disabled",!e.valid)}}function me(i,r){if(i&1){let e=y();a(0,"button",19),g("click",function(){u(e);let n=d(2);return f(n.cancel())}),m(1," Cancel "),t()}}function ce(i,r){if(i&1){let e=y();a(0,"form",4,0),g("submit",function(){u(e);let n=b(1),s=d();return f(s.save(n))}),a(2,"mat-form-field",5)(3,"mat-label"),m(4,"Username"),t(),_(5,"input",6),t(),a(6,"div")(7,"h3",7),m(8,"Status:"),t(),a(9,"mat-checkbox",8),m(10," Active "),t()(),a(11,"div")(12,"h3",7),m(13,"Role(s)"),t(),E(14,re,3,2,"div",9,S),t(),a(16,"mat-form-field",10)(17,"mat-label",11),m(18,"Created"),t(),_(19,"input",12),t(),a(20,"mat-form-field",10)(21,"mat-label",11),m(22,"Name"),t(),a(23,"input",13),F("ngModelChange",function(n){u(e);let s=d();return k(s.myProfileData().name,n)||(s.myProfileData().name=n),f(n)}),t()(),a(24,"div",14),v(25,le,2,1,"button",15)(26,me,2,0,"button",16),t()()}if(i&2){let e=d();l(5),c("value",e.myProfileData().username),l(4),c("checked",e.myProfileData().enabled),l(5),w(e.myProfileData().roles),l(5),c("value",e.myProfileData().createdDate),l(4),D("ngModel",e.myProfileData().name),c("readOnly",!e.hasAccess())}}var Ve=(()=>{class i{constructor(){this.MY_PROFILE_PAGE_INFO=V,this.Role=x,this.notificationService=p($),this.myAccountService=p(ee),this.router=p(N),this.authService=p(Y),this.myProfileData=T(this.myAccountService.getProfileData(),{initialValue:new h("","","","",!1,[],!1)}),this.hasAccess=I(()=>this.authService.hasAnyRole([x.AUTHENTICATED_USER]))}save(e){e.valid&&e.dirty&&this.myAccountService.saveProfileData(this.myProfileData()).subscribe({next:o=>this.onSuccessCallback(),error:o=>this.onErrorCallback()})}onSuccessCallback(){this.notificationService.showSuccess("Profile data saved successfully")}onErrorCallback(){this.notificationService.showError("Update failed. Please check data.")}cancel(){this.router.navigate(["/"]).then(console.log)}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=C({type:i,selectors:[["app-my-profile-page"]],decls:5,vars:2,consts:[["profileForm","ngForm"],[3,"pageInfo"],[1,"container","mx-auto","mt-6"],[1,"w-full","max-w-4xl","flex","flex-col","gap-2"],[1,"w-full","max-w-4xl","flex","flex-col","gap-2",3,"submit"],["appearance","outline",1,"w-full"],["matInput","","id","username","name","username","type","text","readonly","",3,"value"],[1,"text-sm","font-medium","text-primary"],["id","isAccountActive","name","isAccountActive","disabled","",3,"checked"],[1,"pl-4"],[1,"w-full"],[1,"font-bold","text-primary"],["matInput","","id","createdDate","type","datetime-local","disabled","",3,"value"],["matInput","","id","name","name","name","required","",3,"ngModelChange","ngModel","readOnly"],[1,"flex","justify-center","gap-2"],["mat-flat-button","","color","primary","type","submit",3,"disabled",4,"appHasWriteAccess"],["mat-raised-button","","color","warn","type","button",3,"click",4,"appHasWriteAccess"],["disabled","",3,"checked"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","warn","type","button",3,"click"]],template:function(o,n){o&1&&(a(0,"header"),_(1,"app-page-header",1),t(),a(2,"main")(3,"section",2),P(4,ce,27,5,"form",3),t()()),o&2&&(l(),c("pageInfo",n.MY_PROFILE_PAGE_INFO),l(3),M(n.myProfileData()?4:-1))},dependencies:[te,U,B,R,O,W,G,L,H,z,Q,K,J,Z,X,q,j,ae,ie],encapsulation:2,changeDetection:0})}}return i})();export{Ve as MyProfilePageComponent};
