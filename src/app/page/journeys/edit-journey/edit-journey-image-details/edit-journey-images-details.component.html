<form (ngSubmit)="save()" *ngIf="this.journey()">

  <!-- Image Thumbnails -->
  <div class="flex flex-wrap mb-4 gap-2">
    @for (imageDetail of this.formImageDetails().images; track imageDetail.assetId; let i = $index) {
      <div class="cursor-pointer border rounded-md overflow-hidden"
           [class.border-success]="imageDetail.isThumbnail"
           [class.border-primary]="!imageDetail.isThumbnail"
           (click)="openImageItem(imageDetail)"
           (keydown.enter)="openImageItem(imageDetail)">
        <img [src]="imageDetail.url" alt="thumbnail" title="{{ imageDetail.assetId }}" class="h-16 w-24 object-contain"/>
      </div>
    }
  </div>

  <!-- Buttons -->
  <div class="flex flex-col md:flex-row items-center justify-center content-center gap-4">

    <button mat-fab extended type="button" (click)="openUploadWidget(true)">
      <mat-icon>folder</mat-icon>
      Upload Image(s)
    </button>

    <button mat-fab extended type="button" (click)="openUploadWidget(false)">
      <mat-icon>file_upload</mat-icon>
      Upload Image
    </button>

    <button mat-flat-button type="button" matStepperNext>Next</button>

    <a class="text-primary" routerLink="/tools" target="_blank">
      <span class="hover:underline">Reduce Image Size</span>
      <mat-icon>open_in_new</mat-icon>
    </a>
  </div>
</form>

<!-- Image Item Detail Dialog -->
<dialog #imageItemDetailDialog class="w-full md:w-3/4 p-4 rounded-lg border shadow-lg">
  <app-edit-journey-image-item
    [imageItem]="imageItemDetail()"
    (save)="saveImageItemDetail($event)"
    (remove)="deleteImageItemDetail($event)"
    (cancel)="imageItemDialog().nativeElement.close()">
  </app-edit-journey-image-item>
</dialog>

