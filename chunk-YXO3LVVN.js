import{a as Ie}from"./chunk-EGRU6WD4.js";import{a as he,b as we,c as Ce,d as be,e as Se}from"./chunk-LVBZK62D.js";import"./chunk-MPAV3FZY.js";import{b as ve,h as Ee,i as Ne,j as xe,k as je}from"./chunk-XHEC3SFK.js";import{a as Me,b as Te}from"./chunk-XZCFDLLL.js";import"./chunk-QTVR55XV.js";import{a as fe}from"./chunk-ZAZWDV2Q.js";import{b as ye,j as ge}from"./chunk-PS6LTETE.js";import"./chunk-LXMNER7C.js";import{a as _e}from"./chunk-ZPCDGH36.js";import{c as Z,g as $,h as ee,i as te,j as ne,k as ie,l as re,n as oe,o as ae,p as le,q as de,r as me,s as pe,u as ue,v as se,x as ce}from"./chunk-ZDAO2INT.js";import{f as H}from"./chunk-SNVCUL6N.js";import"./chunk-USEFVD23.js";import"./chunk-RGNDWIHZ.js";import"./chunk-R545OY35.js";import"./chunk-35QYFSN4.js";import{a as Q,b as X}from"./chunk-ZL2HLOH2.js";import"./chunk-4HPKFMYY.js";import{g as z}from"./chunk-MJ3Y34XA.js";import"./chunk-IV7S22EY.js";import"./chunk-MOYMDOXY.js";import"./chunk-WAAWWZ5Q.js";import{o as Y}from"./chunk-ERNLTT6I.js";import{$b as x,Bb as G,Fa as c,Ga as y,Kb as f,Mb as o,O as D,Sb as O,T as F,Tb as P,Ub as q,Vb as e,Wb as i,Xb as V,ca as B,da as A,ec as v,gc as b,i as k,ob as r,pb as J,pc as _,qc as l,rc as U,sc as W,tc as h,u as L,ua as R,uc as w,vc as C,xc as K}from"./chunk-JNU3RU67.js";function Ve(n,d){if(n&1&&(e(0,"div",71),l(1),i()),n&2){let g=b();r(),W(" ",g.successMessage," ")}}function We(n,d){if(n&1&&(e(0,"div",72),l(1),i()),n&2){let g=b();r(),W(" ",g.errorMessage," ")}}function ke(n,d){if(n&1){let g=x();e(0,"div",15)(1,"div",73)(2,"span",74),l(3,"ID"),i(),e(4,"input",75),C("ngModelChange",function(m){c(g);let t=b();return w(t.journey.id,m)||(t.journey.id=m),y(m)}),i()()()}if(n&2){let g=b();r(4),h("ngModel",g.journey.id)}}function Oe(n,d){n&1&&(e(0,"div"),l(1,"Name is required."),i())}function Pe(n,d){n&1&&(e(0,"div"),l(1,"Name must be at least 5 characters long."),i())}function qe(n,d){n&1&&(e(0,"div"),l(1,"Name must be at most 50 characters long."),i())}function Le(n,d){n&1&&(e(0,"div"),l(1,"Category is required."),i())}function De(n,d){n&1&&(e(0,"div"),l(1,"Category must be at least 3 characters long."),i())}function Fe(n,d){n&1&&(e(0,"div"),l(1,"Category must be at most 16 characters long."),i())}function Be(n,d){n&1&&(e(0,"div"),l(1,"Title is required."),i())}function Ae(n,d){n&1&&(e(0,"div"),l(1,"Title must be at least 10 characters long."),i())}function Re(n,d){n&1&&(e(0,"div"),l(1,"Title must be at most 100 characters long."),i())}function Ge(n,d){if(n&1&&(e(0,"option",34),l(1),i()),n&2){let g=d.$implicit;o("value",g),r(),U(g)}}function Ue(n,d){n&1&&(e(0,"div"),l(1,"Icon is required."),i())}function Ke(n,d){n&1&&(e(0,"div"),l(1,"City is required."),i())}function Ye(n,d){n&1&&(e(0,"div"),l(1,"City must be at least 3 characters long."),i())}function ze(n,d){n&1&&(e(0,"div"),l(1,"City must be at most 50 characters long."),i())}function He(n,d){n&1&&(e(0,"div"),l(1,"Country is required."),i())}function Qe(n,d){n&1&&(e(0,"div"),l(1,"Country must be at least 3 characters long."),i())}function Xe(n,d){n&1&&(e(0,"div"),l(1,"Country must be at most 50 characters long."),i())}function Ze(n,d){n&1&&(e(0,"div"),l(1,"Journey Date is required."),i())}function $e(n,d){n&1&&(e(0,"div"),l(1,"Longitude is required."),i())}function et(n,d){n&1&&(e(0,"div"),l(1,"Longitude must be between -180.0 to 180.0."),i())}function tt(n,d){n&1&&(e(0,"div"),l(1,"Longitude must be between -180.0 to 180.0."),i())}function nt(n,d){n&1&&(e(0,"div"),l(1,"Latitude is required."),i())}function it(n,d){n&1&&(e(0,"div"),l(1,"Latitude must be between -90.0 to 90.0."),i())}function rt(n,d){n&1&&(e(0,"div"),l(1,"Latitude must be between -9 0.0 to 90.0."),i())}function ot(n,d){n&1&&(e(0,"div"),l(1,"Memories is required."),i())}function at(n,d){n&1&&(e(0,"div"),l(1,"Memories must be at least 10 characters long."),i())}function lt(n,d){n&1&&(e(0,"div"),l(1,"Memories must be at most 5000 characters long."),i())}function dt(n,d){if(n&1){let g=x();e(0,"mat-chip-row",76),v("removed",function(){let m=c(g).$implicit,t=b();return y(t.removeTag(m))}),l(1),e(2,"button",77),v("click",function(){let m=c(g).$implicit,t=b();return y(t.removeTag(m))}),e(3,"mat-icon"),l(4,"cancel"),i()()()}if(n&2){let g=d.$implicit,p=b();o("highlighted",!0)("editable",!1)("removable",!p.journey.id),r(),W(" ",g," "),r(),o("disabled",p.journey.id!=="")}}function mt(n,d){if(n&1&&(e(0,"button",78),l(1," Save "),i()),n&2){b();let g=_(3);o("disabled",!g.form.valid)}}function pt(n,d){n&1&&(e(0,"button",79),l(1,"Reset"),i())}function ut(n,d){if(n&1){let g=x();e(0,"button",80),v("click",function(){c(g);let m=b();return y(m.continue())}),l(1,"Continue"),i()}}var Lt=(()=>{let d=class d{constructor(p,m,t){this.router=p,this.journeyService=m,this.autoCompleteService=t,this.NEW_JOURNEY_PAGE_INFO=H,this.separatorKeysCodes=[13,188,32],this.journey=new ve,this.coordinates=[],this.markdownStyle=G("Source"),this.successMessage="",this.errorMessage="",this.searchCategory=u=>u.pipe(B(""),D(200),F(),A(s=>s.length<1?L([]):this.autoCompleteService.getAvailableCategories(s.toLowerCase()))),this.SUPPORTED_ICONS=Me}setSuccess(p){this.successMessage=p,this.errorMessage=""}setError(p){this.successMessage="",this.errorMessage=p}onSubmit(p){p.submitted&&p.valid&&this.journeyService.createJourney(this.journey).subscribe({next:m=>this.onCreateSuccess(m),error:m=>this.setError(m)})}onCreateSuccess(p){this.setSuccess("Journey added successfully."),this.journey=p}continue(){this.journey.id&&this.router.navigate(["/journey",this.journey.id,"edit"]).then()}addTag(p){let m=(p.value||"").toLowerCase().trim();m&&this.journey.tags.push(m),p.chipInput.clear()}removeTag(p){let m=this.journey.tags.indexOf(p);m>=0&&this.journey.tags.splice(m,1)}refreshMapWithCoordinates(){setTimeout(()=>{this.coordinates.length==2&&(this.journey.location={type:"Point",coordinates:this.coordinates})},100)}swapCoordinates(){let p=this.coordinates[0];this.coordinates[0]=this.coordinates[1],this.coordinates[1]=p,this.refreshMapWithCoordinates()}copyCoordinatesFromGoogleMap(){return k(this,null,function*(){let p=yield navigator.clipboard.readText();if(console.debug("Value copied from clipboard:",p),p){let m=p.split(",");this.coordinates[0]=Number(m.length<2?m[0]:m[1]),this.coordinates[1]=Number(m[0]),this.refreshMapWithCoordinates()}})}copyCoordinatesFromClipboard(){return k(this,null,function*(){let p=yield navigator.clipboard.readText();if(console.debug("Value copied from clipboard:",p),p){let m=p.split(",");this.coordinates[0]=Number(m[0]),this.coordinates[1]=Number(m.length>=2?m[1]:m[0]),this.refreshMapWithCoordinates()}})}};d.\u0275fac=function(m){return new(m||d)(J(z),J(fe),J(Ie))},d.\u0275cmp=R({type:d,selectors:[["app-new-journey"]],standalone:!0,features:[K],decls:140,vars:77,consts:[["journeyForm","ngForm"],["name","ngModel"],["category","ngModel"],["title","ngModel"],["iconType","ngModel"],["city","ngModel"],["country","ngModel"],["journeyDate","ngModel","d","ngbDatepicker"],["longitude","ngModel"],["latitude","ngModel"],["description","ngModel"],["chipGrid",""],[3,"pageInfo"],[1,"container"],[3,"ngSubmit"],[1,"row"],[1,"col-md-8","col-12"],[1,"row","mb-3"],[1,"col-12"],["class","bg-success text-light input-group p-2 border border-2",4,"ngIf"],["class","bg-danger text-light input-group p-2 border border-2",4,"ngIf"],["class","row",4,"ngIf"],[1,"mb-3","col-12","col-md-8"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","","maxlength","50","minlength","5","placeholder","Name your Journey",1,"form-control",3,"ngModelChange","ngModel","readOnly"],[1,"form-text","text-danger",3,"hidden"],[4,"ngIf"],[1,"mb-3","col-12","col-md-4"],["for","category",1,"form-label"],["id","category","type","text","required","","minlength","3","maxlength","50","name","category",1,"form-control",3,"ngModelChange","ngModel","ngbTypeahead","disabled"],["for","title",1,"form-label"],["type","text","id","title","name","title","required","","maxlength","100","minlength","10","placeholder","Shortly describe the Journey",1,"form-control",3,"ngModelChange","ngModel","readOnly"],["for","iconType",1,"form-label"],["id","iconType","aria-label","Icon","required","","name","iconType",1,"form-select","form-select-sm",3,"ngModelChange","ngModel","disabled"],[3,"value"],[1,"mb-3","col-md-4"],["for","city",1,"form-label"],["type","text","id","city","name","city","required","","minlength","3","maxlength","50",1,"form-control",3,"ngModelChange","ngModel","readOnly"],["for","country",1,"form-label"],["type","text","id","country","name","country","required","","minlength","3","maxlength","50",1,"form-control",3,"ngModelChange","ngModel","readOnly"],["for","journeyDate",1,"form-label"],[1,"input-group"],["type","text","id","journeyDate","name","journeyDate","required","","placeholder","yyyy-mm-dd","ngbDatepicker","",1,"form-control",3,"ngModelChange","ngModel","readOnly"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click","disabled"],[1,"col-12","col-md-4"],[1,"row","justify-content-evenly"],[1,"col-12",2,"position","relative","min-height","25vh"],[1,"h-50",3,"geoJsonData","iconType"],[1,"input-group","mb-3"],["type","number","placeholder","Longitude","aria-label","Longitude","id","longitude","name","longitude","required","","min","-180.0","max","180.0",1,"form-control",3,"ngModelChange","blur","ngModel","readOnly"],["data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-primary","input-group-text","dropdown-toggle",3,"disabled"],[1,"dropdown-menu"],["type","button",1,"dropdown-item",3,"click"],["type","number","placeholder","Latitude","aria-label","Latitude","id","latitude","name","latitude","required","","min","-90.0","max","90.0",1,"form-control",3,"ngModelChange","blur","ngModel","readOnly"],[1,"form-text","text-danger"],[3,"hidden"],[1,"mb-3","col"],["for","description",1,"form-label"],["name","markdownStyle","aria-label","Markdown Style","hideSingleSelectionIndicator","true",1,"ignore-highlight","ms-2","small",3,"ngModelChange","ngModel"],["value","Source"],["value","Preview"],["rows","15","id","description","name","description","required","","minlength","10","maxlength","5000","placeholder","Detailed information about the Journey",1,"form-control",3,"ngModelChange","hidden","ngModel","readOnly"],[2,"height","25rem",3,"hidden"],[3,"title","markdownText"],["aria-label","Tags"],["color","primary",3,"highlighted","editable","removable"],["placeholder","Favorite Tags",1,"form-control",3,"matChipInputTokenEnd","readOnly","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[1,"col-12","d-flex","gap-2","justify-content-center"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["type","reset","class","btn btn-outline-primary",4,"ngIf"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[1,"bg-success","text-light","input-group","p-2","border","border-2"],[1,"bg-danger","text-light","input-group","p-2","border","border-2"],[1,"input-group","mb-3","col-12"],["id","idLabel",1,"input-group-text"],["type","text","aria-describedby","idLabel","id","id","name","id","readonly","readonly",1,"form-control",3,"ngModelChange","ngModel"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","reset",1,"btn","btn-outline-primary"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(m,t){if(m&1){let u=x();V(0,"app-page-header",12),e(1,"section",13)(2,"form",14,0),v("ngSubmit",function(){c(u);let a=_(3);return y(t.onSubmit(a))}),e(4,"div",15)(5,"div",16)(6,"div",17)(7,"div",18),f(8,Ve,2,1,"div",19)(9,We,2,1,"div",20),i()(),f(10,ke,5,1,"div",21),e(11,"div",15)(12,"div",22)(13,"label",23),l(14,"Name"),i(),e(15,"input",24,1),C("ngModelChange",function(a){return c(u),w(t.journey.name,a)||(t.journey.name=a),y(a)}),i(),e(17,"div",25),f(18,Oe,2,0,"div",26)(19,Pe,2,0,"div",26)(20,qe,2,0,"div",26),i()(),e(21,"div",27)(22,"label",28),l(23,"Category"),i(),e(24,"input",29,2),C("ngModelChange",function(a){return c(u),w(t.journey.category,a)||(t.journey.category=a),y(a)}),i(),e(26,"div",25),f(27,Le,2,0,"div",26)(28,De,2,0,"div",26)(29,Fe,2,0,"div",26),i()()(),e(30,"div",15)(31,"div",22)(32,"label",30),l(33,"Title"),i(),e(34,"input",31,3),C("ngModelChange",function(a){return c(u),w(t.journey.title,a)||(t.journey.title=a),y(a)}),i(),e(36,"div",25),f(37,Be,2,0,"div",26)(38,Ae,2,0,"div",26)(39,Re,2,0,"div",26),i()(),e(40,"div",27)(41,"label",32),l(42,"Icon"),i(),e(43,"select",33,4),v("ngModelChange",function(){return c(u),y(t.refreshMapWithCoordinates())}),C("ngModelChange",function(a){return c(u),w(t.journey.icon,a)||(t.journey.icon=a),y(a)}),P(45,Ge,2,2,"option",34,O),i(),e(47,"div",25),f(48,Ue,2,0,"div",26),i()()(),e(49,"div",15)(50,"div",35)(51,"label",36),l(52,"City"),i(),e(53,"input",37,5),C("ngModelChange",function(a){return c(u),w(t.journey.city,a)||(t.journey.city=a),y(a)}),i(),e(55,"div",25),f(56,Ke,2,0,"div",26)(57,Ye,2,0,"div",26)(58,ze,2,0,"div",26),i()(),e(59,"div",35)(60,"label",38),l(61,"Country"),i(),e(62,"input",39,6),C("ngModelChange",function(a){return c(u),w(t.journey.country,a)||(t.journey.country=a),y(a)}),i(),e(64,"div",25),f(65,He,2,0,"div",26)(66,Qe,2,0,"div",26)(67,Xe,2,0,"div",26),i()(),e(68,"div",35)(69,"label",40),l(70,"Journey Date"),i(),e(71,"div",41)(72,"input",42,7),C("ngModelChange",function(a){return c(u),w(t.journey.journeyDate,a)||(t.journey.journeyDate=a),y(a)}),i(),e(75,"button",43),v("click",function(){c(u);let a=_(74);return y(a.toggle())}),i(),e(76,"div",25),f(77,Ze,2,0,"div",26),i()()()()(),e(78,"div",44)(79,"div",45)(80,"div",46),V(81,"app-world-map",47),i(),e(82,"div",18)(83,"div",48)(84,"input",49,8),C("ngModelChange",function(a){return c(u),w(t.coordinates[0],a)||(t.coordinates[0]=a),y(a)}),v("blur",function(){return c(u),y(t.refreshMapWithCoordinates())}),i(),e(86,"button",50),l(87," Quick Actions "),i(),e(88,"ul",51)(89,"li")(90,"button",52),v("click",function(){return c(u),y(t.copyCoordinatesFromGoogleMap())}),l(91,"Paste coordinates copied from Google Map "),i()(),e(92,"li")(93,"button",52),v("click",function(){return c(u),y(t.copyCoordinatesFromClipboard())}),l(94,"Paste from clipboard "),i()(),e(95,"li")(96,"button",52),v("click",function(){return c(u),y(t.swapCoordinates())}),l(97,"Swap Coordinates"),i()()(),e(98,"input",53,9),C("ngModelChange",function(a){return c(u),w(t.coordinates[1],a)||(t.coordinates[1]=a),y(a)}),v("blur",function(){return c(u),y(t.refreshMapWithCoordinates())}),i()(),e(100,"div",54)(101,"div",55),f(102,$e,2,0,"div",26)(103,et,2,0,"div",26)(104,tt,2,0,"div",26),i(),e(105,"div",25),f(106,nt,2,0,"div",26)(107,it,2,0,"div",26)(108,rt,2,0,"div",26),i()()()()()(),e(109,"div")(110,"div")(111,"div",15)(112,"div",56)(113,"label",57),l(114,"Memories"),i(),e(115,"mat-button-toggle-group",58),C("ngModelChange",function(a){return c(u),w(t.markdownStyle,a)||(t.markdownStyle=a),y(a)}),e(116,"mat-button-toggle",59),l(117,"Edit"),i(),e(118,"mat-button-toggle",60),l(119,"Preview"),i()(),e(120,"textarea",61,10),C("ngModelChange",function(a){return c(u),w(t.journey.description,a)||(t.journey.description=a),y(a)}),i(),e(122,"div",62),V(123,"app-display-markdown-component",63),i(),e(124,"div",25),f(125,ot,2,0,"div",26)(126,at,2,0,"div",26)(127,lt,2,0,"div",26),i()()(),e(128,"div",17)(129,"div",18)(130,"mat-chip-grid",64,11),P(132,dt,5,5,"mat-chip-row",65,O),e(134,"input",66),v("matChipInputTokenEnd",function(a){return c(u),y(t.addTag(a))}),i()()()()()(),e(135,"div",15)(136,"div",67),f(137,mt,2,1,"button",68)(138,pt,2,0,"button",69)(139,ut,2,0,"button",70),i()()()()}if(m&2){let u=_(16),s=_(25),a=_(35),j=_(44),S=_(54),M=_(63),I=_(73),T=_(85),E=_(99),N=_(121),Je=_(131);o("pageInfo",t.NEW_JOURNEY_PAGE_INFO),r(8),o("ngIf",t.successMessage),r(),o("ngIf",t.errorMessage),r(),o("ngIf",t.journey.id),r(5),h("ngModel",t.journey.name),o("readOnly",t.journey.id),r(2),o("hidden",u.valid||u.pristine),r(),o("ngIf",u.errors==null?null:u.errors.required),r(),o("ngIf",u.errors==null?null:u.errors.minlength),r(),o("ngIf",u.errors==null?null:u.errors.maxlength),r(4),h("ngModel",t.journey.category),o("ngbTypeahead",t.searchCategory)("disabled",t.journey.id!=""),r(2),o("hidden",s.valid||s.pristine),r(),o("ngIf",s.errors==null?null:s.errors.required),r(),o("ngIf",s.errors==null?null:s.errors.minlength),r(),o("ngIf",s.errors==null?null:s.errors.maxlength),r(5),h("ngModel",t.journey.title),o("readOnly",t.journey.id),r(2),o("hidden",a.valid||a.pristine),r(),o("ngIf",a.errors==null?null:a.errors.required),r(),o("ngIf",a.errors==null?null:a.errors.minlength),r(),o("ngIf",a.errors==null?null:a.errors.maxlength),r(4),h("ngModel",t.journey.icon),o("disabled",t.journey.id!=""),r(2),q(t.SUPPORTED_ICONS),r(2),o("hidden",j.valid||j.pristine),r(),o("ngIf",j.errors==null?null:j.errors.required),r(5),h("ngModel",t.journey.city),o("readOnly",t.journey.id),r(2),o("hidden",S.valid||S.pristine),r(),o("ngIf",S.errors==null?null:S.errors.required),r(),o("ngIf",S.errors==null?null:S.errors.minlength),r(),o("ngIf",S.errors==null?null:S.errors.maxlength),r(4),h("ngModel",t.journey.country),o("readOnly",t.journey.id),r(2),o("hidden",M.valid||M.pristine),r(),o("ngIf",M.errors==null?null:M.errors.required),r(),o("ngIf",M.errors==null?null:M.errors.minlength),r(),o("ngIf",M.errors==null?null:M.errors.maxlength),r(5),h("ngModel",t.journey.journeyDate),o("readOnly",t.journey.id),r(3),o("disabled",t.journey.id),r(),o("hidden",I.valid||I.pristine),r(),o("ngIf",I.errors==null?null:I.errors.required),r(4),o("geoJsonData",t.journey.location)("iconType",t.journey.icon),r(3),h("ngModel",t.coordinates[0]),o("readOnly",t.journey.id),r(2),o("disabled",t.journey.id),r(12),h("ngModel",t.coordinates[1]),o("readOnly",t.journey.id),r(3),o("hidden",T.valid||T.pristine),r(),o("ngIf",T.errors==null?null:T.errors.required),r(),o("ngIf",T.errors==null?null:T.errors.min),r(),o("ngIf",T.errors==null?null:T.errors.max),r(),o("hidden",E.valid||E.pristine),r(),o("ngIf",E.errors==null?null:E.errors.required),r(),o("ngIf",E.errors==null?null:E.errors.min),r(),o("ngIf",E.errors==null?null:E.errors.max),r(7),h("ngModel",t.markdownStyle),r(5),o("hidden",t.markdownStyle()=="Preview"),h("ngModel",t.journey.description),o("readOnly",t.journey.id),r(2),o("hidden",t.markdownStyle()!="Preview"),r(),o("title",t.journey.title)("markdownText",t.journey.description),r(),o("hidden",N.valid||N.pristine),r(),o("ngIf",N.errors==null?null:N.errors.required),r(),o("ngIf",N.errors==null?null:N.errors.minlength),r(),o("ngIf",N.errors==null?null:N.errors.maxlength),r(5),q(t.journey.tags),r(2),o("readOnly",t.journey.id)("matChipInputFor",Je)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("matChipInputAddOnBlur",!0),r(3),o("ngIf",!t.journey.id),r(),o("ngIf",!t.journey.id),r(),o("ngIf",t.journey.id)}},dependencies:[ce,ie,ae,le,Z,re,oe,$,ee,pe,ue,se,me,de,ne,te,ge,X,Q,Se,Ce,be,he,we,Y,ye,_e,Te,Ee,je,Ne,xe],styles:[".map-marker-container[_ngcontent-%COMP%]{min-height:150px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]});let n=d;return n})();export{Lt as NewJourneyComponent};
