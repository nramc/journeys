import{a as we}from"./chunk-OEK3JCZ4.js";import{a as P}from"./chunk-5ITFNL5I.js";import"./chunk-3FKMM4NP.js";import"./chunk-ZTJAIUJZ.js";import{a as fe,b as Ce,c as _e,d as be,e as ve}from"./chunk-LVBZK62D.js";import"./chunk-MPAV3FZY.js";import"./chunk-QTVR55XV.js";import{a as ye}from"./chunk-ZAZWDV2Q.js";import{c as de,d as pe,e as ce,f as me,g as ge}from"./chunk-PS6LTETE.js";import{a as ue}from"./chunk-J2HB7WXM.js";import"./chunk-ZPCDGH36.js";import"./chunk-VSQTGOJW.js";import{a as he}from"./chunk-ID2EJABW.js";import{c as oe,g as ae,j as le,x as se}from"./chunk-ZDAO2INT.js";import"./chunk-7XJTF6IN.js";import"./chunk-USEFVD23.js";import"./chunk-RGNDWIHZ.js";import{b as ne}from"./chunk-R545OY35.js";import"./chunk-35QYFSN4.js";import{a as re}from"./chunk-ZL2HLOH2.js";import"./chunk-4HPKFMYY.js";import{g as F}from"./chunk-MJ3Y34XA.js";import"./chunk-IV7S22EY.js";import"./chunk-MOYMDOXY.js";import"./chunk-WAAWWZ5Q.js";import{E as ie,u as Z,v as ee,w as te}from"./chunk-ERNLTT6I.js";import{$b as _,Bb as W,Cb as H,Cc as v,Dc as j,Ec as X,Fa as c,Ga as m,H as R,Kb as k,M as z,Mb as y,Pa as Y,Rb as Q,Sb as S,Tb as f,Ub as C,Vb as t,Wb as i,Xb as x,ca as A,da as L,ec as g,ga as O,gc as b,nc as q,ob as l,oc as K,p as B,pb as G,pc as $,qc as s,rc as h,sa as J,sc as E,tc as I,u as N,ua as D,uc as M,vc as T,xc as V,yc as U}from"./chunk-JNU3RU67.js";function Ee(o,a){if(o&1&&(t(0,"span",6),s(1),i()),o&2){let d=a.$implicit;l(),h(d)}}function Ie(o,a){if(o&1){let d=_();t(0,"button",12),g("click",function(n){c(d);let e=b();return m(e.editDetails(n))}),s(1,"Edit "),i()}}var Se=(()=>{let a=class a{constructor(){this.router=J(F),this.journey=Y.required()}viewDetails(){this.router.navigate(["/journey",this.journey().id,"view"]).then(console.log)}editDetails(r){return r.stopPropagation(),this.router.navigate(["/journey",this.journey().id,"edit"]).then(console.log),!1}viewInTimeline(r){return r.stopPropagation(),this.router.navigate(["/timeline"],{queryParams:{id:this.journey().id}}).then(console.log),!1}};a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=D({type:a,selectors:[["app-journey-card-view"]],inputs:{journey:[1,"journey"]},standalone:!0,features:[V],decls:30,vars:11,consts:[[1,"m-0"],[1,"card","bg-dark","text-bg-dark","text-white",3,"click"],["fill","","priority","",1,"card-img",3,"ngSrc","alt"],[1,"card-img-overlay","d-flex","flex-column","align-self-stretch","card-text-wrapper"],[1,"card-title"],[1,"card-text"],[1,"badge","bg-dark","bg-opacity-25","border-dark","rounded-pill","border","me-1","fw-normal"],[1,"d-flex","footer-wrapper","mt-auto","flex-nowrap","flex-column","flex-md-row","justify-content-between"],[1,"d-inline-flex","gap-1"],[1,"small","border","border-light","border-1","rounded-2","ps-1","pe-1","border-opacity-50"],[1,"d-inline-flex","gap-1","justify-content-end"],["type","button","class","btn btn-sm btn-success ms-1 small",3,"click",4,"hasWriteAccess"],["type","button",1,"btn","btn-sm","btn-success","ms-1","small",3,"click"]],template:function(n,e){n&1&&(t(0,"div",0)(1,"a",1),g("click",function(){return e.viewDetails()}),x(2,"img",2),t(3,"div",3)(4,"h5",4),s(5),i(),t(6,"p",5),s(7),i(),t(8,"p",5),f(9,Ee,2,1,"span",6,S),i(),t(11,"div",7)(12,"div",8)(13,"p",9)(14,"small"),s(15),v(16,"date"),i()(),t(17,"p",9)(18,"small"),s(19),i()(),t(20,"p",9)(21,"small"),s(22),i()(),t(23,"p",9)(24,"small"),s(25),i()()(),t(26,"div",10),k(27,Ie,2,0,"button",11),t(28,"button",12),g("click",function(w){return e.viewInTimeline(w)}),s(29,"Timeline "),i()()()()()()),n&2&&(l(2),y("ngSrc",e.journey().thumbnail)("alt",e.journey().thumbnail),l(3),h(e.journey().name),l(2),h(e.journey().title),l(2),C(e.journey().tags),l(6),h(X(16,8,e.journey().journeyDate,"dd.MM.YYYY")),l(4),h(e.journey().city),l(3),h(e.journey().country),l(3),h(e.journey().category))},dependencies:[te,ie,ue],styles:[".card[_ngcontent-%COMP%]{width:30rem;height:15rem;margin:0 .5rem .5rem 0!important;cursor:pointer}.card-img[_ngcontent-%COMP%]{opacity:75%;width:100%;height:100%}.card-text-wrapper[_ngcontent-%COMP%]{background:#0003}@media (max-width: 575.98px){.card[_ngcontent-%COMP%]{width:100%;height:15rem;margin:0 0 .5rem!important}}"]});let o=a;return o})();var Me=(o,a)=>a.id,Te=()=>[1,5,10,20,25];function je(o,a){if(o&1){let d=_();t(0,"mat-chip-row",36),g("removed",function(){let n=c(d).$implicit,e=b();return m(e.removeTag(n))}),s(1),t(2,"button",37),g("click",function(){let n=c(d).$implicit,e=b();return m(e.removeTag(n))}),t(3,"mat-icon"),s(4,"cancel"),i()()()}if(o&2){let d=a.$implicit;y("highlighted",!0)("editable",!1)("removable",!0),l(),E(" ",d," ")}}function De(o,a){if(o&1){let d=_();t(0,"button",38),g("click",function(){let n=c(d).$implicit,e=b();return m(e.sortingFieldChangedEvent.next(n))}),s(1),v(2,"titlecase"),i()}if(o&2){let d=a.$implicit;l(),E("",j(2,1,d)," ")}}function ke(o,a){if(o&1){let d=_();t(0,"button",38),g("click",function(){let n=c(d).$implicit,e=b();return m(e.sortingDirectionChangedEvent.next(n))}),s(1),v(2,"uppercase"),i()}if(o&2){let d=a.$implicit;l(),E("",j(2,1,d)," ")}}function Ve(o,a){o&1&&(t(0,"div",33),x(1,"mat-spinner"),i())}function Fe(o,a){if(o&1&&x(0,"app-journey-card-view",35),o&2){let d=a.$implicit;y("journey",d)}}var yt=(()=>{let a=class a{constructor(r,n){this.journeyService=r,this.sortableFields=["journeyDate","name","title","city","country","category","location"],this.sortingFieldChangedEvent=new B("journeyDate"),this.sortableDirections=["asc","desc"],this.sortingDirectionChangedEvent=new B("desc"),this.isLoadingResults=!1,this.defaultPageSize=10,this.separatorKeysCodes=[13,188,32],this.searchCriteria=new we,this.paginator=H.required(P),this.tags=W([]),this.tagsObservable=ne(this.tags),this.searchResult=W({totalElements:0,data:[]}),n.getCurrentNavigation()?.extras.state&&(this.searchCriteria=n.getCurrentNavigation()?.extras.state)}ngAfterViewInit(){R(this.paginator().page,this.sortingFieldChangedEvent,this.sortingDirectionChangedEvent,this.tagsObservable).pipe(A(),O(()=>this.isLoadingResults=!0),L(()=>this.journeyService.findJourneyByQuery(this.searchCriteria,this.sortingFieldChangedEvent.getValue(),this.sortingDirectionChangedEvent.getValue(),this.paginator().pageIndex,this.paginator().pageSize,!0,this.tags()).pipe(z(()=>N(null)))),O(r=>this.isLoadingResults=!1)).subscribe(r=>this.onSuccess(r))}onSuccess(r){this.searchResult.set({totalElements:r?.totalElements??0,data:r?.content??[]})}ngOnInit(){this.journeyService.findJourneyByQuery(this.searchCriteria,"journeyDate","desc",0,this.defaultPageSize,!0).subscribe(r=>this.onSuccess(r))}addTag(r){let n=(r.value||"").trim();n&&this.tags.update(e=>[...e,n]),r.chipInput.clear()}removeTag(r){this.tags.update(n=>n.filter(e=>e!==r))}};a.\u0275fac=function(n){return new(n||a)(G(ye),G(F))},a.\u0275cmp=D({type:a,selectors:[["app-gallery"]],viewQuery:function(n,e){n&1&&q(e.paginator,P,5),n&2&&K()},standalone:!0,features:[V],decls:59,vars:19,consts:[["chipGrid",""],[1,"container","advanced-search"],[1,"d-flex","justify-content-end"],["data-bs-toggle","collapse","href","#searchFields","aria-expanded","false","aria-controls","searchFields",1,"text-decoration-none"],["id","searchFields",1,"row","g-2","mb-3","collapse"],[1,"col-sm"],[1,"form-floating","border","border-primary"],["type","text","id","categoryInput","placeholder","Category",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","categoryInput"],["type","text","id","cityInput","placeholder","City",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","cityInput"],["type","text","id","countryInput","placeholder","Country",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","countryInput"],["type","text","id","yearInput","placeholder","Year",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","yearInput"],[1,"container"],[1,"row"],["aria-label","Tags"],[1,"col-12"],[1,"form-floating"],["placeholder","Filter by Tags","autocomplete","off","id","tagsInput",1,"form-control","border","border-2","border-primary","rounded-4",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],["for","tagsInput"],["color","primary",3,"highlighted","editable","removable"],[1,"col-12","col-md-8","mb-md-3","me-0","pe-0"],["aria-label","Select page","color","primary",1,"paginator","me-0",3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"col-12","col-md-4","sorting","mb-3","me-0"],["ngbDropdown","",1,"d-inline-block","me-1"],["type","button","id","dropdownSortingField","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingField"],["ngbDropdownItem",""],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownSortingDirection","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingDirection"],[1,"loading-shade"],[1,"card-group","justify-content-center","align-items-center"],[3,"journey"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click"],["ngbDropdownItem","",3,"click"]],template:function(n,e){if(n&1){let u=_();t(0,"section",1)(1,"div",2)(2,"a",3),s(3," Advanced Search "),i()(),t(4,"div",4)(5,"div",5)(6,"div",6)(7,"input",7),T("ngModelChange",function(p){return c(u),M(e.searchCriteria.category,p)||(e.searchCriteria.category=p),m(p)}),i(),t(8,"label",8),s(9,"Category"),i()()(),t(10,"div",5)(11,"div",6)(12,"input",9),T("ngModelChange",function(p){return c(u),M(e.searchCriteria.city,p)||(e.searchCriteria.city=p),m(p)}),i(),t(13,"label",10),s(14,"City"),i()()(),t(15,"div",5)(16,"div",6)(17,"input",11),T("ngModelChange",function(p){return c(u),M(e.searchCriteria.country,p)||(e.searchCriteria.country=p),m(p)}),i(),t(18,"label",12),s(19,"Country"),i()()(),t(20,"div",5)(21,"div",6)(22,"input",13),T("ngModelChange",function(p){return c(u),M(e.searchCriteria.year,p)||(e.searchCriteria.year=p),m(p)}),i(),t(23,"label",14),s(24,"Year"),i()()()()(),t(25,"section",15)(26,"div",16)(27,"mat-chip-grid",17,0)(29,"div",18)(30,"div",19)(31,"input",20),g("matChipInputTokenEnd",function(p){return c(u),m(e.addTag(p))}),i(),t(32,"label",21),s(33,"Filter by Tags"),i()()(),t(34,"div",18),f(35,je,5,4,"mat-chip-row",22,S),i()()(),t(37,"div",16)(38,"div",23),x(39,"mat-paginator",24),i(),t(40,"div",25)(41,"div",26)(42,"button",27),s(43),v(44,"titlecase"),i(),t(45,"div",28),f(46,De,3,3,"button",29,S),i()(),t(48,"div",30)(49,"button",31),s(50),v(51,"uppercase"),i(),t(52,"div",32),f(53,ke,3,3,"button",29,S),i()()()(),k(55,Ve,2,0,"div",33),t(56,"div",34),f(57,Fe,1,1,"app-journey-card-view",35,Me),i()()}if(n&2){let u=$(28);l(7),I("ngModel",e.searchCriteria.category),l(5),I("ngModel",e.searchCriteria.city),l(5),I("ngModel",e.searchCriteria.country),l(5),I("ngModel",e.searchCriteria.year),l(9),y("matChipInputFor",u)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),l(4),C(e.tags()),l(4),y("length",e.searchResult().totalElements)("pageSize",e.defaultPageSize)("pageSizeOptions",U(18,Te))("showFirstLastButtons",!0),l(4),E(" ",j(44,14,e.sortingFieldChangedEvent.getValue())," "),l(3),C(e.sortableFields),l(4),E(" ",j(51,16,e.sortingDirectionChangedEvent.getValue())," "),l(3),C(e.sortableDirections),l(2),Q(e.isLoadingResults?55:-1),l(2),C(e.searchResult().data)}},dependencies:[P,ge,me,ce,pe,de,Z,ee,ve,_e,be,fe,Ce,re,se,oe,ae,le,he,Se],styles:[".sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#4246d7a6 1%,#f8f9fa1a 80%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.paginator[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.mat-mdc-select[_ngcontent-%COMP%]{color:#f5f5f5!important}@media (max-width: 575.98px){.sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%)}}"]});let o=a;return o})();export{yt as GalleryComponent};
