import"./chunk-FIUHV4YT.js";import{a as H}from"./chunk-U7WNJCKD.js";import{a as j}from"./chunk-4D6GSTPC.js";import{a as h}from"./chunk-VSQTGOJW.js";import{a as Y}from"./chunk-3WQZNTA2.js";import"./chunk-GRONNPQC.js";import{o as F}from"./chunk-SNVCUL6N.js";import{a as q}from"./chunk-6AKANFTF.js";import{c as I}from"./chunk-47L2HURF.js";import"./chunk-A2TT5NWI.js";import"./chunk-NIVYW57E.js";import"./chunk-CARY4E7O.js";import{c as R,h as T,i as V,j as O,k as W,l as G,t as L,y as U}from"./chunk-YK4BR766.js";import"./chunk-VVLSS7KD.js";import{b as w}from"./chunk-XUDB5GUU.js";import"./chunk-MLE53YZQ.js";import"./chunk-67SFSZAO.js";import{g as N}from"./chunk-WB3DF4XI.js";import"./chunk-XL47KMEJ.js";import{j as M,k}from"./chunk-BPR4VFT2.js";import{$c as A,Bc as D,Ea as u,Fa as y,Ib as _,Nb as a,Yb as e,Zb as r,_b as m,cc as b,hc as v,jc as s,pb as c,ra as f,ta as x,tc as g,uc as l,wc as P,xc as S,yc as C,zc as E}from"./chunk-HOCLHVTI.js";function B(o,d){if(o&1&&(e(0,"div",10),m(1,"input",23),e(2,"label",24),l(3),r()()),o&2){let t=d.$implicit;c(3),P(" ",t," ")}}function z(o,d){if(o&1&&(e(0,"button",25),l(1,"Save"),r()),o&2){s();let t=g(1);a("disabled",!t.valid)}}function J(o,d){if(o&1){let t=b();e(0,"button",26),v("click",function(){u(t);let n=s(2);return y(n.cancel())}),l(1,"Cancel"),r()}}function K(o,d){if(o&1){let t=b();e(0,"form",4,0),v("submit",function(){u(t);let n=g(1),p=s();return y(p.save(n))}),e(2,"div",5)(3,"label",6),l(4,"Username"),r(),e(5,"div",7),m(6,"input",8),r()(),e(7,"div",5)(8,"div",9)(9,"div",10),m(10,"input",11),e(11,"label",12),l(12," Active "),r()()()(),e(13,"fieldset",5)(14,"legend",13),l(15,"Role(s)"),r(),e(16,"div",14),_(17,B,4,1,"div",15),r()(),e(18,"div",5)(19,"label",16),l(20,"Created"),r(),e(21,"div",7),m(22,"input",17),r()(),e(23,"div",5)(24,"label",18),l(25,"Name"),r(),e(26,"div",7)(27,"input",19),E("ngModelChange",function(n){u(t);let p=s();return C(p.myProfileData().name,n)||(p.myProfileData().name=n),y(n)}),r()()(),e(28,"div",5)(29,"div",20),_(30,z,2,1,"button",21)(31,J,2,0,"button",22),r()()()}if(o&2){let t,i=s();c(6),a("value",i.myProfileData().username),c(4),a("checked",i.myProfileData().enabled),c(7),a("ngForOf",(t=i.myProfileData())==null?null:t.roles),c(5),a("value",i.myProfileData().createdDate),c(5),S("ngModel",i.myProfileData().name),a("disabled",!i.hasAccess())}}var ue=(()=>{class o{constructor(){this.MY_PROFILE_PAGE_INFO=F,this.Role=h,this.notificationService=f(Y),this.myAccountService=f(q),this.router=f(N),this.authService=f(w),this.myProfileData=I(this.myAccountService.getProfileData()),this.hasAccess=A(()=>this.authService.hasAnyRole([h.AUTHENTICATED_USER]))}save(t){t.valid&&t.dirty&&this.myAccountService.saveProfileData(this.myProfileData()).subscribe({next:i=>this.onSuccessCallback(),error:i=>this.onErrorCallback()})}onSuccessCallback(){this.notificationService.showSuccess("Profile data saved successfully")}onErrorCallback(){this.notificationService.showError("Update failed. Please check data.")}cancel(){this.router.navigate(["/"]).then(console.log)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=x({type:o,selectors:[["app-my-profile-page"]],standalone:!0,features:[D],decls:3,vars:2,consts:[["profileForm","ngForm"],[3,"pageInfo"],[1,"container","d-flex","justify-content-start"],["class","col-12 col-lg-8",3,"submit",4,"ngIf"],[1,"col-12","col-lg-8",3,"submit"],[1,"row","mb-3"],["for","username",1,"col-sm-2","col-form-label","text-primary"],[1,"col-sm-10"],["type","text","id","username","disabled","",1,"form-control",3,"value"],[1,"col-sm-10","offset-sm-2"],[1,"form-check"],["type","checkbox","id","isAccountActive","name","isAccountActive","disabled","",1,"form-check-input",3,"checked"],["for","isAccountActive",1,"form-check-label","text-primary"],[1,"col-form-label","col-sm-2","pt-0","text-primary"],[1,"col-sm-10","text-primary"],["class","form-check",4,"ngFor","ngForOf"],["for","createdDate",1,"col-sm-2","col-form-label","text-primary"],["type","datetime-local","id","createdDate","name","createdDate","disabled","","readonly","",1,"form-control",3,"value"],["for","name",1,"col-sm-2","col-form-label","text-primary"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"col","text-center","d-flex","gap-3","justify-content-center"],["type","submit","class","btn btn-primary",3,"disabled",4,"hasWriteAccess"],["type","button","class","btn btn-primary",3,"click",4,"hasWriteAccess"],["type","checkbox","name","roleName","id","roleName","checked","","disabled","",1,"form-check-input"],["for","roleName",1,"form-check-label"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(i,n){i&1&&(m(0,"app-page-header",1),e(1,"section",2),_(2,K,32,6,"form",3),r()),i&2&&(a("pageInfo",n.MY_PROFILE_PAGE_INFO),c(2),a("ngIf",n.myProfileData()))},dependencies:[j,k,U,G,R,T,V,L,W,O,M,H],encapsulation:2,changeDetection:0})}}return o})();export{ue as MyProfilePageComponent};
