import"./chunk-MS4AQ6UA.js";import{a as ve,b as xe}from"./chunk-C6WWAP27.js";import{a as Nt,b as Lt,c as Rt,d as Ot,e as te,g as ie,h as Wt}from"./chunk-GK6KVCAN.js";import"./chunk-WSXTP4KN.js";import{a as Bt,b as qt}from"./chunk-33L2HMNA.js";import"./chunk-DZ6LPC44.js";import{a as Ut}from"./chunk-XKT4UBFT.js";import{a as St,b as Mt,c as Dt,d as kt}from"./chunk-EBX3TUOV.js";import"./chunk-NRACFYSX.js";import{c as ye}from"./chunk-G5AMOGBG.js";import"./chunk-K7FTD4M4.js";import"./chunk-TS7L5442.js";import{a as At}from"./chunk-2KNGZ3UN.js";import"./chunk-F5X5MWHG.js";import{a as he}from"./chunk-3MHL7ZCB.js";import"./chunk-6KEWLPAX.js";import"./chunk-LUTGFMU4.js";import{a as ht}from"./chunk-YWWL5CML.js";import{b as Pt}from"./chunk-J527RC4H.js";import{a as Jt,b as Ge,c as Vt,d as Fe,e as Pe,f as ae,g as Ne,h as jt,i as O}from"./chunk-SCLP46IR.js";import{a as Ft}from"./chunk-J5G26YES.js";import{a as Y}from"./chunk-E3G2QV27.js";import"./chunk-7RWCIHFI.js";import"./chunk-54PG2AAV.js";import"./chunk-4VR3POOM.js";import{b as Q,c as q}from"./chunk-IZMCTKCZ.js";import{a as A,b as ee,c as be,f as W,g as B}from"./chunk-5E65QLTG.js";import"./chunk-UOIYGVYY.js";import"./chunk-EIKDUGJK.js";import"./chunk-XML6PV75.js";import"./chunk-EQLHPT2L.js";import"./chunk-BCB5VHUA.js";import{a as bt,b as K,g as z,h as P,i as N,j as H,k as L,l as yt,n as vt,o as xt,p as X,r as Ct,s as It,u as J,v as Et}from"./chunk-6U4T77UP.js";import{a as $}from"./chunk-BMVWFPOQ.js";import{b as _t}from"./chunk-KGY5YTZW.js";import{k as Gt}from"./chunk-7PP3UOCC.js";import{a as T,b as G}from"./chunk-BDA2L7YQ.js";import"./chunk-3QXJH2R2.js";import{c as gt,d as ft,e as wt,g as R,h as F,j as Tt,l as V}from"./chunk-CDDTRRPJ.js";import{H as je,j as ut,l as pt,w as Ve}from"./chunk-SWBG6ESO.js";import{a as mt,c as fe,d as ct}from"./chunk-UP7FM5GD.js";import"./chunk-TO3RVP4M.js";import{h as ge,i as M,y as st}from"./chunk-6PDFZEHV.js";import{$b as me,$c as re,Ac as l,Bc as _e,Ca as qe,Cb as w,Cc as lt,Da as Ue,Db as Ke,Eb as Xe,Ec as v,Fc as x,G as Ae,Ga as Se,Gc as C,Ha as ze,Ib as f,Ic as dt,Ja as de,La as Me,Na as E,Sb as De,Ta as He,Tb as s,Ub as $e,Uc as Te,Vb as ne,Yc as U,Zb as et,Zc as Je,_a as Qe,a as D,ac as ce,b as k,bc as n,cc as r,dc as j,fa as We,ha as Be,hc as y,ja as we,lb as se,ma as h,mc as g,ob as d,oc as u,pc as tt,qc as it,rc as ot,sb as Ye,sc as nt,tc as ke,uc as ue,vc as pe,wa as m,wb as Ze,xa as c,xc as rt,yb as S,yc as at,zc as I}from"./chunk-EL6UOR5J.js";function ti(o,p){o&1&&(n(0,"mat-error"),l(1,"Longitude is required."),r())}function ii(o,p){o&1&&(n(0,"mat-error"),l(1," Longitude must be between -180.0 and 180.0. "),r())}function oi(o,p){o&1&&(n(0,"mat-error"),l(1,"Latitude is required."),r())}function ni(o,p){o&1&&(n(0,"mat-error"),l(1," Latitude must be between -90.0 and 90.0. "),r())}var zt=(()=>{class o{constructor(){this.location=S(),this._location=E({type:"Point",coordinates:[]}),this.disabled=S(!1),this.location$=_t(this.location).pipe(Ae(e=>e?.coordinates!=null&&e.coordinates.length==2)),this.location$.subscribe(e=>{console.log(e),this._location.update(i=>k(D({},i),{coordinates:e.coordinates}))})}pasteClipboardCoordinates(){navigator.clipboard.readText().then(e=>{if(console.debug("Value copied from clipboard:",e),e&&e.split(",").length==2){let i=e.split(",");this._location.update(t=>k(D({},t),{coordinates:[Number(i[0]),Number(i[1])]})),this.fireChangeEvent()}})}pasteClipboardGoogleCoordinates(){navigator.clipboard.readText().then(e=>{if(console.debug("Value copied from clipboard:",e),e&&e.split(",").length==2){let i=e.split(",");this._location.update(t=>k(D({},t),{coordinates:[Number(i[1]),Number(i[0])]})),this.fireChangeEvent()}})}fireChangeEvent(){this._location().coordinates.filter(e=>e!==null).length==2&&(this.location.update(e=>({type:"Point",coordinates:this._location().coordinates})),console.log("fireChangeEvent:",this.location()))}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=w({type:o,selectors:[["app-edit-geo-location"]],inputs:{location:[1,"location"],disabled:[1,"disabled"]},outputs:{location:"locationChange",disabled:"disabledChange"},decls:24,vars:10,consts:[["longitude","ngModel"],["latitude","ngModel"],["pasteMenu","matMenu"],[1,"flex","items-center","gap-2","mt-2"],["appearance","outline",1,"w-1/2"],["matInput","","type","number","placeholder","Longitude","aria-label","Longitude","required","","min","-180","max","180",3,"ngModelChange","change","ngModel","readOnly"],[4,"ngIf"],["matInput","","type","number","placeholder","Latitude","aria-label","Latitude","required","","min","-90","max","90",3,"ngModelChange","change","ngModel","readOnly"],["mat-icon-button","","matTooltip","Paste Options","type","button",3,"matMenuTriggerFor","disabled"],["mat-menu-item","",3,"click"]],template:function(i,t){if(i&1){let a=y();n(0,"div",3)(1,"mat-form-field",4)(2,"mat-label"),l(3,"Longitude"),r(),n(4,"input",5,0),C("ngModelChange",function(_){return m(a),x(t._location().coordinates[0],_)||(t._location().coordinates[0]=_),c(_)}),g("change",function(){return m(a),c(t.fireChangeEvent())}),r(),f(6,ti,2,0,"mat-error",6)(7,ii,2,0,"mat-error",6),r(),n(8,"mat-form-field",4)(9,"mat-label"),l(10,"Latitude"),r(),n(11,"input",7,1),C("ngModelChange",function(_){return m(a),x(t._location().coordinates[1],_)||(t._location().coordinates[1]=_),c(_)}),g("change",function(){return m(a),c(t.fireChangeEvent())}),r(),f(13,oi,2,0,"mat-error",6)(14,ni,2,0,"mat-error",6),r(),n(15,"button",8)(16,"mat-icon"),l(17,"content_paste_go"),r()(),n(18,"mat-menu",null,2)(20,"button",9),g("click",function(){return m(a),c(t.pasteClipboardCoordinates())}),l(21," Clipboard "),r(),n(22,"button",9),g("click",function(){return m(a),c(t.pasteClipboardGoogleCoordinates())}),l(23," Clipboard (Copied from Google Map) "),r()()()}if(i&2){let a=I(5),b=I(12),_=I(19);d(4),v("ngModel",t._location().coordinates[0]),s("readOnly",t.disabled()),d(2),s("ngIf",a.errors==null?null:a.errors.required),d(),s("ngIf",(a.errors==null?null:a.errors.min)||(a.errors==null?null:a.errors.max)),d(4),v("ngModel",t._location().coordinates[1]),s("readOnly",t.disabled()),d(2),s("ngIf",b.errors==null?null:b.errors.required),d(),s("ngIf",(b.errors==null?null:b.errors.min)||(b.errors==null?null:b.errors.max)),d(),s("matMenuTriggerFor",_)("disabled",t.disabled())}},dependencies:[J,K,yt,z,X,xt,vt,H,M,he,T,B,W,A,ee,q,Q,kt,Mt,St,Dt,G,V,R],styles:["input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"],changeDetection:0})}}return o})();function ri(o,p){o&1&&(n(0,"p",11)(1,"span",12),l(2,"check_circle"),r(),l(3," GeoJSON valid "),r())}function ai(o,p){o&1&&(n(0,"p",13)(1,"span",12),l(2,"cancel"),r(),l(3," GeoJSON is not valid "),r())}var Ht=(()=>{class o{constructor(){this.geoJson=S(void 0),this.geoJsonString=re(()=>JSON.stringify(this.geoJson(),null,2)),this.isGeoJsonValid=E(!0)}onGeoJsonChange(e){let t=e.target.value;try{let a=JSON.parse(t);a.type==="FeatureCollection"&&(this.geoJson.set(a),this.isGeoJsonValid.set(!0))}catch(a){this.isGeoJsonValid.set(!1),console.error("Invalid GeoJSON:",a)}}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=w({type:o,selectors:[["app-edit-geo-json"]],inputs:{geoJson:[1,"geoJson"]},outputs:{geoJson:"geoJsonChange"},decls:25,vars:3,consts:[["rawGeoJsonDialog",""],["type","button","mat-raised-button","",1,"w-full",3,"click"],[1,"w-[50%]","h-[75vh]","p-4","rounded-md","shadow-lg","border"],["type","button","mat-icon-button","",1,"float-right",3,"click"],[1,"flex","flex-col","h-full","gap-4"],[1,"text-xl","font-semibold","text-gradient","border-b-2","border-primary"],["placeholder","Paste GeoJSON data here",1,"resize-none","border","rounded-md","p-2","w-full","h-full","font-mono",3,"input","value"],["class","text-green-600 flex items-center gap-2",4,"ngIf"],["class","text-red-600 flex items-center gap-2",4,"ngIf"],["href","https://geojson.io/","target","_blank",1,"text-primary","flex","items-center","gap-1"],[1,"underline"],[1,"text-green-600","flex","items-center","gap-2"],[1,"material-icons"],[1,"text-red-600","flex","items-center","gap-2"]],template:function(i,t){if(i&1){let a=y();n(0,"section")(1,"button",1),g("click",function(){m(a);let _=I(4);return c(_.showModal())}),l(2," Raw GeoJSON Data "),r(),n(3,"dialog",2,0)(5,"button",3),g("click",function(){m(a);let _=I(4);return c(_.close())}),n(6,"mat-icon"),l(7,"close"),r()(),n(8,"div",4)(9,"h4",5),l(10,"Geo JSON"),r(),n(11,"textarea",6),g("input",function(_){return m(a),c(t.onGeoJsonChange(_))}),l(12,"      "),r(),n(13,"button",1),g("click",function(){m(a);let _=I(4);return c(_.close())}),l(14," Save "),r(),f(15,ri,4,0,"p",7)(16,ai,4,0,"p",8),n(17,"div")(18,"p"),l(19," Tip: "),n(20,"a",9)(21,"span",10),l(22,"Create GeoJSON"),r(),n(23,"mat-icon"),l(24,"open_in_new"),r()()()()()()()}i&2&&(d(11),s("value",t.geoJsonString()),d(4),s("ngIf",t.isGeoJsonValid()),d(),s("ngIf",!t.isGeoJsonValid()))},dependencies:[J,T,V,F,R,q,M],encapsulation:2})}}return o})();var li=["input"],di=["formField"],si=["*"],Ie=class{source;value;constructor(p,e){this.source=p,this.value=e}},mi={provide:bt,useExisting:We(()=>Re),multi:!0},Qt=new we("MatRadioGroup"),ci=new we("mat-radio-default-options",{providedIn:"root",factory:ui});function ui(){return{color:"accent",disabledInteractive:!1}}var Re=(()=>{class o{_changeDetector=h(Te);_value=null;_name=h(Ve).getId("mat-radio-group-");_selected=null;_isInitialized=!1;_labelPosition="after";_disabled=!1;_required=!1;_buttonChanges;_controlValueAccessorChangeFn=()=>{};onTouched=()=>{};change=new Se;_radios;color;get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition=e==="before"?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=e,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markRadiosForCheck()}_disabledInteractive=!1;constructor(){}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(e=>e===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){let e=this._selected!==null&&this._selected.value===this._value;this._radios&&!e&&(this._selected=null,this._radios.forEach(i=>{i.checked=this.value===i.value,i.checked&&(this._selected=i)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Ie(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}static \u0275fac=function(i){return new(i||o)};static \u0275dir=Xe({type:o,selectors:[["mat-radio-group"]],contentQueries:function(i,t,a){if(i&1&&nt(a,Ee,5),i&2){let b;ue(b=pe())&&(t._radios=b)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",U],required:[2,"required","required",U],disabledInteractive:[2,"disabledInteractive","disabledInteractive",U]},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[dt([mi,{provide:Qt,useExisting:o}])]})}return o})(),Ee=(()=>{class o{_elementRef=h(Me);_changeDetector=h(Te);_focusMonitor=h(ut);_radioDispatcher=h(ht);_defaultOptions=h(ci,{optional:!0});_ngZone=h(ze);_renderer=h(Ye);_uniqueId=h(Ve).getId("mat-radio-");_cleanupClick;id=this._uniqueId;name;ariaLabel;ariaLabelledby;ariaDescribedby;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked!==e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}_labelPosition;get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(e){this._setDisabled(e)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=e}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(e){this._color=e}_color;get disabledInteractive(){return this._disabledInteractive||this.radioGroup!==null&&this.radioGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new Se;radioGroup;get inputId(){return`${this.id||this._uniqueId}-input`}_checked=!1;_disabled;_required;_value=null;_removeUniqueSelectionListener=()=>{};_previousTabIndex;_inputElement;_rippleTrigger;_noopAnimations;_injector=h(qe);constructor(){h(pt).load(ft);let e=h(Qt,{optional:!0}),i=h(He,{optional:!0}),t=h(new Ue("tabindex"),{optional:!0});this.radioGroup=e,this._noopAnimations=i==="NoopAnimations",this._disabledInteractive=this._defaultOptions?.disabledInteractive??!1,t&&(this.tabIndex=Je(t,0))}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((e,i)=>{e!==this.id&&i===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._cleanupClick=this._renderer.listen(this._inputElement.nativeElement,"click",this._onInputClick)})}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Ie(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){let i=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),i&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(e){this._onInputInteraction(e),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_onInputClick=e=>{this.disabled&&this.disabledInteractive&&e.preventDefault()};_updateTabIndex(){let e=this.radioGroup,i;if(!e||!e.selected||this.disabled?i=this.tabIndex:i=e.selected===this?this.tabIndex:-1,i!==this._previousTabIndex){let t=this._inputElement?.nativeElement;t&&(t.setAttribute("tabindex",i+""),this._previousTabIndex=i,Qe(()=>{queueMicrotask(()=>{e&&e.selected&&e.selected!==this&&document.activeElement===t&&(e.selected?._inputElement.nativeElement.focus(),document.activeElement===t&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=w({type:o,selectors:[["mat-radio-button"]],viewQuery:function(i,t){if(i&1&&(ke(li,5),ke(di,7,Me)),i&2){let a;ue(a=pe())&&(t._inputElement=a.first),ue(a=pe())&&(t._rippleTrigger=a.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(i,t){i&1&&g("focus",function(){return t._inputElement.nativeElement.focus()}),i&2&&(De("id",t.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),ne("mat-primary",t.color==="primary")("mat-accent",t.color==="accent")("mat-warn",t.color==="warn")("mat-mdc-radio-checked",t.checked)("mat-mdc-radio-disabled",t.disabled)("mat-mdc-radio-disabled-interactive",t.disabledInteractive)("_mat-animation-noopable",t._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",U],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Je(e)],checked:[2,"checked","checked",U],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",U],required:[2,"required","required",U],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",U]},outputs:{change:"change"},exportAs:["matRadioButton"],ngContentSelectors:si,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(i,t){if(i&1){let a=y();tt(),n(0,"div",2,0)(2,"div",3)(3,"div",4),g("click",function(_){return m(a),c(t._onTouchTargetClick(_))}),r(),n(4,"input",5,1),g("change",function(_){return m(a),c(t._onInputInteraction(_))}),r(),n(6,"div",6),j(7,"div",7)(8,"div",8),r(),n(9,"div",9),j(10,"div",10),r()(),n(11,"label",11),it(12),r()()}i&2&&(s("labelPosition",t.labelPosition),d(2),ne("mdc-radio--disabled",t.disabled),d(2),s("id",t.inputId)("checked",t.checked)("disabled",t.disabled&&!t.disabledInteractive)("required",t.required),De("name",t.name)("value",t.value)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby)("aria-describedby",t.ariaDescribedby)("aria-disabled",t.disabled&&t.disabledInteractive?"true":null),d(5),s("matRippleTrigger",t._rippleTrigger.nativeElement)("matRippleDisabled",t._isRippleDisabled())("matRippleCentered",!0),d(2),s("for",t.inputId))},dependencies:[gt,At],styles:['.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled])~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px);top:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-sys-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple>.mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio>.mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.cdk-focused .mat-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display, block)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0})}return o})(),Yt=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=Ke({type:o});static \u0275inj=Be({imports:[je,wt,Ee,je]})}return o})();function gi(o,p){o&1&&(n(0,"div"),l(1,"Title is required."),r())}function fi(o,p){o&1&&(n(0,"div"),l(1,"Title must be at least 10 characters long."),r())}function hi(o,p){o&1&&(n(0,"div"),l(1,"Title must be at most 100 characters long."),r())}function bi(o,p){o&1&&(n(0,"div"),l(1,"City is required."),r())}function yi(o,p){o&1&&(n(0,"div"),l(1,"City must be at least 3 characters long."),r())}function vi(o,p){o&1&&(n(0,"div"),l(1,"City must be at most 50 characters long."),r())}function xi(o,p){o&1&&(n(0,"div"),l(1,"Country is required."),r())}function Ci(o,p){o&1&&(n(0,"div"),l(1,"Country must be at least 3 characters long."),r())}function Ii(o,p){o&1&&(n(0,"div"),l(1,"Country must be at most 50 characters long."),r())}function Ei(o,p){if(o&1&&(n(0,"mat-option",28),l(1),r()),o&2){let e=p.$implicit;s("value",e),d(),_e(e)}}function wi(o,p){o&1&&(n(0,"div"),l(1,"Category is required."),r())}function Si(o,p){if(o&1){let e=y();n(0,"form",6,0),g("ngSubmit",function(){m(e);let t=I(1),a=u();return c(a.save(t))}),n(2,"div",7)(3,"div",8)(4,"app-world-map",9),g("location",function(t){m(e);let a=u();return c(a.addGeoLocation(t))}),r()(),n(5,"div",10)(6,"div")(7,"app-edit-geo-location",11),C("locationChange",function(t){m(e);let a=u();return x(a.formData.location,t)||(a.formData.location=t),c(t)}),r()(),n(8,"mat-form-field",12)(9,"mat-label"),l(10,"Title"),r(),n(11,"input",13,1),C("ngModelChange",function(t){m(e);let a=u();return x(a.formData.title,t)||(a.formData.title=t),c(t)}),r(),n(13,"button",14),g("click",function(){m(e);let t=u();return c(t.formData.title.set(""))}),n(14,"mat-icon"),l(15,"clear"),r()(),n(16,"mat-error",15),f(17,gi,2,0,"div",16)(18,fi,2,0,"div",16)(19,hi,2,0,"div",16),r()(),n(20,"mat-form-field",12)(21,"mat-label"),l(22,"City"),r(),n(23,"input",17,2),C("ngModelChange",function(t){m(e);let a=u();return x(a.formData.city,t)||(a.formData.city=t),c(t)}),r(),n(25,"mat-error",15),f(26,bi,2,0,"div",16)(27,yi,2,0,"div",16)(28,vi,2,0,"div",16),r()(),n(29,"mat-form-field",12)(30,"mat-label"),l(31,"Country"),r(),n(32,"input",18,3),C("ngModelChange",function(t){m(e);let a=u();return x(a.formData.country,t)||(a.formData.country=t),c(t)}),r(),n(34,"mat-error",15),f(35,xi,2,0,"div",16)(36,Ci,2,0,"div",16)(37,Ii,2,0,"div",16),r()(),n(38,"mat-form-field",12)(39,"mat-label"),l(40,"Category"),r(),n(41,"mat-select",19,4),C("ngModelChange",function(t){m(e);let a=u();return x(a.formData.category,t)||(a.formData.category=t),c(t)}),f(43,Ei,2,2,"mat-option",20),r(),n(44,"mat-error",15),f(45,wi,2,0,"div",16),r()(),n(46,"div")(47,"app-edit-geo-json",21),C("geoJsonChange",function(t){m(e);let a=u();return x(a.formData.geoJson,t)||(a.formData.geoJson=t),c(t)}),r()(),n(48,"mat-radio-group",22),C("ngModelChange",function(t){m(e);let a=u();return x(a.showMapOption,t)||(a.showMapOption=t),c(t)}),n(49,"mat-radio-button",23),l(50,"Location"),r(),n(51,"mat-radio-button",24),l(52,"GeoJson"),r()()()(),n(53,"div",25)(54,"button",26),l(55,"Save"),r(),n(56,"button",27),l(57,"Next"),r()()()}if(o&2){let e=I(1),i=I(12),t=I(24),a=I(33),b=I(42),_=u();d(4),s("geoJsonData",_.geoJsonData())("iconType",_.formData.category())("enableGeoCoding",!0),d(3),v("location",_.formData.location),d(4),v("ngModel",_.formData.title),s("readOnly",_.isReadOnly()),d(5),s("hidden",i.valid||i.pristine),d(),s("ngIf",i.errors==null?null:i.errors.required),d(),s("ngIf",i.errors==null?null:i.errors.minlength),d(),s("ngIf",i.errors==null?null:i.errors.maxlength),d(4),v("ngModel",_.formData.city),s("readOnly",_.isReadOnly()),d(2),s("hidden",t.valid||t.pristine),d(),s("ngIf",t.errors==null?null:t.errors.required),d(),s("ngIf",t.errors==null?null:t.errors.minlength),d(),s("ngIf",t.errors==null?null:t.errors.maxlength),d(4),v("ngModel",_.formData.country),s("readOnly",_.isReadOnly()),d(2),s("hidden",a.valid||a.pristine),d(),s("ngIf",a.errors==null?null:a.errors.required),d(),s("ngIf",a.errors==null?null:a.errors.minlength),d(),s("ngIf",a.errors==null?null:a.errors.maxlength),d(4),v("ngModel",_.formData.category),s("disabled",_.isReadOnly()),d(2),s("ngForOf",_.CATEGORIES),d(),s("hidden",b.valid||b.pristine),d(),s("ngIf",b.errors==null?null:b.errors.required),d(2),v("geoJson",_.formData.geoJson),d(),v("ngModel",_.showMapOption),d(6),s("disabled",!e.form.valid),d(2),s("disabled",!e.form.valid)}}var Zt=(()=>{class o{constructor(){this.CATEGORIES=Bt,this.journeyService=h(O),this.notificationService=h(Y),this.journey=S.required(),this.formData={location:E(void 0),title:E(""),city:E(""),country:E(""),category:E(Ge),geoJson:E(void 0)},this.mode=S(ie.EDIT),this.isReadOnly=re(()=>this.mode()===ie.VIEW),this.showMapOption=E("Location"),this.geoJsonData=re(()=>this.showMapOption()=="Location"?this.formData.location():this.formData.geoJson())}ngOnInit(){this.copyToForm(this.journey().geoDetails??new Fe)}save(e){console.debug("submitted form:",e),this.journeyService.saveJourneyGeoDetails(this.journey(),this.copyDataFromForm()).subscribe({next:i=>this.onUpdateSuccess(i),error:i=>this.onError("Unexpected error while saving geo data",i)})}onUpdateSuccess(e){this.notificationService.showSuccess("Journey details saved successfully.")}onError(e,i){this.notificationService.showError(e),console.error(i)}copyToForm(e){this.formData.location.set(e.location),this.formData.title.set(e.title),this.formData.city.set(e.city),this.formData.country.set(e.country),this.formData.category.set(e.category||Ge),this.formData.geoJson.set(e.geoJson)}copyDataFromForm(){return new Fe(this.formData.title(),this.formData.city(),this.formData.country(),this.formData.category(),this.formData.location(),this.formData.geoJson()||this.formData.location())}addGeoLocation(e){this.formData.location.update(i=>e.location??i),this.formData.geoJson.update(i=>e.location??i),this.formData.title.update(i=>i||e.name),this.formData.city.update(i=>e.state??i),this.formData.country.update(i=>e.country??i)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=w({type:o,selectors:[["app-edit-journey-geo-details"]],inputs:{journey:[1,"journey"],mode:[1,"mode"]},outputs:{journey:"journeyChange",mode:"modeChange"},decls:2,vars:1,consts:[["journeyForm","ngForm"],["title","ngModel"],["city","ngModel"],["country","ngModel"],["category","ngModel"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-12","gap-4","mb-6"],[1,"col-span-12","md:col-span-8","relative","min-h-[25vh]"],[1,"h-1/2",3,"location","geoJsonData","iconType","enableGeoCoding"],[1,"col-span-12","md:col-span-4","flex","flex-col","gap-2"],[3,"locationChange","location"],[1,"w-full"],["matInput","","id","title","name","title","required","","maxlength","100","minlength","10","placeholder","Title",3,"ngModelChange","ngModel","readOnly"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[3,"hidden"],[4,"ngIf"],["matInput","","id","city","name","city","required","","minlength","3","maxlength","50","placeholder","City or Region",3,"ngModelChange","ngModel","readOnly"],["matInput","","id","country","name","country","required","","minlength","3","maxlength","50","placeholder","Country",3,"ngModelChange","ngModel","readOnly"],["name","category","required","",3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"geoJsonChange","geoJson"],["name","mapOptions",1,"flex","justify-center","gap-2",3,"ngModelChange","ngModel"],["value","Location"],["value","GeoJson"],[1,"flex","justify-center","gap-2","mt-6"],["mat-flat-button","","type","submit",3,"disabled"],["mat-stroked-button","","type","button","matStepperNext","",3,"disabled"],[3,"value"]],template:function(i,t){i&1&&(n(0,"main"),f(1,Si,58,31,"form",5),r()),i&2&&(d(),s("ngIf",t.journey()))},dependencies:[J,L,K,z,P,X,Ct,It,H,N,qt,te,M,zt,Ht,B,W,A,ee,be,q,Q,xe,ve,ye,Yt,Re,Ee,V,F,R,ge,G,T],encapsulation:2,changeDetection:0})}}return o})();function Mi(o,p){if(o&1){let e=y();n(0,"div",1)(1,"div",2)(2,"h6",3),l(3,"Edit Image Details"),r()(),n(4,"div",4)(5,"div",5)(6,"div",6),j(7,"img",7),r(),n(8,"div",8)(9,"form",9)(10,"mat-form-field",10)(11,"mat-label"),l(12,"Image URL"),r(),n(13,"input",11),C("ngModelChange",function(t){m(e);let a=u();return x(a.imageItem().url,t)||(a.imageItem().url=t),c(t)}),r()(),n(14,"mat-form-field",10)(15,"mat-label"),l(16,"Asset ID"),r(),n(17,"input",12),C("ngModelChange",function(t){m(e);let a=u();return x(a.imageItem().assetId,t)||(a.imageItem().assetId=t),c(t)}),r()(),n(18,"mat-form-field",10)(19,"mat-label"),l(20,"Public ID"),r(),n(21,"input",13),C("ngModelChange",function(t){m(e);let a=u();return x(a.imageItem().publicId,t)||(a.imageItem().publicId=t),c(t)}),r()(),n(22,"mat-form-field",10)(23,"mat-label"),l(24,"Title"),r(),n(25,"input",14),C("ngModelChange",function(t){m(e);let a=u();return x(a.imageItem().title,t)||(a.imageItem().title=t),c(t)}),r()(),n(26,"div",15)(27,"mat-checkbox",16),C("ngModelChange",function(t){m(e);let a=u();return x(a.imageItem().isFavorite,t)||(a.imageItem().isFavorite=t),c(t)}),l(28,"Make it my favorite "),r()(),n(29,"mat-form-field",10)(30,"mat-label"),l(31,"Event Date"),r(),n(32,"input",17),C("ngModelChange",function(t){m(e);let a=u();return x(a.imageItem().eventDate,t)||(a.imageItem().eventDate=t),c(t)}),r()(),n(33,"div",15)(34,"mat-checkbox",18),C("ngModelChange",function(t){m(e);let a=u();return x(a.imageItem().isThumbnail,t)||(a.imageItem().isThumbnail=t),c(t)}),l(35,"Make it a thumbnail "),r()(),n(36,"div",19)(37,"button",20),g("click",function(){m(e);let t=u();return c(t.saveItem.emit(t.imageItem()))}),l(38,"Save"),r(),n(39,"button",21),g("click",function(){m(e);let t=u();return c(t.removeItem.emit(t.imageItem()))}),l(40,"Remove"),r(),n(41,"button",22),g("click",function(){m(e);let t=u();return c(t.cancelItem.emit(t.imageItem()))}),l(42,"Cancel"),r()()()()()()()}if(o&2){let e=u();d(4),$e("background-image","url("+e.imageItem().url+")"),d(3),s("src",e.imageItem().url,se)("title",e.imageItem().assetId),d(6),v("ngModel",e.imageItem().url),d(4),v("ngModel",e.imageItem().assetId),d(4),v("ngModel",e.imageItem().publicId),d(4),v("ngModel",e.imageItem().title),d(2),v("ngModel",e.imageItem().isFavorite),d(5),v("ngModel",e.imageItem().eventDate),d(2),v("ngModel",e.imageItem().isThumbnail)}}var Kt=(()=>{class o{constructor(){this.imageItem=S(new ae("","")),this.saveItem=de(),this.cancelItem=de(),this.removeItem=de()}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=w({type:o,selectors:[["app-edit-journey-image-item"]],inputs:{imageItem:[1,"imageItem"]},outputs:{imageItem:"imageItemChange",saveItem:"saveItem",cancelItem:"cancelItem",removeItem:"removeItem"},decls:1,vars:1,consts:[["class","container mx-auto p-4 rounded-lg shadow-md",4,"ngIf"],[1,"container","mx-auto","p-4","rounded-lg","shadow-md"],[1,"border-b-2","mb-4"],[1,"text-lg","font-semibold","text-primary"],[1,"bg-cover","bg-no-repeat","bg-center","p-6","rounded-lg"],[1,"backdrop-blur-3xl","flex","flex-col","md:flex-row","justify-evenly","items-center","rounded-lg","p-4","inset-0","bg-white/50"],[1,"flex","justify-center","text-center","mb-4","md:mb-0","md:w-1/3"],["alt","thumbnail",1,"rounded-lg","border-2","border-primary","h-48","w-48","object-cover",3,"src","title"],[1,"flex-1"],[1,"flex","flex-col","gap-2"],["appearance","outline",1,"w-full"],["matInput","","type","text","id","imageUrl","name","imageUrl","readonly","",1,"rounded-lg","w-full","bg-gray-200","cursor-not-allowed",3,"ngModelChange","ngModel"],["matInput","","type","text","id","imageId","name","imageId","readonly","",1,"rounded-lg","w-full","bg-gray-200","cursor-not-allowed",3,"ngModelChange","ngModel"],["matInput","","type","text","id","publicId","name","publicId","readonly","",1,"rounded-lg","w-full","bg-gray-200","cursor-not-allowed",3,"ngModelChange","ngModel"],["matInput","","type","text","id","title","name","title",1,"rounded-lg","w-full",3,"ngModelChange","ngModel"],[1,"flex","items-center"],["id","favoriteFlag","name","favoriteFlag",3,"ngModelChange","ngModel"],["matInput","","type","date","id","eventDate","name","eventDate","placeholder","dd-mm-yyyy",1,"rounded-lg","w-full",3,"ngModelChange","ngModel"],["id","thumbnailFlag","name","thumbnailFlag",3,"ngModelChange","ngModel"],[1,"flex","justify-center","gap-2","rounded-lg"],["mat-flat-button","","type","button",1,"!bg-success","!text-white",3,"click"],["mat-flat-button","","type","button",1,"!bg-danger","!text-white",3,"click"],["mat-stroked-button","","type","button",3,"click"]],template:function(i,t){i&1&&f(0,Mi,43,11,"div",0),i&2&&s("ngIf",t.imageItem())},dependencies:[J,L,K,z,P,H,N,G,V,F,M,B,W,A,q,Q,Ut],encapsulation:2,changeDetection:0})}}return o})();var Di=["imageItemDetailDialog"],ki=(o,p)=>p.assetId;function Ti(o,p){o&1&&(n(0,"div",15),l(1," Selected "),r())}function Ji(o,p){if(o&1){let e=y();n(0,"div",12),g("click",function(){let t=m(e).$implicit,a=u(2);return c(a.openImageItem(t))})("keydown.enter",function(){let t=m(e).$implicit,a=u(2);return c(a.openImageItem(t))}),j(1,"img",13),f(2,Ti,2,0,"div",14),r()}if(o&2){let e=p.$implicit;ne("border-success",e.isThumbnail)("border-primary",!e.isThumbnail),d(),ot("title",e.assetId),s("src",e.url,se),d(),s("ngIf",e.isThumbnail)}}function Vi(o,p){if(o&1){let e=y();n(0,"form",4),g("ngSubmit",function(){m(e);let t=u();return c(t.save())}),n(1,"div",5),me(2,Ji,3,7,"div",6,ki),r(),n(4,"div",7)(5,"button",8),g("click",function(){m(e);let t=u();return c(t.openUploadWidget(!0))}),n(6,"mat-icon"),l(7,"drive_folder_upload"),r(),l(8," Upload Image(s) "),r(),n(9,"button",8),g("click",function(){m(e);let t=u();return c(t.openUploadWidget(!1))}),n(10,"mat-icon"),l(11,"upload_file"),r(),l(12," Upload Image "),r(),n(13,"button",9),l(14,"Next"),r(),n(15,"a",10)(16,"span",11),l(17,"Reduce Image Size"),r(),n(18,"mat-icon"),l(19,"open_in_new"),r()()()()}if(o&2){let e=u();d(2),ce(e.formImageDetails().images)}}var Xt=(()=>{class o{constructor(){this.notificationService=h(Y),this.journeyService=h(O),this.journey=S.required(),this.formImageDetails=E(new Pe),this.imageItemDetail=S(new ae("","")),this.imageItemDialog=Ze.required("imageItemDetailDialog")}ngOnInit(){this.formImageDetails.set(this.journey().imagesDetails??new Pe)}addImage(e){this.formImageDetails.update(i=>k(D({},i),{images:[...i.images,new ae(e.secure_url,e.asset_id,e.public_id)]}))}getWidgetParams(e,i){return{cloudName:$.cloudName,uploadPreset:i?$.cloudinaryPreset:$.cloudinarySingleImgPreset,folder:`${$.cloudBaseDir}/${e.id}`,tags:e.tags,use_asset_folder_as_public_id_prefix:!0,context:{env:$.stage,id:`${e.id}`},cropping:!i,showAdvancedOptions:!0,multiple:i}}onError(e,i){this.notificationService.showError(e),console.error(i)}onUpdateSuccess(e){this.notificationService.showSuccess("Image Details saved successfully."),this.journey.set(e)}save(){console.log("saving"),this.journeyService.saveJourneyImagesDetails(this.journey(),this.formImageDetails()).subscribe({next:e=>this.onUpdateSuccess(e),error:e=>this.onError("Unexpected error while saving images data",e)})}openUploadWidget(e=!0){cloudinary.createUploadWidget(this.getWidgetParams(this.journey(),e),(i,t)=>{!i&&t&&t.event==="success"&&this.addImage(t.info),!i&&t&&t.event==="close"&&this.save()}).open()}openImageItem(e){this.imageItemDetail.set(e),this.imageItemDialog().nativeElement.showModal()}saveImageItemDetail(e){this.formImageDetails.update(i=>k(D({},i),{images:[...i.images.map(t=>t.assetId==e.assetId?e:t)]})),this.save(),this.imageItemDialog().nativeElement.close()}deleteImageItemDetail(e){this.formImageDetails.update(i=>k(D({},i),{images:[...i.images.filter(t=>t.assetId!=e.assetId)]})),this.save(),this.imageItemDialog().nativeElement.close()}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=w({type:o,selectors:[["app-edit-journey-images-details"]],viewQuery:function(i,t){i&1&&rt(t.imageItemDialog,Di,5),i&2&&at()},inputs:{journey:[1,"journey"],imageItemDetail:[1,"imageItemDetail"]},outputs:{journey:"journeyChange",imageItemDetail:"imageItemDetailChange"},decls:5,vars:2,consts:[["imageItemDetailDialog",""],[3,"ngSubmit",4,"ngIf"],[1,"w-full","md:w-3/4","p-4","rounded-lg","border","shadow-lg","dark:bg-black","mx-auto"],[3,"saveItem","removeItem","cancelItem","imageItem"],[3,"ngSubmit"],[1,"grid","grid-cols-3","sm:grid-cols-4","md:grid-cols-6","gap-4","mb-4"],["tabindex","-1",1,"relative","group","cursor-pointer","border","rounded-lg","overflow-hidden","transition-all","duration-300","hover:shadow-lg","focus-within:ring","focus-within:ring-offset-2",3,"border-success","border-primary"],[1,"flex","flex-col","md:flex-row","items-center","justify-center","content-center","gap-2"],["mat-fab","","extended","","type","button",3,"click"],["mat-stroked-button","","type","button","matStepperNext",""],["routerLink","/tools","target","_blank",1,"text-primary","flex","flex-row","justify-center"],[1,"hover:underline"],["tabindex","-1",1,"relative","group","cursor-pointer","border","rounded-lg","overflow-hidden","transition-all","duration-300","hover:shadow-lg","focus-within:ring","focus-within:ring-offset-2",3,"click","keydown.enter"],["loading","lazy","alt","Thumbnail",1,"h-24","w-full","object-contain",3,"src","title"],["class","absolute top-0 left-0 w-full h-full bg-black/30 flex items-center justify-center text-white font-bold text-sm",4,"ngIf"],[1,"absolute","top-0","left-0","w-full","h-full","bg-black/30","flex","items-center","justify-center","text-white","font-bold","text-sm"]],template:function(i,t){if(i&1){let a=y();n(0,"main"),f(1,Vi,20,0,"form",1),n(2,"dialog",2,0)(4,"app-edit-journey-image-item",3),g("saveItem",function(_){return m(a),c(t.saveImageItemDetail(_))})("removeItem",function(_){return m(a),c(t.deleteImageItemDetail(_))})("cancelItem",function(){return m(a),c(t.imageItemDialog().nativeElement.close())}),r()()()}i&2&&(d(),s("ngIf",t.journey()),d(3),s("imageItem",t.imageItemDetail()))},dependencies:[J,L,P,N,M,V,F,Tt,te,G,T,ct,Kt],styles:[".group[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}img[_ngcontent-%COMP%]{transition:transform .3s ease}"],changeDetection:0})}}return o})();var ji=(o,p)=>p.videoId;function Gi(o,p){if(o&1){let e=y();n(0,"div",9)(1,"button",13),g("click",function(){let t=m(e).$implicit,a=u(2);return c(a.removeVideoAndSaveJourney(t))}),n(2,"mat-icon",14),l(3," do_not_disturb_on "),r()(),j(4,"img",15),r()}if(o&2){let e=p.$implicit;d(4),s("ngSrc","https://img.youtube.com/vi/"+e.videoId+"/0.jpg")("alt",e.videoId)("title",e.videoId)}}function Fi(o,p){o&1&&(n(0,"p",10),l(1," No videos available for this journey. "),r())}function Pi(o,p){if(o&1){let e=y();n(0,"form",3)(1,"div")(2,"mat-form-field",4)(3,"mat-label"),l(4,"YouTube Video ID"),r(),j(5,"input",5,0),n(7,"button",6),g("click",function(){m(e);let t=I(6);return u().addVideo(t.value),c(t.value="")}),l(8," Upload "),r()()(),n(9,"div")(10,"h3",7),l(11,"Video List"),r(),n(12,"div",8),me(13,Gi,5,3,"div",9,ji),f(15,Fi,2,0,"p",10),r()(),n(16,"div",11)(17,"button",12),l(18,"Next"),r()()()}if(o&2){let e=I(6),i=u();d(7),s("disabled",e.value===""),d(6),ce(i.formVideosDetails().videos),d(2),et(i.formVideosDetails().videos.length?-1:15)}}var $t=(()=>{class o{constructor(){this.journeyService=h(O),this.notificationService=h(Y),this.journey=S.required(),this.formVideosDetails=E(new Ne)}ngOnInit(){this.formVideosDetails.set(this.journey().videosDetails??new Ne)}addVideo(e){this.formVideosDetails.update(i=>k(D({},i),{videos:[...i.videos,new jt(e)]})),this.save()}removeVideoAndSaveJourney(e){this.formVideosDetails.update(i=>k(D({},i),{videos:i.videos.filter(t=>t.videoId!==e.videoId)})),this.save()}save(){this.journeyService.saveJourneyVideosDetails(this.journey(),this.formVideosDetails()).subscribe({next:e=>this.onUpdateSuccess(e),error:e=>this.onError("Unexpected error while saving videos data",e)})}onUpdateSuccess(e){this.notificationService.showSuccess("Video Details saved successfully."),this.journey.set(e)}onError(e,i){this.notificationService.showError(e),console.error(i)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=w({type:o,selectors:[["app-edit-journey-videos-details"]],inputs:{journey:[1,"journey"]},outputs:{journey:"journeyChange"},decls:2,vars:1,consts:[["videoInput",""],[1,"rounded-lg","shadow-lg"],["class","container mx-auto p-6 flex flex-col gap-2",4,"ngIf"],[1,"container","mx-auto","p-6","flex","flex-col","gap-2"],["appearance","outline",1,"w-full"],["matInput","","placeholder","Enter YouTube Video ID"],["mat-flat-button","","matSuffix","","type","button",3,"click","disabled"],[1,"text-lg","font-semibold","text-gray-700","mb-4"],[1,"flex","flex-wrap","gap-4"],[1,"relative","w-48","h-48"],[1,"text-gray-500","italic"],[1,"text-center"],["mat-stroked-button","","type","button","matStepperNext",""],["mat-icon-button","","aria-label","Remove Video",1,"absolute","float-right","!z-10","!p-0",3,"click"],[1,"bg-white","rounded-full","text-red-400!","shadow-md","hover:text-red-600!","top-[-5px]","right-[-10px]"],["fill","",1,"rounded-lg","border","border-gray-300","shadow-sm","w-full","h-full","object-fill",3,"ngSrc","alt","title"]],template:function(i,t){i&1&&(n(0,"main",1),f(1,Pi,19,2,"form",2),r()),i&2&&(d(),s("ngIf",t.journey()))},dependencies:[J,L,P,N,M,Et,te,B,W,A,be,q,Q,V,F,R,G,T,st],encapsulation:2,changeDetection:0})}}return o})();function Ni(o,p){o&1&&(n(0,"mat-error"),l(1,"Please choose visibility"),r())}function Li(o,p){o&1&&(n(0,"mat-icon",39),l(1,"check_circle"),r())}function Ri(o,p){o&1&&(n(0,"mat-icon",40),l(1,"cancel"),r())}function Oi(o,p){o&1&&(n(0,"mat-icon",39),l(1,"check_circle"),r())}function Ai(o,p){o&1&&(n(0,"mat-icon",40),l(1,"cancel"),r())}function Wi(o,p){o&1&&(n(0,"mat-icon",39),l(1,"check_circle"),r())}function Bi(o,p){o&1&&(n(0,"mat-icon",40),l(1,"cancel"),r())}function qi(o,p){o&1&&(n(0,"mat-icon",39),l(1,"check_circle"),r())}function Ui(o,p){o&1&&(n(0,"mat-icon",40),l(1,"cancel"),r())}function zi(o,p){if(o&1&&(n(0,"mat-option",26),l(1),r()),o&2){let e=p.$implicit;s("value",e.url),d(),lt(" ",e.assetId," ")}}function Hi(o,p){if(o&1){let e=y();n(0,"button",38),g("click",function(){m(e),u();let t=I(57);return c(t.showModal())}),l(1," Delete "),r()}}function Qi(o,p){if(o&1){let e=y();n(0,"button",41),g("click",function(){m(e),u();let t=I(1),a=u();return c(a.save(t))}),l(1," Draft "),r()}if(o&2){u();let e=I(1);s("disabled",!e.form.valid)}}function Yi(o,p){if(o&1&&(n(0,"button",42),l(1," Publish "),r()),o&2){u();let e=I(1);s("disabled",!e.form.valid)}}function Zi(o,p){if(o&1){let e=y();n(0,"form",4,0),g("ngSubmit",function(){m(e);let t=I(1),a=u();return c(a.publish(t))}),n(2,"div",5)(3,"mat-form-field",6)(4,"mat-label"),l(5,"Visibility"),r(),n(6,"mat-select",7,1),C("ngModelChange",function(t){m(e);let a=u();return x(a.journey().visibilities,t)||(a.journey().visibilities=t),c(t)}),n(8,"mat-option",8),l(9,"MYSELF"),r(),n(10,"mat-option",9),l(11,"ADMINISTRATOR"),r(),n(12,"mat-option",10),l(13,"MAINTAINER"),r(),n(14,"mat-option",11),l(15,"AUTHENTICATED_USER"),r(),n(16,"mat-option",12),l(17,"GUEST"),r()(),f(18,Ni,2,0,"mat-error",13),r()(),n(19,"div",14)(20,"div",15)(21,"span",16),l(22,"Journey Preview"),r()(),n(23,"div",17)(24,"ul",18)(25,"li",19),l(26,"Basic Details "),f(27,Li,2,0,"mat-icon",20)(28,Ri,2,0,"mat-icon",21),r(),n(29,"li",19),l(30,"Geo Details "),f(31,Oi,2,0,"mat-icon",20)(32,Ai,2,0,"mat-icon",21),r(),n(33,"li",19),l(34,"Images Details "),f(35,Wi,2,0,"mat-icon",20)(36,Bi,2,0,"mat-icon",21),r(),n(37,"li",19),l(38,"Videos Details "),f(39,qi,2,0,"mat-icon",20)(40,Ui,2,0,"mat-icon",21),r()()(),n(41,"div",22)(42,"div",23)(43,"mat-form-field",24)(44,"mat-label"),l(45,"Thumbnail"),r(),n(46,"mat-select",25),C("ngModelChange",function(t){m(e);let a=u();return x(a.journey().thumbnail,t)||(a.journey().thumbnail=t),c(t)}),g("selectionChange",function(){m(e);let t=u();return c(t.onThumbnailChangedEvent())}),n(47,"mat-option",26),l(48,"Default"),r(),f(49,zi,2,2,"mat-option",27),r()()(),n(50,"div",23),j(51,"app-journey-card-view",28),r()()(),n(52,"div",29),f(53,Hi,2,0,"button",30)(54,Qi,2,1,"button",31)(55,Yi,2,1,"button",32),r(),n(56,"dialog",33,2)(58,"div",34)(59,"mat-icon",35),l(60,"delete_forever"),r(),n(61,"p",36),l(62,"Are you sure you want to delete the journey?"),r(),n(63,"div",37)(64,"button",38),g("click",function(){m(e);let t=I(57);return c(t.close())}),l(65,"No, Keep it"),r(),n(66,"button",38),g("click",function(){m(e);let t=I(57),a=u();return t.close(),c(a.delete())}),l(67,"Yes, Delete forever "),r()()()()()}if(o&2){let e,i=I(7),t=u();d(6),v("ngModel",t.journey().visibilities),d(2),s("disabled",!0),d(10),s("ngIf",i.hasError("required")),d(9),s("ngIf",t.isBasicDetailsAvailableAndValid()),d(),s("ngIf",!t.isBasicDetailsAvailableAndValid()),d(3),s("ngIf",t.isGeoJsonAvailable()),d(),s("ngIf",!t.isGeoJsonAvailable()),d(3),s("ngIf",t.isImagesDetailsAvailable()),d(),s("ngIf",!t.isImagesDetailsAvailable()),d(3),s("ngIf",t.isVideosDetailsAvailable()),d(),s("ngIf",!t.isVideosDetailsAvailable()),d(6),v("ngModel",t.journey().thumbnail),d(),s("value",t.DEFAULT_THUMBNAIL),d(2),s("ngForOf",(e=t.journey().imagesDetails)==null?null:e.images),d(2),s("journey",t.journey())}}var ei=(()=>{class o{constructor(){this.DEFAULT_THUMBNAIL=Jt,this.router=h(fe),this.journeyService=h(O),this.notificationService=h(Y),this.journey=S.required()}isBasicDetailsAvailableAndValid(){return this.journey().id!=""&&this.journey().name!=""&&this.journey().description!=""&&this.journey().journeyDate!=""&&this.journey().tags?.length>0}isGeoJsonAvailable(){return this.journey().geoDetails?.geoJson!=null}isImagesDetailsAvailable(){return this.journey().imagesDetails?.images?.length??!1}isVideosDetailsAvailable(){return this.journey().videosDetails?.videos?.length??!1}publish(e){console.debug("submitted form:",e),this.journey.update(i=>k(D({},i),{isPublished:!0})),this.journeyService.publishJourney(this.journey()).subscribe({next:i=>this.onUpdateSuccess(i),error:i=>this.onError("Unexpected error while publishing data",i)})}save(e){e.valid&&(this.journey.update(i=>k(D({},i),{isPublished:!1})),this.journeyService.publishJourney(this.journey()).subscribe({next:i=>this.onUpdateSuccess(i),error:i=>this.onError("Unexpected error while publishing data",i)}))}onError(e,i){this.notificationService.showError(e),console.error(i)}onUpdateSuccess(e){let i=e.isPublished?"Journey published successfully.":"Journey saved successfully";this.notificationService.showSuccess(i),this.journey.set(e)}delete(){this.journeyService.deleteJourney(this.journey()).subscribe({next:e=>this.onDeleteSuccess(),error:e=>this.onError("Unexpected error while publishing data",e)})}onDeleteSuccess(){this.notificationService.showSuccess("Journey deleted successfully"),setTimeout(()=>this.router.navigate(["journey"]),1e3)}onThumbnailChangedEvent(){this.journey.update(e=>D({},e))}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=w({type:o,selectors:[["app-edit-journey-publish-details"]],inputs:{journey:[1,"journey"]},outputs:{journey:"journeyChange"},decls:2,vars:1,consts:[["journeyForm","ngForm"],["visibilities","ngModel"],["deleteJourneyDialog",""],["class","flex flex-col gap-2",3,"ngSubmit",4,"ngIf"],[1,"flex","flex-col","gap-2",3,"ngSubmit"],[1,"grid","grid-cols-1","gap-4"],["appearance","outline","color","primary",1,"w-full"],["id","visibilities","name","visibilities","multiple","","required","",3,"ngModelChange","ngModel"],["value","MYSELF",3,"disabled"],["value","ADMINISTRATOR"],["value","MAINTAINER"],["value","AUTHENTICATED_USER"],["value","GUEST"],[4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"md:col-span-2","pb-3","border-b-2"],[1,"text-lg","font-semibold","text-current"],[1,"rounded-lg","shadow-md","p-4"],[1,"flex","flex-col","gap-2"],[1,"flex","items-center","justify-between"],["class","text-success!",4,"ngIf"],["class","text-danger!",4,"ngIf"],[1,"flex","flex-col","rounded-lg","shadow-md","p-4"],[1,"mb-4"],["appearance","outline",1,"w-full"],["id","thumbnail","name","thumbnail","ngModel","",3,"ngModelChange","selectionChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"journey"],[1,"flex","justify-center","gap-2","mt-6"],["mat-stroked-button","","type","button",3,"click",4,"appHasWriteAccess"],["mat-stroked-button","","type","button",3,"disabled","click",4,"appHasWriteAccess"],["mat-flat-button","","type","submit",3,"disabled",4,"appHasWriteAccess"],["id","deleteJourneyDialog",1,"border-0","rounded-lg","p-4","mx-auto"],[1,"text-center"],[1,"fs-3","text-danger"],[1,"text-danger","mt-2"],[1,"mt-4","flex","justify-center","gap-2"],["mat-stroked-button","","type","button",3,"click"],[1,"text-success!"],[1,"text-danger!"],["mat-stroked-button","","type","button",3,"click","disabled"],["mat-flat-button","","type","submit",3,"disabled"]],template:function(i,t){i&1&&(n(0,"main"),f(1,Zi,68,15,"form",3),r()),i&2&&(d(),s("ngIf",t.journey()))},dependencies:[T,J,L,z,P,X,H,N,M,B,W,A,ee,xe,ve,ye,ge,Pt,Gt,Ft,F],encapsulation:2,changeDetection:0})}}return o})();function Ki(o,p){o&1&&l(0,"Memories")}function Xi(o,p){if(o&1){let e=y();n(0,"app-edit-journey-memories-details",11),C("journeyChange",function(t){m(e);let a=u(2);return x(a.journey,t)||(a.journey=t),c(t)}),r()}if(o&2){let e=u(2);v("journey",e.journey),s("mode",e.mode())}}function $i(o,p){o&1&&l(0,"Geography")}function eo(o,p){if(o&1){let e=y();n(0,"app-edit-journey-geo-details",12),C("journeyChange",function(t){m(e);let a=u(2);return x(a.journey,t)||(a.journey=t),c(t)}),r()}if(o&2){let e=u(2);v("journey",e.journey)}}function to(o,p){o&1&&l(0,"Images")}function io(o,p){if(o&1){let e=y();n(0,"app-edit-journey-images-details",12),C("journeyChange",function(t){m(e);let a=u(2);return x(a.journey,t)||(a.journey=t),c(t)}),r()}if(o&2){let e=u(2);v("journey",e.journey)}}function oo(o,p){o&1&&l(0,"Videos")}function no(o,p){if(o&1){let e=y();n(0,"app-edit-journey-videos-details",12),C("journeyChange",function(t){m(e);let a=u(2);return x(a.journey,t)||(a.journey=t),c(t)}),r()}if(o&2){let e=u(2);v("journey",e.journey)}}function ro(o,p){o&1&&l(0,"Publish")}function ao(o,p){if(o&1){let e=y();n(0,"app-edit-journey-publish-details",12),C("journeyChange",function(t){m(e);let a=u(2);return x(a.journey,t)||(a.journey=t),c(t)}),r()}if(o&2){let e=u(2);v("journey",e.journey)}}function lo(o,p){if(o&1){let e=y();n(0,"section",1)(1,"div",2)(2,"div",3)(3,"h4",4)(4,"span",5),l(5),r(),n(6,"button",6),g("click",function(){m(e);let t=u();return c(t.viewJourney(t.journey()))}),n(7,"mat-icon"),l(8,"visibility"),r()()()()(),n(9,"mat-stepper",7)(10,"mat-step",8),f(11,Ki,1,0,"ng-template",9)(12,Xi,1,2,"ng-template",10),r(),n(13,"mat-step"),f(14,$i,1,0,"ng-template",9)(15,eo,1,1,"ng-template",10),r(),n(16,"mat-step"),f(17,to,1,0,"ng-template",9)(18,io,1,1,"ng-template",10),r(),n(19,"mat-step"),f(20,oo,1,0,"ng-template",9)(21,no,1,1,"ng-template",10),r(),n(22,"mat-step"),f(23,ro,1,0,"ng-template",9)(24,ao,1,1,"ng-template",10),r()()()}if(o&2){let e=u();d(5),_e(e.journey().name),d(),s("matTooltip","View Journey"),d(4),s("completed",e.journey().id)}}var qr=(()=>{class o{constructor(){this.route=h(mt),this.journeyService=h(O),this.router=h(fe),this.journey=E(new Vt),this.mode=E(ie.EDIT),this.router.getCurrentNavigation()?.extras.state&&this.mode.set(this.router.getCurrentNavigation()?.extras.state?.mode??ie.EDIT)}ngOnInit(){this.journeyService.getJourneyById(this.route.snapshot.params.id).subscribe(e=>this.journey.set(e))}viewJourney(e){this.router.navigate(["/journey",e.id,"view"]).then()}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=w({type:o,selectors:[["app-edit-journey"]],decls:1,vars:1,consts:[["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"flex","m-2"],[1,"w-full"],[1,"flex","items-center"],[1,"text-primary","mr-2"],["mat-icon-button","",1,"border","border-primary","rounded-sm","hover:bg-primary","hover:text-white",3,"click","matTooltip"],["orientation","horizontal",1,"journey-edit-stepper"],[3,"completed"],["matStepLabel",""],["matStepContent",""],[3,"journeyChange","journey","mode"],[3,"journeyChange","journey"]],template:function(i,t){i&1&&f(0,lo,25,3,"section",0),i&2&&s("ngIf",t.journey)},dependencies:[Ot,Rt,Zt,Xt,Nt,Lt,$t,ei,M,he,Wt,V,R,G,T],encapsulation:2,changeDetection:0})}}return o})();export{qr as EditJourneyComponent};
