import{a as Te}from"./chunk-5KUFKZE5.js";import{a as ve,b as he,c as Ce,d as we,e as be}from"./chunk-32ADUMU2.js";import{c as se,k as ce}from"./chunk-U6UEU34B.js";import"./chunk-ZOU6NFRL.js";import"./chunk-Y4KNYWAU.js";import{c as Q,g as X,h as Z,i as $,j as ee,k as te,l as ne,n as ie,o as re,p as oe,q as ae,r as le,s as de,t as me,u as pe,v as ue}from"./chunk-BFFUODEK.js";import{b as fe}from"./chunk-BGH3PIZS.js";import{a as Se,b as Me}from"./chunk-MYVTC3PZ.js";import{b as ye,c as ge}from"./chunk-3D7TVU46.js";import{a as _e}from"./chunk-KLVI3GE4.js";import"./chunk-UVNJOFOG.js";import"./chunk-FUA4N2ML.js";import{a as H}from"./chunk-W7UIEDRV.js";import"./chunk-RGNDWIHZ.js";import"./chunk-4IQHS33H.js";import{e as z}from"./chunk-ODW3Q5FM.js";import"./chunk-YW6ECWMG.js";import{l as Y}from"./chunk-W2LWCVAC.js";import{r as K}from"./chunk-RZVCQHV5.js";import{Ia as c,Ib as f,Ja as y,Kb as o,P as D,Qb as O,Rb as q,Sb as k,Tb as t,U as F,Ub as i,Vb as P,Zb as N,cc as v,ea as B,ec as b,fa as R,j as W,lc as _,mc as l,nc as G,oc as V,pb as r,pc as h,qb as J,qc as C,rc as w,tc as U,v as L,ya as A}from"./chunk-K63RDP6Q.js";function Ee(e,d){if(e&1&&(t(0,"div",65),l(1),i()),e&2){let g=b();r(),V(" ",g.successMessage," ")}}function Ne(e,d){if(e&1&&(t(0,"div",66),l(1),i()),e&2){let g=b();r(),V(" ",g.errorMessage," ")}}function je(e,d){if(e&1){let g=N();t(0,"div",15)(1,"div",67)(2,"span",68),l(3,"ID"),i(),t(4,"input",69),w("ngModelChange",function(m){c(g);let n=b();return C(n.journey.id,m)||(n.journey.id=m),y(m)}),i()()()}if(e&2){let g=b();r(4),h("ngModel",g.journey.id)}}function Ie(e,d){e&1&&(t(0,"div"),l(1,"Name is required."),i())}function Je(e,d){e&1&&(t(0,"div"),l(1,"Name must be at least 5 characters long."),i())}function Ve(e,d){e&1&&(t(0,"div"),l(1,"Name must be at most 50 characters long."),i())}function We(e,d){e&1&&(t(0,"div"),l(1,"Category is required."),i())}function Oe(e,d){e&1&&(t(0,"div"),l(1,"Category must be at least 3 characters long."),i())}function qe(e,d){e&1&&(t(0,"div"),l(1,"Category must be at most 16 characters long."),i())}function ke(e,d){e&1&&(t(0,"div"),l(1,"Title is required."),i())}function Pe(e,d){e&1&&(t(0,"div"),l(1,"Title must be at least 10 characters long."),i())}function Le(e,d){e&1&&(t(0,"div"),l(1,"Title must be at most 100 characters long."),i())}function De(e,d){if(e&1&&(t(0,"option",34),l(1),i()),e&2){let g=d.$implicit;o("value",g),r(),G(g)}}function Fe(e,d){e&1&&(t(0,"div"),l(1,"Icon is required."),i())}function Be(e,d){e&1&&(t(0,"div"),l(1,"Memories is required."),i())}function Re(e,d){e&1&&(t(0,"div"),l(1,"Memories must be at least 10 characters long."),i())}function Ae(e,d){e&1&&(t(0,"div"),l(1,"Memories must be at most 5000 characters long."),i())}function Ge(e,d){if(e&1){let g=N();t(0,"mat-chip-row",70),v("removed",function(){let m=c(g).$implicit,n=b();return y(n.removeTag(m))}),l(1),t(2,"button",71),v("click",function(){let m=c(g).$implicit,n=b();return y(n.removeTag(m))}),t(3,"mat-icon"),l(4,"cancel"),i()()()}if(e&2){let g=d.$implicit,p=b();o("highlighted",!0)("editable",!1)("removable",!p.journey.id),r(),V(" ",g," "),r(),o("disabled",p.journey.id!=="")}}function Ue(e,d){e&1&&(t(0,"div"),l(1,"Longitude is required."),i())}function Ke(e,d){e&1&&(t(0,"div"),l(1,"Longitude must be between -180.0 to 180.0."),i())}function Ye(e,d){e&1&&(t(0,"div"),l(1,"Longitude must be between -180.0 to 180.0."),i())}function ze(e,d){e&1&&(t(0,"div"),l(1,"Latitude is required."),i())}function He(e,d){e&1&&(t(0,"div"),l(1,"Latitude must be between -90.0 to 90.0."),i())}function Qe(e,d){e&1&&(t(0,"div"),l(1,"Latitude must be between -9 0.0 to 90.0."),i())}function Xe(e,d){e&1&&(t(0,"div"),l(1,"City is required."),i())}function Ze(e,d){e&1&&(t(0,"div"),l(1,"City must be at least 3 characters long."),i())}function $e(e,d){e&1&&(t(0,"div"),l(1,"City must be at most 50 characters long."),i())}function et(e,d){e&1&&(t(0,"div"),l(1,"Country is required."),i())}function tt(e,d){e&1&&(t(0,"div"),l(1,"Country must be at least 3 characters long."),i())}function nt(e,d){e&1&&(t(0,"div"),l(1,"Country must be at most 50 characters long."),i())}function it(e,d){e&1&&(t(0,"div"),l(1,"Journey Date is required."),i())}function rt(e,d){if(e&1&&(t(0,"button",72),l(1," Save "),i()),e&2){b();let g=_(3);o("disabled",!g.form.valid)}}function ot(e,d){e&1&&(t(0,"button",73),l(1,"Reset"),i())}function at(e,d){if(e&1){let g=N();t(0,"button",74),v("click",function(){c(g);let m=b();return y(m.continue())}),l(1,"Continue"),i()}}var Nt=(()=>{let d=class d{constructor(p,m,n){this.router=p,this.journeyService=m,this.autoCompleteService=n,this.NEW_JOURNEY_PAGE_INFO=z,this.separatorKeysCodes=[13,188,32],this.journey=new fe,this.coordinates=[],this.successMessage="",this.errorMessage="",this.searchCategory=u=>u.pipe(B(""),D(200),F(),R(s=>s.length<1?L([]):this.autoCompleteService.getAvailableCategories(s.toLowerCase()))),this.SUPPORTED_ICONS=Se}setSuccess(p){this.successMessage=p,this.errorMessage=""}setError(p){this.successMessage="",this.errorMessage=p}onSubmit(p){p.submitted&&p.valid&&this.journeyService.createJourney(this.journey).subscribe({next:m=>this.onCreateSuccess(m),error:m=>this.setError(m)})}onCreateSuccess(p){this.setSuccess("Journey added successfully."),this.journey=p}continue(){this.journey.id&&this.router.navigate(["/journey",this.journey.id,"edit"]).then()}addTag(p){let m=(p.value||"").toLowerCase().trim();m&&this.journey.tags.push(m),p.chipInput.clear()}removeTag(p){let m=this.journey.tags.indexOf(p);m>=0&&this.journey.tags.splice(m,1)}refreshMapWithCoordinates(){setTimeout(()=>{this.coordinates.length==2&&(this.journey.location={type:"Point",coordinates:this.coordinates})},100)}swapCoordinates(){let p=this.coordinates[0];this.coordinates[0]=this.coordinates[1],this.coordinates[1]=p,this.refreshMapWithCoordinates()}copyCoordinatesFromGoogleMap(){return W(this,null,function*(){let p=yield navigator.clipboard.readText();if(console.debug("Value copied from clipboard:",p),p){let m=p.split(",");this.coordinates[0]=Number(m.length<2?m[0]:m[1]),this.coordinates[1]=Number(m[0]),this.refreshMapWithCoordinates()}})}copyCoordinatesFromClipboard(){return W(this,null,function*(){let p=yield navigator.clipboard.readText();if(console.debug("Value copied from clipboard:",p),p){let m=p.split(",");this.coordinates[0]=Number(m[0]),this.coordinates[1]=Number(m.length>=2?m[1]:m[0]),this.refreshMapWithCoordinates()}})}};d.\u0275fac=function(m){return new(m||d)(J(Y),J(_e),J(Te))},d.\u0275cmp=A({type:d,selectors:[["app-new-journey"]],standalone:!0,features:[U],decls:129,vars:72,consts:[["journeyForm","ngForm"],["name","ngModel"],["category","ngModel"],["title","ngModel"],["iconType","ngModel"],["description","ngModel"],["chipGrid",""],["longitude","ngModel"],["latitude","ngModel"],["city","ngModel"],["country","ngModel"],["journeyDate","ngModel","d","ngbDatepicker"],[3,"pageInfo"],[1,"container"],[3,"ngSubmit"],[1,"row"],[1,"col-md-8","col-12"],[1,"row","mb-3"],[1,"col-12"],["class","bg-success text-light input-group p-2 border border-2",4,"ngIf"],["class","bg-danger text-light input-group p-2 border border-2",4,"ngIf"],["class","row",4,"ngIf"],[1,"mb-3","col-12","col-md-8"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","","maxlength","50","minlength","5","placeholder","Name your Journey",1,"form-control",3,"ngModelChange","ngModel","readOnly"],[1,"form-text","text-danger",3,"hidden"],[4,"ngIf"],[1,"mb-3","col-12","col-md-4"],["for","category",1,"form-label"],["id","category","type","text","required","","minlength","3","maxlength","50","name","category",1,"form-control",3,"ngModelChange","ngModel","ngbTypeahead","disabled"],["for","title",1,"form-label"],["type","text","id","title","name","title","required","","maxlength","100","minlength","10","placeholder","Shortly describe the Journey",1,"form-control",3,"ngModelChange","ngModel","readOnly"],["for","iconType",1,"form-label"],["id","iconType","aria-label","Icon","required","","name","iconType",1,"form-select","form-select-sm",3,"ngModelChange","ngModel","disabled"],[3,"value"],[1,"mb-3","col"],["for","description",1,"form-label"],["rows","5","id","description","name","description","required","","minlength","10","maxlength","5000","placeholder","Detailed information about the Journey",1,"form-control",3,"ngModelChange","ngModel","readOnly"],[1,"col-12","col-md-6"],["aria-label","Tags"],["color","primary",3,"highlighted","editable","removable"],["placeholder","Favorite Tags",1,"form-control",3,"matChipInputTokenEnd","readOnly","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[1,"input-group","mb-3"],["type","number","placeholder","Longitude","aria-label","Longitude","id","longitude","name","longitude","required","","min","-180.0","max","180.0",1,"form-control",3,"ngModelChange","blur","ngModel","readOnly"],["data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-primary","input-group-text","dropdown-toggle",3,"disabled"],[1,"dropdown-menu"],["role","button",1,"dropdown-item",3,"click"],["type","number","placeholder","Latitude","aria-label","Latitude","id","latitude","name","latitude","required","","min","-90.0","max","90.0",1,"form-control",3,"ngModelChange","blur","ngModel","readOnly"],[1,"form-text","text-danger"],[3,"hidden"],[1,"mb-3","col-md-4"],["for","city",1,"form-label"],["type","text","id","city","name","city","required","","minlength","3","maxlength","50",1,"form-control",3,"ngModelChange","ngModel","readOnly"],["for","country",1,"form-label"],["type","text","id","country","name","country","required","","minlength","3","maxlength","50",1,"form-control",3,"ngModelChange","ngModel","readOnly"],["for","journeyDate",1,"form-label"],[1,"input-group"],["type","text","id","journeyDate","name","journeyDate","required","","placeholder","yyyy-mm-dd","ngbDatepicker","",1,"form-control",3,"ngModelChange","ngModel","readOnly"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click","disabled"],[1,"col-12","col-md-4",2,"position","relative","min-height","25vh"],[1,"h-50",3,"geoJsonData","iconType"],[1,"col-12","d-flex","gap-2","justify-content-center"],["type","submit","class","btn btn-outline-primary",3,"disabled",4,"ngIf"],["type","reset","class","btn btn-outline-info",4,"ngIf"],["type","button","class","btn btn-outline-info",3,"click",4,"ngIf"],[1,"bg-success","text-light","input-group","p-2","border","border-2"],[1,"bg-danger","text-light","input-group","p-2","border","border-2"],[1,"input-group","mb-3","col-12"],["id","idLabel",1,"input-group-text"],["type","text","aria-describedby","idLabel","id","id","name","id","readonly","readonly",1,"form-control",3,"ngModelChange","ngModel"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click","disabled"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"],["type","reset",1,"btn","btn-outline-info"],["type","button",1,"btn","btn-outline-info",3,"click"]],template:function(m,n){if(m&1){let u=N();P(0,"app-page-header",12),t(1,"section",13)(2,"form",14,0),v("ngSubmit",function(){c(u);let a=_(3);return y(n.onSubmit(a))}),t(4,"div",15)(5,"div",16)(6,"div",17)(7,"div",18),f(8,Ee,2,1,"div",19)(9,Ne,2,1,"div",20),i()(),f(10,je,5,1,"div",21),t(11,"div",15)(12,"div",22)(13,"label",23),l(14,"Name"),i(),t(15,"input",24,1),w("ngModelChange",function(a){return c(u),C(n.journey.name,a)||(n.journey.name=a),y(a)}),i(),t(17,"div",25),f(18,Ie,2,0,"div",26)(19,Je,2,0,"div",26)(20,Ve,2,0,"div",26),i()(),t(21,"div",27)(22,"label",28),l(23,"Category"),i(),t(24,"input",29,2),w("ngModelChange",function(a){return c(u),C(n.journey.category,a)||(n.journey.category=a),y(a)}),i(),t(26,"div",25),f(27,We,2,0,"div",26)(28,Oe,2,0,"div",26)(29,qe,2,0,"div",26),i()()(),t(30,"div",15)(31,"div",22)(32,"label",30),l(33,"Title"),i(),t(34,"input",31,3),w("ngModelChange",function(a){return c(u),C(n.journey.title,a)||(n.journey.title=a),y(a)}),i(),t(36,"div",25),f(37,ke,2,0,"div",26)(38,Pe,2,0,"div",26)(39,Le,2,0,"div",26),i()(),t(40,"div",27)(41,"label",32),l(42,"Icon"),i(),t(43,"select",33,4),v("ngModelChange",function(){return c(u),y(n.refreshMapWithCoordinates())}),w("ngModelChange",function(a){return c(u),C(n.journey.icon,a)||(n.journey.icon=a),y(a)}),q(45,De,2,2,"option",34,O),i(),t(47,"div",25),f(48,Fe,2,0,"div",26),i()()(),t(49,"div",15)(50,"div",35)(51,"label",36),l(52,"Memories"),i(),t(53,"textarea",37,5),w("ngModelChange",function(a){return c(u),C(n.journey.description,a)||(n.journey.description=a),y(a)}),i(),t(55,"div",25),f(56,Be,2,0,"div",26)(57,Re,2,0,"div",26)(58,Ae,2,0,"div",26),i()()(),t(59,"div",17)(60,"div",38)(61,"mat-chip-grid",39,6),q(63,Ge,5,5,"mat-chip-row",40,O),t(65,"input",41),v("matChipInputTokenEnd",function(a){return c(u),y(n.addTag(a))}),i()()(),t(66,"div",38)(67,"div",42)(68,"input",43,7),w("ngModelChange",function(a){return c(u),C(n.coordinates[0],a)||(n.coordinates[0]=a),y(a)}),v("blur",function(){return c(u),y(n.refreshMapWithCoordinates())}),i(),t(70,"button",44),l(71," Coordinates "),i(),t(72,"ul",45)(73,"li")(74,"a",46),v("click",function(){return c(u),y(n.copyCoordinatesFromGoogleMap())}),l(75,"Paste coordinates copied from Google Map"),i()(),t(76,"li")(77,"a",46),v("click",function(){return c(u),y(n.copyCoordinatesFromClipboard())}),l(78,"Paste from clipboard"),i()(),t(79,"li")(80,"a",46),v("click",function(){return c(u),y(n.swapCoordinates())}),l(81,"Swap Coordinates"),i()()(),t(82,"input",47,8),w("ngModelChange",function(a){return c(u),C(n.coordinates[1],a)||(n.coordinates[1]=a),y(a)}),v("blur",function(){return c(u),y(n.refreshMapWithCoordinates())}),i()(),t(84,"div",48)(85,"div",49),f(86,Ue,2,0,"div",26)(87,Ke,2,0,"div",26)(88,Ye,2,0,"div",26),i(),t(89,"div",25),f(90,ze,2,0,"div",26)(91,He,2,0,"div",26)(92,Qe,2,0,"div",26),i()()()(),t(93,"div",15)(94,"div",50)(95,"label",51),l(96,"City"),i(),t(97,"input",52,9),w("ngModelChange",function(a){return c(u),C(n.journey.city,a)||(n.journey.city=a),y(a)}),i(),t(99,"div",25),f(100,Xe,2,0,"div",26)(101,Ze,2,0,"div",26)(102,$e,2,0,"div",26),i()(),t(103,"div",50)(104,"label",53),l(105,"Country"),i(),t(106,"input",54,10),w("ngModelChange",function(a){return c(u),C(n.journey.country,a)||(n.journey.country=a),y(a)}),i(),t(108,"div",25),f(109,et,2,0,"div",26)(110,tt,2,0,"div",26)(111,nt,2,0,"div",26),i()(),t(112,"div",50)(113,"label",55),l(114,"Journey Date"),i(),t(115,"div",56)(116,"input",57,11),w("ngModelChange",function(a){return c(u),C(n.journey.journeyDate,a)||(n.journey.journeyDate=a),y(a)}),i(),t(119,"button",58),v("click",function(){c(u);let a=_(118);return y(a.toggle())}),i(),t(120,"div",25),f(121,it,2,0,"div",26),i()()()()(),t(122,"div",59),P(123,"app-world-map",60),i()(),t(124,"div",15)(125,"div",61),f(126,rt,2,1,"button",62)(127,ot,2,0,"button",63)(128,at,2,0,"button",64),i()()()()}if(m&2){let u=_(16),s=_(25),a=_(35),j=_(44),S=_(54),xe=_(62),M=_(69),T=_(83),x=_(98),E=_(107),I=_(117);o("pageInfo",n.NEW_JOURNEY_PAGE_INFO),r(8),o("ngIf",n.successMessage),r(),o("ngIf",n.errorMessage),r(),o("ngIf",n.journey.id),r(5),h("ngModel",n.journey.name),o("readOnly",n.journey.id),r(2),o("hidden",u.valid||u.pristine),r(),o("ngIf",u.errors==null?null:u.errors.required),r(),o("ngIf",u.errors==null?null:u.errors.minlength),r(),o("ngIf",u.errors==null?null:u.errors.maxlength),r(4),h("ngModel",n.journey.category),o("ngbTypeahead",n.searchCategory)("disabled",n.journey.id!=""),r(2),o("hidden",s.valid||s.pristine),r(),o("ngIf",s.errors==null?null:s.errors.required),r(),o("ngIf",s.errors==null?null:s.errors.minlength),r(),o("ngIf",s.errors==null?null:s.errors.maxlength),r(5),h("ngModel",n.journey.title),o("readOnly",n.journey.id),r(2),o("hidden",a.valid||a.pristine),r(),o("ngIf",a.errors==null?null:a.errors.required),r(),o("ngIf",a.errors==null?null:a.errors.minlength),r(),o("ngIf",a.errors==null?null:a.errors.maxlength),r(4),h("ngModel",n.journey.icon),o("disabled",n.journey.id!=""),r(2),k(n.SUPPORTED_ICONS),r(2),o("hidden",j.valid||j.pristine),r(),o("ngIf",j.errors==null?null:j.errors.required),r(5),h("ngModel",n.journey.description),o("readOnly",n.journey.id),r(2),o("hidden",S.valid||S.pristine),r(),o("ngIf",S.errors==null?null:S.errors.required),r(),o("ngIf",S.errors==null?null:S.errors.minlength),r(),o("ngIf",S.errors==null?null:S.errors.maxlength),r(5),k(n.journey.tags),r(2),o("readOnly",n.journey.id)("matChipInputFor",xe)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("matChipInputAddOnBlur",!0),r(3),h("ngModel",n.coordinates[0]),o("readOnly",n.journey.id),r(2),o("disabled",n.journey.id),r(12),h("ngModel",n.coordinates[1]),o("readOnly",n.journey.id),r(3),o("hidden",M.valid||M.pristine),r(),o("ngIf",M.errors==null?null:M.errors.required),r(),o("ngIf",M.errors==null?null:M.errors.min),r(),o("ngIf",M.errors==null?null:M.errors.max),r(),o("hidden",T.valid||T.pristine),r(),o("ngIf",T.errors==null?null:T.errors.required),r(),o("ngIf",T.errors==null?null:T.errors.min),r(),o("ngIf",T.errors==null?null:T.errors.max),r(5),h("ngModel",n.journey.city),o("readOnly",n.journey.id),r(2),o("hidden",x.valid||x.pristine),r(),o("ngIf",x.errors==null?null:x.errors.required),r(),o("ngIf",x.errors==null?null:x.errors.minlength),r(),o("ngIf",x.errors==null?null:x.errors.maxlength),r(4),h("ngModel",n.journey.country),o("readOnly",n.journey.id),r(2),o("hidden",E.valid||E.pristine),r(),o("ngIf",E.errors==null?null:E.errors.required),r(),o("ngIf",E.errors==null?null:E.errors.minlength),r(),o("ngIf",E.errors==null?null:E.errors.maxlength),r(5),h("ngModel",n.journey.journeyDate),o("readOnly",n.journey.id),r(3),o("disabled",n.journey.id),r(),o("hidden",I.valid||I.pristine),r(),o("ngIf",I.errors==null?null:I.errors.required),r(2),o("geoJsonData",n.journey.location)("iconType",n.journey.icon),r(3),o("ngIf",!n.journey.id),r(),o("ngIf",!n.journey.id),r(),o("ngIf",n.journey.id)}},dependencies:[ue,te,re,oe,Q,ne,ie,X,Z,de,me,pe,le,ae,ee,$,ce,ge,ye,be,Ce,we,ve,he,K,se,H,Me],styles:[".map-marker-container[_ngcontent-%COMP%]{min-height:150px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]});let e=d;return e})();export{Nt as NewJourneyComponent};
