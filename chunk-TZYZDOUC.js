import{a as R}from"./chunk-BUFUP4CL.js";import"./chunk-J2HB7WXM.js";import{a as ae}from"./chunk-ZPCDGH36.js";import{a as M}from"./chunk-VSQTGOJW.js";import{a as se}from"./chunk-H5QXDTGA.js";import"./chunk-ID2EJABW.js";import{c as N,g as k,h as te,i as ie,j as P,k as ne,s as V,t as oe,v as re,w as L,x as F}from"./chunk-ZDAO2INT.js";import{p as X}from"./chunk-SNVCUL6N.js";import{a as Y,b as O,c as H,d as le,e as de}from"./chunk-GNUSBCXF.js";import{a as T}from"./chunk-VZJKE2WQ.js";import"./chunk-7XJTF6IN.js";import"./chunk-USEFVD23.js";import"./chunk-RGNDWIHZ.js";import{a as _}from"./chunk-R545OY35.js";import"./chunk-HWFR3VKE.js";import"./chunk-OA7F7OP4.js";import{b as ee}from"./chunk-4HPKFMYY.js";import"./chunk-IV7S22EY.js";import"./chunk-MOYMDOXY.js";import"./chunk-WAAWWZ5Q.js";import{o as D,w as J}from"./chunk-ERNLTT6I.js";import{$b as v,Bb as $,Cc as Z,Db as h,Ec as B,Fa as x,Ga as b,Kb as f,Mb as l,Na as w,Rb as A,Vb as r,Wb as i,Xb as u,ec as g,gc as c,kb as K,ob as d,pc as I,qc as a,rc as W,sa as m,ua as y,xc as C,zc as S}from"./chunk-JNU3RU67.js";var q=class{constructor(o="EMAIL_ADDRESS",s="",n=!0,t=!1,p,E){this.type=o,this.value=s,this.enabled=n,this.verified=t,this.creationDate=p,this.lastUpdateDate=E}};var Q=e=>[e];function be(e,o){e&1&&(r(0,"span",11),u(1,"i",16),a(2," Verified"),i())}function he(e,o){e&1&&(r(0,"span",12),u(1,"i",17),a(2," Not Verified"),i())}function ve(e,o){if(e&1){let s=v();r(0,"button",18),g("click",function(){x(s);let t=c(3);return b(t.verifyEmailAddress())}),a(1," Verify Now "),i()}if(e&2){let s=c(3);l("disableIfNoRoleExists",S(1,Q,s.Role.AUTHENTICATED_USER))}}function ye(e,o){if(e&1){let s=v();r(0,"div",7)(1,"div",8)(2,"div")(3,"span",9),a(4,"Primary:"),i(),u(5,"span",10),i(),f(6,be,3,0,"span",11)(7,he,3,0,"span",12),i(),r(8,"div",13),f(9,ve,2,3,"button",14),r(10,"button",15),g("click",function(){x(s);let t=c(2);return b(t.enableEdit())}),a(11,"Edit "),i()()()}if(e&2){let s=c(2);d(5),l("textContent",s.emailAddressData().value),d(),A(s.emailAddressData().verified?6:7),d(3),l("ngIf",s.emailAddressData().value&&!s.emailAddressData().verified),d(),l("disableIfNoRoleExists",S(4,Q,s.Role.AUTHENTICATED_USER))}}function Ce(e,o){if(e&1){let s=v();r(0,"div",19)(1,"div",20)(2,"span",21),a(3,"Primary"),i(),u(4,"input",22,0),r(6,"div",23)(7,"button",24),g("click",function(){x(s);let t=I(5),p=c(2);return b(p.save(t))}),a(8,"Save "),i()()()()}if(e&2){let s=c(2);d(7),l("disableIfNoRoleExists",S(1,Q,s.Role.AUTHENTICATED_USER))}}function Se(e,o){if(e&1&&(r(0,"section",2)(1,"div",3)(2,"h4",4),a(3,"Email Address"),i()(),f(4,ye,12,6,"div",5)(5,Ce,9,3,"div",6),i()),e&2){let s=c();d(4),l("ngIf",!s.editModeToggle()),d(),l("ngIf",s.editModeToggle())}}var pe=(()=>{let o=class o{constructor(){this.destroyRef=m(w),this.myAccountService=m(T),this.dialog=m(O),this.Role=M,this.emailAddressData=h(new q),this.editModeToggle=h(!1),this.isLoadingCompleted=h(!1)}ngOnInit(){this.fetchSecurityEmailAddress()}fetchSecurityEmailAddress(){this.myAccountService.getSecurityEmailAddress().pipe(_(this.destroyRef)).subscribe({next:n=>this.onSuccess(n),error:n=>this.onError(n)})}onSuccess(n,t=!1){this.emailAddressData.set(n||new q),this.editModeToggle.set(t),this.isLoadingCompleted.set(!0)}onError(n){console.log(n),this.isLoadingCompleted.set(!0)}enableEdit(){this.editModeToggle.set(!0)}save(n){n.validity.valid&&this.editModeToggle()&&this.myAccountService.saveSecurityEmailAddress(n.value).pipe(_(this.destroyRef)).subscribe({next:t=>this.onSuccess(t),error:t=>this.onError(t)})}verifyEmailAddress(){this.dialog.open(de,{disableClose:!0}).afterClosed().subscribe(t=>{this.fetchSecurityEmailAddress()})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=y({type:o,selectors:[["my-email-address-settings"]],inputs:{emailAddressData:[1,"emailAddressData"],editModeToggle:[1,"editModeToggle"],isLoadingCompleted:[1,"isLoadingCompleted"]},outputs:{emailAddressData:"emailAddressDataChange",editModeToggle:"editModeToggleChange",isLoadingCompleted:"isLoadingCompletedChange"},standalone:!0,features:[C],decls:1,vars:1,consts:[["emailAddressElement",""],["class","container d-flex flex-column gradient-bg-light-left mt-2 pt-2 pb-3 border border-opacity-50 rounded-2 shadow border-primary",4,"ngIf"],[1,"container","d-flex","flex-column","gradient-bg-light-left","mt-2","pt-2","pb-3","border","border-opacity-50","rounded-2","shadow","border-primary"],[1,"col"],[1,"gradient-text"],["class","col-12 d-flex flex-column",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12","d-flex","flex-column"],[1,"col","d-inline-flex","flex-row","text-primary","align-items-center"],[1,"small","pe-2"],[1,"fw-bold","pe-2","fs-6",3,"textContent"],[1,"text-success","border","border-success","border-2","rounded-2","p-1","small","text-nowrap"],[1,"text-danger","border","border-danger","border-2","rounded-2","p-1","small","text-nowrap"],[1,"d-inline-flex","gap-2"],["class","btn btn-success",3,"disableIfNoRoleExists","click",4,"ngIf"],["type","button",1,"btn","btn-outline-primary",3,"click","disableIfNoRoleExists"],[1,"bi","bi-check-circle-fill"],[1,"bi","bi-exclamation-octagon-fill"],[1,"btn","btn-success",3,"click","disableIfNoRoleExists"],[1,"col-12"],[1,"col","input-group"],[1,"input-group-text","bg-primary","text-light"],["type","email","required","","email","","id","emailAddressElement","name","emailAddressElement","ngModel","",1,"form-control"],[1,"input-group-text"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click","disableIfNoRoleExists"]],template:function(t,p){t&1&&f(0,Se,6,2,"section",1),t&2&&l("ngIf",p.isLoadingCompleted())},dependencies:[F,N,k,V,oe,P,R,D]});let e=o;return e})();var me=(()=>{let o=class o{constructor(){this.feedbackMessage=$({}),this.destroyRef=m(w),this.dialogRef=m(Y),this.myAccountService=m(T),this.qrCodeData=h()}ngOnInit(){this.myAccountService.generateNewQRCode().pipe(_(this.destroyRef)).subscribe({next:n=>this.qrCodeData.set(n),error:n=>console.log(n)})}activate(n){if(n.validity.valid&&this.qrCodeData()?.secretKey){let t={secretKey:this.qrCodeData().secretKey,code:n.value};this.myAccountService.activateTotp(t).pipe(_(this.destroyRef)).subscribe({next:p=>this.onSuccess(),error:p=>this.feedbackMessage.set({error:"Code Invalid"})})}}onSuccess(){console.log("2FA TOTP activated"),this.feedbackMessage.set({success:"2FA activated successfully"}),this.dialogRef.close(!0)}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=y({type:o,selectors:[["app-totp-activation"]],inputs:{qrCodeData:[1,"qrCodeData"]},outputs:{qrCodeData:"qrCodeDataChange"},standalone:!0,features:[C],decls:68,vars:3,consts:[["totpCode",""],[1,"card","pb-4"],[1,"card-header","bg-primary","text-light"],[1,"card-body"],[1,"card-text"],[1,"step","step-1"],[1,"d-flex","flex-column"],["data-bs-toggle","collapse","href","#collapseStep1","aria-expanded","true","aria-controls","collapseStep1",1,"col-12","gradient-bg-light","p-2","fs-6","text-decoration-none"],["id","collapseStep1",1,"collapse","show"],[1,"small"],["href","https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en","target","_blank"],["href","https://www.microsoft.com/en-us/security/mobile-authenticator-app","target","_blank"],["href","https://authy.com/download/","target","_blank"],[1,"step","step-2"],["data-bs-toggle","collapse","href","#collapseStep2","aria-expanded","true","aria-controls","collapseStep2",1,"col-12","gradient-bg-light","p-2","fs-6","text-decoration-none"],["id","collapseStep2",1,"collapse","show"],[1,"qr-code-section","text-center"],["id","qrCode","width","200px","height","200px","alt","QR",3,"src"],[1,"secret-key-section","text-center"],[1,"fw-bold","text-primary","small"],[3,"textContent"],[1,"step","step-3"],["data-bs-toggle","collapse","href","#collapseStep3","aria-expanded","true","aria-controls","collapseStep3",1,"col-12","gradient-bg-light","p-2","fs-6","text-decoration-none"],["id","collapseStep3",1,"collapse","show"],[1,"input-group","mb-3"],["id","totpCodeLabel",1,"input-group-text"],["type","text","aria-label","6 Digit TOTP Code","aria-describedby","totpCodeLabel","id","totpCode","name","totpCode","ngModel","","required","","pattern","[0-9]{6,6}","maxlength","6","min","6",1,"form-control"],[1,"error-message"],[3,"message"],[1,"d-inline-flex","gap-2"],["type","button","mat-dialog-close","false",1,"btn","btn-outline-danger"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,p){if(t&1){let E=v();r(0,"div",1)(1,"div",2),a(2," Two-Factor Authentication (2FA) - TOTP Activation "),i(),r(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),a(8,"Step 1: Install an Authenticator App "),i()(),r(9,"div",8)(10,"p"),a(11,"To use 2FA, you will need an authenticator app installed on your mobile device. If you don\u2019t already have one, you can download one of these apps: "),i(),r(12,"ol",9)(13,"li")(14,"a",10),a(15,"Google Authenticator (iOS and Android)"),i()(),r(16,"li")(17,"a",11),a(18,"Microsoft Authenticator (iOS and Android)"),i()(),r(19,"li")(20,"a",12),a(21,"Authy (iOS and Android)"),i()()()()(),r(22,"div",13)(23,"div",6)(24,"a",14),a(25,"Step 2: Scan the QR Code "),i()(),r(26,"div",15)(27,"ol")(28,"li"),a(29,"Open your authenticator app."),i(),r(30,"li"),a(31,'Select the option to add a new account. This is usually done by tapping the "+" icon.'),i(),r(32,"li"),a(33,"Choose the option to scan a QR code."),i(),r(34,"li"),a(35,"Use your phone\u2019s camera to scan the QR code displayed below."),i()(),r(36,"div",16),u(37,"img",17),i(),r(38,"div",18)(39,"p",19),a(40,"Or enter code manually: "),u(41,"span",20),i()()()(),r(42,"div",21)(43,"div",6)(44,"a",22),a(45,"Step 3: Enter the Verification Code "),i()(),r(46,"div",23)(47,"ol")(48,"li"),a(49,"After scanning the QR code, your authenticator app will display a 6-digit verification code."),i(),r(50,"li"),a(51,"Enter the 6-digit code into the field below to verify and activate 2FA on your account."),i(),r(52,"li"),a(53,'After entering the verification code, click on the "Activate" button below.'),i(),r(54,"li"),a(55,"You will see a confirmation message once 2FA is successfully activated."),i()(),r(56,"div",24)(57,"span",25),a(58,"Code"),i(),u(59,"input",26,0),i(),r(61,"div",27),u(62,"app-feedback-message",28),i(),r(63,"div",29)(64,"button",30),a(65,"Cancel"),i(),r(66,"button",31),g("click",function(){x(E);let xe=I(60);return b(p.activate(xe))}),a(67,"Activate"),i()()()()()()()}if(t&2){let E,j;d(37),l("src","data:image/png;base64,"+((E=p.qrCodeData())==null?null:E.data),K),d(4),l("textContent",(j=p.qrCodeData())==null?null:j.secretKey),d(21),l("message",p.feedbackMessage())}},dependencies:[H,F,N,k,V,re,L,P,se],styles:[".card-text[_ngcontent-%COMP%]{max-height:90vh;overflow:scroll}.step[_ngcontent-%COMP%]{margin:.5rem 0}"]});let e=o;return e})();var G=(()=>{let o=class o{constructor(){this.dialogRef=m(Y)}confirmAction(){this.dialogRef.close(!0)}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=y({type:o,selectors:[["app-confirmation-dialog"]],standalone:!0,features:[C],decls:14,vars:0,consts:[[1,"card"],[1,"card-header","bg-primary","text-light"],[1,"card-body"],[1,"card-text"],[1,"text-primary"],[1,"small","fw-bold","text-primary"],[1,"d-inline-flex","gap-2","mt-4"],["mat-dialog-close","false",1,"btn","btn-outline-danger"],[1,"btn","btn-primary",3,"click"]],template:function(t,p){t&1&&(r(0,"div",0)(1,"div",1),a(2," Confirmation Required "),i(),r(3,"div",2)(4,"div",3)(5,"p",4),a(6,"Are you sure you want to proceed with this action?"),i(),r(7,"p",5),a(8,"This action cannot be undone."),i()(),r(9,"div",6)(10,"button",7),a(11,"Cancel"),i(),r(12,"button",8),g("click",function(){return p.confirmAction()}),a(13,"Confirm"),i()()()())},dependencies:[H]});let e=o;return e})();var z=e=>[e];function Ee(e,o){e&1&&(r(0,"span",5),u(1,"i",9),a(2," Activated"),i())}function we(e,o){e&1&&(r(0,"span",6),u(1,"i",10),a(2," Not Activated"),i())}function Te(e,o){if(e&1){let s=v();r(0,"div",11)(1,"button",12),g("click",function(){x(s);let t=c(2);return b(t.setupTotp())}),a(2,"Activate "),i()()}if(e&2){let s=c(2);d(),l("disableIfNoRoleExists",S(1,z,s.Role.AUTHENTICATED_USER))}}function Ae(e,o){if(e&1){let s=v();r(0,"div",13)(1,"button",14),g("click",function(){x(s);let t=c(2);return b(t.confirmTotpDeactivation())}),a(2,"Deactivate "),i(),r(3,"button",15),g("click",function(){x(s);let t=c(2);return b(t.testCode())}),a(4,"Test "),i()()}if(e&2){let s=c(2);d(),l("disableIfNoRoleExists",S(2,z,s.Role.AUTHENTICATED_USER)),d(2),l("disableIfNoRoleExists",S(4,z,s.Role.AUTHENTICATED_USER))}}function De(e,o){if(e&1&&(r(0,"section",1)(1,"div",2)(2,"h4",3),a(3,"Authenticator TOTP"),i(),r(4,"div",4),f(5,Ee,3,0,"span",5)(6,we,3,0,"span",6),i()(),f(7,Te,3,3,"div",7)(8,Ae,5,6,"div",8),i()),e&2){let s=c();d(5),A(s.isTotpActive()?5:6),d(2),l("ngIf",!s.isTotpActive()),d(),l("ngIf",s.isTotpActive())}}var ue=(()=>{let o=class o{constructor(){this.destroyRef=m(w),this.dialog=m(O),this.myAccountService=m(T),this.authService=m(ee),this.isTotpActive=h(!1),this.isLoadingCompleted=h(!1),this.Role=M}setupTotp(){this.dialog.open(me,{disableClose:!0}).afterClosed().pipe(_(this.destroyRef)).subscribe(t=>{this.getCurrentTotpStatus()})}ngOnInit(){this.getCurrentTotpStatus()}getCurrentTotpStatus(){this.myAccountService.getTotpStatus().pipe(_(this.destroyRef)).subscribe({next:n=>{this.isTotpActive.set(n.active),this.isLoadingCompleted.set(!0)},error:n=>{console.log(n),this.isLoadingCompleted.set(!0)}})}testCode(){this.dialog.open(le,{disableClose:!0}).afterClosed().pipe(_(this.destroyRef)).subscribe(t=>{console.log("Result:",t)})}confirmTotpDeactivation(){this.dialog.open(G,{disableClose:!0}).afterClosed().pipe(_(this.destroyRef)).subscribe(t=>{t===!0&&this.deactivateTotp()})}deactivateTotp(){this.myAccountService.deactivateTotp().pipe(_(this.destroyRef)).subscribe({next:n=>this.getCurrentTotpStatus(),error:n=>console.log(n)})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=y({type:o,selectors:[["my-totp-settings"]],inputs:{isTotpActive:[1,"isTotpActive"],isLoadingCompleted:[1,"isLoadingCompleted"]},outputs:{isTotpActive:"isTotpActiveChange",isLoadingCompleted:"isLoadingCompletedChange"},standalone:!0,features:[C],decls:1,vars:1,consts:[["class","container d-flex flex-column gradient-bg-light-left mt-2 pt-2 pb-3 border border-opacity-50 rounded-2 shadow border-primary",4,"ngIf"],[1,"container","d-flex","flex-column","gradient-bg-light-left","mt-2","pt-2","pb-3","border","border-opacity-50","rounded-2","shadow","border-primary"],[1,"col","d-inline-flex"],[1,"gradient-text"],[1,"status-badge","text-nowrap"],[1,"text-success","border","border-success","border-2","rounded-2","p-1","small","ms-1","me-1"],[1,"text-danger","border","border-danger","border-2","rounded-2","p-1","small","ms-1","me-1"],["class","activation col",4,"ngIf"],["class","deactivation col d-inline-flex gap-2",4,"ngIf"],[1,"bi","bi-check-circle-fill"],[1,"bi","bi-exclamation-octagon-fill"],[1,"activation","col"],["type","button",1,"btn","btn-success",3,"click","disableIfNoRoleExists"],[1,"deactivation","col","d-inline-flex","gap-2"],["type","button",1,"btn","btn-outline-danger",3,"click","disableIfNoRoleExists"],["type","button",1,"btn","btn-outline-primary",3,"click","disableIfNoRoleExists"]],template:function(t,p){t&1&&f(0,De,9,3,"section",0),t&2&&l("ngIf",p.isLoadingCompleted())},dependencies:[D,R]});let e=o;return e})();var fe=e=>[e];function Me(e,o){e&1&&(r(0,"span",5),u(1,"i",10),a(2," Activated"),i())}function Re(e,o){e&1&&(r(0,"span",6),u(1,"i",11),a(2," Not Activated"),i())}function Ie(e,o){e&1&&(r(0,"div",12)(1,"p"),a(2,"Multi-Factor authentication activation possible only after any one the following security information successfully activated or verified,"),i(),r(3,"ul")(4,"li"),a(5,"Email Address"),i(),r(6,"li"),a(7,"TOTP"),i()()())}function Ne(e,o){e&1&&(r(0,"p",16),a(1," Unable to activate MFA. Please check prerequisite conditions before activating MFA. "),i())}function ke(e,o){if(e&1){let s=v();r(0,"div",13)(1,"button",14),g("click",function(){x(s);let t=c(2);return b(t.enableMfa())}),a(2,"Activate "),i(),f(3,Ne,2,0,"p",15),i()}if(e&2){let s=c(2);d(),l("disableIfNoRoleExists",S(2,fe,s.Role.AUTHENTICATED_USER)),d(2),l("ngIf",s.isErrorOccurred())}}function Pe(e,o){e&1&&(r(0,"p",16),a(1," Unable to deactivate MFA. Please try again. "),i())}function Ve(e,o){if(e&1){let s=v();r(0,"div",17)(1,"button",18),g("click",function(){x(s);let t=c(2);return b(t.confirmMfaDeactivation())}),a(2,"Deactivate "),i(),f(3,Pe,2,0,"p",15),i()}if(e&2){let s=c(2);d(),l("disableIfNoRoleExists",S(2,fe,s.Role.AUTHENTICATED_USER)),d(2),l("ngIf",s.isErrorOccurred())}}function Fe(e,o){if(e&1&&(r(0,"section",1)(1,"div",2)(2,"h4",3),a(3,"Multi-Factor Authentication"),i(),r(4,"div",4),f(5,Me,3,0,"span",5)(6,Re,3,0,"span",6),i()(),f(7,Ie,8,0,"div",7)(8,ke,4,4,"div",8)(9,Ve,4,4,"div",9),i()),e&2){let s,n,t,p,E=c();d(5),A((s=E.userData())!=null&&s.mfaEnabled?5:6),d(2),l("ngIf",!((n=E.userData())!=null&&n.mfaEnabled)),d(),l("ngIf",!((t=E.userData())!=null&&t.mfaEnabled)),d(),l("ngIf",(p=E.userData())==null?null:p.mfaEnabled)}}var ge=(()=>{let o=class o{constructor(){this.Role=M,this.destroyRef=m(w),this.dialog=m(O),this.myAccountService=m(T),this.userData=h(),this.isErrorOccurred=h(!0)}ngOnInit(){this.fetchCurrentUserData()}fetchCurrentUserData(){this.myAccountService.getProfileData().pipe(_(this.destroyRef)).subscribe({next:n=>{this.userData.set(n),this.isErrorOccurred.set(!1)},error:n=>console.log(n)})}enableMfa(){this.changeMfa(!0)}confirmMfaDeactivation(){this.dialog.open(G,{disableClose:!0}).afterClosed().pipe(_(this.destroyRef)).subscribe(t=>{t===!0&&this.changeMfa(!1)})}changeMfa(n){this.myAccountService.changeMfaStatus(n).pipe(_(this.destroyRef)).subscribe({next:t=>this.fetchCurrentUserData(),error:t=>{console.log(t),this.isErrorOccurred.set(!0)}})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=y({type:o,selectors:[["my-mfa-settings"]],inputs:{userData:[1,"userData"],isErrorOccurred:[1,"isErrorOccurred"]},outputs:{userData:"userDataChange",isErrorOccurred:"isErrorOccurredChange"},standalone:!0,features:[C],decls:1,vars:1,consts:[["class","container d-flex flex-column gradient-bg-light-left mt-2 pt-2 pb-3 border border-opacity-50 rounded-2 shadow border-primary",4,"ngIf"],[1,"container","d-flex","flex-column","gradient-bg-light-left","mt-2","pt-2","pb-3","border","border-opacity-50","rounded-2","shadow","border-primary"],[1,"col","d-inline-flex"],[1,"gradient-text"],[1,"status-badge","text-nowrap"],[1,"text-success","border","border-success","border-2","rounded-2","p-1","small","ms-1","me-1"],[1,"text-danger","border","border-danger","border-2","rounded-2","p-1","small","ms-1","me-1"],["class","text-primary small fw-bold",4,"ngIf"],["class","activation col",4,"ngIf"],["class","deactivation col d-inline-flex gap-2",4,"ngIf"],[1,"bi","bi-check-circle-fill"],[1,"bi","bi-exclamation-octagon-fill"],[1,"text-primary","small","fw-bold"],[1,"activation","col"],["type","button",1,"btn","btn-success",3,"click","disableIfNoRoleExists"],["class","text-danger small fw-bold",4,"ngIf"],[1,"text-danger","small","fw-bold"],[1,"deactivation","col","d-inline-flex","gap-2"],["type","button",1,"btn","btn-outline-danger",3,"click","disableIfNoRoleExists"]],template:function(t,p){t&1&&f(0,Fe,10,4,"section",0),t&2&&l("ngIf",p.userData())},dependencies:[D,R]});let e=o;return e})();var Oe=e=>[e];function Ue(e,o){e&1&&(r(0,"span",6),u(1,"i",10),a(2," Complaint"),i())}function qe(e,o){e&1&&(r(0,"span",7),u(1,"i",11),a(2," Non Complaint"),i())}function Le(e,o){if(e&1&&(r(0,"p"),a(1,"Current Password Changed at "),r(2,"span",12),a(3),Z(4,"date"),i()()),e&2){let s,n=c(2);d(3),W(B(4,1,(s=n.userData())==null?null:s.passwordChangedAt,"dd.MM.YYYY, h:mm:ss a z"))}}function Ye(e,o){if(e&1){let s=v();r(0,"div")(1,"button",13),g("click",function(){x(s);let t=c(2);return b(t.editMode.set(!0))}),a(2,"Change Password"),i()()}if(e&2){let s=c(2);d(),l("disableIfNoRoleExists",S(1,Oe,s.Role.AUTHENTICATED_USER))}}function He(e,o){e&1&&(r(0,"p",22),a(1," Invalid Password. Valid Password should contain at least one lowercase, one upper case alphabets, at least one digit, one special character and contains length from 8 to 50. "),i())}function Ge(e,o){if(e&1){let s=v();r(0,"div")(1,"form",14),g("ngSubmit",function(){x(s);let t=I(7),p=c(2);return b(p.savePassword(t))}),r(2,"div")(3,"div",15)(4,"span",16),a(5,"New Password"),i(),u(6,"input",17,0),i(),f(8,He,2,0,"p",18),i(),r(9,"div",19)(10,"button",20),g("click",function(){x(s);let t=c(2);return b(t.editMode.set(!1))}),a(11,"Cancel"),i(),r(12,"button",21),g("click",function(){x(s);let t=I(7),p=c(2);return b(p.savePassword(t))}),a(13,"Save"),i()()()()}if(e&2){let s=c(2);d(8),l("ngIf",s.isErrorOccurred())}}function je(e,o){if(e&1&&(r(0,"section",2)(1,"div",3)(2,"h4",4),a(3,"Password"),i(),r(4,"div",5),f(5,Ue,3,0,"span",6)(6,qe,3,0,"span",7),i()(),r(7,"div",8)(8,"p"),a(9,"We recommend changing your password at least every 3 months to enhance the security of your account."),i(),f(10,Le,5,4,"p",9),i(),f(11,Ye,3,3,"div",9)(12,Ge,14,1,"div",9),i()),e&2){let s,n=c();d(5),A(n.isPasswordComplaint()?5:6),d(5),l("ngIf",(s=n.userData())==null?null:s.passwordChangedAt),d(),l("ngIf",!n.editMode()),d(),l("ngIf",n.editMode())}}var _e=(()=>{let o=class o{constructor(){this.destroyRef=m(w),this.myAccountService=m(T),this.userData=h(),this.isErrorOccurred=h(!0),this.editMode=h(!1),this.Role=M}ngOnInit(){this.fetchCurrentUserData()}fetchCurrentUserData(){this.myAccountService.getProfileData().pipe(_(this.destroyRef)).subscribe({next:n=>{this.userData.set(n),this.isErrorOccurred.set(!1),this.editMode.set(!1)},error:n=>console.log(n)})}savePassword(n){n.validity.valid?this.myAccountService.changePassword(n.value).pipe(_(this.destroyRef)).subscribe({next:t=>this.fetchCurrentUserData(),error:t=>{console.log(t),this.isErrorOccurred.set(!0)}}):this.isErrorOccurred.set(!0)}isPasswordComplaint(){return this.userData()?.passwordChangedAt?new Date().getFullYear()-new Date(Date.parse(this.userData().passwordChangedAt)).getFullYear()*12<=3:!1}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=y({type:o,selectors:[["my-password-settings"]],inputs:{userData:[1,"userData"],isErrorOccurred:[1,"isErrorOccurred"],editMode:[1,"editMode"]},outputs:{userData:"userDataChange",isErrorOccurred:"isErrorOccurredChange",editMode:"editModeChange"},standalone:!0,features:[C],decls:1,vars:1,consts:[["newPassword",""],["class","container d-flex flex-column gradient-bg-light-left mt-2 pt-2 pb-3 border border-opacity-50 rounded-2 shadow border-primary",4,"ngIf"],[1,"container","d-flex","flex-column","gradient-bg-light-left","mt-2","pt-2","pb-3","border","border-opacity-50","rounded-2","shadow","border-primary"],[1,"col","d-inline-flex"],[1,"gradient-text"],[1,"status-badge","text-nowrap"],[1,"text-success","border","border-success","border-2","rounded-2","p-1","small","ms-1","me-1"],[1,"text-danger","border","border-danger","border-2","rounded-2","p-1","small","ms-1","me-1"],[1,"text-primary","small"],[4,"ngIf"],[1,"bi","bi-check-circle-fill"],[1,"bi","bi-exclamation-octagon-fill"],[1,"fw-bold","text-decoration-underline"],["type","button",1,"btn","btn-success",3,"click","disableIfNoRoleExists"],[3,"ngSubmit"],[1,"input-group","mb-3"],["id","labelNewPassword",1,"input-group-text"],["type","password","aria-label","New Password","aria-describedby","labelNewPassword","id","newPassword","name","newPassword","ngModel","","autocomplete","new-password","required","","min","8","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@.#$!%*?&^])[A-Za-z\\d@.#$!%*?&]{8,50}$",1,"form-control"],["class","text-danger small fw-bold",4,"ngIf"],[1,"d-inline-flex","gap-2"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-danger","small","fw-bold"]],template:function(t,p){t&1&&f(0,je,13,4,"section",1),t&2&&l("ngIf",p.userData())},dependencies:[D,R,J,F,ne,N,k,te,V,L,P,ie]});let e=o;return e})();var ni=(()=>{let o=class o{constructor(){this.MY_SECURITY_SETTINGS_PAGE_INFO=X}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=y({type:o,selectors:[["app-my-account-settings-page"]],standalone:!0,features:[C],decls:5,vars:1,consts:[[3,"pageInfo"]],template:function(t,p){t&1&&u(0,"app-page-header",0)(1,"my-password-settings")(2,"my-email-address-settings")(3,"my-totp-settings")(4,"my-mfa-settings"),t&2&&l("pageInfo",p.MY_SECURITY_SETTINGS_PAGE_INFO)},dependencies:[ae,pe,ue,ge,_e]});let e=o;return e})();export{ni as MyAccountSettingsPageComponent};
