import{a as W}from"./chunk-OEK3JCZ4.js";import{a as Q}from"./chunk-Z2T64GWH.js";import"./chunk-UVNJOFOG.js";import"./chunk-FUA4N2ML.js";import{a as K}from"./chunk-W7UIEDRV.js";import"./chunk-4IQHS33H.js";import{i as J}from"./chunk-ODW3Q5FM.js";import{a as Y,b as Z}from"./chunk-TMMSPFEV.js";import{c as H,l as U}from"./chunk-W2LWCVAC.js";import{p as q}from"./chunk-RZVCQHV5.js";import{Eb as B,Ia as C,Ib as h,Ja as k,Jb as z,Kb as d,Lb as w,Mb as N,Nb as D,Pb as v,Pc as $,Ra as M,Rb as j,Sa as O,Sb as V,Tb as o,Ub as s,Uc as E,Vb as m,Ya as R,Zb as L,cc as S,ec as g,lb as X,mc as b,nc as G,oa as T,oc as y,pb as n,qb as l,ra as A,ta as x,tc as f,xb as F,ya as p}from"./chunk-K63RDP6Q.js";function ae(a,t){a&1&&m(0,"div",2)}var ne=new A("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var re=(()=>{let t=class t{constructor(e,r,i,u,_){this._elementRef=e,this._ngZone=r,this._changeDetectorRef=i,this._animationMode=u,this._isNoopAnimation=!1,this._defaultColor="primary",this._value=0,this._bufferValue=0,this.animationEnd=new O,this._mode="determinate",this._transitionendHandler=P=>{this.animationEnd.observers.length===0||!P.target||!P.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation=u==="NoopAnimations",_&&(_.color&&(this.color=this._defaultColor=_.color),this.mode=_.mode||this.mode)}get color(){return this._color||this._defaultColor}set color(e){this._color=e}get value(){return this._value}set value(e){this._value=ee(e||0),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=ee(e||0),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}};t.\u0275fac=function(r){return new(r||t)(l(M),l(F),l($),l(R,8),l(ne,8))},t.\u0275cmp=p({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(r,i){r&2&&(z("aria-valuenow",i._isIndeterminate()?null:i.value)("mode",i.mode),D("mat-"+i.color),N("_mat-animation-noopable",i._isNoopAnimation)("mdc-linear-progress--animation-ready",!i._isNoopAnimation)("mdc-linear-progress--indeterminate",i._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",E],bufferValue:[2,"bufferValue","bufferValue",E],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],standalone:!0,features:[B,f],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(r,i){r&1&&(o(0,"div",0),m(1,"div",1),h(2,ae,1,0,"div",2),s(),o(3,"div",3),m(4,"span",4),s(),o(5,"div",5),m(6,"span",4),s()),r&2&&(n(),w("flex-basis",i._getBufferBarFlexBasis()),n(),v(i.mode==="buffer"?2:-1),n(),w("transform",i._getPrimaryBarTransform()))},styles:[`@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half))}100%{transform:translateX(var(--mdc-linear-progress-primary-full))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-primary-full-neg))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full-neg))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}@media screen and (forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;flex:auto;transform:rotate(180deg);-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}.mdc-linear-progress__bar-inner{border-color:var(--mdc-linear-progress-active-indicator-color)}.mdc-linear-progress__buffer-dots{background-color:var(--mdc-linear-progress-track-color)}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-color:rgba(0,0,0,0);background-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='rgba(244, 67, 54, 0.25)'/%3E%3C/svg%3E")}}.mdc-linear-progress__buffer-bar{background-color:var(--mdc-linear-progress-track-color)}.mdc-linear-progress{height:max(var(--mdc-linear-progress-track-height), var(--mdc-linear-progress-active-indicator-height))}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress{height:4px}}.mdc-linear-progress__bar{height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__bar-inner{border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{height:var(--mdc-linear-progress-track-height)}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-size:10px var(--mdc-linear-progress-track-height)}}.mdc-linear-progress__buffer{border-radius:var(--mdc-linear-progress-track-shape)}.mat-mdc-progress-bar{display:block;text-align:start;--mdc-linear-progress-primary-half: 83.67142%;--mdc-linear-progress-primary-full: 200.611057%;--mdc-linear-progress-secondary-quarter: 37.651913%;--mdc-linear-progress-secondary-half: 84.386165%;--mdc-linear-progress-secondary-full: 160.277782%;--mdc-linear-progress-primary-half-neg: -83.67142%;--mdc-linear-progress-primary-full-neg: -200.611057%;--mdc-linear-progress-secondary-quarter-neg: -37.651913%;--mdc-linear-progress-secondary-half-neg: -84.386165%;--mdc-linear-progress-secondary-full-neg: -160.277782%}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}`],encapsulation:2,changeDetection:0});let a=t;return a})();function ee(a,t=0,c=100){return Math.max(t,Math.min(c,a))}var oe=(a,t)=>t.name;function se(a,t){if(a&1){let c=L();o(0,"div",5),S("click",function(){let r=C(c).$implicit,i=g();return k(i.gotoGallery(i.type,r.name))}),o(1,"div",6)(2,"div",7)(3,"h5",8),b(4),s(),o(5,"button",9),S("click",function(r){let i=C(c).$implicit,u=g();return k(u.gotoTimeline(u.type,i.name,r))}),m(6,"i",10),s()(),o(7,"div",11)(8,"div",12)(9,"h2",13),b(10),s()(),o(11,"div",14)(12,"span"),b(13),s()()(),m(14,"mat-progress-bar",15),s()()}if(a&2){let c=t.$implicit,e=t.$index,r=g();d("ngClass","card-"+e),n(4),G(c.name),n(6),y(" ",c.count," "),n(3),y("",r.getPercentage(c.count,r.total),"%"),n(),d("value",r.getPercentage(c.count,r.total))}}var te=(()=>{let t=class t{comparatorFn(e,r){return e.name.toLowerCase().localeCompare(r.name.toLowerCase())}constructor(e){this.router=e,this.data=[],this.header="",this.total=0}ngOnInit(){this.total=this.data.map(e=>e.count).reduce((e,r)=>e+r)}gotoGallery(e,r){this.router.navigate(["/gallery"],{state:this.getSearchCriteria(e,r)}).then(console.log)}gotoTimeline(e,r,i){return i.stopPropagation(),this.router.navigate(["/timeline"],{queryParams:{[e]:r}}).then(console.log),!1}getSearchCriteria(e,r){let i=new W;switch(e){case"category":i.category=r;break;case"city":i.city=r;break;case"country":i.country=r;break;case"year":i.year=r;break}return i}getPercentage(e,r){return Math.round(e/r*100)}};t.\u0275fac=function(r){return new(r||t)(l(U))},t.\u0275cmp=p({type:t,selectors:[["app-statistics-panel"]],inputs:{data:"data",header:"header",type:"type"},standalone:!0,features:[f],decls:7,vars:3,consts:[[1,"mt-3","gradient-bg-light","p-2","rounded-2","d-flex","flex-column"],[1,"gradient-bg","rounded-2","border","border-primary"],["data-bs-toggle","collapse","role","button","aria-expanded","true",1,"text-decoration-none","text-light","ps-2","w-100","fs-5","d-flex",3,"href"],[1,"card-group","gap-2","show",3,"id"],[1,"card","border","border-primary","border-1","rounded-2",3,"ngClass"],[1,"card","border","border-primary","border-1","rounded-2",3,"click","ngClass"],[1,"card-statistics","p-4"],[1,"mb-4","d-inline-flex","justify-content-around","w-100"],[1,"card-title","gradient-text","mb-0"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-clock-history"],[1,"row","align-items-center","mb-2","d-flex"],[1,"col-8"],[1,"d-flex","align-items-center","mb-0","gradient-text"],[1,"col-4","text-right","gradient-text"],["mode","determinate",3,"value"]],template:function(r,i){r&1&&(o(0,"section",0)(1,"legend",1)(2,"a",2),b(3),s()(),o(4,"div",3),j(5,se,15,5,"div",4,oe),s()()),r&2&&(n(2),d("href","#"+i.header,X),n(),y(" ",i.header," "),n(),d("id",i.header),n(),V(i.data.sort(i.comparatorFn)))},dependencies:[re,q],styles:[".card[_ngcontent-%COMP%]{cursor:pointer;max-width:20rem!important;width:20rem!important;min-width:20rem!important;background-image:linear-gradient(to left top,#5272ea,#8c92f0,#b7b5f5,#ddd9fa,#fff)}.card-0[_ngcontent-%COMP%]{background-image:linear-gradient(to left top,#8375f3,#917ff8,#b7a9fc,#dbd4ff,#fff)}.card-1[_ngcontent-%COMP%]{background-image:linear-gradient(to left top,#cd9cf2,#d5b6f9,#e0cffd,#eee8ff,#fff)}.card-2[_ngcontent-%COMP%]{background-image:linear-gradient(to left top,#eaccf8,#ecdafc,#f0e7fe,#f7f3ff,#fff)}.card-3[_ngcontent-%COMP%]{background-image:linear-gradient(to left top,#8ec5fc,#b6d1fd,#d5dffe,#edeefe,#fff)}.card-4[_ngcontent-%COMP%]{background-image:linear-gradient(to left top,#f0aa9a,#f7bdc3,#f6d3e3,#f5eaf7,#fff)}.card-5[_ngcontent-%COMP%]{background-image:linear-gradient(to left top,#f0cb9a,#ffd0c0,#ffdee5,#feeffa,#fff)}.card-6[_ngcontent-%COMP%]{background-image:linear-gradient(to left top,#e59af0,#e4b6fa,#e8d0ff,#f0e8ff,#fff)}.card-7[_ngcontent-%COMP%]{background-image:linear-gradient(to left top,#f2f65e,#ffdf94,#ffdedf,#fff0ff,#fff)}.card-8[_ngcontent-%COMP%]{background-image:linear-gradient(to left top,#f65e63,#fe87a8,#f7b3db,#f1dcf7,#fff)}"]});let a=t;return a})();var ie=(()=>{let t=class t{constructor(e,r){this.httpClient=e,this.authService=r}getStatistics(){let e=this.authService.getCurrentUserContext();return this.httpClient.get(Y.journeyApi+"/journeys/statistics",{headers:{Authorization:`Bearer ${e.accessToken}`}})}};t.\u0275fac=function(r){return new(r||t)(x(H),x(Z))},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let a=t;return a})();function me(a,t){a&1&&(o(0,"div",1),m(1,"mat-spinner"),s())}function de(a,t){if(a&1&&m(0,"app-statistics-panel",2)(1,"app-statistics-panel",3)(2,"app-statistics-panel",4)(3,"app-statistics-panel",5),a&2){let c=g();d("data",c.statistics.categories),n(),d("data",c.statistics.cities),n(),d("data",c.statistics.countries),n(),d("data",c.statistics.years)}}function le(a,t){a&1&&(o(0,"div",1),m(1,"mat-spinner"),s())}var De=(()=>{let t=class t{constructor(e){this.statisticsService=e,this.STATISTICS_PAGE_INFO=J,this.statistics=void 0,this.isLoadingResults=!0}ngOnInit(){this.statisticsService.getStatistics().subscribe({next:e=>this.onSuccessCallback(e),error:e=>console.error(e)})}onSuccessCallback(e){this.statistics=e,this.isLoadingResults=!1}};t.\u0275fac=function(r){return new(r||t)(l(ie))},t.\u0275cmp=p({type:t,selectors:[["app-statistics"]],standalone:!0,features:[f],decls:4,vars:2,consts:[[3,"pageInfo"],[1,"loading-shade"],["type","category","header","Categories",3,"data"],["type","city","header","Cities",3,"data"],["type","country","header","Countries",3,"data"],["type","year","header","Years",3,"data"]],template:function(r,i){r&1&&(m(0,"app-page-header",0),h(1,me,2,0,"div",1)(2,de,4,4)(3,le,2,0,"div",1)),r&2&&(d("pageInfo",i.STATISTICS_PAGE_INFO),n(),v(i.isLoadingResults?1:i.statistics?2:3))},dependencies:[K,Q,te]});let a=t;return a})();export{De as StatisticsComponent};
