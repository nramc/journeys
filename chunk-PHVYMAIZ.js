import{a as K}from"./chunk-6TOS2MIB.js";import{a as z}from"./chunk-QJGCL7TY.js";import{a as O}from"./chunk-367IZL3P.js";import{c as W,g as j,h as q,i as L,j as U,k as G,s as H,t as Y,w as B}from"./chunk-IP27IR6H.js";import{a as J}from"./chunk-CBL3WTPE.js";import{a as A}from"./chunk-VSQTGOJW.js";import{a as T}from"./chunk-QP7KSUDO.js";import{n as V}from"./chunk-FOKDS6NU.js";import{b as S}from"./chunk-NCKQE7LL.js";import{l as D}from"./chunk-4HGOMXIC.js";import{q as F,r as N}from"./chunk-IUQZ6GD5.js";import{$b as h,Db as k,Ia as f,Ja as u,Kb as b,Mb as s,Qa as P,Vb as e,Wb as r,Xb as d,Xc as w,ec as g,gc as p,nc as v,oc as c,qb as m,qc as I,rb as y,rc as _,sc as x,tc as E,ua as C,vc as R,ya as M}from"./chunk-7QCBVCC3.js";function Q(n,l){if(n&1&&(e(0,"div",12),d(1,"input",27),e(2,"label",28),c(3),r()()),n&2){let i=l.$implicit;m(3),I(" ",i," ")}}function X(n,l){if(n&1&&(e(0,"button",29),c(1,"Save"),r()),n&2){p();let i=v(1);s("disabled",!i.valid)}}function Z(n,l){if(n&1){let i=h();e(0,"button",30),g("click",function(){f(i);let t=p(2);return u(t.cancel())}),c(1,"Cancel"),r()}}function $(n,l){if(n&1){let i=h();e(0,"form",4,0),g("submit",function(){f(i);let t=v(1),o=p();return u(o.save(t))}),e(2,"div",5)(3,"div",6),d(4,"app-feedback-message",7),r()(),e(5,"div",5)(6,"label",8),c(7,"Username"),r(),e(8,"div",9),d(9,"input",10),r()(),e(10,"div",5)(11,"div",11)(12,"div",12),d(13,"input",13),e(14,"label",14),c(15," Active "),r()()()(),e(16,"fieldset",5)(17,"legend",15),c(18,"Role(s)"),r(),e(19,"div",16),b(20,Q,4,1,"div",17),r()(),e(21,"div",5)(22,"label",18),c(23,"Created"),r(),e(24,"div",9),d(25,"input",19),r()(),e(26,"div",5)(27,"label",20),c(28,"Name"),r(),e(29,"div",9)(30,"input",21),E("ngModelChange",function(t){f(i);let o=p();return x(o.mydata.name,t)||(o.mydata.name=t),u(t)}),r()()(),e(31,"div",5)(32,"label",22),c(33,"Email"),r(),e(34,"div",9)(35,"input",23),E("ngModelChange",function(t){f(i);let o=p();return x(o.mydata.emailAddress,t)||(o.mydata.emailAddress=t),u(t)}),r()()(),e(36,"div",5)(37,"div",24),b(38,X,2,1,"button",25)(39,Z,2,0,"button",26),r()()()}if(n&2){let i=p();m(4),s("message",i.feedbackMessage()),m(5),s("value",i.mydata.username),m(4),s("checked",i.mydata.enabled),m(7),s("ngForOf",i.mydata.roles),m(5),s("value",i.mydata.createdDate),m(5),_("ngModel",i.mydata.name),s("disabled",!i.hasAccess()),m(5),_("ngModel",i.mydata.emailAddress),s("disabled",!i.hasAccess())}}var ve=(()=>{let l=class l{constructor(a,t,o){this.myAccountService=a,this.router=t,this.authService=o,this.MY_PROFILE_PAGE_INFO=V,this.destroyRef=C(P),this.feedbackMessage=k({}),this.hasAccess=w(()=>this.authService.hasRole([A.AUTHENTICATED_USER])),this.Role=A}ngOnInit(){this.myAccountService.getProfileData().pipe(O(this.destroyRef)).subscribe({next:a=>this.mydata=a,error:a=>console.error(a)})}save(a){a.valid&&a.dirty&&this.myAccountService.saveProfileData(this.mydata).subscribe({next:t=>this.onSuccessCallback(),error:t=>this.onErrorCallback()})}onSuccessCallback(){this.feedbackMessage.set({success:"Profile data saved successfully"})}onErrorCallback(){this.feedbackMessage.set({error:"Update failed. Please check data."})}cancel(){this.router.navigate(["/"]).then(console.log)}};l.\u0275fac=function(t){return new(t||l)(y(K),y(D),y(S))},l.\u0275cmp=M({type:l,selectors:[["app-my-profile-page"]],standalone:!0,features:[R],decls:3,vars:2,consts:[["profileForm","ngForm"],[3,"pageInfo"],[1,"container","d-flex","justify-content-start"],["class","col-12 col-lg-8",3,"submit",4,"ngIf"],[1,"col-12","col-lg-8",3,"submit"],[1,"row","mb-3"],[1,"col-12"],[3,"message"],["for","username",1,"col-sm-2","col-form-label","text-primary"],[1,"col-sm-10"],["type","text","id","username","disabled","",1,"form-control",3,"value"],[1,"col-sm-10","offset-sm-2"],[1,"form-check"],["type","checkbox","id","isAccountActive","name","isAccountActive","disabled","",1,"form-check-input",3,"checked"],["for","isAccountActive",1,"form-check-label","text-primary"],[1,"col-form-label","col-sm-2","pt-0","text-primary"],[1,"col-sm-10","text-primary"],["class","form-check",4,"ngFor","ngForOf"],["for","createdDate",1,"col-sm-2","col-form-label","text-primary"],["type","datetime-local","id","createdDate","name","createdDate","disabled","","readonly","",1,"form-control",3,"value"],["for","name",1,"col-sm-2","col-form-label","text-primary"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","emailAddress",1,"col-sm-2","col-form-label","text-primary"],["type","email","id","emailAddress","name","emailAddress","required","","email","",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"col","text-center","d-flex","gap-3","justify-content-center"],["type","submit","class","btn btn-primary",3,"disabled",4,"hasWriteAccess"],["type","button","class","btn btn-primary",3,"click",4,"hasWriteAccess"],["type","checkbox","name","roleName","id","roleName","checked","","disabled","",1,"form-check-input"],["for","roleName",1,"form-check-label"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,o){t&1&&(d(0,"app-page-header",1),e(1,"section",2),b(2,$,40,9,"form",3),r()),t&2&&(s("pageInfo",o.MY_PROFILE_PAGE_INFO),m(2),s("ngIf",o.mydata))},dependencies:[T,N,B,G,W,j,q,H,Y,U,L,F,z,J]});let n=l;return n})();export{ve as MyProfilePageComponent};
