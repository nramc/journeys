"use strict";(self.webpackChunkjourney=self.webpackChunkjourney||[]).push([[566],{9566:(A,p,o)=>{o.r(p),o.d(p,{GalleryComponent:()=>x});var h=o(676),g=o(4412),f=o(7786),E=o(9172),y=o(5558),b=o(9437),v=o(7673),C=o(6354),D=o(4016),d=o(177),m=o(8817),l=o(6911),F=o(3928),c=o(6471),j=o(9213),_=o(7336),t=o(4438),I=o(7404),O=o(8498);const R=()=>[1,5,10,20,25];function T(a,s){if(1&a){const e=t.RV6();t.j41(0,"mat-chip-row",22),t.bIt("removed",function(){const n=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.removeTag(n))}),t.EFF(1),t.j41(2,"button",23),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.removeTag(n))}),t.j41(3,"mat-icon"),t.EFF(4,"cancel"),t.k0s()()()}if(2&a){const e=s.$implicit;t.Y8G("highlighted",!0)("editable",!1)("removable",!0),t.R7$(),t.SpI(" ",e," ")}}function M(a,s){if(1&a){const e=t.RV6();t.j41(0,"button",24),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.sortingFieldChangedEvent.next(n))}),t.EFF(1),t.nI1(2,"titlecase"),t.k0s()}if(2&a){const e=s.$implicit;t.R7$(),t.SpI("",t.bMT(2,1,e)," ")}}function P(a,s){if(1&a){const e=t.RV6();t.j41(0,"button",24),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.sortingDirectionChangedEvent.next(n))}),t.EFF(1),t.nI1(2,"uppercase"),t.k0s()}if(2&a){const e=s.$implicit;t.R7$(),t.SpI("",t.bMT(2,1,e)," ")}}function k(a,s){if(1&a&&(t.j41(0,"span",36),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.R7$(),t.JRh(e)}}function B(a,s){if(1&a){const e=t.RV6();t.j41(0,"button",37),t.bIt("click",function(n){t.eBV(e);const r=t.XpG().$implicit,u=t.XpG();return t.Njj(u.editDetails(r,n))}),t.EFF(1,"Edit "),t.k0s()}}function G(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",25)(1,"div",26),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.viewDetails(n))}),t.nrm(2,"img",27),t.j41(3,"div",28)(4,"h5",29),t.EFF(5),t.k0s(),t.j41(6,"p",30),t.EFF(7),t.k0s(),t.j41(8,"p",30),t.DNE(9,k,2,1,"span",31),t.k0s(),t.j41(10,"div",32)(11,"div",33)(12,"p",34)(13,"small"),t.EFF(14),t.nI1(15,"date"),t.k0s()(),t.j41(16,"p",34)(17,"small"),t.EFF(18),t.k0s()(),t.j41(19,"p",34)(20,"small"),t.EFF(21),t.k0s()(),t.j41(22,"p",34)(23,"small"),t.EFF(24),t.k0s()()(),t.j41(25,"small"),t.DNE(26,B,2,0,"button",35),t.k0s()()()()()}if(2&a){const e=s.$implicit,i=t.XpG();t.R7$(2),t.Y8G("src",e.thumbnail,t.B4B)("alt",e.thumbnail),t.R7$(3),t.JRh(e.name),t.R7$(2),t.JRh(e.title),t.R7$(2),t.Y8G("ngForOf",e.tags)("ngForTrackBy",i.trackTagByFn),t.R7$(5),t.JRh(t.i5U(15,10,e.journeyDate,"dd.MM.YYYY")),t.R7$(4),t.JRh(e.city),t.R7$(3),t.JRh(e.country),t.R7$(3),t.JRh(e.category)}}let x=(()=>{class a{constructor(e,i){this.journeyService=e,this.router=i,this.GALLERY_PAGE_INFO=h.cG,this.sortableFields=["journeyDate","name","title","city","country","category","location"],this.sortingFieldChangedEvent=new g.t("journeyDate"),this.sortableDirections=["asc","desc"],this.sortingDirectionChangedEvent=new g.t("desc"),this.isLoadingResults=!1,this.defaultPageSize=10,this.totalElements=0,this.data=[],this.trackJourneyByFn=(n,r)=>r.id,this.trackTagByFn=(n,r)=>r,this.separatorKeysCodes=[_.Fm,_.KE,_.t6],this.tags=[],this.tagsCriteriaChange=new g.t([])}ngAfterViewInit(){(0,f.h)(this.paginator.page,this.sortingFieldChangedEvent,this.sortingDirectionChangedEvent,this.tagsCriteriaChange).pipe((0,E.Z)(),(0,y.n)(()=>(this.isLoadingResults=!0,this.journeyService.findJourneyByQuery("",this.sortingFieldChangedEvent.getValue(),this.sortingDirectionChangedEvent.getValue(),this.paginator.pageIndex,this.paginator.pageSize,!0,this.tags).pipe((0,b.W)(()=>(0,v.of)(null))))),(0,C.T)(e=>(this.isLoadingResults=!1,e))).subscribe(e=>this.onSuccess(e))}onSuccess(e){this.totalElements=e?.totalElements??0,this.data=e?.content??[]}ngOnInit(){this.journeyService.findJourneyByQuery("","journeyDate","desc",0,this.defaultPageSize,!0).subscribe(e=>this.onSuccess(e))}viewDetails(e){this.router.navigate(["/journey",e.id,"view"]).then()}editDetails(e,i){return i.stopPropagation(),this.router.navigate(["/journey",e.id,"edit"]).then(),!1}addTag(e){const i=(e.value||"").trim();i&&(this.tags.push(i),this.tagsCriteriaChange.next(this.tags)),e.chipInput.clear()}removeTag(e){const i=this.tags.indexOf(e);i>=0&&(this.tags.splice(i,1),this.tagsCriteriaChange.next(this.tags))}static#t=this.\u0275fac=function(i){return new(i||a)(t.rXU(I.K),t.rXU(O.Ix))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-gallery"]],viewQuery:function(i,n){if(1&i&&t.GBs(m.iy,5),2&i){let r;t.mGM(r=t.lsd())&&(n.paginator=r.first)}},standalone:!0,features:[t.aNF],decls:33,vars:17,consts:[["chipGrid",""],[3,"pageInfo"],[1,"container"],[1,"row"],["aria-label","Tags"],[1,"col-12"],[1,"form-floating"],["placeholder","Filter by Tags","autocomplete","off","id","tagsInput",1,"form-control","border","border-2","border-primary","rounded-4",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],["for","tagsInput"],["color","primary",3,"highlighted","editable","removable"],[1,"col-12","col-md-8","mb-md-3","me-0","pe-0"],["aria-label","Select page","color","primary",1,"paginator","me-0",3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"col-12","col-md-4","sorting","mb-3","me-0"],["ngbDropdown","",1,"d-inline-block","me-1"],["type","button","id","dropdownSortingField","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingField"],["ngbDropdownItem",""],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownSortingDirection","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingDirection"],[1,"card-group","justify-content-center","align-items-center"],["class","m-0",4,"ngFor","ngForOf","ngForTrackBy"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click"],["ngbDropdownItem","",3,"click"],[1,"m-0"],["role","link",1,"card","bg-dark","text-bg-dark","text-white",3,"click"],[1,"card-img",3,"src","alt"],[1,"card-img-overlay","d-flex","flex-column","align-self-stretch","card-text-wrapper"],[1,"card-title"],[1,"card-text"],["class","badge bg-dark bg-opacity-25 border-dark rounded-pill border me-1 fw-normal",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-inline-flex","footer-wrapper","mt-auto","flex-nowrap","flex-row","justify-content-between"],[1,"d-inline-flex","gap-1"],[1,"small","border","border-light","border-1","rounded-2","ps-1","pe-1","border-opacity-50"],["type","button","class","btn btn-sm btn-outline-success ms-1",3,"click",4,"hasWriteAccess"],[1,"badge","bg-dark","bg-opacity-25","border-dark","rounded-pill","border","me-1","fw-normal"],["type","button",1,"btn","btn-sm","btn-outline-success","ms-1",3,"click"]],template:function(i,n){if(1&i){const r=t.RV6();t.nrm(0,"app-page-header",1),t.j41(1,"section",2)(2,"div",3)(3,"mat-chip-grid",4,0)(5,"div",5)(6,"div",6)(7,"input",7),t.bIt("matChipInputTokenEnd",function($){return t.eBV(r),t.Njj(n.addTag($))}),t.k0s(),t.j41(8,"label",8),t.EFF(9,"Filter by Tags"),t.k0s()()(),t.j41(10,"div",5),t.Z7z(11,T,5,4,"mat-chip-row",9,t.fX1),t.k0s()()(),t.j41(13,"div",3)(14,"div",10),t.nrm(15,"mat-paginator",11),t.k0s(),t.j41(16,"div",12)(17,"div",13)(18,"button",14),t.EFF(19),t.nI1(20,"titlecase"),t.k0s(),t.j41(21,"div",15),t.Z7z(22,M,3,3,"button",16,t.fX1),t.k0s()(),t.j41(24,"div",17)(25,"button",18),t.EFF(26),t.nI1(27,"uppercase"),t.k0s(),t.j41(28,"div",19),t.Z7z(29,P,3,3,"button",16,t.fX1),t.k0s()()()(),t.j41(31,"div",20),t.DNE(32,G,27,13,"div",21),t.k0s()()}if(2&i){const r=t.sdS(4);t.Y8G("pageInfo",n.GALLERY_PAGE_INFO),t.R7$(7),t.Y8G("matChipInputFor",r)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("matChipInputAddOnBlur",!0),t.R7$(4),t.Dyx(n.tags),t.R7$(4),t.Y8G("length",n.totalElements)("pageSize",n.defaultPageSize)("pageSizeOptions",t.lJ4(16,R))("showFirstLastButtons",!0),t.R7$(4),t.SpI(" ",t.bMT(20,12,n.sortingFieldChangedEvent.getValue())," "),t.R7$(3),t.Dyx(n.sortableFields),t.R7$(4),t.SpI(" ",t.bMT(27,14,n.sortingDirectionChangedEvent.getValue())," "),t.R7$(3),t.Dyx(n.sortableDirections),t.R7$(3),t.Y8G("ngForOf",n.data)("ngForTrackBy",n.trackJourneyByFn)}},dependencies:[D.y,d.Sq,m.iy,d.vh,l.zH,l.tg,l.do,l.U0,l._H,d.PV,d.Pc,F.r,c.YN,c.HW,c.D7,c.Zv,c.jH,j.An],styles:[".sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#4246d7a6 1%,#f8f9fa1a 80%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.paginator[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.mat-mdc-select[_ngcontent-%COMP%]{color:#f5f5f5!important}.card[_ngcontent-%COMP%]{width:30rem;height:15rem;margin:0 .5rem .5rem 0!important;cursor:pointer}.card-img[_ngcontent-%COMP%]{opacity:75%;width:100%;height:100%}.card-text-wrapper[_ngcontent-%COMP%]{background:#0003}@media (max-width: 575.98px){.card[_ngcontent-%COMP%]{width:100%;height:15rem;margin:0 0 .5rem!important}.sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%)}}"]})}return a})()}}]);