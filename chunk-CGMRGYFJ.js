import{a as ve}from"./chunk-OEK3JCZ4.js";import{a as G}from"./chunk-M5QZ5KT4.js";import"./chunk-RQB4IQDK.js";import{a as ue,b as ge,c as he,d as ye,e as _e}from"./chunk-GUUIMMRW.js";import{b as Ce,c as fe,d as we,f as Me}from"./chunk-KWZN3HW5.js";import{a as de}from"./chunk-VOKTB6WT.js";import{a as te,b as ie,c as re,d as ne}from"./chunk-X4YWCMOA.js";import"./chunk-HF4ID6BO.js";import"./chunk-GC4JW6KG.js";import"./chunk-ULILULOE.js";import"./chunk-ZJJPAHRG.js";import"./chunk-VAH4ZTPW.js";import{b as le}from"./chunk-BY6IVCEU.js";import{i as oe}from"./chunk-SJWOULD4.js";import"./chunk-WBKCVS7C.js";import{h as q}from"./chunk-YFHJRQYX.js";import{b as me,c as ce}from"./chunk-JJZM7JVF.js";import{f as se,g as pe}from"./chunk-GT7IT55J.js";import"./chunk-4TND24ZO.js";import"./chunk-D7XGIYVN.js";import"./chunk-ZAX7OA72.js";import"./chunk-7FVIKGCA.js";import{b as $,g as X,j as Z,u as ee}from"./chunk-3C2RYE65.js";import"./chunk-WRXHVNTC.js";import{b as Y}from"./chunk-ZJIA7AIR.js";import"./chunk-R2E2SYBS.js";import"./chunk-BLXKHFKW.js";import{a as U}from"./chunk-BRDESO4K.js";import{h as ae}from"./chunk-7U2D3XMU.js";import"./chunk-ODEESR7L.js";import{c as K}from"./chunk-5WRF2F2L.js";import"./chunk-LDTKISGV.js";import{o as Q,p as H}from"./chunk-7WENEZDG.js";import{$ as A,Bc as v,Cc as b,Dc as S,Ea as T,Hc as z,I as P,L as j,Lc as E,Mc as I,Tb as F,Ub as C,Vb as f,Wb as y,Xb as i,Yb as o,Zb as V,Zc as J,ba as L,bc as w,ca as O,gc as g,ic as M,kb as a,m as D,pb as k,qc as W,rc as N,sc as x,u as B,ua as m,va as c,wb as R,xc as h,zc as _}from"./chunk-NFRKRT64.js";var be=()=>[1,5,10,20,25],Se=(l,s)=>s.id;function Ee(l,s){if(l&1){let p=w();i(0,"mat-chip-row",25),g("removed",function(){let t=m(p).$implicit,e=M();return c(e.removeTag(t))}),h(1),i(2,"button",26),g("click",function(){let t=m(p).$implicit,e=M();return c(e.removeTag(t))}),i(3,"mat-icon"),h(4,"cancel"),o()()()}if(l&2){let p=s.$implicit;y("highlighted",!0)("editable",!1)("removable",!0),a(),_(" ",p," ")}}function Ie(l,s){if(l&1){let p=w();i(0,"button",27),g("click",function(){let t=m(p).$implicit,e=M();return c(e.sortingFieldChangedEvent.next(t))}),h(1),E(2,"titlecase"),o()}if(l&2){let p=s.$implicit;a(),_(" ",I(2,1,p.label)," ")}}function Te(l,s){if(l&1){let p=w();i(0,"button",27),g("click",function(){let t=m(p).$implicit,e=M();return c(e.sortingDirectionChangedEvent.next(t))}),h(1),E(2,"uppercase"),o()}if(l&2){let p=s.$implicit;a(),_(" ",I(2,1,p)," ")}}function Fe(l,s){if(l&1&&V(0,"app-journey-card-view",24),l&2){let p=s.$implicit;y("journey",p)}}var ot=(()=>{let s=class s{constructor(r,t){this.journeyService=r,this.sortableFields=[{label:"Journey Date",key:"journeyDate"},{label:"Journey Name",key:"name"},{label:"Geo Title",key:"geoDetails.title"},{label:"City",key:"geoDetails.city"},{label:"Country",key:"geoDetails.country"},{label:"Category",key:"geoDetails.category"},{label:"Geo Location",key:"geoDetails.location"}],this.sortingFieldChangedEvent=new D({label:"Journey Date",key:"journeyDate"}),this.sortableDirections=["asc","desc"],this.sortingDirectionChangedEvent=new D("desc"),this.defaultPageSize=10,this.separatorKeysCodes=[13,188,32],this.searchCriteria=T(new ve),this.paginator=J.required(G),this.tags=T([]),this.tagsObservable=Y(this.tags),this.searchResult=T({totalElements:0,data:[]}),this.GALLERY_PAGE_INFO=q,t.getCurrentNavigation()?.extras.state&&this.searchCriteria.set(t.getCurrentNavigation()?.extras.state)}ngAfterViewInit(){this.search()}search(){P(this.paginator().page,this.sortingFieldChangedEvent,this.sortingDirectionChangedEvent,this.tagsObservable).pipe(L(),O(()=>this.journeyService.findJourneyByQuery(this.searchCriteria(),this.sortingFieldChangedEvent.getValue().key,this.sortingDirectionChangedEvent.getValue(),this.paginator().pageIndex,this.paginator().pageSize,!0,this.tags()).pipe(A(1),j(()=>B(null))))).subscribe(r=>this.onSuccess(r))}onSuccess(r){this.searchResult.set({totalElements:r?.totalElements??0,data:r?.content??[]})}ngOnInit(){this.journeyService.findJourneyByQuery(this.searchCriteria(),"journeyDate","desc",0,this.defaultPageSize,!0).subscribe(r=>this.onSuccess(r))}addTag(r){let t=(r.value||"").trim();t&&this.tags.update(e=>[...e,t]),r.chipInput.clear()}removeTag(r){this.tags.update(t=>t.filter(e=>e!==r))}};s.\u0275fac=function(t){return new(t||s)(k(oe),k(K))},s.\u0275cmp=R({type:s,selectors:[["app-gallery"]],viewQuery:function(t,e){t&1&&W(e.paginator,G,5),t&2&&N()},decls:50,vars:21,consts:[["chipGrid",""],["sortingFieldMenu","matMenu"],["sortingDirectionMenu","matMenu"],[3,"pageInfo"],[1,"container","py-2"],["id","searchFields"],[1,"text-sm","font-normal"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mt-3"],["appearance","outline",1,"w-full"],["matInput","","type","text","id","categoryInput","placeholder","Category",3,"ngModelChange","change","ngModel"],["matInput","","type","text","id","cityInput","placeholder","City",3,"ngModelChange","change","ngModel"],["matInput","","type","text","id","countryInput","placeholder","Country",3,"ngModelChange","change","ngModel"],["matInput","","type","text","id","yearInput","placeholder","Year",3,"ngModelChange","change","ngModel"],[1,"container","p-0","m-0"],["aria-label","Tags",1,"w-full"],["matInput","","id","tagsInput","placeholder","Filter by Tags",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[1,"flex","flex-wrap","gap-1","m-0"],["color","primary",3,"highlighted","editable","removable"],[1,"m-0","p-0","flex","justify-center","max-sm:flex-col","text-center","content-center","items-center"],["aria-label","Select page","color","primary",1,"paginator",3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"inline-flex"],["mat-menu-item",""],["mat-button","",1,"text-primary","border","border-primary","bg-white","px-2","py-1","rounded-md","shadow-sm","hover:bg-gray-100",3,"matMenuTriggerFor"],[1,"container","flex","gap-2","items-center","justify-center","flex-wrap"],[1,"max-sm:w-full",3,"journey"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click"],["mat-menu-item","",3,"click"]],template:function(t,e){if(t&1){let d=w();i(0,"header"),V(1,"app-page-header",3),o(),i(2,"main")(3,"section",4)(4,"mat-expansion-panel",5)(5,"mat-expansion-panel-header")(6,"mat-panel-title",6)(7,"span"),h(8,"Filter"),o()()(),i(9,"div",7)(10,"mat-form-field",8)(11,"input",9),S("ngModelChange",function(n){return m(d),b(e.searchCriteria().category,n)||(e.searchCriteria().category=n),c(n)}),g("change",function(){return m(d),c(e.search())}),o()(),i(12,"mat-form-field",8)(13,"input",10),S("ngModelChange",function(n){return m(d),b(e.searchCriteria().city,n)||(e.searchCriteria().city=n),c(n)}),g("change",function(){return m(d),c(e.search())}),o()(),i(14,"mat-form-field",8)(15,"input",11),S("ngModelChange",function(n){return m(d),b(e.searchCriteria().country,n)||(e.searchCriteria().country=n),c(n)}),g("change",function(){return m(d),c(e.search())}),o()(),i(16,"mat-form-field",8)(17,"input",12),S("ngModelChange",function(n){return m(d),b(e.searchCriteria().year,n)||(e.searchCriteria().year=n),c(n)}),g("change",function(){return m(d),c(e.search())}),o()()(),i(18,"div",13)(19,"mat-chip-grid",14,0)(21,"mat-form-field",8)(22,"input",15),g("matChipInputTokenEnd",function(n){return m(d),c(e.addTag(n))}),o()(),i(23,"div",16),C(24,Ee,5,4,"mat-chip-row",17,F),o()()()()(),i(26,"section",18),V(27,"mat-paginator",19),i(28,"div",20)(29,"mat-menu",null,1),C(31,Ie,3,3,"button",21,F),o(),i(33,"button",22),h(34),E(35,"titlecase"),i(36,"mat-icon"),h(37,"arrow_drop_down"),o()(),i(38,"mat-menu",null,2),C(40,Te,3,3,"button",21,F),o(),i(42,"button",22),h(43),E(44,"uppercase"),i(45,"mat-icon"),h(46,"arrow_drop_down"),o()()()(),i(47,"section",23),C(48,Fe,1,1,"app-journey-card-view",24,Se),o()()}if(t&2){let d=x(20),u=x(30),n=x(39);a(),y("pageInfo",e.GALLERY_PAGE_INFO),a(10),v("ngModel",e.searchCriteria().category),a(2),v("ngModel",e.searchCriteria().city),a(2),v("ngModel",e.searchCriteria().country),a(2),v("ngModel",e.searchCriteria().year),a(5),y("matChipInputFor",d)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),a(2),f(e.tags()),a(3),y("length",e.searchResult().totalElements)("pageSize",e.defaultPageSize)("pageSizeOptions",z(20,be))("showFirstLastButtons",!0),a(4),f(e.sortableFields),a(2),y("matMenuTriggerFor",u),a(),_(" ",I(35,16,e.sortingFieldChangedEvent.getValue().label)," "),a(6),f(e.sortableDirections),a(2),y("matMenuTriggerFor",n),a(),_(" ",I(44,18,e.sortingDirectionChangedEvent.getValue())," "),a(5),f(e.searchResult().data)}},dependencies:[G,Q,H,_e,he,ye,ue,ge,U,ee,$,X,Z,le,pe,se,ce,me,Me,Ce,fe,we,ae,ne,ie,te,re,de],styles:[".paginator[_ngcontent-%COMP%]{text-align:center;align-items:center;justify-content:center!important;display:flex;font-weight:500}"],changeDetection:0});let l=s;return l})();export{ot as GalleryComponent};
