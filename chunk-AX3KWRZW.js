import{a as pe}from"./chunk-OEK3JCZ4.js";import{b as me,c as ce,d as le,f as de}from"./chunk-XSH6NE7B.js";import{a as se}from"./chunk-2F4AARJE.js";import"./chunk-57NIMCP4.js";import"./chunk-QZR2S74K.js";import"./chunk-A3XZBNNG.js";import"./chunk-F5X5MWHG.js";import{a as Q}from"./chunk-MD5F3S5N.js";import"./chunk-QJV62YOW.js";import"./chunk-H4PKCQX7.js";import"./chunk-XX4IC5FV.js";import{i as q}from"./chunk-YFHJRQYX.js";import"./chunk-QLQOFAIY.js";import"./chunk-CFUYXJ76.js";import"./chunk-L6DJFSIC.js";import{a as W}from"./chunk-6ULNC74Z.js";import{c as $}from"./chunk-DNEPPB4M.js";import{a as ee,b as re,d as te,f as ae,g as ie,j as ne,k as oe}from"./chunk-R7RXGC3S.js";import{c as J}from"./chunk-UJZZXKND.js";import{a as Z,b as U}from"./chunk-3SCI6QDE.js";import{e as Y,g as K}from"./chunk-DPXNYG4I.js";import{e as L}from"./chunk-TS6BF4HD.js";import{c as H}from"./chunk-G3CP2NQH.js";import{f as G}from"./chunk-CGJVCASA.js";import"./chunk-T257ZYH5.js";import{Eb as X,Fb as B,Ma as A,Qb as R,Rb as b,Sb as _,Tc as N,Ub as D,Vb as F,Wb as d,Xb as s,Yb as m,Yc as f,Zb as c,ad as V,bc as O,gc as x,gd as S,ic as u,ja as E,kb as o,ma as P,na as h,oa as l,ob as I,tc as C,ua as y,uc as z,va as v,wb as g,wc as j,xc as p,yc as w,zc as M}from"./chunk-BQWC7YH4.js";var ge=(()=>{let a=class a{constructor(r,e){this.httpClient=r,this.authService=e}getStatistics(){let r=this.authService.getCurrentUserContext();return this.httpClient.get(W.journeyApi+"/journeys/statistics",{headers:{Authorization:`Bearer ${r.accessToken}`}})}};a.\u0275fac=function(e){return new(e||a)(h(G),h(J))},a.\u0275prov=E({token:a,factory:a.\u0275fac,providedIn:"root"});let i=a;return i})();function _e(i,a){i&1&&c(0,"div",2)}var he=new P("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var fe=(()=>{class i{_elementRef=l(A);_ngZone=l(B);_changeDetectorRef=l(V);_renderer=l(I);_cleanupTransitionEnd;constructor(){let t=l(he,{optional:!0});t&&(t.color&&(this.color=this._defaultColor=t.color),this.mode=t.mode||this.mode)}_isNoopAnimation=L();get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";get value(){return this._value}set value(t){this._value=ue(t||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(t){this._bufferValue=ue(t||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new X;get mode(){return this._mode}set mode(t){this._mode=t,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=t=>{this.animationEnd.observers.length===0||!t.target||!t.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(r){return new(r||i)};static \u0275cmp=g({type:i,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(r,e){r&2&&(R("aria-valuenow",e._isIndeterminate()?null:e.value)("mode",e.mode),j("mat-"+e.color),z("_mat-animation-noopable",e._isNoopAnimation)("mdc-linear-progress--animation-ready",!e._isNoopAnimation)("mdc-linear-progress--indeterminate",e._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",S],bufferValue:[2,"bufferValue","bufferValue",S],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(r,e){r&1&&(s(0,"div",0),c(1,"div",1),b(2,_e,1,0,"div",2),m(),s(3,"div",3),c(4,"span",4),m(),s(5,"div",5),c(6,"span",4),m()),r&2&&(o(),C("flex-basis",e._getBufferBarFlexBasis()),o(),_(e.mode==="buffer"?2:-1),o(),C("transform",e._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return i})();function ue(i,a=0,t=100){return Math.max(a,Math.min(t,i))}var ye=(i,a)=>a.name;function ve(i,a){if(i&1){let t=O();s(0,"mat-card",5)(1,"mat-card-header"),c(2,"div",6),s(3,"mat-card-title")(4,"h5",7),p(5),m()()(),s(6,"mat-card-content")(7,"div",8)(8,"h2",9),p(9),m(),s(10,"span",10),p(11),m()(),c(12,"mat-progress-bar",11),m(),s(13,"mat-card-actions",12)(14,"button",13),x("click",function(e){let n=y(t).$implicit,T=u();return v(T.gotoTimeline(T.type(),n.name,e))}),s(15,"mat-icon",14),p(16,"history"),m()(),s(17,"button",15),x("click",function(){let e=y(t).$implicit,n=u();return v(n.gotoGallery(n.type(),e.name))}),s(18,"mat-icon",14),p(19,"photo_library"),m()()()()}if(i&2){let t=a.$implicit,r=u();o(5),w(t.name),o(4),w(t.count),o(2),M("",r.getPercentage(t.count,r.totalCount()),"%"),o(),d("value",r.getPercentage(t.count,r.totalCount()))}}var be=(()=>{let a=class a{constructor(){this.router=l(H),this.expand=f(!1),this.data=f.required(),this.header=f.required(),this.type=f.required(),this.totalCount=N(()=>this.data().map(r=>r.count).reduce((r,e)=>r+e,0))}comparatorFn(r,e){return r.name.toLowerCase().localeCompare(e.name.toLowerCase())}gotoGallery(r,e){this.router.navigate(["/gallery"],{state:this.getSearchCriteria(r,e)}).then(console.log)}gotoTimeline(r,e,n){return n.stopPropagation(),this.router.navigate(["/timeline"],{queryParams:{[r]:e}}).then(console.log),!1}getSearchCriteria(r,e){let n=new pe;switch(r){case"category":n.category=e;break;case"city":n.city=e;break;case"country":n.country=e;break;case"year":n.year=e;break}return n}getPercentage(r,e){return Math.round(r/e*100)}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=g({type:a,selectors:[["app-statistics-panel"]],inputs:{expand:[1,"expand"],data:[1,"data"],header:[1,"header"],type:[1,"type"]},decls:9,vars:2,consts:[[1,"mt-3","p-2","rounded-lg","flex","flex-col"],[3,"expanded"],[1,"bg-gradient-to-r","from-app-blue","to-blue-500","rounded-lg","border","border-primary"],[1,"text-decoration-none","text-white","px-3","py-2","w-full","text-lg","flex","justify-between","items-center"],[1,"gap-4","p-2","show","grid","grid-cols-3","max-sm:grid-cols-1","max-md:grid-cols-2"],[1,"shadow-md","hover:shadow-lg","transition-shadow","duration-300","border","border-primary","rounded-lg"],["mat-card-avatar","",1,"bg-gradient-to-r","from-app-blue","to-white","rounded-full"],[1,"text-lg","font-bold"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-primary"],[1,"text-sm","font-medium","text-primary"],["mode","determinate",1,"mt-2","text-primary",3,"value"],[1,"inline-flex","justify-end"],["mat-icon-button","","aria-label","Timeline","matTooltip","Timeline",3,"click"],[1,"text-primary"],["mat-icon-button","","aria-label","Gallery","matTooltip","Gallery",3,"click"]],template:function(e,n){e&1&&(s(0,"section",0)(1,"mat-expansion-panel",1)(2,"mat-expansion-panel-header")(3,"mat-panel-title",2)(4,"div",3),p(5),m()()(),s(6,"div",4),D(7,ve,20,4,"mat-card",5,ye),m()()()),e&2&&(o(),d("expanded",n.expand()),o(4),M(" ",n.header()," "),o(2),F(n.data().sort(n.comparatorFn)))},dependencies:[fe,oe,ee,ae,ne,te,ie,re,Y,U,Z,K,de,me,ce,le,Q],encapsulation:2,changeDetection:0});let i=a;return i})();function xe(i,a){if(i&1&&c(0,"app-statistics-panel",1)(1,"app-statistics-panel",2)(2,"app-statistics-panel",3)(3,"app-statistics-panel",4),i&2){let t=u();d("data",t.statistics().years)("expand",!0),o(),d("data",t.statistics().countries),o(),d("data",t.statistics().cities),o(),d("data",t.statistics().categories)}}var mr=(()=>{let a=class a{constructor(){this.STATISTICS_PAGE_INFO=q,this.statisticsService=l(ge),this.statistics=$(this.statisticsService.getStatistics())}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=g({type:a,selectors:[["app-statistics"]],decls:4,vars:2,consts:[[3,"pageInfo"],["type","year","header","Years",3,"data","expand"],["type","country","header","Countries",3,"data"],["type","city","header","Cities",3,"data"],["type","category","header","Categories",3,"data"]],template:function(e,n){e&1&&(s(0,"header"),c(1,"app-page-header",0),m(),s(2,"main"),b(3,xe,4,5),m()),e&2&&(o(),d("pageInfo",n.STATISTICS_PAGE_INFO),o(2),_(n.statistics()?3:-1))},dependencies:[se,be],encapsulation:2,changeDetection:0});let i=a;return i})();export{mr as StatisticsComponent};
