import{a as ve}from"./chunk-OEK3JCZ4.js";import{a as G}from"./chunk-DE4XVZZV.js";import"./chunk-IBGRYVCI.js";import{a as de,b as ge,c as he,d as ye,e as _e}from"./chunk-NF7F2RFM.js";import{b as Ce,c as fe,d as we,f as Me}from"./chunk-XSXTPDKC.js";import{a as ue}from"./chunk-N3P2GEPR.js";import{a as te,b as ie,c as re,d as ne}from"./chunk-ISQONHSI.js";import"./chunk-55H5WBIG.js";import"./chunk-A4ZROHUO.js";import"./chunk-IA2C6WPM.js";import"./chunk-GOCJWAFS.js";import"./chunk-5KCWFOSR.js";import{b as le}from"./chunk-4PEPL3RM.js";import{i as oe}from"./chunk-SPIHB62F.js";import"./chunk-4RHGDQDA.js";import{h as q}from"./chunk-YFHJRQYX.js";import{b as me,c as ce}from"./chunk-JCCFFJDZ.js";import{f as se,g as pe}from"./chunk-PENU2ILB.js";import"./chunk-FUZ4TJP2.js";import"./chunk-FX36Y7UL.js";import"./chunk-7P2D32DG.js";import"./chunk-UEKSEAKI.js";import{b as $,g as X,j as Z,u as ee}from"./chunk-ZGWQIMTM.js";import"./chunk-EEB6IKHS.js";import{b as Y}from"./chunk-72VAWV5W.js";import"./chunk-CCTRDJZS.js";import"./chunk-SYBZF2IS.js";import{a as U}from"./chunk-ZK5S6KYK.js";import{h as ae}from"./chunk-MRMD44T2.js";import"./chunk-NKEHJOBB.js";import{c as K}from"./chunk-XZ3MMUVH.js";import"./chunk-CNCGA24G.js";import{o as Q,p as H}from"./chunk-7THCFVEZ.js";import{$ as R,$b as V,Ec as h,Fa as T,Gc as _,I as P,Ic as v,Jc as b,Kc as S,L as j,Oc as z,Sc as E,Tc as I,Vb as F,Wb as C,Xb as f,Yb as y,Zb as t,_b as o,ba as A,ca as L,ed as J,hc as w,lb as a,m as D,mc as g,pa as k,pc as M,u as B,va as m,wa as c,xb as O,xc as W,yc as N,zc as x}from"./chunk-NVJCHQYR.js";var be=()=>[1,5,10,20,25],Se=(l,s)=>s.id;function Ee(l,s){if(l&1){let p=w();t(0,"mat-chip-row",25),g("removed",function(){let r=m(p).$implicit,e=M();return c(e.removeTag(r))}),h(1),t(2,"button",26),g("click",function(){let r=m(p).$implicit,e=M();return c(e.removeTag(r))}),t(3,"mat-icon"),h(4,"cancel"),o()()()}if(l&2){let p=s.$implicit;y("highlighted",!0)("editable",!1)("removable",!0),a(),_(" ",p," ")}}function Ie(l,s){if(l&1){let p=w();t(0,"button",27),g("click",function(){let r=m(p).$implicit,e=M();return c(e.sortingFieldChangedEvent.next(r))}),h(1),E(2,"titlecase"),o()}if(l&2){let p=s.$implicit;a(),_(" ",I(2,1,p.label)," ")}}function Te(l,s){if(l&1){let p=w();t(0,"button",27),g("click",function(){let r=m(p).$implicit,e=M();return c(e.sortingDirectionChangedEvent.next(r))}),h(1),E(2,"uppercase"),o()}if(l&2){let p=s.$implicit;a(),_(" ",I(2,1,p)," ")}}function Fe(l,s){if(l&1&&V(0,"app-journey-card-view",24),l&2){let p=s.$implicit;y("journey",p)}}var ot=(()=>{let s=class s{constructor(){this.journeyService=k(oe),this.sortableFields=[{label:"Journey Date",key:"journeyDate"},{label:"Journey Name",key:"name"},{label:"Geo Title",key:"geoDetails.title"},{label:"City",key:"geoDetails.city"},{label:"Country",key:"geoDetails.country"},{label:"Category",key:"geoDetails.category"},{label:"Geo Location",key:"geoDetails.location"}],this.sortingFieldChangedEvent=new D({label:"Journey Date",key:"journeyDate"}),this.sortableDirections=["asc","desc"],this.sortingDirectionChangedEvent=new D("desc"),this.defaultPageSize=10,this.separatorKeysCodes=[13,188,32],this.searchCriteria=T(new ve),this.paginator=J.required(G),this.tags=T([]),this.tagsObservable=Y(this.tags),this.searchResult=T({totalElements:0,data:[]}),this.GALLERY_PAGE_INFO=q;let i=k(K);i.getCurrentNavigation()?.extras.state&&this.searchCriteria.set(i.getCurrentNavigation()?.extras.state)}ngAfterViewInit(){this.search()}search(){P(this.paginator().page,this.sortingFieldChangedEvent,this.sortingDirectionChangedEvent,this.tagsObservable).pipe(A(),L(()=>this.journeyService.findJourneyByQuery(this.searchCriteria(),this.sortingFieldChangedEvent.getValue().key,this.sortingDirectionChangedEvent.getValue(),this.paginator().pageIndex,this.paginator().pageSize,!0,this.tags()).pipe(R(1),j(()=>B(null))))).subscribe(i=>this.onSuccess(i))}onSuccess(i){this.searchResult.set({totalElements:i?.totalElements??0,data:i?.content??[]})}ngOnInit(){this.journeyService.findJourneyByQuery(this.searchCriteria(),"journeyDate","desc",0,this.defaultPageSize,!0).subscribe(i=>this.onSuccess(i))}addTag(i){let r=(i.value||"").trim();r&&this.tags.update(e=>[...e,r]),i.chipInput.clear()}removeTag(i){this.tags.update(r=>r.filter(e=>e!==i))}};s.\u0275fac=function(r){return new(r||s)},s.\u0275cmp=O({type:s,selectors:[["app-gallery"]],viewQuery:function(r,e){r&1&&W(e.paginator,G,5),r&2&&N()},decls:50,vars:21,consts:[["chipGrid",""],["sortingFieldMenu","matMenu"],["sortingDirectionMenu","matMenu"],[3,"pageInfo"],[1,"container","py-2"],["id","searchFields"],[1,"text-sm","font-normal"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mt-3"],["appearance","outline",1,"w-full"],["matInput","","type","text","id","categoryInput","placeholder","Category",3,"ngModelChange","change","ngModel"],["matInput","","type","text","id","cityInput","placeholder","City",3,"ngModelChange","change","ngModel"],["matInput","","type","text","id","countryInput","placeholder","Country",3,"ngModelChange","change","ngModel"],["matInput","","type","text","id","yearInput","placeholder","Year",3,"ngModelChange","change","ngModel"],[1,"container","p-0","m-0"],["aria-label","Tags",1,"w-full"],["matInput","","id","tagsInput","placeholder","Filter by Tags",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[1,"flex","flex-wrap","gap-1","m-0"],["color","primary",3,"highlighted","editable","removable"],[1,"m-0","p-0","flex","justify-center","max-sm:flex-col","text-center","content-center","items-center"],["aria-label","Select page","color","primary",1,"paginator",3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"inline-flex"],["mat-menu-item",""],["mat-button","",1,"text-primary","border","border-primary","bg-white","px-2","py-1","rounded-md","shadow-sm","hover:bg-gray-100",3,"matMenuTriggerFor"],[1,"container","flex","gap-2","items-center","justify-center","flex-wrap"],[1,"max-sm:w-full",3,"journey"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click"],["mat-menu-item","",3,"click"]],template:function(r,e){if(r&1){let u=w();t(0,"header"),V(1,"app-page-header",3),o(),t(2,"main")(3,"section",4)(4,"mat-expansion-panel",5)(5,"mat-expansion-panel-header")(6,"mat-panel-title",6)(7,"span"),h(8,"Filter"),o()()(),t(9,"div",7)(10,"mat-form-field",8)(11,"input",9),S("ngModelChange",function(n){return m(u),b(e.searchCriteria().category,n)||(e.searchCriteria().category=n),c(n)}),g("change",function(){return m(u),c(e.search())}),o()(),t(12,"mat-form-field",8)(13,"input",10),S("ngModelChange",function(n){return m(u),b(e.searchCriteria().city,n)||(e.searchCriteria().city=n),c(n)}),g("change",function(){return m(u),c(e.search())}),o()(),t(14,"mat-form-field",8)(15,"input",11),S("ngModelChange",function(n){return m(u),b(e.searchCriteria().country,n)||(e.searchCriteria().country=n),c(n)}),g("change",function(){return m(u),c(e.search())}),o()(),t(16,"mat-form-field",8)(17,"input",12),S("ngModelChange",function(n){return m(u),b(e.searchCriteria().year,n)||(e.searchCriteria().year=n),c(n)}),g("change",function(){return m(u),c(e.search())}),o()()(),t(18,"div",13)(19,"mat-chip-grid",14,0)(21,"mat-form-field",8)(22,"input",15),g("matChipInputTokenEnd",function(n){return m(u),c(e.addTag(n))}),o()(),t(23,"div",16),C(24,Ee,5,4,"mat-chip-row",17,F),o()()()()(),t(26,"section",18),V(27,"mat-paginator",19),t(28,"div",20)(29,"mat-menu",null,1),C(31,Ie,3,3,"button",21,F),o(),t(33,"button",22),h(34),E(35,"titlecase"),t(36,"mat-icon"),h(37,"arrow_drop_down"),o()(),t(38,"mat-menu",null,2),C(40,Te,3,3,"button",21,F),o(),t(42,"button",22),h(43),E(44,"uppercase"),t(45,"mat-icon"),h(46,"arrow_drop_down"),o()()()(),t(47,"section",23),C(48,Fe,1,1,"app-journey-card-view",24,Se),o()()}if(r&2){let u=x(20),d=x(30),n=x(39);a(),y("pageInfo",e.GALLERY_PAGE_INFO),a(10),v("ngModel",e.searchCriteria().category),a(2),v("ngModel",e.searchCriteria().city),a(2),v("ngModel",e.searchCriteria().country),a(2),v("ngModel",e.searchCriteria().year),a(5),y("matChipInputFor",u)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),a(2),f(e.tags()),a(3),y("length",e.searchResult().totalElements)("pageSize",e.defaultPageSize)("pageSizeOptions",z(20,be))("showFirstLastButtons",!0),a(4),f(e.sortableFields),a(2),y("matMenuTriggerFor",d),a(),_(" ",I(35,16,e.sortingFieldChangedEvent.getValue().label)," "),a(6),f(e.sortableDirections),a(2),y("matMenuTriggerFor",n),a(),_(" ",I(44,18,e.sortingDirectionChangedEvent.getValue())," "),a(5),f(e.searchResult().data)}},dependencies:[G,_e,he,ye,de,ge,U,ee,$,X,Z,le,pe,se,ce,me,Me,Ce,fe,we,ae,ne,ie,te,re,ue,Q,H],styles:[".paginator[_ngcontent-%COMP%]{text-align:center;align-items:center;justify-content:center!important;display:flex;font-weight:500}"],changeDetection:0});let l=s;return l})();export{ot as GalleryComponent};
