import"./chunk-MS4AQ6UA.js";import{a as se,b as me}from"./chunk-RQB4IQDK.js";import{a as ae}from"./chunk-VOKTB6WT.js";import{m as ee,o as te,p as C,q as ie}from"./chunk-WEIGWJQV.js";import{c as le}from"./chunk-HF4ID6BO.js";import"./chunk-F5X5MWHG.js";import{a as Z}from"./chunk-GC4JW6KG.js";import"./chunk-ULILULOE.js";import"./chunk-ZJJPAHRG.js";import"./chunk-VAH4ZTPW.js";import{j as G}from"./chunk-YFHJRQYX.js";import{a as ne,f as re,g as oe}from"./chunk-GT7IT55J.js";import"./chunk-4TND24ZO.js";import"./chunk-D7XGIYVN.js";import"./chunk-ZAX7OA72.js";import"./chunk-7FVIKGCA.js";import{g as L,j as Y,u as Q}from"./chunk-3C2RYE65.js";import{a as p}from"./chunk-WRXHVNTC.js";import{c as H}from"./chunk-BLXKHFKW.js";import{a as $,b as W}from"./chunk-BRDESO4K.js";import{g as X,k as K}from"./chunk-7U2D3XMU.js";import"./chunk-ODEESR7L.js";import{a as q}from"./chunk-5WRF2F2L.js";import{f as V}from"./chunk-LDTKISGV.js";import{h as B}from"./chunk-7WENEZDG.js";import{$b as F,Bc as J,Cb as h,Cc as j,Dc as R,Ea as _,Rb as w,Sb as k,Tc as O,Wb as s,Xb as o,Yb as l,Yc as U,Zb as I,Zc as z,_b as D,a as M,bc as b,gc as y,ic as u,ja as E,kb as a,oa as f,qc as A,rc as N,u as P,ua as v,va as x,wb as T,xc as m,yc as S}from"./chunk-NFRKRT64.js";function ge(i,n){if(i&1){let r=b();o(0,"button",7),y("click",function(){v(r);let e=u(3);return x(e.togglePlayer())}),o(1,"mat-icon",8),m(2,"pause_circle"),l()()}}function de(i,n){if(i&1){let r=b();o(0,"button",9),y("click",function(){v(r);let e=u(3);return x(e.togglePlayer())}),o(1,"mat-icon",10),m(2,"play_circle"),l()()}}function fe(i,n){if(i&1&&(D(0),h(1,ge,3,0,"button",5)(2,de,3,0,"button",6),F()),i&2){let r=u(2);a(),s("ngIf",r.isPlayerRunning()),a(),s("ngIf",!r.isPlayerRunning())}}function he(i,n){if(i&1&&(o(0,"div",2)(1,"h2",3),m(2),l(),h(3,fe,3,2,"ng-container",4),l()),i&2){let r,t,e=u();a(2),S((r=e.data())==null?null:r.heading),a(),s("ngIf",(t=e.images())==null?null:t.length)}}function ye(i,n){if(i&1&&(o(0,"div",16)(1,"span",17),m(2),l()()),i&2){let r=u().$implicit;a(2),S(r==null||r.args==null?null:r.args.title)}}function _e(i,n){if(i&1&&(D(0),h(1,ye,3,1,"div",13),o(2,"div",14)(3,"p",15),m(4),l()(),F()),i&2){let r=n.$implicit;a(),s("ngIf",r==null||r.args==null?null:r.args.title),a(3),S(r==null||r.args==null?null:r.args.caption)}}function Ce(i,n){if(i&1){let r=b();o(0,"gallery",11),y("itemClick",function(){v(r);let e=u();return x(e.togglePlayer())}),h(1,_e,5,2,"ng-container",12),l()}if(i&2){let r=u();s("items",r.images())("thumbs",!1)("imageSize","contain")("bullets",!0)("autoplayInterval",3e3)("loop",!0)("scrollDuration",500)("autoplay",!0)}}function ve(i,n){i&1&&(o(0,"div")(1,"p",18),m(2,"No events found."),l()())}function xe(i){return new ee({src:i.src,args:M({caption:i.caption,title:i.title},i.args)})}var ue=(()=>{let n=class n{constructor(){this.data=U.required(),this.images=O(()=>this.data()?.images?.map(xe)??[]),this.galleryComponent=z.required(C),this.isPlayerRunning=_(!0)}togglePlayer(){this.isPlayerRunning()?(this.galleryComponent().stop(),this.isPlayerRunning.set(!1)):(this.galleryComponent().next(),this.galleryComponent().play(),this.isPlayerRunning.set(!0))}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=T({type:n,selectors:[["app-timeline"]],viewQuery:function(e,c){e&1&&A(c.galleryComponent,C,5),e&2&&N()},inputs:{data:[1,"data"]},decls:3,vars:2,consts:[["class","inline-flex mb-2",4,"ngIf"],[1,"gallery",3,"items","thumbs","imageSize","bullets","autoplayInterval","loop","scrollDuration","autoplay"],[1,"inline-flex","mb-2"],[1,"gradient-text","me-2"],[4,"ngIf"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Pause",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Play",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Pause",3,"click"],[1,"text-danger"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Play",3,"click"],[1,"text-success"],[1,"gallery",3,"itemClick","items","thumbs","imageSize","bullets","autoplayInterval","loop","scrollDuration","autoplay"],[4,"galleryImageDef"],["class","w-full text-start flex flex-row",4,"ngIf"],[1,"h-full","w-full","text-end","flex","flex-col","justify-end","p-2","mb-4"],[1,"text-center","bg-black/50"],[1,"w-full","text-start","flex","flex-row"],[1,"me-2","m-2","border-2","ps-2","pe-2","bg-black/25"],[1,"text-primary"]],template:function(e,c){if(e&1&&(h(0,he,4,2,"div",0),w(1,Ce,2,8,"gallery",1)(2,ve,3,0,"div")),e&2){let g;s("ngIf",(g=c.data())==null?null:g.heading),a(),k(c.images()&&c.images().length>0?1:2)}},dependencies:[ie,C,te,B,Z,W,$,K,X],encapsulation:2,changeDetection:0});let i=n;return i})();var pe=(()=>{let n=class n{constructor(){this.httpClient=f(V),this.authService=f(H)}getTimelineForUpcomingJourniversaries(t){let e=this.authService.getCurrentUserContext();return this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`},params:{upcoming:t}})}getTimelineForJourney(t){let e=this.authService.getCurrentUserContext();return this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`},params:{IDs:t}})}getTimelineForCity(t){let e=this.authService.getCurrentUserContext();return this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`},params:{city:t}})}getTimelineForCountry(t){let e=this.authService.getCurrentUserContext();return this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`},params:{country:t}})}getTimelineForYear(t){let e=this.authService.getCurrentUserContext();return this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`},params:{year:t}})}getTimelineForCategory(t){let e=this.authService.getCurrentUserContext();return this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`},params:{category:t}})}getTimelineForToday(){let t=this.authService.getCurrentUserContext();return t.isAuthenticated?this.httpClient.get(p.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`,"X-Async-Process":"true"},params:{today:!0}}):P()}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();var it=(()=>{let n=class n{constructor(){this.TIMELINE_PAGE_INFO=G,this.timelineService=f(pe),this.activatedRoute=f(q),this.numberOfDaysJourniversaries=_(7),this.timelineData=_(void 0)}ngOnInit(){let t=this.activatedRoute.snapshot.queryParams.id,e=this.activatedRoute.snapshot.queryParams.city,c=this.activatedRoute.snapshot.queryParams.country,g=this.activatedRoute.snapshot.queryParams.year,d=this.activatedRoute.snapshot.queryParams.category;t?this.getDataForJourney(t):e?this.getDataForCity(e):c?this.getDataForCountry(c):g?this.getDataForYear(g):d?this.getDataForCategory(d):this.getDataForUpcomingJourniversaries()}getDataForJourney(t){this.timelineService.getTimelineForJourney(t).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}getDataForCity(t){this.timelineService.getTimelineForCity(t).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}getDataForCountry(t){this.timelineService.getTimelineForCountry(t).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}getDataForYear(t){this.timelineService.getTimelineForYear(t).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}getDataForCategory(t){this.timelineService.getTimelineForCategory(t).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}getDataForUpcomingJourniversaries(){this.timelineService.getTimelineForUpcomingJourniversaries(this.numberOfDaysJourniversaries()).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=T({type:n,selectors:[["app-timeline-page"]],decls:24,vars:10,consts:[[3,"pageInfo"],[1,"mt-2","container","flex","flex-col"],["appearance","fill"],[1,"!outline-offset-0","!border-0",3,"ngModelChange","selectionChange","ngModel"],[3,"value"],[1,"flex","flex-col"],[3,"data"]],template:function(e,c){e&1&&(o(0,"header"),I(1,"app-page-header",0),l(),o(2,"main")(3,"section",1)(4,"mat-form-field",2)(5,"mat-label"),m(6,"Choose interval to display Journiversaries"),l(),o(7,"mat-select",3),R("ngModelChange",function(d){return j(c.numberOfDaysJourniversaries,d)||(c.numberOfDaysJourniversaries=d),d}),y("selectionChange",function(){return c.getDataForUpcomingJourniversaries()}),o(8,"mat-option",4),m(9,"Tomorrow"),l(),o(10,"mat-option",4),m(11,"Next One Week"),l(),o(12,"mat-option",4),m(13,"Next Two Week"),l(),o(14,"mat-option",4),m(15,"Next Three Week"),l(),o(16,"mat-option",4),m(17,"Next One Month"),l(),o(18,"mat-option",4),m(19,"Next Two Months"),l(),o(20,"mat-option",4),m(21,"Next Three Months"),l()()()(),o(22,"section",5),I(23,"app-timeline",6),l()()),e&2&&(a(),s("pageInfo",c.TIMELINE_PAGE_INFO),a(6),J("ngModel",c.numberOfDaysJourniversaries),a(),s("value",1),a(2),s("value",7),a(2),s("value",14),a(2),s("value",21),a(2),s("value",30),a(2),s("value",60),a(2),s("value",90),a(3),s("data",c.timelineData()))},dependencies:[ue,ae,Q,L,Y,oe,re,ne,me,se,le],encapsulation:2,changeDetection:0});let i=n;return i})();export{it as TimelinePageComponent};
