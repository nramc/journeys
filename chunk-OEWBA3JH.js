import{a as R}from"./chunk-7T7SSA5J.js";import"./chunk-MPJYK47K.js";import{a as re}from"./chunk-OG2A5DXH.js";import{a as D}from"./chunk-VSQTGOJW.js";import{a as ae}from"./chunk-KGTLCIL2.js";import"./chunk-EFSDVRKM.js";import{c as N,g as k,h as ee,i as te,j as P,k as ie,s as V,t as ne,v as oe,w as L,x as F}from"./chunk-5J5H5FZW.js";import{p as J}from"./chunk-SNVCUL6N.js";import{a as Y,b as O,c as H,d as se,e as le}from"./chunk-IDQJW2CY.js";import{a as T}from"./chunk-P53QH524.js";import"./chunk-UWCLANGX.js";import"./chunk-AQAPVU4D.js";import"./chunk-CARY4E7O.js";import{a as g}from"./chunk-FUSGHHWI.js";import"./chunk-RVB75WT6.js";import"./chunk-ZLRNIGX2.js";import{b as X}from"./chunk-4HWMNETW.js";import"./chunk-KUIIQJ2X.js";import"./chunk-IUL4I26V.js";import"./chunk-OU45453G.js";import{k as M,s as B}from"./chunk-MIMT4L35.js";import{Ab as K,Bc as y,Db as h,Dc as S,Fa as _,Ga as x,Gc as W,Ic as Z,Jb as u,Ma as w,Ob as s,Tb as A,Yb as o,Zb as i,_b as m,cc as v,hc as f,jc as d,mb as z,qb as l,sa as p,tc as I,ua as C,uc as r,vc as $}from"./chunk-Y7SRRAOL.js";var q=class{constructor(c="EMAIL_ADDRESS",e="",n=!0,a=!1,b,E){this.type=c,this.value=e,this.enabled=n,this.verified=a,this.creationDate=b,this.lastUpdateDate=E}};var j=t=>[t];function xe(t,c){t&1&&(o(0,"span",11),m(1,"i",16),r(2," Verified"),i())}function be(t,c){t&1&&(o(0,"span",12),m(1,"i",17),r(2," Not Verified"),i())}function he(t,c){if(t&1){let e=v();o(0,"button",18),f("click",function(){_(e);let a=d(3);return x(a.verifyEmailAddress())}),r(1," Verify Now "),i()}if(t&2){let e=d(3);s("disableIfNoRoleExists",S(1,j,e.Role.AUTHENTICATED_USER))}}function ve(t,c){if(t&1){let e=v();o(0,"div",7)(1,"div",8)(2,"div")(3,"span",9),r(4,"Primary:"),i(),m(5,"span",10),i(),u(6,xe,3,0,"span",11)(7,be,3,0,"span",12),i(),o(8,"div",13),u(9,he,2,3,"button",14),o(10,"button",15),f("click",function(){_(e);let a=d(2);return x(a.enableEdit())}),r(11,"Edit "),i()()()}if(t&2){let e=d(2);l(5),s("textContent",e.emailAddressData().value),l(),A(e.emailAddressData().verified?6:7),l(3),s("ngIf",e.emailAddressData().value&&!e.emailAddressData().verified),l(),s("disableIfNoRoleExists",S(4,j,e.Role.AUTHENTICATED_USER))}}function Ce(t,c){if(t&1){let e=v();o(0,"div",19)(1,"div",20)(2,"span",21),r(3,"Primary"),i(),m(4,"input",22,0),o(6,"div",23)(7,"button",24),f("click",function(){_(e);let a=I(5),b=d(2);return x(b.save(a))}),r(8,"Save "),i()()()()}if(t&2){let e=d(2);l(7),s("disableIfNoRoleExists",S(1,j,e.Role.AUTHENTICATED_USER))}}function ye(t,c){if(t&1&&(o(0,"section",2)(1,"div",3)(2,"h4",4),r(3,"Email Address"),i()(),u(4,ve,12,6,"div",5)(5,Ce,9,3,"div",6),i()),t&2){let e=d();l(4),s("ngIf",!e.editModeToggle()),l(),s("ngIf",e.editModeToggle())}}var ce=(()=>{class t{constructor(){this.destroyRef=p(w),this.myAccountService=p(T),this.dialog=p(O),this.Role=D,this.emailAddressData=h(new q),this.editModeToggle=h(!1),this.isLoadingCompleted=h(!1)}ngOnInit(){this.fetchSecurityEmailAddress()}fetchSecurityEmailAddress(){this.myAccountService.getSecurityEmailAddress().pipe(g(this.destroyRef)).subscribe({next:e=>this.onSuccess(e),error:e=>this.onError(e)})}onSuccess(e,n=!1){this.emailAddressData.set(e||new q),this.editModeToggle.set(n),this.isLoadingCompleted.set(!0)}onError(e){console.log(e),this.isLoadingCompleted.set(!0)}enableEdit(){this.editModeToggle.set(!0)}save(e){e.validity.valid&&this.editModeToggle()&&this.myAccountService.saveSecurityEmailAddress(e.value).pipe(g(this.destroyRef)).subscribe({next:n=>this.onSuccess(n),error:n=>this.onError(n)})}verifyEmailAddress(){this.dialog.open(le,{disableClose:!0}).afterClosed().subscribe(n=>{this.fetchSecurityEmailAddress()})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=C({type:t,selectors:[["my-email-address-settings"]],inputs:{emailAddressData:[1,"emailAddressData"],editModeToggle:[1,"editModeToggle"],isLoadingCompleted:[1,"isLoadingCompleted"]},outputs:{emailAddressData:"emailAddressDataChange",editModeToggle:"editModeToggleChange",isLoadingCompleted:"isLoadingCompletedChange"},standalone:!0,features:[y],decls:1,vars:1,consts:[["emailAddressElement",""],["class","container d-flex flex-column gradient-bg-light-left mt-2 pt-2 pb-3 border border-opacity-50 rounded-2 shadow border-primary",4,"ngIf"],[1,"container","d-flex","flex-column","gradient-bg-light-left","mt-2","pt-2","pb-3","border","border-opacity-50","rounded-2","shadow","border-primary"],[1,"col"],[1,"gradient-text"],["class","col-12 d-flex flex-column",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12","d-flex","flex-column"],[1,"col","d-inline-flex","flex-row","text-primary","align-items-center"],[1,"small","pe-2"],[1,"fw-bold","pe-2","fs-6",3,"textContent"],[1,"text-success","border","border-success","border-2","rounded-2","p-1","small","text-nowrap"],[1,"text-danger","border","border-danger","border-2","rounded-2","p-1","small","text-nowrap"],[1,"d-inline-flex","gap-2"],["class","btn btn-success",3,"disableIfNoRoleExists","click",4,"ngIf"],["type","button",1,"btn","btn-outline-primary",3,"click","disableIfNoRoleExists"],[1,"bi","bi-check-circle-fill"],[1,"bi","bi-exclamation-octagon-fill"],[1,"btn","btn-success",3,"click","disableIfNoRoleExists"],[1,"col-12"],[1,"col","input-group"],[1,"input-group-text","bg-primary","text-light"],["type","email","required","","email","","id","emailAddressElement","name","emailAddressElement","ngModel","",1,"form-control"],[1,"input-group-text"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click","disableIfNoRoleExists"]],template:function(n,a){n&1&&u(0,ye,6,2,"section",1),n&2&&s("ngIf",a.isLoadingCompleted())},dependencies:[F,N,k,V,ne,P,R,M]})}}return t})();var pe=(()=>{class t{constructor(){this.feedbackMessage=K({}),this.destroyRef=p(w),this.dialogRef=p(Y),this.myAccountService=p(T),this.qrCodeData=h()}ngOnInit(){this.myAccountService.generateNewQRCode().pipe(g(this.destroyRef)).subscribe({next:e=>this.qrCodeData.set(e),error:e=>console.log(e)})}activate(e){if(e.validity.valid&&this.qrCodeData()?.secretKey){let n={secretKey:this.qrCodeData().secretKey,code:e.value};this.myAccountService.activateTotp(n).pipe(g(this.destroyRef)).subscribe({next:a=>this.onSuccess(),error:a=>this.feedbackMessage.set({error:"Code Invalid"})})}}onSuccess(){console.log("2FA TOTP activated"),this.feedbackMessage.set({success:"2FA activated successfully"}),this.dialogRef.close(!0)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=C({type:t,selectors:[["app-totp-activation"]],inputs:{qrCodeData:[1,"qrCodeData"]},outputs:{qrCodeData:"qrCodeDataChange"},standalone:!0,features:[y],decls:68,vars:3,consts:[["totpCode",""],[1,"card","pb-4"],[1,"card-header","bg-primary","text-light"],[1,"card-body"],[1,"card-text"],[1,"step","step-1"],[1,"d-flex","flex-column"],["data-bs-toggle","collapse","href","#collapseStep1","aria-expanded","true","aria-controls","collapseStep1",1,"col-12","gradient-bg-light","p-2","fs-6","text-decoration-none"],["id","collapseStep1",1,"collapse","show"],[1,"small"],["href","https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en","target","_blank"],["href","https://www.microsoft.com/en-us/security/mobile-authenticator-app","target","_blank"],["href","https://authy.com/download/","target","_blank"],[1,"step","step-2"],["data-bs-toggle","collapse","href","#collapseStep2","aria-expanded","true","aria-controls","collapseStep2",1,"col-12","gradient-bg-light","p-2","fs-6","text-decoration-none"],["id","collapseStep2",1,"collapse","show"],[1,"qr-code-section","text-center"],["id","qrCode","width","200px","height","200px","alt","QR",3,"src"],[1,"secret-key-section","text-center"],[1,"fw-bold","text-primary","small"],[3,"textContent"],[1,"step","step-3"],["data-bs-toggle","collapse","href","#collapseStep3","aria-expanded","true","aria-controls","collapseStep3",1,"col-12","gradient-bg-light","p-2","fs-6","text-decoration-none"],["id","collapseStep3",1,"collapse","show"],[1,"input-group","mb-3"],["id","totpCodeLabel",1,"input-group-text"],["type","text","aria-label","6 Digit TOTP Code","aria-describedby","totpCodeLabel","id","totpCode","name","totpCode","ngModel","","required","","pattern","[0-9]{6,6}","maxlength","6","min","6",1,"form-control"],[1,"error-message"],[3,"message"],[1,"d-inline-flex","gap-2"],["type","button","mat-dialog-close","false",1,"btn","btn-outline-danger"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(n,a){if(n&1){let b=v();o(0,"div",1)(1,"div",2),r(2," Two-Factor Authentication (2FA) - TOTP Activation "),i(),o(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Step 1: Install an Authenticator App "),i()(),o(9,"div",8)(10,"p"),r(11,"To use 2FA, you will need an authenticator app installed on your mobile device. If you don\u2019t already have one, you can download one of these apps: "),i(),o(12,"ol",9)(13,"li")(14,"a",10),r(15,"Google Authenticator (iOS and Android)"),i()(),o(16,"li")(17,"a",11),r(18,"Microsoft Authenticator (iOS and Android)"),i()(),o(19,"li")(20,"a",12),r(21,"Authy (iOS and Android)"),i()()()()(),o(22,"div",13)(23,"div",6)(24,"a",14),r(25,"Step 2: Scan the QR Code "),i()(),o(26,"div",15)(27,"ol")(28,"li"),r(29,"Open your authenticator app."),i(),o(30,"li"),r(31,'Select the option to add a new account. This is usually done by tapping the "+" icon.'),i(),o(32,"li"),r(33,"Choose the option to scan a QR code."),i(),o(34,"li"),r(35,"Use your phone\u2019s camera to scan the QR code displayed below."),i()(),o(36,"div",16),m(37,"img",17),i(),o(38,"div",18)(39,"p",19),r(40,"Or enter code manually: "),m(41,"span",20),i()()()(),o(42,"div",21)(43,"div",6)(44,"a",22),r(45,"Step 3: Enter the Verification Code "),i()(),o(46,"div",23)(47,"ol")(48,"li"),r(49,"After scanning the QR code, your authenticator app will display a 6-digit verification code."),i(),o(50,"li"),r(51,"Enter the 6-digit code into the field below to verify and activate 2FA on your account."),i(),o(52,"li"),r(53,'After entering the verification code, click on the "Activate" button below.'),i(),o(54,"li"),r(55,"You will see a confirmation message once 2FA is successfully activated."),i()(),o(56,"div",24)(57,"span",25),r(58,"Code"),i(),m(59,"input",26,0),i(),o(61,"div",27),m(62,"app-feedback-message",28),i(),o(63,"div",29)(64,"button",30),r(65,"Cancel"),i(),o(66,"button",31),f("click",function(){_(b);let _e=I(60);return x(a.activate(_e))}),r(67,"Activate"),i()()()()()()()}if(n&2){let b,E;l(37),s("src","data:image/png;base64,"+((b=a.qrCodeData())==null?null:b.data),z),l(4),s("textContent",(E=a.qrCodeData())==null?null:E.secretKey),l(21),s("message",a.feedbackMessage())}},dependencies:[H,F,N,k,V,oe,L,P,ae],styles:[".card-text[_ngcontent-%COMP%]{max-height:90vh;overflow:scroll}.step[_ngcontent-%COMP%]{margin:.5rem 0}"]})}}return t})();var G=(()=>{class t{constructor(){this.dialogRef=p(Y)}confirmAction(){this.dialogRef.close(!0)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=C({type:t,selectors:[["app-confirmation-dialog"]],standalone:!0,features:[y],decls:14,vars:0,consts:[[1,"card"],[1,"card-header","bg-primary","text-light"],[1,"card-body"],[1,"card-text"],[1,"text-primary"],[1,"small","fw-bold","text-primary"],[1,"d-inline-flex","gap-2","mt-4"],["mat-dialog-close","false",1,"btn","btn-outline-danger"],[1,"btn","btn-primary",3,"click"]],template:function(n,a){n&1&&(o(0,"div",0)(1,"div",1),r(2," Confirmation Required "),i(),o(3,"div",2)(4,"div",3)(5,"p",4),r(6,"Are you sure you want to proceed with this action?"),i(),o(7,"p",5),r(8,"This action cannot be undone."),i()(),o(9,"div",6)(10,"button",7),r(11,"Cancel"),i(),o(12,"button",8),f("click",function(){return a.confirmAction()}),r(13,"Confirm"),i()()()())},dependencies:[H]})}}return t})();var Q=t=>[t];function Se(t,c){t&1&&(o(0,"span",5),m(1,"i",9),r(2," Activated"),i())}function Ee(t,c){t&1&&(o(0,"span",6),m(1,"i",10),r(2," Not Activated"),i())}function we(t,c){if(t&1){let e=v();o(0,"div",11)(1,"button",12),f("click",function(){_(e);let a=d(2);return x(a.setupTotp())}),r(2,"Activate "),i()()}if(t&2){let e=d(2);l(),s("disableIfNoRoleExists",S(1,Q,e.Role.AUTHENTICATED_USER))}}function Te(t,c){if(t&1){let e=v();o(0,"div",13)(1,"button",14),f("click",function(){_(e);let a=d(2);return x(a.confirmTotpDeactivation())}),r(2,"Deactivate "),i(),o(3,"button",15),f("click",function(){_(e);let a=d(2);return x(a.testCode())}),r(4,"Test "),i()()}if(t&2){let e=d(2);l(),s("disableIfNoRoleExists",S(2,Q,e.Role.AUTHENTICATED_USER)),l(2),s("disableIfNoRoleExists",S(4,Q,e.Role.AUTHENTICATED_USER))}}function Ae(t,c){if(t&1&&(o(0,"section",1)(1,"div",2)(2,"h4",3),r(3,"Authenticator TOTP"),i(),o(4,"div",4),u(5,Se,3,0,"span",5)(6,Ee,3,0,"span",6),i()(),u(7,we,3,3,"div",7)(8,Te,5,6,"div",8),i()),t&2){let e=d();l(5),A(e.isTotpActive()?5:6),l(2),s("ngIf",!e.isTotpActive()),l(),s("ngIf",e.isTotpActive())}}var me=(()=>{class t{constructor(){this.destroyRef=p(w),this.dialog=p(O),this.myAccountService=p(T),this.authService=p(X),this.isTotpActive=h(!1),this.isLoadingCompleted=h(!1),this.Role=D}setupTotp(){this.dialog.open(pe,{disableClose:!0}).afterClosed().pipe(g(this.destroyRef)).subscribe(n=>{this.getCurrentTotpStatus()})}ngOnInit(){this.getCurrentTotpStatus()}getCurrentTotpStatus(){this.myAccountService.getTotpStatus().pipe(g(this.destroyRef)).subscribe({next:e=>{this.isTotpActive.set(e.active),this.isLoadingCompleted.set(!0)},error:e=>{console.log(e),this.isLoadingCompleted.set(!0)}})}testCode(){this.dialog.open(se,{disableClose:!0}).afterClosed().pipe(g(this.destroyRef)).subscribe(n=>{console.log("Result:",n)})}confirmTotpDeactivation(){this.dialog.open(G,{disableClose:!0}).afterClosed().pipe(g(this.destroyRef)).subscribe(n=>{n===!0&&this.deactivateTotp()})}deactivateTotp(){this.myAccountService.deactivateTotp().pipe(g(this.destroyRef)).subscribe({next:e=>this.getCurrentTotpStatus(),error:e=>console.log(e)})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=C({type:t,selectors:[["my-totp-settings"]],inputs:{isTotpActive:[1,"isTotpActive"],isLoadingCompleted:[1,"isLoadingCompleted"]},outputs:{isTotpActive:"isTotpActiveChange",isLoadingCompleted:"isLoadingCompletedChange"},standalone:!0,features:[y],decls:1,vars:1,consts:[["class","container d-flex flex-column gradient-bg-light-left mt-2 pt-2 pb-3 border border-opacity-50 rounded-2 shadow border-primary",4,"ngIf"],[1,"container","d-flex","flex-column","gradient-bg-light-left","mt-2","pt-2","pb-3","border","border-opacity-50","rounded-2","shadow","border-primary"],[1,"col","d-inline-flex"],[1,"gradient-text"],[1,"status-badge","text-nowrap"],[1,"text-success","border","border-success","border-2","rounded-2","p-1","small","ms-1","me-1"],[1,"text-danger","border","border-danger","border-2","rounded-2","p-1","small","ms-1","me-1"],["class","activation col",4,"ngIf"],["class","deactivation col d-inline-flex gap-2",4,"ngIf"],[1,"bi","bi-check-circle-fill"],[1,"bi","bi-exclamation-octagon-fill"],[1,"activation","col"],["type","button",1,"btn","btn-success",3,"click","disableIfNoRoleExists"],[1,"deactivation","col","d-inline-flex","gap-2"],["type","button",1,"btn","btn-outline-danger",3,"click","disableIfNoRoleExists"],["type","button",1,"btn","btn-outline-primary",3,"click","disableIfNoRoleExists"]],template:function(n,a){n&1&&u(0,Ae,9,3,"section",0),n&2&&s("ngIf",a.isLoadingCompleted())},dependencies:[M,R]})}}return t})();var ue=t=>[t];function Me(t,c){t&1&&(o(0,"span",5),m(1,"i",10),r(2," Activated"),i())}function De(t,c){t&1&&(o(0,"span",6),m(1,"i",11),r(2," Not Activated"),i())}function Re(t,c){t&1&&(o(0,"div",12)(1,"p"),r(2,"Multi-Factor authentication activation possible only after any one the following security information successfully activated or verified,"),i(),o(3,"ul")(4,"li"),r(5,"Email Address"),i(),o(6,"li"),r(7,"TOTP"),i()()())}function Ie(t,c){t&1&&(o(0,"p",16),r(1," Unable to activate MFA. Please check prerequisite conditions before activating MFA. "),i())}function Ne(t,c){if(t&1){let e=v();o(0,"div",13)(1,"button",14),f("click",function(){_(e);let a=d(2);return x(a.enableMfa())}),r(2,"Activate "),i(),u(3,Ie,2,0,"p",15),i()}if(t&2){let e=d(2);l(),s("disableIfNoRoleExists",S(2,ue,e.Role.AUTHENTICATED_USER)),l(2),s("ngIf",e.isErrorOccurred())}}function ke(t,c){t&1&&(o(0,"p",16),r(1," Unable to deactivate MFA. Please try again. "),i())}function Pe(t,c){if(t&1){let e=v();o(0,"div",17)(1,"button",18),f("click",function(){_(e);let a=d(2);return x(a.confirmMfaDeactivation())}),r(2,"Deactivate "),i(),u(3,ke,2,0,"p",15),i()}if(t&2){let e=d(2);l(),s("disableIfNoRoleExists",S(2,ue,e.Role.AUTHENTICATED_USER)),l(2),s("ngIf",e.isErrorOccurred())}}function Ve(t,c){if(t&1&&(o(0,"section",1)(1,"div",2)(2,"h4",3),r(3,"Multi-Factor Authentication"),i(),o(4,"div",4),u(5,Me,3,0,"span",5)(6,De,3,0,"span",6),i()(),u(7,Re,8,0,"div",7)(8,Ne,4,4,"div",8)(9,Pe,4,4,"div",9),i()),t&2){let e,n,a,b,E=d();l(5),A((e=E.userData())!=null&&e.mfaEnabled?5:6),l(2),s("ngIf",!((n=E.userData())!=null&&n.mfaEnabled)),l(),s("ngIf",!((a=E.userData())!=null&&a.mfaEnabled)),l(),s("ngIf",(b=E.userData())==null?null:b.mfaEnabled)}}var fe=(()=>{class t{constructor(){this.Role=D,this.destroyRef=p(w),this.dialog=p(O),this.myAccountService=p(T),this.userData=h(),this.isErrorOccurred=h(!0)}ngOnInit(){this.fetchCurrentUserData()}fetchCurrentUserData(){this.myAccountService.getProfileData().pipe(g(this.destroyRef)).subscribe({next:e=>{this.userData.set(e),this.isErrorOccurred.set(!1)},error:e=>console.log(e)})}enableMfa(){this.changeMfa(!0)}confirmMfaDeactivation(){this.dialog.open(G,{disableClose:!0}).afterClosed().pipe(g(this.destroyRef)).subscribe(n=>{n===!0&&this.changeMfa(!1)})}changeMfa(e){this.myAccountService.changeMfaStatus(e).pipe(g(this.destroyRef)).subscribe({next:n=>this.fetchCurrentUserData(),error:n=>{console.log(n),this.isErrorOccurred.set(!0)}})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=C({type:t,selectors:[["my-mfa-settings"]],inputs:{userData:[1,"userData"],isErrorOccurred:[1,"isErrorOccurred"]},outputs:{userData:"userDataChange",isErrorOccurred:"isErrorOccurredChange"},standalone:!0,features:[y],decls:1,vars:1,consts:[["class","container d-flex flex-column gradient-bg-light-left mt-2 pt-2 pb-3 border border-opacity-50 rounded-2 shadow border-primary",4,"ngIf"],[1,"container","d-flex","flex-column","gradient-bg-light-left","mt-2","pt-2","pb-3","border","border-opacity-50","rounded-2","shadow","border-primary"],[1,"col","d-inline-flex"],[1,"gradient-text"],[1,"status-badge","text-nowrap"],[1,"text-success","border","border-success","border-2","rounded-2","p-1","small","ms-1","me-1"],[1,"text-danger","border","border-danger","border-2","rounded-2","p-1","small","ms-1","me-1"],["class","text-primary small fw-bold",4,"ngIf"],["class","activation col",4,"ngIf"],["class","deactivation col d-inline-flex gap-2",4,"ngIf"],[1,"bi","bi-check-circle-fill"],[1,"bi","bi-exclamation-octagon-fill"],[1,"text-primary","small","fw-bold"],[1,"activation","col"],["type","button",1,"btn","btn-success",3,"click","disableIfNoRoleExists"],["class","text-danger small fw-bold",4,"ngIf"],[1,"text-danger","small","fw-bold"],[1,"deactivation","col","d-inline-flex","gap-2"],["type","button",1,"btn","btn-outline-danger",3,"click","disableIfNoRoleExists"]],template:function(n,a){n&1&&u(0,Ve,10,4,"section",0),n&2&&s("ngIf",a.userData())},dependencies:[M,R]})}}return t})();var Fe=t=>[t];function Oe(t,c){t&1&&(o(0,"span",6),m(1,"i",10),r(2," Complaint"),i())}function Ue(t,c){t&1&&(o(0,"span",7),m(1,"i",11),r(2," Non Complaint"),i())}function qe(t,c){if(t&1&&(o(0,"p"),r(1,"Current Password Changed at "),o(2,"span",12),r(3),W(4,"date"),i()()),t&2){let e,n=d(2);l(3),$(Z(4,1,(e=n.userData())==null?null:e.passwordChangedAt,"dd.MM.YYYY, h:mm:ss a z"))}}function Le(t,c){if(t&1){let e=v();o(0,"div")(1,"button",13),f("click",function(){_(e);let a=d(2);return x(a.editMode.set(!0))}),r(2,"Change Password"),i()()}if(t&2){let e=d(2);l(),s("disableIfNoRoleExists",S(1,Fe,e.Role.AUTHENTICATED_USER))}}function Ye(t,c){t&1&&(o(0,"p",22),r(1," Invalid Password. Valid Password should contain at least one lowercase, one upper case alphabets, at least one digit, one special character and contains length from 8 to 50. "),i())}function He(t,c){if(t&1){let e=v();o(0,"div")(1,"form",14),f("ngSubmit",function(){_(e);let a=I(7),b=d(2);return x(b.savePassword(a))}),o(2,"div")(3,"div",15)(4,"span",16),r(5,"New Password"),i(),m(6,"input",17,0),i(),u(8,Ye,2,0,"p",18),i(),o(9,"div",19)(10,"button",20),f("click",function(){_(e);let a=d(2);return x(a.editMode.set(!1))}),r(11,"Cancel"),i(),o(12,"button",21),f("click",function(){_(e);let a=I(7),b=d(2);return x(b.savePassword(a))}),r(13,"Save"),i()()()()}if(t&2){let e=d(2);l(8),s("ngIf",e.isErrorOccurred())}}function Ge(t,c){if(t&1&&(o(0,"section",2)(1,"div",3)(2,"h4",4),r(3,"Password"),i(),o(4,"div",5),u(5,Oe,3,0,"span",6)(6,Ue,3,0,"span",7),i()(),o(7,"div",8)(8,"p"),r(9,"We recommend changing your password at least every 3 months to enhance the security of your account."),i(),u(10,qe,5,4,"p",9),i(),u(11,Le,3,3,"div",9)(12,He,14,1,"div",9),i()),t&2){let e,n=d();l(5),A(n.isPasswordComplaint()?5:6),l(5),s("ngIf",(e=n.userData())==null?null:e.passwordChangedAt),l(),s("ngIf",!n.editMode()),l(),s("ngIf",n.editMode())}}var ge=(()=>{class t{constructor(){this.destroyRef=p(w),this.myAccountService=p(T),this.userData=h(),this.isErrorOccurred=h(!0),this.editMode=h(!1),this.Role=D}ngOnInit(){this.fetchCurrentUserData()}fetchCurrentUserData(){this.myAccountService.getProfileData().pipe(g(this.destroyRef)).subscribe({next:e=>{this.userData.set(e),this.isErrorOccurred.set(!1),this.editMode.set(!1)},error:e=>console.log(e)})}savePassword(e){e.validity.valid?this.myAccountService.changePassword(e.value).pipe(g(this.destroyRef)).subscribe({next:n=>this.fetchCurrentUserData(),error:n=>{console.log(n),this.isErrorOccurred.set(!0)}}):this.isErrorOccurred.set(!0)}isPasswordComplaint(){return this.userData()?.passwordChangedAt?new Date().getFullYear()-new Date(Date.parse(this.userData().passwordChangedAt)).getFullYear()*12<=3:!1}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=C({type:t,selectors:[["my-password-settings"]],inputs:{userData:[1,"userData"],isErrorOccurred:[1,"isErrorOccurred"],editMode:[1,"editMode"]},outputs:{userData:"userDataChange",isErrorOccurred:"isErrorOccurredChange",editMode:"editModeChange"},standalone:!0,features:[y],decls:1,vars:1,consts:[["newPassword",""],["class","container d-flex flex-column gradient-bg-light-left mt-2 pt-2 pb-3 border border-opacity-50 rounded-2 shadow border-primary",4,"ngIf"],[1,"container","d-flex","flex-column","gradient-bg-light-left","mt-2","pt-2","pb-3","border","border-opacity-50","rounded-2","shadow","border-primary"],[1,"col","d-inline-flex"],[1,"gradient-text"],[1,"status-badge","text-nowrap"],[1,"text-success","border","border-success","border-2","rounded-2","p-1","small","ms-1","me-1"],[1,"text-danger","border","border-danger","border-2","rounded-2","p-1","small","ms-1","me-1"],[1,"text-primary","small"],[4,"ngIf"],[1,"bi","bi-check-circle-fill"],[1,"bi","bi-exclamation-octagon-fill"],[1,"fw-bold","text-decoration-underline"],["type","button",1,"btn","btn-success",3,"click","disableIfNoRoleExists"],[3,"ngSubmit"],[1,"input-group","mb-3"],["id","labelNewPassword",1,"input-group-text"],["type","password","aria-label","New Password","aria-describedby","labelNewPassword","id","newPassword","name","newPassword","ngModel","","autocomplete","new-password","required","","min","8","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@.#$!%*?&^])[A-Za-z\\d@.#$!%*?&]{8,50}$",1,"form-control"],["class","text-danger small fw-bold",4,"ngIf"],[1,"d-inline-flex","gap-2"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-danger","small","fw-bold"]],template:function(n,a){n&1&&u(0,Ge,13,4,"section",1),n&2&&s("ngIf",a.userData())},dependencies:[M,R,B,F,ie,N,k,ee,V,L,P,te]})}}return t})();var ii=(()=>{class t{constructor(){this.MY_SECURITY_SETTINGS_PAGE_INFO=J}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=C({type:t,selectors:[["app-my-account-settings-page"]],standalone:!0,features:[y],decls:5,vars:1,consts:[[3,"pageInfo"]],template:function(n,a){n&1&&m(0,"app-page-header",0)(1,"my-password-settings")(2,"my-email-address-settings")(3,"my-totp-settings")(4,"my-mfa-settings"),n&2&&s("pageInfo",a.MY_SECURITY_SETTINGS_PAGE_INFO)},dependencies:[re,ce,me,fe,ge]})}}return t})();export{ii as MyAccountSettingsPageComponent};
