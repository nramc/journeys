import{a as ie,b as ae}from"./chunk-I3LHJJ75.js";import{a as te}from"./chunk-LZ7UG4AN.js";import"./chunk-V4E4XOQJ.js";import{a as z}from"./chunk-6JEQANWC.js";import{a as $}from"./chunk-WBV5ZFBR.js";import{o as V}from"./chunk-BS35BKX7.js";import{a as ee}from"./chunk-VN2WCUN7.js";import{b as X,c as Z}from"./chunk-2OAX2NGY.js";import{a as J,f as K,g as Q}from"./chunk-G3RQSJ27.js";import"./chunk-UDTFSZL4.js";import"./chunk-IHA5MO4Q.js";import"./chunk-K5CL3ZEY.js";import"./chunk-DQCOKEUW.js";import{b as R,g as O,h as W,i as H,j as L,k as B,p as G,u as U}from"./chunk-LHKASPXQ.js";import"./chunk-CEUBYIDT.js";import{c as T}from"./chunk-PMU3YKHA.js";import{b as x,c as Y}from"./chunk-KNKR6QDW.js";import{h as j,j as q}from"./chunk-Q6OMGFHE.js";import"./chunk-NP2HF66C.js";import{c as N}from"./chunk-MOTUFGLK.js";import"./chunk-7CTIQ2PJ.js";import"./chunk-SY4F4KDM.js";import{Cb as C,Dc as l,Ec as A,Hc as D,Ic as k,Jc as F,Sb as P,Tb as S,Ub as M,Vb as E,Wb as w,Xb as s,Yb as o,Zb as i,Zc as I,_b as _,gc as y,lb as r,lc as g,oc as d,pa as p,va as u,wa as f,xb as v,yc as b}from"./chunk-YMVEMZFZ.js";var h=class{constructor(e,t,m,a,c,ne,oe){this._username=e,this._name=t,this._createdDate=m,this._passwordChangedAt=a,this._enabled=c,this._roles=ne,this._mfaEnabled=oe}set name(e){this._name=e}get name(){return this._name}get username(){return this._username}get createdDate(){return this._createdDate}get passwordChangedAt(){return this._passwordChangedAt}get enabled(){return this._enabled}get roles(){return this._roles}set mfaEnabled(e){this._mfaEnabled=e}get mfaEnabled(){return this._mfaEnabled}};function re(n,e){if(n&1&&(o(0,"div",9)(1,"mat-checkbox",17),l(2),i()()),n&2){let t=e.$implicit;r(),s("checked",!0),r(),A(t)}}function le(n,e){if(n&1&&(o(0,"button",18),l(1," Save "),i()),n&2){d();let t=b(1);s("disabled",!t.valid)}}function me(n,e){if(n&1){let t=y();o(0,"button",19),g("click",function(){u(t);let a=d(2);return f(a.cancel())}),l(1," Cancel "),i()}}function ce(n,e){if(n&1){let t=y();o(0,"form",4,0),g("submit",function(){u(t);let a=b(1),c=d();return f(c.save(a))}),o(2,"mat-form-field",5)(3,"mat-label"),l(4,"Username"),i(),_(5,"input",6),i(),o(6,"div")(7,"h3",7),l(8,"Status:"),i(),o(9,"mat-checkbox",8),l(10," Active "),i()(),o(11,"div")(12,"h3",7),l(13,"Role(s)"),i(),E(14,re,3,2,"div",9,M),i(),o(16,"mat-form-field",10)(17,"mat-label",11),l(18,"Created"),i(),_(19,"input",12),i(),o(20,"mat-form-field",10)(21,"mat-label",11),l(22,"Name"),i(),o(23,"input",13),F("ngModelChange",function(a){u(t);let c=d();return k(c.myProfileData().name,a)||(c.myProfileData().name=a),f(a)}),i()(),o(24,"div",14),C(25,le,2,1,"button",15)(26,me,2,0,"button",16),i()()}if(n&2){let t=d();r(5),s("value",t.myProfileData().username),r(4),s("checked",t.myProfileData().enabled),r(5),w(t.myProfileData().roles),r(5),s("value",t.myProfileData().createdDate),r(4),D("ngModel",t.myProfileData().name),s("readOnly",!t.hasAccess())}}var Ve=(()=>{let e=class e{constructor(){this.MY_PROFILE_PAGE_INFO=V,this.Role=x,this.notificationService=p($),this.myAccountService=p(ee),this.router=p(N),this.authService=p(Y),this.myProfileData=T(this.myAccountService.getProfileData(),{initialValue:new h("","","","",!1,[],!1)}),this.hasAccess=I(()=>this.authService.hasAnyRole([x.AUTHENTICATED_USER]))}save(m){m.valid&&m.dirty&&this.myAccountService.saveProfileData(this.myProfileData()).subscribe({next:a=>this.onSuccessCallback(),error:a=>this.onErrorCallback()})}onSuccessCallback(){this.notificationService.showSuccess("Profile data saved successfully")}onErrorCallback(){this.notificationService.showError("Update failed. Please check data.")}cancel(){this.router.navigate(["/"]).then(console.log)}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=v({type:e,selectors:[["app-my-profile-page"]],decls:5,vars:2,consts:[["profileForm","ngForm"],[3,"pageInfo"],[1,"container","mx-auto","mt-6"],[1,"w-full","max-w-4xl","flex","flex-col","gap-2"],[1,"w-full","max-w-4xl","flex","flex-col","gap-2",3,"submit"],["appearance","outline",1,"w-full"],["matInput","","id","username","name","username","type","text","readonly","",3,"value"],[1,"text-sm","font-medium","text-primary"],["id","isAccountActive","name","isAccountActive","disabled","",3,"checked"],[1,"pl-4"],[1,"w-full"],[1,"font-bold","text-primary"],["matInput","","id","createdDate","type","datetime-local","disabled","",3,"value"],["matInput","","id","name","name","name","required","",3,"ngModelChange","ngModel","readOnly"],[1,"flex","justify-center","gap-2"],["mat-flat-button","","color","primary","type","submit",3,"disabled",4,"appHasWriteAccess"],["mat-raised-button","","color","warn","type","button",3,"click",4,"appHasWriteAccess"],["disabled","",3,"checked"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","warn","type","button",3,"click"]],template:function(a,c){a&1&&(o(0,"header"),_(1,"app-page-header",1),i(),o(2,"main")(3,"section",2),P(4,ce,27,5,"form",3),i()()),a&2&&(r(),s("pageInfo",c.MY_PROFILE_PAGE_INFO),r(3),S(c.myProfileData()?4:-1))},dependencies:[te,U,B,R,O,W,G,L,H,z,Q,K,J,Z,X,q,j,ae,ie],encapsulation:2,changeDetection:0});let n=e;return n})();export{Ve as MyProfilePageComponent};
