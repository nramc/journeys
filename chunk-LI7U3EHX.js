import{a as i}from"./chunk-KRGZIYPA.js";import{c as x}from"./chunk-G6LWCROE.js";import{a as v,c as A}from"./chunk-INCHVP6V.js";import{ha as g,na as p,r as C,w as j}from"./chunk-BGW2GSJU.js";var S="https://res.cloudinary.com/journeytogether/image/upload/v1712604194/journey/readonly/aeqhy3zwrwko7ba2rinr.jpg",b="default",B=(n,s)=>Date.parse(n.journeyDate)-Date.parse(s.journeyDate),m=class{constructor(s="",e="",t="",o="",a=[],u=S,c=new y,h=new l,r=new d,U=!1,D=[]){this.id=s,this.name=e,this.description=t,this.journeyDate=o,this.tags=a,this.thumbnail=u,this.geoDetails=c,this.imagesDetails=h,this.videosDetails=r,this.isPublished=U,this.visibilities=D}},y=class{constructor(s="",e="",t="",o=b,a=void 0,u=void 0){this.title=s,this.city=e,this.country=t,this.category=o,this.location=a,this.geoJson=u}},l=class{constructor(s=[]){this.images=s}},f=class{constructor(s,e,t="",o="",a=!1,u=!1,c=""){this.url=s,this.assetId=e,this.publicId=t,this.title=o,this.isFavorite=a,this.isThumbnail=u,this.eventDate=c}},d=class{constructor(s=[]){this.videos=s}},T=class{constructor(s){this.videoId=s}};var L=(()=>{class n{constructor(){this.httpClient=p(A),this.authService=p(x)}createJourney(e){let t=this.authService.getCurrentUserContext();return this.httpClient.post(i.journeyApi+"/journey",e,{headers:{Authorization:`Bearer ${t.accessToken}`}})}findJourneyByQuery(e,t,o,a,u,c,h=[]){let r=new v;return r=r.set("q",e.text??""),r=r.set("city",e.city??""),r=r.set("country",e.country??""),r=r.set("category",e.category??""),r=r.set("year",e.year??""),r=r.set("sort",t),r=r.set("order",o.toUpperCase()),r=r.set("pageIndex",a),r=r.set("pageSize",u),r=r.set("publishedOnly",c),r=r.set("tags",h.join(",")),this.getAllJourneys(r)}getAllJourneys(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(i.journeyApi+"/journeys",{params:e,headers:{Authorization:`Bearer ${t.accessToken}`}})}getUpcomingAnniversary(){let e=this.authService.getCurrentUserContext();return e.isAuthenticated?this.httpClient.get(i.journeyApi+"/journeys/upcomingAnniversary",{headers:{Authorization:`Bearer ${e.accessToken}`}}).pipe(j(t=>[...t].sort(B))):C()}getAllJourneysAsGeoJson(){let e=this.authService.getCurrentUserContext();return this.httpClient.get(i.journeyApi+"/journeys/published",{headers:{Accept:"application/geo+json",Authorization:`Bearer ${e.accessToken}`}})}getJourneyById(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(i.journeyApi+"/journey/"+e,{headers:{Authorization:`Bearer ${t.accessToken}`}})}saveJourneyBasicDetails(e){let t=this.authService.getCurrentUserContext();return this.httpClient.put(i.journeyApi+"/journey/"+e.id,e,{headers:{"Content-Type":"application/vnd.journey.api.basic.v1+json",Authorization:`Bearer ${t.accessToken}`}})}saveJourneyGeoDetails(e,t){let o=this.authService.getCurrentUserContext();return this.httpClient.put(i.journeyApi+"/journey/"+e.id,t,{headers:{"Content-Type":"application/vnd.journey.api.geo.v1+json",Authorization:`Bearer ${o.accessToken}`}})}saveJourneyImagesDetails(e,t){let o=this.authService.getCurrentUserContext();return this.httpClient.put(i.journeyApi+"/journey/"+e.id,t,{headers:{"Content-Type":"application/vnd.journey.api.images.v1+json",Authorization:`Bearer ${o.accessToken}`}})}saveJourneyVideosDetails(e,t){let o=this.authService.getCurrentUserContext();return this.httpClient.put(i.journeyApi+"/journey/"+e.id,t,{headers:{"Content-Type":"application/vnd.journey.api.videos.v1+json",Authorization:`Bearer ${o.accessToken}`}})}publishJourney(e){let t=this.authService.getCurrentUserContext();return this.httpClient.put(i.journeyApi+"/journey/"+e.id,e,{headers:{"Content-Type":"application/vnd.journey.api.publish.v1+json",Authorization:`Bearer ${t.accessToken}`}})}deleteJourney(e){let t=this.authService.getCurrentUserContext();return this.httpClient.delete(i.journeyApi+"/journey/"+e.id,{headers:{Authorization:`Bearer ${t.accessToken}`}})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{S as a,b,m as c,y as d,l as e,f,d as g,T as h,L as i};
