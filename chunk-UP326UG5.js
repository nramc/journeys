import{a as X}from"./chunk-HISNGUM2.js";import{a as Y}from"./chunk-AE3P56DV.js";import"./chunk-52CTQKKZ.js";import{c as P}from"./chunk-SNVCUL6N.js";import{a as q}from"./chunk-47L2HURF.js";import{c as G,h as R,i as W,j as D,k as j,l as B,t as J,u as U,v as z,w as H,y as K,z as Q}from"./chunk-YK4BR766.js";import"./chunk-VVLSS7KD.js";import"./chunk-MLE53YZQ.js";import"./chunk-67SFSZAO.js";import{e as L,h as O}from"./chunk-WB3DF4XI.js";import"./chunk-XL47KMEJ.js";import{k as V}from"./chunk-BPR4VFT2.js";import{A as E,Bc as N,Ea as g,Fa as _,I as T,Ib as u,La as w,Nb as a,Yb as i,Zb as n,_b as k,cc as F,hc as M,jc as h,pb as o,qb as I,ra as f,ta as C,tc as d,uc as r,xc as y,yc as S,zb as A,zc as x}from"./chunk-HOCLHVTI.js";function Z(t,s){if(t&1&&(i(0,"div",25)(1,"div",26),r(2,"Account activated successfully!"),n(),i(3,"p",27),r(4,"Please "),i(5,"a",28),r(6,"SignIn"),n(),r(7," with your credentials and start your Journey with us."),n()()),t&2){let e=h();o(5),a("routerLink",e.LOGIN_PAGE_INFO.path)}}function $(t,s){t&1&&(i(0,"div")(1,"p",29),r(2,"Activation failed. Please check and correct data. If issue still persists, then please try again later."),n()())}function ee(t,s){t&1&&(i(0,"div"),r(1,"Email Address is required."),n())}function te(t,s){t&1&&(i(0,"div"),r(1,"Email Address must be at most 50 characters long."),n())}function ie(t,s){t&1&&(i(0,"div"),r(1," Email Address must have at least 8 characters long. "),n())}function ne(t,s){t&1&&(i(0,"div"),r(1,"Email Address invalid."),n())}function re(t,s){if(t&1&&(i(0,"div",30),u(1,ee,2,0,"div",9)(2,te,2,0,"div",9)(3,ie,2,0,"div",9)(4,ne,2,0,"div",9),n()),t&2){h();let e=d(14);o(),a("ngIf",e.errors==null?null:e.errors.required),o(),a("ngIf",e.errors==null?null:e.errors.maxlength),o(),a("ngIf",(e.errors==null?null:e.errors.minlength)&&!(e.errors!=null&&e.errors.email)),o(),a("ngIf",(e.errors==null?null:e.errors.email)&&!(e.errors!=null&&e.errors.email))}}function oe(t,s){t&1&&(i(0,"div"),r(1,"Token is required."),n())}function ae(t,s){if(t&1&&(i(0,"div",30),u(1,oe,2,0,"div",9),n()),t&2){h();let e=d(21);o(),a("ngIf",e.errors==null?null:e.errors.required)}}var b=class{constructor(s="",e=""){this.username=s,this.emailToken=e}},ye=(()=>{class t{constructor(e){this.LOGIN_PAGE_INFO=P,this.destroyRef=f(w),this.bffService=f(X),this.registrationService=f(Y),this.isSuccessful=A(!1),this.isErrorOccurred=A(!1),this.accountActivationForm=new b(e.snapshot.queryParamMap.get("identifier"),e.snapshot.queryParamMap.get("token"))}activate(e){e.valid?this.activateAccount():this.onError("Invalid data")}ngOnInit(){this.activateAccount()}activateAccount(){this.bffService.getVersion().pipe(q(this.destroyRef),T(e=>this.accountActivationForm.username!=null&&this.accountActivationForm.emailToken!=null),E(e=>this.registrationService.activate({username:this.accountActivationForm.username,emailToken:this.accountActivationForm.emailToken,apiVersion:e.version}))).subscribe({next:e=>this.onSuccess(),error:e=>this.onError(e)})}onSuccess(){this.isSuccessful.set(!0),this.isErrorOccurred.set(!1)}onError(e){console.log(e),this.isErrorOccurred.set(!0),this.isSuccessful.set(!1)}static{this.\u0275fac=function(v){return new(v||t)(I(L))}}static{this.\u0275cmp=C({type:t,selectors:[["app-account-activation"]],standalone:!0,features:[N],decls:36,vars:10,consts:[["activationForm","ngForm"],["username","ngModel"],["emailToken","ngModel"],[1,"h-100","d-flex","justify-content-center","align-items-center"],[1,"p-3","p-md-4","p-xl-5","col-md-6"],[1,"card","border-primary","shadow-lg"],[1,"card-header","gradient-bg","text-light","fs-4"],[1,"card-body","p-3","p-md-4","p-xl-5"],["class","card-title small p-2 border border-success border-2 shadow-lg rounded-2 bg-transparent text-success text-center",4,"ngIf"],[4,"ngIf"],[3,"ngSubmit"],[1,"row","gy-3","gy-md-2","overflow-hidden"],[1,"col-12"],[1,"form-floating","mb-3"],["type","email","id","username","name","username","placeholder","Email Address","autocomplete","off","required","","minlength","8","maxlength","50","email","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","disabled"],["for","username"],["class","form-text text-danger",4,"ngIf"],["type","text","id","emailToken","name","emailToken","placeholder","Email Token","autocomplete","off","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","disabled"],["for","emailToken"],[1,"d-grid"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"row"],[1,"mt-5","mb-4","text-primary"],[1,"m-0","text-center","text-primary","small"],[1,"fw-bold",3,"routerLink"],[1,"card-title","small","p-2","border","border-success","border-2","shadow-lg","rounded-2","bg-transparent","text-success","text-center"],[1,"fs-6","mb-2","fw-bold"],[1,"fs-6"],[3,"routerLink"],[1,"text-danger","p-2","border","border-danger","border-2","shadow-lg","rounded-1","bg-transparent"],[1,"form-text","text-danger"]],template:function(v,l){if(v&1){let m=F();i(0,"div",3)(1,"section",4)(2,"div",5)(3,"div",6),r(4,"Account Activation"),n(),i(5,"div",7),u(6,Z,8,1,"div",8)(7,$,3,0,"div",9),i(8,"form",10,0),M("ngSubmit",function(){g(m);let c=d(9);return _(l.activate(c))}),i(10,"div",11)(11,"div",12)(12,"div",13)(13,"input",14,1),x("ngModelChange",function(c){return g(m),S(l.accountActivationForm.username,c)||(l.accountActivationForm.username=c),_(c)}),n(),i(15,"label",15),r(16,"Email Address"),n(),u(17,re,5,4,"div",16),n()(),i(18,"div",12)(19,"div",13)(20,"input",17,2),x("ngModelChange",function(c){return g(m),S(l.accountActivationForm.emailToken,c)||(l.accountActivationForm.emailToken=c),_(c)}),n(),i(22,"label",18),r(23,"Token"),n(),u(24,ae,2,1,"div",16),n()(),i(25,"div",12)(26,"div",19)(27,"button",20),r(28,"Activate"),n()()()()(),i(29,"div",21)(30,"div",12),k(31,"hr",22),i(32,"p",23),r(33,"Already have an account? "),i(34,"a",24),r(35,"Sign in"),n()()()()()()()()}if(v&2){let m=d(9),p=d(14),c=d(21);o(6),a("ngIf",l.isSuccessful()),o(),a("ngIf",l.isErrorOccurred()),o(6),y("ngModel",l.accountActivationForm.username),a("disabled",l.isSuccessful()),o(4),a("ngIf",p.invalid&&(p.dirty||m.submitted)),o(3),y("ngModel",l.accountActivationForm.emailToken),a("disabled",l.isSuccessful()),o(4),a("ngIf",c.invalid&&(c.dirty||m.submitted)),o(3),a("disabled",l.isSuccessful()),o(7),a("routerLink",l.LOGIN_PAGE_INFO.path)}},dependencies:[K,B,G,R,W,J,z,H,U,j,D,V,Q,O]})}}return t})();export{ye as AccountActivationComponent,b as AccountActivationForm};
