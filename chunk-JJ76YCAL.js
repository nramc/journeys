import{a as Fe,b as Oe}from"./chunk-PU57GITJ.js";import{a as Ae,b as Ue,c as Be,d as Re,e as K,g as X,h as Ye}from"./chunk-LJJ42HNI.js";import"./chunk-HNDBVHCE.js";import{a as Ne,b as We,e as Pe,f as Le}from"./chunk-WDIKRYKU.js";import{a as Qe,b as Ke}from"./chunk-KITXBB74.js";import{a as qe,b as ze,c as le,d as se,e as me,f as de,g as He}from"./chunk-SKU7AU7X.js";import"./chunk-VTZCPPXM.js";import{a as P}from"./chunk-5KJMJWBT.js";import{b as ke}from"./chunk-GNEXLH2Q.js";import"./chunk-FZZWV7IL.js";import{a as Ge}from"./chunk-UMTTWNF4.js";import{a as ie}from"./chunk-DTKJQCO3.js";import"./chunk-VSQTGOJW.js";import{a as U}from"./chunk-GNQ7HQXT.js";import"./chunk-YWHW2ZKJ.js";import{b as Ee}from"./chunk-QQPV2QV6.js";import"./chunk-TT75TPET.js";import{A as je,b as Se,c as H,h as O,i as G,j as N,k as A,l as W,m as De,n as Ie,p as ne,q as oe,r as re,s as Je,t as Me,u as Y,w as Ve,x as Te,z as T}from"./chunk-ET22MTXY.js";import{a as Q}from"./chunk-6WCMIU77.js";import{a as z}from"./chunk-ICZJ2FQK.js";import"./chunk-FVZWZKWT.js";import{S as we}from"./chunk-2YMU56OM.js";import{e as Ce,g as te,h as xe}from"./chunk-A3QWJMVV.js";import"./chunk-CBUXQRBC.js";import{i as be,k as j,z as ve}from"./chunk-LBCNPZTN.js";import{$b as D,Ab as E,Ac as C,Bb as pe,Cc as I,Db as J,Fa as c,Fc as ye,Ga as u,I as ce,Jb as y,Ob as p,Ra as ee,Rb as ae,Sa as ue,Ub as k,Wb as ge,Xb as L,Yb as F,Zb as n,_b as o,a as M,ad as Z,b as V,cd as he,dc as x,ic as f,kc as g,mb as R,qa as w,qb as s,sc as _e,tc as fe,ua as S,uc as h,vc as l,wc as q,yc as b,zc as v}from"./chunk-QA4KX23A.js";function ot(i,d){i&1&&(n(0,"div"),l(1,"Longitude is required."),o())}function rt(i,d){i&1&&(n(0,"div"),l(1,"Longitude must be between -180.0 to 180.0."),o())}function at(i,d){i&1&&(n(0,"div"),l(1,"Longitude must be between -180.0 to 180.0."),o())}function lt(i,d){i&1&&(n(0,"div"),l(1,"Latitude is required."),o())}function st(i,d){i&1&&(n(0,"div"),l(1,"Latitude must be between -90.0 to 90.0."),o())}function mt(i,d){i&1&&(n(0,"div"),l(1,"Latitude must be between -9 0.0 to 90.0."),o())}var Xe=(()=>{class i{constructor(){this.location=J(),this._location=E({type:"Point",coordinates:[]}),this.disabled=J(!1),this.location$=Ee(this.location).pipe(ce(e=>e?.coordinates!=null&&e.coordinates.length==2)),this.location$.subscribe(e=>{console.log(e),this._location.update(r=>V(M({},r),{coordinates:e.coordinates}))})}pasteClipboardCoordinates(){navigator.clipboard.readText().then(e=>{if(console.debug("Value copied from clipboard:",e),e&&e.split(",").length==2){let r=e.split(",");this._location.update(t=>V(M({},t),{coordinates:[Number(r[0]),Number(r[1])]})),this.fireChangeEvent()}})}pasteClipboardGoogleCoordinates(){navigator.clipboard.readText().then(e=>{if(console.debug("Value copied from clipboard:",e),e&&e.split(",").length==2){let r=e.split(",");this._location.update(t=>V(M({},t),{coordinates:[Number(r[1]),Number(r[0])]})),this.fireChangeEvent()}})}fireChangeEvent(){this._location().coordinates.filter(e=>e!==null).length==2&&(this.location.update(e=>({type:"Point",coordinates:this._location().coordinates})),console.log("fireChangeEvent:",this.location()))}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=S({type:i,selectors:[["app-edit-geo-location"]],inputs:{location:[1,"location"],disabled:[1,"disabled"]},outputs:{location:"locationChange",disabled:"disabledChange"},standalone:!0,features:[I],decls:24,vars:13,consts:[["longitude","ngModel"],["latitude","ngModel"],[1,"input-group"],["type","number","placeholder","long","aria-label","Longitude","matTooltip","Longitude","id","longitude","name","longitude","required","","min","-180.0","max","180.0",1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["data-bs-toggle","dropdown","aria-expanded","false","matTooltip","Paste Options",1,"btn","btn-primary","input-group-text","dropdown-toggle",3,"disabled"],[1,"dropdown-menu"],["type","button",1,"dropdown-item",3,"click"],["type","number","placeholder","lat","aria-label","Latitude","matTooltip","Latitude","id","latitude","name","latitude","required","","min","-90.0","max","90.0",1,"form-control",3,"ngModelChange","change","ngModel","disabled"],[1,"form-text","text-danger"],[3,"hidden"],[4,"ngIf"]],template:function(r,t){if(r&1){let a=x();n(0,"div",2)(1,"input",3,0),C("ngModelChange",function(m){return c(a),v(t._location().coordinates[0],m)||(t._location().coordinates[0]=m),u(m)}),f("change",function(){return c(a),u(t.fireChangeEvent())}),o(),n(3,"button",4)(4,"mat-icon"),l(5,"content_paste_go"),o()(),n(6,"ul",5)(7,"li")(8,"button",6),f("click",function(){return c(a),u(t.pasteClipboardCoordinates())}),l(9," Clipboard "),o()(),n(10,"li")(11,"button",6),f("click",function(){return c(a),u(t.pasteClipboardGoogleCoordinates())}),l(12," Clipboard (Copied from Google Map) "),o()()(),n(13,"input",7,1),C("ngModelChange",function(m){return c(a),v(t._location().coordinates[1],m)||(t._location().coordinates[1]=m),u(m)}),f("change",function(){return c(a),u(t.fireChangeEvent())}),o()(),n(15,"div",8)(16,"div",9),y(17,ot,2,0,"div",10)(18,rt,2,0,"div",10)(19,at,2,0,"div",10),o(),n(20,"div",9),y(21,lt,2,0,"div",10)(22,st,2,0,"div",10)(23,mt,2,0,"div",10),o()()}if(r&2){let a=h(2),_=h(14);s(),b("ngModel",t._location().coordinates[0]),p("disabled",t.disabled()),s(2),p("disabled",t.disabled()),s(10),b("ngModel",t._location().coordinates[1]),p("disabled",t.disabled()),s(3),p("hidden",a.valid||a.pristine),s(),p("ngIf",a.errors==null?null:a.errors.required),s(),p("ngIf",a.errors==null?null:a.errors.min),s(),p("ngIf",a.errors==null?null:a.errors.max),s(),p("hidden",_.valid||_.pristine),s(),p("ngIf",_.errors==null?null:_.errors.required),s(),p("ngIf",_.errors==null?null:_.errors.min),s(),p("ngIf",_.errors==null?null:_.errors.max)}},dependencies:[T,H,De,O,Y,Me,Je,A,j,ie,z],styles:["input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"],changeDetection:0})}}return i})();function dt(i,d){i&1&&(n(0,"p",9)(1,"mat-icon"),l(2,"check_circle"),o(),n(3,"span"),l(4,"GeoJson valid"),o()())}function ct(i,d){i&1&&(n(0,"p",10)(1,"mat-icon"),l(2,"cancel"),o(),n(3,"span"),l(4,"GeoJson is not valid"),o()())}var Ze=(()=>{class i{constructor(){this.geoJson=J(void 0),this.geoJsonString=Z(()=>JSON.stringify(this.geoJson(),null,2)),this.isGeoJsonValid=E(!0)}onGeoJsonChange(e){let t=e.target.value;try{let a=JSON.parse(t);a.type==="FeatureCollection"&&(this.geoJson.set(a),this.isGeoJsonValid.set(!0))}catch(a){this.isGeoJsonValid.set(!1),console.error("Invalid GeoJSON:",a)}}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=S({type:i,selectors:[["app-edit-geo-json"]],inputs:{geoJson:[1,"geoJson"]},outputs:{geoJson:"geoJsonChange"},standalone:!0,features:[I],decls:27,vars:2,consts:[["rawGeoJsonDialog",""],["type","button",1,"btn","btn-primary","btn-sm","w-100",3,"click"],[1,"w-50","h-75"],["type","button",1,"btn","btn-close","float-end",3,"click"],[1,"d-flex","flex-column"],[1,"mb-1"],[1,"border-gradient-primary","gradient-text"],["rows","20","id","geojson","name","geojson",1,"form-control","geojson-field",3,"input","value"],["type","button",1,"w-100","btn","btn-sm","btn-primary",3,"click"],[1,"text-success","d-inline-flex","align-items-center","align-content-center","gap-2"],[1,"text-danger","d-inline-flex","align-items-center","align-content-center","gap-2"],[1,"mb-1","d-flex","flex-column"],["href","https://geojson.io/","target","_blank",1,"d-inline-flex","align-content-center","align-items-center","justify-content-center"]],template:function(r,t){if(r&1){let a=x();n(0,"section")(1,"button",1),f("click",function(){c(a);let m=h(4);return u(m.showModal())}),l(2," Raw GeoJSON Data "),o(),n(3,"dialog",2,0)(5,"button",3),f("click",function(){c(a);let m=h(4);return u(m.close())}),l(6,"\xA0"),o(),n(7,"div",4)(8,"div",5)(9,"h4",6),l(10,"Geo Json"),o()(),n(11,"div",5)(12,"textarea",7),f("input",function(m){return c(a),u(t.onGeoJsonChange(m))}),o()(),n(13,"div",5)(14,"button",8),f("click",function(){c(a);let m=h(4);return u(m.close())}),l(15,"Save"),o()(),n(16,"div",5),y(17,dt,5,0,"p",9)(18,ct,5,0,"p",10),o(),n(19,"div",11)(20,"p"),l(21," Tip: "),n(22,"a",12)(23,"span"),l(24,"Create GeoJSON"),o(),n(25,"mat-icon"),l(26,"open_in_new"),o()()()()()()()}r&2&&(s(12),p("value",t.geoJsonString()),s(5),k(t.isGeoJsonValid()?17:18))},dependencies:[T,z],styles:["textarea[_ngcontent-%COMP%]{height:auto;font-family:monospace}"]})}}return i})();function ut(i,d){i&1&&(n(0,"div"),l(1,"Title is required."),o())}function pt(i,d){i&1&&(n(0,"div"),l(1,"Title must be at least 10 characters long."),o())}function gt(i,d){i&1&&(n(0,"div"),l(1,"Title must be at most 100 characters long."),o())}function _t(i,d){i&1&&(n(0,"div"),l(1,"City is required."),o())}function ft(i,d){i&1&&(n(0,"div"),l(1,"City must be at least 3 characters long."),o())}function yt(i,d){i&1&&(n(0,"div"),l(1,"City must be at most 50 characters long."),o())}function ht(i,d){i&1&&(n(0,"div"),l(1,"Country is required."),o())}function bt(i,d){i&1&&(n(0,"div"),l(1,"Country must be at least 3 characters long."),o())}function vt(i,d){i&1&&(n(0,"div"),l(1,"Country must be at most 50 characters long."),o())}function Ct(i,d){if(i&1&&(n(0,"option",22),l(1),o()),i&2){let e=d.$implicit;p("value",e),s(),q(e)}}function xt(i,d){i&1&&(n(0,"div"),l(1,"Category is required."),o())}function Et(i,d){if(i&1){let e=x();n(0,"form",6,0),f("ngSubmit",function(){c(e);let t=h(1),a=g();return u(a.save(t))}),n(2,"div",7)(3,"div",8)(4,"app-world-map",9),f("location",function(t){c(e);let a=g();return u(a.addGeoLocation(t))}),o()(),n(5,"div",10)(6,"div",11)(7,"app-edit-geo-location",12),C("locationChange",function(t){c(e);let a=g();return v(a.formData.location,t)||(a.formData.location=t),u(t)}),o()(),n(8,"div",11)(9,"label",13),l(10,"Title"),o(),n(11,"div",14)(12,"input",15,1),C("ngModelChange",function(t){c(e);let a=g();return v(a.formData.title,t)||(a.formData.title=t),u(t)}),o()(),n(14,"div",16),y(15,ut,2,0,"div",17)(16,pt,2,0,"div",17)(17,gt,2,0,"div",17),o()(),n(18,"div",11)(19,"label",13),l(20,"City"),o(),n(21,"div",14)(22,"input",18,2),C("ngModelChange",function(t){c(e);let a=g();return v(a.formData.city,t)||(a.formData.city=t),u(t)}),o()(),n(24,"div",16),y(25,_t,2,0,"div",17)(26,ft,2,0,"div",17)(27,yt,2,0,"div",17),o()(),n(28,"div",11)(29,"label",13),l(30,"Country"),o(),n(31,"div",14)(32,"input",19,3),C("ngModelChange",function(t){c(e);let a=g();return v(a.formData.country,t)||(a.formData.country=t),u(t)}),o()(),n(34,"div",16),y(35,ht,2,0,"div",17)(36,bt,2,0,"div",17)(37,vt,2,0,"div",17),o()(),n(38,"div",11)(39,"label",20),l(40,"Category"),o(),n(41,"select",21,4),C("ngModelChange",function(t){c(e);let a=g();return v(a.formData.category,t)||(a.formData.category=t),u(t)}),L(43,Ct,2,2,"option",22,ge),o(),n(45,"div",16),y(46,xt,2,0,"div",17),o()(),n(47,"div",11)(48,"app-edit-geo-json",23),C("geoJsonChange",function(t){c(e);let a=g();return v(a.formData.geoJson,t)||(a.formData.geoJson=t),u(t)}),o()(),n(49,"div",24)(50,"label",25),l(51,"Map"),o(),n(52,"div",26)(53,"input",27),C("ngModelChange",function(t){c(e);let a=g();return v(a.showMapOption,t)||(a.showMapOption=t),u(t)}),o(),n(54,"label",28),l(55,"Location"),o(),n(56,"input",29),C("ngModelChange",function(t){c(e);let a=g();return v(a.showMapOption,t)||(a.showMapOption=t),u(t)}),o(),n(57,"label",30),l(58,"GeoJson"),o()()()()(),n(59,"div",31)(60,"div",32)(61,"button",33),l(62," Save "),o(),n(63,"button",34),l(64,"Next "),o()()()()}if(i&2){let e=h(1),r=h(13),t=h(23),a=h(33),_=h(42),m=g();s(4),p("geoJsonData",m.geoJsonData())("iconType",m.formData.category())("enableGeoCoding",!0),s(3),b("location",m.formData.location),s(5),b("ngModel",m.formData.title),p("disabled",m.isReadOnly()),s(2),p("hidden",r.valid||r.pristine),s(),p("ngIf",r.errors==null?null:r.errors.required),s(),p("ngIf",r.errors==null?null:r.errors.minlength),s(),p("ngIf",r.errors==null?null:r.errors.maxlength),s(5),b("ngModel",m.formData.city),p("disabled",m.isReadOnly()),s(2),p("hidden",t.valid||t.pristine),s(),p("ngIf",t.errors==null?null:t.errors.required),s(),p("ngIf",t.errors==null?null:t.errors.minlength),s(),p("ngIf",t.errors==null?null:t.errors.maxlength),s(5),b("ngModel",m.formData.country),p("disabled",m.isReadOnly()),s(2),p("hidden",a.valid||a.pristine),s(),p("ngIf",a.errors==null?null:a.errors.required),s(),p("ngIf",a.errors==null?null:a.errors.minlength),s(),p("ngIf",a.errors==null?null:a.errors.maxlength),s(4),b("ngModel",m.formData.category),p("disabled",m.isReadOnly()),s(2),F(m.CATEGORIES),s(2),p("hidden",_.valid||_.pristine),s(),p("ngIf",_.errors==null?null:_.errors.required),s(2),b("geoJson",m.formData.geoJson),s(5),b("ngModel",m.showMapOption),s(3),b("ngModel",m.showMapOption),s(5),p("disabled",!e.form.valid),s(2),p("disabled",!e.form.valid)}}var $e=(()=>{class i{constructor(){this.CATEGORIES=Qe,this.journeyService=w(P),this.notificationService=w(U),this.journey=J.required(),this.formData={location:E(void 0),title:E(""),city:E(""),country:E(""),category:E("default"),geoJson:E(void 0)},this.mode=J(X.EDIT),this.isReadOnly=Z(()=>this.mode()===X.VIEW),this.showMapOption=E("Location"),this.geoJsonData=Z(()=>this.showMapOption()=="Location"?this.formData.location():this.formData.geoJson()),he(()=>{console.log("data:",this.formData.location())})}ngOnInit(){this.copyToForm(this.journey().geoDetails??new le)}save(e){console.debug("submitted form:",e),this.journeyService.saveJourneyGeoDetails(this.journey(),this.copyDataFromForm()).subscribe({next:r=>this.onUpdateSuccess(r),error:r=>this.onError("Unexpected error while saving geo data",r)})}onUpdateSuccess(e){this.notificationService.showSuccess("Journey details saved successfully.")}onError(e,r){this.notificationService.showError(e),console.error(r)}copyToForm(e){this.formData.location.set(e.location),this.formData.title.set(e.title),this.formData.city.set(e.city),this.formData.country.set(e.country),this.formData.category.set(e.category||"default"),this.formData.geoJson.set(e.geoJson)}copyDataFromForm(){return new le(this.formData.title(),this.formData.city(),this.formData.country(),this.formData.category(),this.formData.location(),this.formData.geoJson()||this.formData.location())}addGeoLocation(e){this.formData.location.set(e.location),this.formData.title.set(e.name),this.formData.city.set(e.state),this.formData.country.set(e.country)}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=S({type:i,selectors:[["app-edit-journey-geo-details"]],inputs:{journey:[1,"journey"],mode:[1,"mode"]},outputs:{journey:"journeyChange",mode:"modeChange"},standalone:!0,features:[I],decls:1,vars:1,consts:[["journeyForm","ngForm"],["title","ngModel"],["city","ngModel"],["country","ngModel"],["category","ngModel"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],[1,"row","geo-data-row","mb-3"],[1,"col-12","col-md-8",2,"position","relative","min-height","25vh"],[1,"h-50",3,"location","geoJsonData","iconType","enableGeoCoding"],[1,"col-12","col-md-4","d-flex","flex-column"],[1,"mb-3"],[3,"locationChange","location"],["for","title",1,"form-label"],[1,"input-group"],["type","text","id","title","name","title","required","","maxlength","100","minlength","10","placeholder","Title",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"form-text","text-danger",3,"hidden"],[4,"ngIf"],["type","text","id","city","name","city","required","","minlength","3","maxlength","50","placeholder","City or Region",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","text","id","country","name","country","required","","minlength","3","maxlength","50","placeholder","Country",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","category",1,"form-label"],["id","category","aria-label","Category","required","","name","category",1,"form-select","form-select-sm",3,"ngModelChange","ngModel","disabled"],[3,"value"],[3,"geoJsonChange","geoJson"],[1,"mb-3","text-center"],["for","buttonGroupLabel",1,"form-label","form-control-sm"],["id","buttonGroupLabel","aria-label","Basic radio toggle button group",1,"btn-group"],["type","radio","name","locationOption","id","locationOption","value","Location","autocomplete","off","checked","",1,"btn-check",3,"ngModelChange","ngModel"],["for","locationOption",1,"btn","btn-outline-primary"],["type","radio","name","geoJsonOption","id","geoJsonOption","autocomplete","off","value","GeoJson",1,"btn-check",3,"ngModelChange","ngModel"],["for","geoJsonOption",1,"btn","btn-outline-primary"],[1,"row"],[1,"col-12","d-grid","gap-2","d-flex","justify-content-center"],["type","submit",1,"btn","btn-outline-success",3,"disabled"],["type","button","matStepperNext","",1,"btn","btn-outline-primary",3,"disabled"]],template:function(r,t){r&1&&y(0,Et,65,31,"form",5),r&2&&p("ngIf",t.journey())},dependencies:[T,W,oe,re,H,ne,Ie,O,G,Y,Ve,Te,A,N,Ke,K,j,Xe,Ze],styles:[".geo-data-row[_ngcontent-%COMP%]{min-height:75vh!important}"],changeDetection:0})}}return i})();var et=(()=>{class i{constructor(){this.imageItem=ue.required(),this.save=ee(),this.cancel=ee(),this.remove=ee()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=S({type:i,selectors:[["app-edit-journey-image-item"]],inputs:{imageItem:[1,"imageItem"]},outputs:{save:"save",cancel:"cancel",remove:"remove"},standalone:!0,features:[I],decls:50,vars:14,consts:[["d","ngbDatepicker"],[1,"container"],[1,"model-header"],[1,"gradient-text","m-1","border-bottom","border-primary-subtle","border-3","pb-2"],[1,"d-flex","flex-column","flex-md-row","justify-content-evenly","align-items-center","align-content-center"],[1,"image-thumbnail","m-1","col-md-4","text-center"],["fill","",1,"img-thumbnail","rounded","border","border-2","border-opacity-50","border-primary","h-200-px","w-200-px",3,"src","alt","title"],[1,"image-details","flex-fill","m-1"],[1,"form-floating","mb-1"],["type","text","id","imageUrl","name","imageUrl","placeholder","URL","readonly","readonly","disabled","disabled",1,"form-control","ignore-highlight",3,"ngModelChange","ngModel"],["for","imageUrl"],["type","text","id","imageId","name","imageId","placeholder","ID","readonly","readonly","disabled","disabled",1,"form-control","ignore-highlight",3,"ngModelChange","ngModel"],["for","imageId"],["type","text","id","publicId","name","publicId","placeholder","ID","readonly","readonly","disabled","disabled",1,"form-control","ignore-highlight",3,"ngModelChange","ngModel"],["for","publicId"],["type","text","id","title","name","title","placeholder","Title",1,"form-control",3,"ngModelChange","ngModel"],["for","title"],[1,"input-group","mb-1"],[1,"input-group-text"],["type","checkbox","id","favoriteFlag","name","favoriteFlag",1,"form-check-input","ignore-highlight",3,"ngModelChange","ngModel"],["type","text","value","Make it as my favorite","disabled","",1,"form-control"],[1,"input-group","input-group-sm","mb-1"],[1,"form-floating"],["type","text","id","eventDate","name","eventDate","placeholder","yyyy-mm-dd","ngbDatepicker","",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","eventDate"],["type","button",1,"btn","btn-sm","btn-outline-secondary","bi","bi-calendar3",3,"click"],["type","checkbox","id","thumbnailFlag","name","thumbnailFlag",1,"form-check-input","ignore-highlight",3,"ngModelChange","ngModel"],["type","text","value","Make it as thumbnail","disabled","",1,"form-control"],[1,"d-inline-flex","justify-content-center","align-content-center","align-items-center","mt-2","w-100"],["type","button",1,"btn","btn-primary","me-1",3,"click"],["type","button",1,"btn","btn-danger","me-1",3,"click"],["type","button",1,"btn","btn-dark",3,"click"]],template:function(r,t){if(r&1){let a=x();n(0,"div",1)(1,"div",2)(2,"h6",3),l(3,"Edit Image Details"),o()(),n(4,"div")(5,"div",4)(6,"div",5),D(7,"img",6),o(),n(8,"div",7)(9,"form")(10,"div",8)(11,"input",9),C("ngModelChange",function(m){return c(a),v(t.imageItem().url,m)||(t.imageItem().url=m),u(m)}),o(),n(12,"label",10),l(13,"Image URL"),o()(),n(14,"div",8)(15,"input",11),C("ngModelChange",function(m){return c(a),v(t.imageItem().assetId,m)||(t.imageItem().assetId=m),u(m)}),o(),n(16,"label",12),l(17,"Asset ID"),o()(),n(18,"div",8)(19,"input",13),C("ngModelChange",function(m){return c(a),v(t.imageItem().publicId,m)||(t.imageItem().publicId=m),u(m)}),o(),n(20,"label",14),l(21,"Public ID"),o()(),n(22,"div",8)(23,"input",15),C("ngModelChange",function(m){return c(a),v(t.imageItem().title,m)||(t.imageItem().title=m),u(m)}),o(),n(24,"label",16),l(25,"Title"),o()(),n(26,"div",17)(27,"div",18)(28,"input",19),C("ngModelChange",function(m){return c(a),v(t.imageItem().isFavorite,m)||(t.imageItem().isFavorite=m),u(m)}),o()(),D(29,"input",20),o(),n(30,"div",21)(31,"div",22)(32,"input",23,0),C("ngModelChange",function(m){return c(a),v(t.imageItem().eventDate,m)||(t.imageItem().eventDate=m),u(m)}),o(),n(34,"label",24),l(35,"Event Date"),o()(),n(36,"div",18)(37,"button",25),f("click",function(){c(a);let m=h(33);return u(m.toggle())}),l(38,"\xA0"),o()()(),n(39,"div",17)(40,"div",18)(41,"input",26),C("ngModelChange",function(m){return c(a),v(t.imageItem().isThumbnail,m)||(t.imageItem().isThumbnail=m),u(m)}),o()(),D(42,"input",27),o(),n(43,"div",28)(44,"button",29),f("click",function(){return c(a),u(t.save.emit(t.imageItem()))}),l(45,"Save"),o(),n(46,"button",30),f("click",function(){return c(a),u(t.remove.emit(t.imageItem()))}),l(47,"Remove"),o(),n(48,"button",31),f("click",function(){return c(a),u(t.cancel.emit(t.imageItem()))}),l(49,"Cancel"),o()()()()()()()}r&2&&(s(4),ae("background-image: url("+t.imageItem().url+");background-size: cover;background-repeat: no-repeat;"),s(),ae("backdrop-filter: blur(15px);"),s(2),p("src",t.imageItem().url,R)("alt",t.imageItem().assetId)("title",t.imageItem().assetId),s(4),b("ngModel",t.imageItem().url),s(4),b("ngModel",t.imageItem().assetId),s(4),b("ngModel",t.imageItem().publicId),s(4),b("ngModel",t.imageItem().title),s(5),b("ngModel",t.imageItem().isFavorite),s(4),b("ngModel",t.imageItem().eventDate),s(9),b("ngModel",t.imageItem().isThumbnail))},dependencies:[T,W,H,Se,O,G,A,N,ke],encapsulation:2,changeDetection:0})}}return i})();var wt=["imageItemDetailDialog"],St=(i,d)=>d.assetId,Dt=(i,d)=>({"border-success":i,"border-primary":d});function It(i,d){if(i&1){let e=x();n(0,"a",17),f("click",function(){let t=c(e).$implicit,a=g(2);return u(a.openImageItem(t))})("keyup.enter",function(){let t=c(e).$implicit,a=g(2);return u(a.openImageItem(t))}),D(1,"img",18),o()}if(i&2){let e=d.$implicit;s(),p("src",e.url,R)("title",e.assetId)("ngClass",ye(3,Dt,e.isThumbnail,!e.isThumbnail))}}function Jt(i,d){if(i&1){let e=x();n(0,"form",4),f("ngSubmit",function(){c(e);let t=g();return u(t.save())}),n(1,"div",5)(2,"div",6)(3,"div",7),L(4,It,2,6,"a",8,St),o()()(),n(6,"div",5)(7,"div",9)(8,"button",10),f("click",function(){c(e);let t=g();return u(t.openUploadWidget(!0))}),D(9,"i",11),n(10,"span",12),l(11,"Upload Image(s)"),o()(),n(12,"button",10),f("click",function(){c(e);let t=g();return u(t.openUploadWidget(!1))}),D(13,"i",13),n(14,"span",12),l(15,"Upload Image"),o()(),n(16,"button",14),l(17,"Next "),o(),n(18,"a",15),l(19,"Reduce Image Size"),D(20,"i",16),o()()()()}if(i&2){let e,r=g();s(4),F(r.formImageDetails().images),s(12),p("disabled",!((e=r.journey().imagesDetails)!=null&&e.images))}}var tt=(()=>{class i{constructor(){this.notificationService=w(U),this.journeyService=w(P),this.journey=J.required(),this.formImageDetails=E(new se),this.imageItemDetail=J(new me("","")),this.imageItemDialog=pe.required("imageItemDetailDialog")}ngOnInit(){this.formImageDetails.set(this.journey().imagesDetails??new se)}addImage(e){this.formImageDetails.update(r=>V(M({},r),{images:[...r.images,new me(e.secure_url,e.asset_id,e.public_id)]}))}getWidgetParams(e,r){return{cloudName:Q.cloudName,uploadPreset:r?Q.cloudinaryPreset:Q.cloudinarySingleImgPreset,folder:`${Q.cloudBaseDir}/${e.id}`,tags:e.tags,use_asset_folder_as_public_id_prefix:!0,context:{env:Q.stage,id:`${e.id}`},cropping:!r,showAdvancedOptions:!0,multiple:r}}onError(e,r){this.notificationService.showError(e),console.error(r)}onUpdateSuccess(e){this.notificationService.showSuccess("Image Details saved successfully."),this.journey.set(e)}save(){console.log("saving"),this.journeyService.saveJourneyImagesDetails(this.journey(),this.formImageDetails()).subscribe({next:e=>this.onUpdateSuccess(e),error:e=>this.onError("Unexpected error while saving images data",e)})}openUploadWidget(e=!0){cloudinary.createUploadWidget(this.getWidgetParams(this.journey(),e),(r,t)=>{!r&&t&&t.event==="success"&&this.addImage(t.info),!r&&t&&t.event==="close"&&this.save()}).open()}openImageItem(e){this.imageItemDetail.set(e),this.imageItemDialog().nativeElement.showModal()}saveImageItemDetail(e){this.formImageDetails.update(r=>V(M({},r),{images:[...r.images.map(t=>t.assetId==e.assetId?e:t)]})),this.save(),this.imageItemDialog().nativeElement.close()}deleteImageItemDetail(e){this.formImageDetails.update(r=>V(M({},r),{images:[...r.images.filter(t=>t.assetId!=e.assetId)]})),this.save(),this.imageItemDialog().nativeElement.close()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=S({type:i,selectors:[["app-edit-journey-images-details"]],viewQuery:function(r,t){r&1&&_e(t.imageItemDialog,wt,5),r&2&&fe()},inputs:{journey:[1,"journey"],imageItemDetail:[1,"imageItemDetail"]},outputs:{journey:"journeyChange",imageItemDetail:"imageItemDetailChange"},standalone:!0,features:[I],decls:4,vars:2,consts:[["imageItemDetailDialog",""],[3,"ngSubmit",4,"ngIf"],[1,"w-100","w-md-75","border","border-2","border-gradient-primary"],[3,"save","remove","cancel","imageItem"],[3,"ngSubmit"],[1,"row"],[1,"col-12"],[1,"d-flex","mb-3","flex-wrap"],["tabindex","0",1,"m-2","image-thumbnail-wrapper"],[1,"col-12","d-grid","gap-2","d-flex","justify-content-center","align-items-end"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-folder-plus"],[1,"ms-2"],[1,"bi","bi-file-earmark-binary"],["type","button","matStepperNext","",1,"btn","btn-outline-primary",3,"disabled"],["role","link","routerLink","/tools","target","_blank",1,"text-decoration-none"],[1,"bi","bi-box-arrow-up-right","ms-1"],["tabindex","0",1,"m-2","image-thumbnail-wrapper",3,"click","keyup.enter"],["alt","thumbnail",1,"img-thumbnail","rounded","border","border-2","border-opacity-75","h-60-px","w-90-px",3,"src","title","ngClass"]],template:function(r,t){if(r&1){let a=x();y(0,Jt,21,1,"form",1),n(1,"dialog",2,0)(3,"app-edit-journey-image-item",3),f("save",function(m){return c(a),u(t.saveImageItemDetail(m))})("remove",function(m){return c(a),u(t.deleteImageItemDetail(m))})("cancel",function(){return c(a),u(t.imageItemDialog().nativeElement.close())}),o()()}r&2&&(p("ngIf",t.journey()),s(3),p("imageItem",t.imageItemDetail()))},dependencies:[T,W,G,N,j,K,be,xe,et],styles:[".image-thumbnail-wrapper[_ngcontent-%COMP%]{position:relative;cursor:pointer}.btn-image-remove[_ngcontent-%COMP%]{position:absolute;right:0;border:none;background:transparent}.img-thumbnail[_ngcontent-%COMP%]{object-fit:fill}"],changeDetection:0})}}return i})();var Mt=(i,d)=>d.videoId;function Vt(i,d){if(i&1){let e=x();n(0,"div",8)(1,"button",12),f("click",function(){let t=c(e).$implicit,a=g(2);return u(a.removeVideoAndSaveJourney(t))}),l(2," X "),o(),D(3,"img",13),o()}if(i&2){let e=d.$implicit;s(3),p("ngSrc","https://img.youtube.com/vi/"+e.videoId+"/0.jpg")("alt",e.videoId)("title",e.videoId)}}function Tt(i,d){i&1&&(n(0,"p",9),l(1,"No Videos available for the journey"),o())}function jt(i,d){if(i&1){let e=x();n(0,"form")(1,"div",2)(2,"div",3)(3,"div",4),D(4,"input",5,0),n(6,"button",6),f("click",function(){c(e);let t=h(5);return g().addVideo(t.value),u(t.value="")}),l(7,"Add "),o()()()(),n(8,"div",2)(9,"div",3)(10,"div",7),L(11,Vt,4,3,"div",8,Mt),y(13,Tt,2,0,"p",9),o()()(),n(14,"div",2)(15,"div",10)(16,"button",11),l(17,"Next"),o()()()()}if(i&2){let e=g();s(11),F(e.formVideosDetails().videos),s(2),k(e.formVideosDetails().videos.length?-1:13)}}var it=(()=>{class i{constructor(){this.journeyService=w(P),this.notificationService=w(U),this.journey=J.required(),this.formVideosDetails=E(new de)}ngOnInit(){this.formVideosDetails.set(this.journey().videosDetails??new de)}addVideo(e){this.formVideosDetails.update(r=>V(M({},r),{videos:[...r.videos,new He(e)]})),this.save()}removeVideoAndSaveJourney(e){this.formVideosDetails.update(r=>V(M({},r),{videos:r.videos.filter(t=>t.videoId!==e.videoId)})),this.save()}save(){this.journeyService.saveJourneyVideosDetails(this.journey(),this.formVideosDetails()).subscribe({next:e=>this.onUpdateSuccess(e),error:e=>this.onError("Unexpected error while saving videos data",e)})}onUpdateSuccess(e){this.notificationService.showSuccess("Video Details saved successfully."),this.journey.set(e)}onError(e,r){this.notificationService.showError(e),console.error(r)}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=S({type:i,selectors:[["app-edit-journey-videos-details"]],inputs:{journey:[1,"journey"]},outputs:{journey:"journeyChange"},standalone:!0,features:[I],decls:1,vars:1,consts:[["videoInput",""],[4,"ngIf"],[1,"row"],[1,"col-12"],[1,"input-group","mb-3"],["type","text","placeholder","YouTube Video ID","aria-label","YouTube Video ID","aria-describedby","addVideo",1,"form-control"],["type","button","id","addVideo",1,"btn","btn-outline-primary",3,"click"],[1,"d-flex","mb-3","flex-wrap"],[1,"m-2","video-thumbnail-wrapper","h-200-px","w-200-px"],[1,"text-primary","fst-italic","opacity-50"],[1,"col-12","d-grid","gap-2","d-flex","justify-content-center"],["type","button","matStepperNext","",1,"btn","btn-outline-primary"],["aria-label","close",1,"btn","btn-sm","btn-danger","btn-video-remove","rounded-circle",3,"click"],["fill","",1,"video-thumbnail","rounded","border","border-2","border-opacity-50","border-primary",3,"ngSrc","alt","title"]],template:function(r,t){r&1&&y(0,jt,18,1,"form",1),r&2&&p("ngIf",t.journey())},dependencies:[T,W,G,N,j,je,K,ve],styles:[".video-thumbnail-wrapper[_ngcontent-%COMP%]{position:relative}.btn-video-remove[_ngcontent-%COMP%]{z-index:1;position:absolute;right:0}"],changeDetection:0})}}return i})();var kt=(i,d)=>d.assetId;function Gt(i,d){i&1&&(n(0,"mat-error"),l(1,"Please choose visibility"),o())}function Nt(i,d){i&1&&(n(0,"mat-icon",18),l(1,"check_circle"),o())}function Wt(i,d){i&1&&(n(0,"mat-icon",19),l(1,"cancel"),o())}function Pt(i,d){i&1&&(n(0,"mat-icon",18),l(1,"check_circle"),o())}function Lt(i,d){i&1&&(n(0,"mat-icon",19),l(1,"cancel"),o())}function Ft(i,d){i&1&&(n(0,"mat-icon",18),l(1,"check_circle"),o())}function Ot(i,d){i&1&&(n(0,"mat-icon",19),l(1,"cancel"),o())}function At(i,d){i&1&&(n(0,"mat-icon",18),l(1,"check_circle"),o())}function Ut(i,d){i&1&&(n(0,"mat-icon",19),l(1,"cancel"),o())}function Bt(i,d){if(i&1&&(n(0,"option",24),l(1),o()),i&2){let e=d.$implicit;p("value",e.url),s(),q(e.assetId)}}function Rt(i,d){if(i&1&&(n(0,"div",41),D(1,"img",42),o()),i&2){g();let e=h(44);s(),p("src",e.value,R)("alt",e.value)}}function qt(i,d){if(i&1){let e=x();n(0,"button",40),f("click",function(){c(e),g();let t=h(56);return u(t.showModal())}),l(1," Delete Journey "),o()}}function zt(i,d){if(i&1){let e=x();n(0,"button",43),f("click",function(){c(e),g();let t=h(1),a=g();return u(a.save(t))}),l(1," Save as Draft "),o()}if(i&2){g();let e=h(1);p("disabled",!e.form.valid)}}function Ht(i,d){if(i&1&&(n(0,"button",44),l(1," Publish "),o()),i&2){g();let e=h(1);p("disabled",!e.form.valid)}}function Yt(i,d){if(i&1){let e=x();n(0,"form",5,0),f("ngSubmit",function(){c(e);let t=h(1),a=g();return u(a.publish(t))}),n(2,"div",6)(3,"div",7)(4,"mat-form-field",8)(5,"mat-label"),l(6,"Visibility"),o(),n(7,"mat-select",9,1),C("ngModelChange",function(t){c(e);let a=g();return v(a.journey().visibilities,t)||(a.journey().visibilities=t),u(t)}),n(9,"mat-option",10),l(10,"MYSELF"),o(),n(11,"mat-option",11),l(12,"ADMINISTRATOR"),o(),n(13,"mat-option",12),l(14,"MAINTAINER"),o(),n(15,"mat-option",13),l(16,"AUTHENTICATED_USER"),o(),n(17,"mat-option",14),l(18,"GUEST"),o()(),y(19,Gt,2,0,"mat-error"),o()()(),n(20,"div",6)(21,"div",15)(22,"ul",16)(23,"li",17),l(24,"Basic Details "),y(25,Nt,2,0,"mat-icon",18)(26,Wt,2,0,"mat-icon",19),o(),n(27,"li",17),l(28,"Geo Details "),y(29,Pt,2,0,"mat-icon",18)(30,Lt,2,0,"mat-icon",19),o(),n(31,"li",17),l(32,"Images Details "),y(33,Ft,2,0,"mat-icon",18)(34,Ot,2,0,"mat-icon",19),o(),n(35,"li",17),l(36,"Videos Details "),y(37,At,2,0,"mat-icon",18)(38,Ut,2,0,"mat-icon",19),o()()(),n(39,"div",20)(40,"div",21)(41,"label",22),l(42,"Thumbnail"),o(),n(43,"select",23,2),C("ngModelChange",function(t){c(e);let a=g();return v(a.journey().thumbnail,t)||(a.journey().thumbnail=t),u(t)}),n(45,"option",24),l(46,"Default"),o(),L(47,Bt,2,2,"option",24,kt),o()(),y(49,Rt,2,2,"div",25),o()(),n(50,"div",26)(51,"div",27),y(52,qt,2,0,"button",28)(53,zt,2,1,"button",29)(54,Ht,2,1,"button",30),o()(),n(55,"dialog",31,3)(57,"div",32)(58,"div",33)(59,"div",34)(60,"mat-icon",35),l(61,"delete_forever"),o()(),n(62,"div",36)(63,"p",37),l(64,"Are you sure you want to delete the journey ?"),o()()(),n(65,"div",38)(66,"button",39),f("click",function(){c(e);let t=h(56);return u(t.close())}),l(67,"No, Keep it"),o(),n(68,"button",40),f("click",function(){c(e);let t=h(56),a=g();return t.close(),u(a.delete())}),l(69,"Yes, Delete forever "),o()()()()()}if(i&2){let e,r=h(8),t=h(44),a=g();s(7),b("ngModel",a.journey().visibilities),s(2),p("disabled",!0),s(10),k(r.hasError("required")?19:-1),s(6),k(a.isBasicDetailsAvailableAndValid()?25:26),s(4),k(a.isGeoJsonAvailable()?29:30),s(4),k(a.isImagesDetailsAvailable()?33:34),s(4),k(a.isVideosDetailsAvailable()?37:38),s(6),b("ngModel",a.journey().thumbnail),s(2),p("value",a.DEFAULT_THUMBNAIL),s(2),F((e=a.journey().imagesDetails)==null?null:e.images),s(2),p("ngIf",t.value&&t.value!=="default")}}var nt=(()=>{class i{constructor(){this.DEFAULT_THUMBNAIL=qe,this.router=w(te),this.journeyService=w(P),this.notificationService=w(U),this.journey=J.required()}isBasicDetailsAvailableAndValid(){return this.journey().id!=""&&this.journey().name!=""&&this.journey().description!=""&&this.journey().journeyDate!=""&&this.journey().tags?.length>0}isGeoJsonAvailable(){return this.journey().geoDetails?.geoJson!=null}isImagesDetailsAvailable(){return this.journey().imagesDetails?.images?.length??!1}isVideosDetailsAvailable(){return this.journey().videosDetails?.videos?.length??!1}publish(e){console.debug("submitted form:",e),this.journey.update(r=>V(M({},r),{isPublished:!0})),this.journeyService.publishJourney(this.journey()).subscribe({next:r=>this.onUpdateSuccess(r),error:r=>this.onError("Unexpected error while publishing data",r)})}save(e){e.valid&&(this.journey.update(r=>V(M({},r),{isPublished:!1})),this.journeyService.publishJourney(this.journey()).subscribe({next:r=>this.onUpdateSuccess(r),error:r=>this.onError("Unexpected error while publishing data",r)}))}onError(e,r){this.notificationService.showError(e),console.error(r)}onUpdateSuccess(e){let r=e.isPublished?"Journey published successfully.":"Journey saved successfully";this.notificationService.showSuccess(r),this.journey.set(e)}delete(){this.journeyService.deleteJourney(this.journey()).subscribe({next:e=>this.onDeleteSuccess(),error:e=>this.onError("Unexpected error while publishing data",e)})}onDeleteSuccess(){this.notificationService.showSuccess("Journey deleted successfully"),setTimeout(()=>this.router.navigate(["journey"]),1e3)}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=S({type:i,selectors:[["app-edit-journey-publish-details"]],inputs:{journey:[1,"journey"]},outputs:{journey:"journeyChange"},standalone:!0,features:[I],decls:1,vars:1,consts:[["journeyForm","ngForm"],["visibilities","ngModel"],["thumbnail","ngModel"],["deleteJourneyDialog",""],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],[1,"row"],[1,"col-12"],["color","primary",1,"w-100","ignore-highlight"],["id","visibilities","name","visibilities","multiple","","required","",1,"ignore-highlight",3,"ngModelChange","ngModel"],["value","MYSELF",3,"disabled"],["value","ADMINISTRATOR"],["value","MAINTAINER"],["value","AUTHENTICATED_USER"],["value","GUEST"],[1,"col-12","col-md-4"],[1,"list-group"],[1,"list-group-item","list-group-item-action"],["color","primary",1,"float-end","text-success"],["color","warn",1,"float-end"],[1,"col-12","col-md-8","mt-2","mt-md-0"],[1,"input-group","mb-3"],["for","thumbnail",1,"input-group-text"],["id","thumbnail","name","thumbnail",1,"form-select",3,"ngModelChange","ngModel"],[3,"value"],["class","text-center",4,"ngIf"],[1,"row","mt-3"],[1,"col-12","d-grid","gap-2","d-flex","justify-content-center"],["type","button","class","btn btn-outline-danger",3,"click",4,"appHasWriteAccess"],["type","button","class","btn btn-outline-primary",3,"disabled","click",4,"appHasWriteAccess"],["type","submit","class","btn btn-outline-success",3,"disabled",4,"appHasWriteAccess"],["id","deleteJourneyDialog",1,"border-0","rounded","rounded-3"],[1,"d-flex","flex-column","justify-content-center","align-content-center","align-items-center"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"p-3"],[1,"fs-3","text-danger"],[1,"mt-2"],[1,"text-danger"],[1,"d-flex","gap-3"],["type","button",1,"btn","btn-outline-success",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"text-center"],[1,"journey-thumbnail-img","rounded","border","border-2","border-primary","border-opacity-50","h-200-px","w-200-px",3,"src","alt"],["type","button",1,"btn","btn-outline-primary",3,"click","disabled"],["type","submit",1,"btn","btn-outline-success",3,"disabled"]],template:function(r,t){r&1&&y(0,Yt,70,10,"form",4),r&2&&p("ngIf",t.journey())},dependencies:[z,T,W,oe,re,ne,O,G,Y,A,N,j,Le,Pe,Ne,We,Oe,Fe,we,Ge],styles:[".journey-thumbnail-img[_ngcontent-%COMP%]{width:30rem;height:15rem}"],changeDetection:0})}}return i})();function Qt(i,d){i&1&&l(0,"Memories")}function Kt(i,d){if(i&1){let e=x();n(0,"app-edit-journey-memories-details",11),C("journeyChange",function(t){c(e);let a=g(2);return v(a.journey,t)||(a.journey=t),u(t)}),o()}if(i&2){let e=g(2);b("journey",e.journey),p("mode",e.mode())}}function Xt(i,d){i&1&&l(0,"Geography")}function Zt(i,d){if(i&1){let e=x();n(0,"app-edit-journey-geo-details",12),C("journeyChange",function(t){c(e);let a=g(2);return v(a.journey,t)||(a.journey=t),u(t)}),o()}if(i&2){let e=g(2);b("journey",e.journey)}}function $t(i,d){i&1&&l(0,"Images")}function ei(i,d){if(i&1){let e=x();n(0,"app-edit-journey-images-details",12),C("journeyChange",function(t){c(e);let a=g(2);return v(a.journey,t)||(a.journey=t),u(t)}),o()}if(i&2){let e=g(2);b("journey",e.journey)}}function ti(i,d){i&1&&l(0,"Videos")}function ii(i,d){if(i&1){let e=x();n(0,"app-edit-journey-videos-details",12),C("journeyChange",function(t){c(e);let a=g(2);return v(a.journey,t)||(a.journey=t),u(t)}),o()}if(i&2){let e=g(2);b("journey",e.journey)}}function ni(i,d){i&1&&l(0,"Publish")}function oi(i,d){if(i&1){let e=x();n(0,"app-edit-journey-publish-details",12),C("journeyChange",function(t){c(e);let a=g(2);return v(a.journey,t)||(a.journey=t),u(t)}),o()}if(i&2){let e=g(2);b("journey",e.journey)}}function ri(i,d){if(i&1){let e=x();n(0,"section",1)(1,"div",2)(2,"div",3)(3,"h4")(4,"span",4),l(5),o(),n(6,"button",5),f("click",function(){c(e);let t=g();return u(t.viewJourney(t.journey()))}),D(7,"i",6),o()()()(),n(8,"mat-stepper",7)(9,"mat-step",8),y(10,Qt,1,0,"ng-template",9)(11,Kt,1,2,"ng-template",10),o(),n(12,"mat-step"),y(13,Xt,1,0,"ng-template",9)(14,Zt,1,1,"ng-template",10),o(),n(15,"mat-step"),y(16,$t,1,0,"ng-template",9)(17,ei,1,1,"ng-template",10),o(),n(18,"mat-step"),y(19,ti,1,0,"ng-template",9)(20,ii,1,1,"ng-template",10),o(),n(21,"mat-step"),y(22,ni,1,0,"ng-template",9)(23,oi,1,1,"ng-template",10),o()()()}if(i&2){let e=g();s(5),q(e.journey().name),s(),p("matTooltip","View Journey"),s(3),p("completed",e.journey().id)}}var Qn=(()=>{class i{constructor(){this.route=w(Ce),this.journeyService=w(P),this.router=w(te),this.journey=E(new ze),this.mode=E(X.EDIT),this.router.getCurrentNavigation()?.extras.state&&this.mode.set(this.router.getCurrentNavigation()?.extras.state?.mode??X.EDIT)}ngOnInit(){this.journeyService.getJourneyById(this.route.snapshot.params.id).subscribe(e=>this.journey.set(e))}viewJourney(e){this.router.navigate(["/journey",e.id,"view"]).then()}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=S({type:i,selectors:[["app-edit-journey"]],standalone:!0,features:[I],decls:1,vars:1,consts:[["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"row","m-2"],[1,"col-12"],[1,"gradient-text","me-1"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click","matTooltip"],[1,"bi","bi-eye-fill"],["orientation","horizontal"],[3,"completed"],["matStepLabel",""],["matStepContent",""],[3,"journeyChange","journey","mode"],[3,"journeyChange","journey"]],template:function(r,t){r&1&&y(0,ri,24,3,"section",0),r&2&&p("ngIf",t.journey)},dependencies:[Re,Be,$e,tt,Ae,Ue,it,nt,j,ie,Ye],styles:["@media (max-width: 767.98px){[_nghost-%COMP%]     .mat-horizontal-stepper-header{flex-direction:column!important}[_nghost-%COMP%]     .mat-stepper-horizontal-line{display:contents}}"],changeDetection:0})}}return i})();export{Qn as EditJourneyComponent};
