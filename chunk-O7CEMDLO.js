import"./chunk-7T7SSA5J.js";import{a as B}from"./chunk-MPJYK47K.js";import{a as q}from"./chunk-OG2A5DXH.js";import{a as h}from"./chunk-VSQTGOJW.js";import{a as z}from"./chunk-KGTLCIL2.js";import"./chunk-EFSDVRKM.js";import{c as O,g as j,h as W,i as U,j as G,k as L,s as H,x as Y}from"./chunk-5J5H5FZW.js";import{o as w}from"./chunk-SNVCUL6N.js";import{a as J}from"./chunk-P53QH524.js";import{a as V}from"./chunk-FUSGHHWI.js";import"./chunk-ZLRNIGX2.js";import{b as T}from"./chunk-4HWMNETW.js";import{g as R}from"./chunk-F5TIGKWS.js";import"./chunk-KUIIQJ2X.js";import"./chunk-IUL4I26V.js";import"./chunk-OU45453G.js";import{j as N,k as D}from"./chunk-MIMT4L35.js";import{$c as I,Ab as P,Bc as F,Fa as f,Ga as u,Jb as b,Ma as C,Ob as a,Yb as t,Zb as i,_b as m,cc as _,hc as g,jc as s,qb as l,rb as y,sa as x,tc as v,ua as S,uc as c,wc as k,xc as E,yc as M,zc as A}from"./chunk-Y7SRRAOL.js";function K(r,d){if(r&1&&(t(0,"div",12),m(1,"input",25),t(2,"label",26),c(3),i()()),r&2){let e=d.$implicit;l(3),k(" ",e," ")}}function Q(r,d){if(r&1&&(t(0,"button",27),c(1,"Save"),i()),r&2){s();let e=v(1);a("disabled",!e.valid)}}function X(r,d){if(r&1){let e=_();t(0,"button",28),g("click",function(){f(e);let o=s(2);return u(o.cancel())}),c(1,"Cancel"),i()}}function Z(r,d){if(r&1){let e=_();t(0,"form",4,0),g("submit",function(){f(e);let o=v(1),p=s();return u(p.save(o))}),t(2,"div",5)(3,"div",6),m(4,"app-feedback-message",7),i()(),t(5,"div",5)(6,"label",8),c(7,"Username"),i(),t(8,"div",9),m(9,"input",10),i()(),t(10,"div",5)(11,"div",11)(12,"div",12),m(13,"input",13),t(14,"label",14),c(15," Active "),i()()()(),t(16,"fieldset",5)(17,"legend",15),c(18,"Role(s)"),i(),t(19,"div",16),b(20,K,4,1,"div",17),i()(),t(21,"div",5)(22,"label",18),c(23,"Created"),i(),t(24,"div",9),m(25,"input",19),i()(),t(26,"div",5)(27,"label",20),c(28,"Name"),i(),t(29,"div",9)(30,"input",21),A("ngModelChange",function(o){f(e);let p=s();return M(p.mydata.name,o)||(p.mydata.name=o),u(o)}),i()()(),t(31,"div",5)(32,"div",22),b(33,Q,2,1,"button",23)(34,X,2,0,"button",24),i()()()}if(r&2){let e=s();l(4),a("message",e.feedbackMessage()),l(5),a("value",e.mydata.username),l(4),a("checked",e.mydata.enabled),l(7),a("ngForOf",e.mydata.roles),l(5),a("value",e.mydata.createdDate),l(5),E("ngModel",e.mydata.name),a("disabled",!e.hasAccess())}}var be=(()=>{class r{constructor(e,n,o){this.myAccountService=e,this.router=n,this.authService=o,this.MY_PROFILE_PAGE_INFO=w,this.destroyRef=x(C),this.feedbackMessage=P({}),this.hasAccess=I(()=>this.authService.hasAnyRole([h.AUTHENTICATED_USER])),this.Role=h}ngOnInit(){this.myAccountService.getProfileData().pipe(V(this.destroyRef)).subscribe({next:e=>this.mydata=e,error:e=>console.error(e)})}save(e){e.valid&&e.dirty&&this.myAccountService.saveProfileData(this.mydata).subscribe({next:n=>this.onSuccessCallback(),error:n=>this.onErrorCallback()})}onSuccessCallback(){this.feedbackMessage.set({success:"Profile data saved successfully"})}onErrorCallback(){this.feedbackMessage.set({error:"Update failed. Please check data."})}cancel(){this.router.navigate(["/"]).then(console.log)}static{this.\u0275fac=function(n){return new(n||r)(y(J),y(R),y(T))}}static{this.\u0275cmp=S({type:r,selectors:[["app-my-profile-page"]],standalone:!0,features:[F],decls:3,vars:2,consts:[["profileForm","ngForm"],[3,"pageInfo"],[1,"container","d-flex","justify-content-start"],["class","col-12 col-lg-8",3,"submit",4,"ngIf"],[1,"col-12","col-lg-8",3,"submit"],[1,"row","mb-3"],[1,"col-12"],[3,"message"],["for","username",1,"col-sm-2","col-form-label","text-primary"],[1,"col-sm-10"],["type","text","id","username","disabled","",1,"form-control",3,"value"],[1,"col-sm-10","offset-sm-2"],[1,"form-check"],["type","checkbox","id","isAccountActive","name","isAccountActive","disabled","",1,"form-check-input",3,"checked"],["for","isAccountActive",1,"form-check-label","text-primary"],[1,"col-form-label","col-sm-2","pt-0","text-primary"],[1,"col-sm-10","text-primary"],["class","form-check",4,"ngFor","ngForOf"],["for","createdDate",1,"col-sm-2","col-form-label","text-primary"],["type","datetime-local","id","createdDate","name","createdDate","disabled","","readonly","",1,"form-control",3,"value"],["for","name",1,"col-sm-2","col-form-label","text-primary"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"col","text-center","d-flex","gap-3","justify-content-center"],["type","submit","class","btn btn-primary",3,"disabled",4,"hasWriteAccess"],["type","button","class","btn btn-primary",3,"click",4,"hasWriteAccess"],["type","checkbox","name","roleName","id","roleName","checked","","disabled","",1,"form-check-input"],["for","roleName",1,"form-check-label"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(n,o){n&1&&(m(0,"app-page-header",1),t(1,"section",2),b(2,Z,35,7,"form",3),i()),n&2&&(a("pageInfo",o.MY_PROFILE_PAGE_INFO),l(2),a("ngIf",o.mydata))},dependencies:[q,D,Y,L,O,j,W,H,G,U,N,z,B]})}}return r})();export{be as MyProfilePageComponent};
