import{a as Q}from"./chunk-CWAQNLZB.js";import{a as K}from"./chunk-PBHWJHLX.js";import{c as L}from"./chunk-BS35BKX7.js";import{b as P,g as q,h as D,i as G,j as R,k as W,p as j,q as B,r as U,s as z,u as H,v as J}from"./chunk-CY4KTKAJ.js";import"./chunk-THLS4DYU.js";import{a as I}from"./chunk-D22SR3MY.js";import{a as N,d as V}from"./chunk-YZBIOJLP.js";import"./chunk-SWPVFP3X.js";import{B as E,Bc as o,Ea as b,Fc as x,Gc as C,Hc as y,J as T,Qb as d,Rb as s,Vb as f,Wb as i,Xb as n,Yb as M,ec as F,jb as r,jc as O,ma as v,mc as A,sa as _,ta as h,wc as m,ya as w,yb as k}from"./chunk-LCXKQEMN.js";function X(t,c){if(t&1&&(i(0,"div",8)(1,"div",21),o(2,"Account activated successfully!"),n(),i(3,"p"),o(4,"Please "),i(5,"a",22),o(6,"Sign In"),n(),o(7," with your credentials and start your journey with us."),n()()),t&2){let e=A();r(5),f("routerLink",e.LOGIN_PAGE_INFO.path)}}function Y(t,c){t&1&&(i(0,"div",9),o(1," Activation failed. Please check and correct data. If the issue still persists, try again later. "),n())}function Z(t,c){t&1&&(i(0,"div"),o(1,"Email Address is required."),n())}function $(t,c){t&1&&(i(0,"div"),o(1,"Email Address must be at most 50 characters long."),n())}function ee(t,c){t&1&&(i(0,"div"),o(1,"Email Address must have at least 8 characters."),n())}function te(t,c){t&1&&(i(0,"div"),o(1,"Invalid Email Address."),n())}function ie(t,c){if(t&1&&(i(0,"div",13),d(1,Z,2,0,"div"),d(2,$,2,0,"div"),d(3,ee,2,0,"div"),d(4,te,2,0,"div"),n()),t&2){A();let e=m(14);r(),s(e.errors!=null&&e.errors.required?1:-1),r(),s(e.errors!=null&&e.errors.maxlength?2:-1),r(),s(e.errors!=null&&e.errors.minlength&&!(e.errors!=null&&e.errors.email)?3:-1),r(),s(e.errors!=null&&e.errors.email&&!(e.errors!=null&&e.errors.email)?4:-1)}}function ne(t,c){t&1&&(i(0,"div"),o(1,"Token is required."),n())}function oe(t,c){if(t&1&&(i(0,"div",13),d(1,ne,2,0,"div"),n()),t&2){A();let e=m(20);r(),s(e.errors!=null&&e.errors.required?1:-1)}}var S=class{constructor(c="",e=""){this.username=c,this.emailToken=e}},_e=(()=>{class t{constructor(){this.LOGIN_PAGE_INFO=L,this.destroyRef=v(w),this.bffService=v(K),this.registrationService=v(Q),this.isSuccessful=b(!1),this.isErrorOccurred=b(!1);let e=v(N);this.accountActivationForm=new S(e.snapshot.queryParamMap.get("identifier"),e.snapshot.queryParamMap.get("token"))}activate(e){e.valid?this.activateAccount():this.onError(new Error("Invalid data"))}ngOnInit(){this.activateAccount()}activateAccount(){this.bffService.getVersion().pipe(I(this.destroyRef),T(e=>this.accountActivationForm.username!=null&&this.accountActivationForm.emailToken!=null),E(e=>this.registrationService.activate({username:this.accountActivationForm.username,emailToken:this.accountActivationForm.emailToken,apiVersion:e.version}))).subscribe({next:e=>this.onSuccess(),error:e=>this.onError(e)})}onSuccess(){this.isSuccessful.set(!0),this.isErrorOccurred.set(!1)}onError(e){console.log(e),this.isErrorOccurred.set(!0),this.isSuccessful.set(!1)}static{this.\u0275fac=function(g){return new(g||t)}}static{this.\u0275cmp=k({type:t,selectors:[["app-account-activation"]],decls:31,vars:10,consts:[["activationForm","ngForm"],["username","ngModel"],["emailToken","ngModel"],[1,"h-full","flex","items-center","justify-center"],[1,"p-6","w-full","max-w-2xl"],[1,"border","border-blue-500","rounded-lg","shadow-lg"],[1,"bg-gradient-to-r","from-blue-500","to-blue-700","text-white","text-xl","font-semibold","p-4","rounded-t-lg"],[1,"p-6"],[1,"p-4","border-2","border-green-500","bg-green-50","text-green-700","text-center","rounded-lg","shadow-md"],[1,"p-4","border-2","border-red-500","bg-red-50","text-red-700","rounded-lg","shadow-md"],[1,"flex","flex-col","gap-2","mt-6",3,"ngSubmit"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","username","name","username","required","","minlength","8","maxlength","50","email","","placeholder","Email Address","autocomplete","off",1,"w-full","mt-1","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel","readOnly"],[1,"text-red-500","text-sm","mt-1"],["for","emailToken",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","emailToken","name","emailToken","required","","placeholder","Token","autocomplete","off",1,"w-full","mt-1","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel","readOnly"],["type","submit",1,"w-full","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","disabled:opacity-50",3,"disabled"],[1,"mt-6"],[1,"border-t-2","border-blue-500","my-4"],[1,"text-center","text-gray-600"],[1,"text-blue-600","font-bold",3,"routerLink"],[1,"text-lg","font-bold","mb-2"],[1,"text-blue-500","underline",3,"routerLink"]],template:function(g,a){if(g&1){let u=F();i(0,"div",3)(1,"section",4)(2,"div",5)(3,"div",6),o(4," Account Activation "),n(),i(5,"div",7),d(6,X,8,1,"div",8),d(7,Y,2,0,"div",9),i(8,"form",10,0),O("ngSubmit",function(){_(u);let l=m(9);return h(a.activate(l))}),i(10,"div")(11,"label",11),o(12,"Email Address"),n(),i(13,"input",12,1),y("ngModelChange",function(l){return _(u),C(a.accountActivationForm.username,l)||(a.accountActivationForm.username=l),h(l)}),n(),d(15,ie,5,4,"div",13),n(),i(16,"div")(17,"label",14),o(18,"Token"),n(),i(19,"input",15,2),y("ngModelChange",function(l){return _(u),C(a.accountActivationForm.emailToken,l)||(a.accountActivationForm.emailToken=l),h(l)}),n(),d(21,oe,2,1,"div",13),n(),i(22,"div")(23,"button",16),o(24," Activate "),n()()(),i(25,"div",17),M(26,"hr",18),i(27,"p",19),o(28," Already have an account? "),i(29,"a",20),o(30,"Sign in"),n()()()()()()()}if(g&2){let u=m(9),p=m(14),l=m(20);r(6),s(a.isSuccessful()?6:-1),r(),s(a.isErrorOccurred()?7:-1),r(6),x("ngModel",a.accountActivationForm.username),f("readOnly",a.isSuccessful()),r(2),s(p.invalid&&(p.dirty||u.submitted)?15:-1),r(4),x("ngModel",a.accountActivationForm.emailToken),f("readOnly",a.isSuccessful()),r(2),s(l.invalid&&(l.dirty||u.submitted)?21:-1),r(2),f("disabled",a.isSuccessful()),r(6),f("routerLink",a.LOGIN_PAGE_INFO.path)}},dependencies:[H,W,P,q,D,j,U,z,B,R,G,J,V],encapsulation:2,changeDetection:0})}}return t})();export{_e as AccountActivationComponent,S as AccountActivationForm};
