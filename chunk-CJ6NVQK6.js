import{a as _e}from"./chunk-OEK3JCZ4.js";import{a as k}from"./chunk-MM53KO5S.js";import"./chunk-DWJDQMXV.js";import"./chunk-KQS4GACZ.js";import{a as ue,b as he,c as ye,d as fe,e as Ce}from"./chunk-Q6T4T263.js";import"./chunk-EYD5UOSB.js";import"./chunk-6FIBS4CC.js";import{a as ge}from"./chunk-T3E4K54Y.js";import{c as ae,d as le,e as de,f as se,g as pe,h as ce}from"./chunk-PLBU6BIV.js";import{a as me}from"./chunk-U7WNJCKD.js";import"./chunk-4D6GSTPC.js";import"./chunk-VSQTGOJW.js";import"./chunk-GRONNPQC.js";import"./chunk-52CTQKKZ.js";import{b as ee}from"./chunk-47L2HURF.js";import"./chunk-A2TT5NWI.js";import"./chunk-NIVYW57E.js";import"./chunk-CARY4E7O.js";import{c as ie,h as ne,k as re,y as oe}from"./chunk-YK4BR766.js";import"./chunk-VVLSS7KD.js";import{a as te}from"./chunk-XC4PGBQY.js";import"./chunk-XUDB5GUU.js";import"./chunk-MLE53YZQ.js";import"./chunk-67SFSZAO.js";import{g as V}from"./chunk-WB3DF4XI.js";import"./chunk-XL47KMEJ.js";import{A as Z,q as $,r as U,s as X}from"./chunk-BPR4VFT2.js";import{Ab as R,Bc as j,Cc as q,Ea as c,Fa as m,Gc as b,H as G,Hc as T,Ib as L,Ic as K,L as N,Nb as h,Ra as J,Vb as w,Wb as y,Xb as f,Yb as i,Zb as n,_b as x,ba as W,ca as z,cc as C,hc as g,jc as _,p as F,pb as o,qb as P,ra as A,rc as Y,sc as H,ta as D,tc as Q,u as O,uc as l,vc as u,wc as S,xc as E,yc as I,zb as B,zc as M}from"./chunk-HOCLHVTI.js";function we(r,p){if(r&1&&(i(0,"span",6),l(1),n()),r&2){let t=p.$implicit;o(),u(t)}}function Se(r,p){if(r&1){let t=C();i(0,"button",12),g("click",function(e){c(t);let d=_();return m(d.editDetails(e))}),l(1,"Edit "),n()}}var be=(()=>{class r{constructor(){this.router=A(V),this.journey=J.required()}viewDetails(){this.router.navigate(["/journey",this.journey().id,"view"]).then(console.log)}editDetails(t){return t.stopPropagation(),this.router.navigate(["/journey",this.journey().id,"edit"]).then(console.log),!1}viewInTimeline(t){return t.stopPropagation(),this.router.navigate(["/timeline"],{queryParams:{id:this.journey().id}}).then(console.log),!1}static{this.\u0275fac=function(a){return new(a||r)}}static{this.\u0275cmp=D({type:r,selectors:[["app-journey-card-view"]],inputs:{journey:[1,"journey"]},standalone:!0,features:[j],decls:30,vars:11,consts:[[1,"m-0"],[1,"card","bg-dark","text-bg-dark","text-white",3,"click"],["fill","","priority","",1,"card-img",3,"ngSrc","alt"],[1,"card-img-overlay","d-flex","flex-column","align-self-stretch","card-text-wrapper"],[1,"card-title"],[1,"card-text"],[1,"badge","bg-dark","bg-opacity-25","border-dark","rounded-pill","border","me-1","fw-normal"],[1,"d-flex","footer-wrapper","mt-auto","flex-nowrap","flex-column","flex-md-row","justify-content-between"],[1,"d-inline-flex","gap-1"],[1,"small","border","border-light","border-1","rounded-2","ps-1","pe-1","border-opacity-50"],[1,"d-inline-flex","gap-1","justify-content-end"],["type","button","class","btn btn-sm btn-success ms-1 small",3,"click",4,"hasWriteAccess"],["type","button",1,"btn","btn-sm","btn-success","ms-1","small",3,"click"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"a",1),g("click",function(){return e.viewDetails()}),x(2,"img",2),i(3,"div",3)(4,"h5",4),l(5),n(),i(6,"p",5),l(7),n(),i(8,"p",5),y(9,we,2,1,"span",6,w),n(),i(11,"div",7)(12,"div",8)(13,"p",9)(14,"small"),l(15),b(16,"date"),n()(),i(17,"p",9)(18,"small"),l(19),n()(),i(20,"p",9)(21,"small"),l(22),n()(),i(23,"p",9)(24,"small"),l(25),n()()(),i(26,"div",10),L(27,Se,2,0,"button",11),i(28,"button",12),g("click",function(v){return e.viewInTimeline(v)}),l(29,"Timeline "),n()()()()()()),a&2&&(o(2),h("ngSrc",e.journey().thumbnail)("alt",e.journey().thumbnail),o(3),u(e.journey().name),o(2),u(e.journey().title),o(2),f(e.journey().tags),o(6),u(K(16,8,e.journey().journeyDate,"dd.MM.YYYY")),o(4),u(e.journey().city),o(3),u(e.journey().country),o(3),u(e.journey().category))},dependencies:[X,Z,me],styles:[".card[_ngcontent-%COMP%]{width:30rem;height:15rem;margin:0 .5rem .5rem 0!important;cursor:pointer}.card-img[_ngcontent-%COMP%]{opacity:75%;width:100%;height:100%}.card-text-wrapper[_ngcontent-%COMP%]{background:#0003}@media (max-width: 575.98px){.card[_ngcontent-%COMP%]{width:100%;height:15rem;margin:0 0 .5rem!important}}"]})}}return r})();var xe=(r,p)=>p.id,Ee=()=>[1,5,10,20,25];function Ie(r,p){if(r&1){let t=C();i(0,"mat-chip-row",35),g("removed",function(){let e=c(t).$implicit,d=_();return m(d.removeTag(e))}),l(1),i(2,"button",36),g("click",function(){let e=c(t).$implicit,d=_();return m(d.removeTag(e))}),i(3,"mat-icon"),l(4,"cancel"),n()()()}if(r&2){let t=p.$implicit;h("highlighted",!0)("editable",!1)("removable",!0),o(),S(" ",t," ")}}function Me(r,p){if(r&1){let t=C();i(0,"button",37),g("click",function(){let e=c(t).$implicit,d=_();return m(d.sortingFieldChangedEvent.next(e))}),l(1),b(2,"titlecase"),n()}if(r&2){let t=p.$implicit;o(),S("",T(2,1,t)," ")}}function Te(r,p){if(r&1){let t=C();i(0,"button",37),g("click",function(){let e=c(t).$implicit,d=_();return m(d.sortingDirectionChangedEvent.next(e))}),l(1),b(2,"uppercase"),n()}if(r&2){let t=p.$implicit;o(),S("",T(2,1,t)," ")}}function De(r,p){if(r&1&&x(0,"app-journey-card-view",34),r&2){let t=p.$implicit;h("journey",t)}}var ct=(()=>{class r{constructor(t,a){this.journeyService=t,this.sortableFields=["journeyDate","name","title","city","country","category","location"],this.sortingFieldChangedEvent=new F("journeyDate"),this.sortableDirections=["asc","desc"],this.sortingDirectionChangedEvent=new F("desc"),this.defaultPageSize=10,this.separatorKeysCodes=[13,188,32],this.searchCriteria=new _e,this.paginator=R.required(k),this.tags=B([]),this.tagsObservable=ee(this.tags),this.searchResult=B({totalElements:0,data:[]}),a.getCurrentNavigation()?.extras.state&&(this.searchCriteria=a.getCurrentNavigation()?.extras.state)}ngAfterViewInit(){G(this.paginator().page,this.sortingFieldChangedEvent,this.sortingDirectionChangedEvent,this.tagsObservable).pipe(W(),z(()=>this.journeyService.findJourneyByQuery(this.searchCriteria,this.sortingFieldChangedEvent.getValue(),this.sortingDirectionChangedEvent.getValue(),this.paginator().pageIndex,this.paginator().pageSize,!0,this.tags()).pipe(N(()=>O(null))))).subscribe(t=>this.onSuccess(t))}onSuccess(t){this.searchResult.set({totalElements:t?.totalElements??0,data:t?.content??[]})}ngOnInit(){this.journeyService.findJourneyByQuery(this.searchCriteria,"journeyDate","desc",0,this.defaultPageSize,!0).subscribe(t=>this.onSuccess(t))}addTag(t){let a=(t.value||"").trim();a&&this.tags.update(e=>[...e,a]),t.chipInput.clear()}removeTag(t){this.tags.update(a=>a.filter(e=>e!==t))}static{this.\u0275fac=function(a){return new(a||r)(P(ge),P(V))}}static{this.\u0275cmp=D({type:r,selectors:[["app-gallery"]],viewQuery:function(a,e){a&1&&Y(e.paginator,k,5),a&2&&H()},standalone:!0,features:[j],decls:58,vars:18,consts:[["chipGrid",""],[1,"container","advanced-search"],[1,"d-flex","justify-content-end"],["data-bs-toggle","collapse","href","#searchFields","aria-expanded","false","aria-controls","searchFields",1,"text-decoration-none"],["id","searchFields",1,"row","g-2","mb-3","collapse"],[1,"col-sm"],[1,"form-floating","border","border-primary"],["type","text","id","categoryInput","placeholder","Category",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","categoryInput"],["type","text","id","cityInput","placeholder","City",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","cityInput"],["type","text","id","countryInput","placeholder","Country",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","countryInput"],["type","text","id","yearInput","placeholder","Year",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","yearInput"],[1,"container"],[1,"row"],["aria-label","Tags"],[1,"col-12"],[1,"form-floating"],["placeholder","Filter by Tags","autocomplete","off","id","tagsInput",1,"form-control","border","border-2","border-primary","rounded-4",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],["for","tagsInput"],["color","primary",3,"highlighted","editable","removable"],[1,"col-12","col-md-8","mb-md-3","me-0","pe-0"],["aria-label","Select page","color","primary",1,"paginator","me-0",3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"col-12","col-md-4","sorting","mb-3","me-0"],["ngbDropdown","",1,"d-inline-block","me-1"],["type","button","id","dropdownSortingField","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingField"],["ngbDropdownItem",""],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownSortingDirection","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingDirection"],[1,"card-group","justify-content-center","align-items-center"],[3,"journey"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click"],["ngbDropdownItem","",3,"click"]],template:function(a,e){if(a&1){let d=C();i(0,"section",1)(1,"div",2)(2,"a",3),l(3," Advanced Search "),n()(),i(4,"div",4)(5,"div",5)(6,"div",6)(7,"input",7),M("ngModelChange",function(s){return c(d),I(e.searchCriteria.category,s)||(e.searchCriteria.category=s),m(s)}),n(),i(8,"label",8),l(9,"Category"),n()()(),i(10,"div",5)(11,"div",6)(12,"input",9),M("ngModelChange",function(s){return c(d),I(e.searchCriteria.city,s)||(e.searchCriteria.city=s),m(s)}),n(),i(13,"label",10),l(14,"City"),n()()(),i(15,"div",5)(16,"div",6)(17,"input",11),M("ngModelChange",function(s){return c(d),I(e.searchCriteria.country,s)||(e.searchCriteria.country=s),m(s)}),n(),i(18,"label",12),l(19,"Country"),n()()(),i(20,"div",5)(21,"div",6)(22,"input",13),M("ngModelChange",function(s){return c(d),I(e.searchCriteria.year,s)||(e.searchCriteria.year=s),m(s)}),n(),i(23,"label",14),l(24,"Year"),n()()()()(),i(25,"section",15)(26,"div",16)(27,"mat-chip-grid",17,0)(29,"div",18)(30,"div",19)(31,"input",20),g("matChipInputTokenEnd",function(s){return c(d),m(e.addTag(s))}),n(),i(32,"label",21),l(33,"Filter by Tags"),n()()(),i(34,"div",18),y(35,Ie,5,4,"mat-chip-row",22,w),n()()(),i(37,"div",16)(38,"div",23),x(39,"mat-paginator",24),n(),i(40,"div",25)(41,"div",26)(42,"button",27),l(43),b(44,"titlecase"),n(),i(45,"div",28),y(46,Me,3,3,"button",29,w),n()(),i(48,"div",30)(49,"button",31),l(50),b(51,"uppercase"),n(),i(52,"div",32),y(53,Te,3,3,"button",29,w),n()()()(),i(55,"div",33),y(56,De,1,1,"app-journey-card-view",34,xe),n()()}if(a&2){let d=Q(28);o(7),E("ngModel",e.searchCriteria.category),o(5),E("ngModel",e.searchCriteria.city),o(5),E("ngModel",e.searchCriteria.country),o(5),E("ngModel",e.searchCriteria.year),o(9),h("matChipInputFor",d)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),o(4),f(e.tags()),o(4),h("length",e.searchResult().totalElements)("pageSize",e.defaultPageSize)("pageSizeOptions",q(17,Ee))("showFirstLastButtons",!0),o(4),S(" ",T(44,13,e.sortingFieldChangedEvent.getValue())," "),o(3),f(e.sortableFields),o(4),S(" ",T(51,15,e.sortingDirectionChangedEvent.getValue())," "),o(3),f(e.sortableDirections),o(3),f(e.searchResult().data)}},dependencies:[k,ce,pe,se,de,ae,le,$,U,Ce,ye,fe,ue,he,te,oe,ie,ne,re,be],styles:[".sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#4246d7a6 1%,#f8f9fa1a 80%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.paginator[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.mat-mdc-select[_ngcontent-%COMP%]{color:#f5f5f5!important}@media (max-width: 575.98px){.sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%)}}"]})}}return r})();export{ct as GalleryComponent};
