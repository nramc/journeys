import{a as ae,b as le}from"./chunk-734OPSWI.js";import{a as oe}from"./chunk-3W36CHB7.js";import{g as K,i as Z,j as _,k as ee}from"./chunk-GMSYEKUG.js";import{c as re}from"./chunk-MOIY7QW2.js";import"./chunk-4ZW7E4TV.js";import{a as Q}from"./chunk-5M2JJTQ6.js";import"./chunk-2RSQIKR3.js";import"./chunk-XTTRI24Y.js";import"./chunk-7SKX3N7G.js";import{j as V}from"./chunk-BS35BKX7.js";import{a as te,f as ie,g as ne}from"./chunk-X7YUYQ54.js";import"./chunk-FSERETJE.js";import"./chunk-F4DSFHW7.js";import"./chunk-CHGDWI4X.js";import"./chunk-66AFA25Q.js";import{g as $,j as W,u as L}from"./chunk-WYGIYYQO.js";import{a as u}from"./chunk-5HCI3JVT.js";import{c as Y}from"./chunk-OG5DQ5VQ.js";import{a as q,b as G}from"./chunk-RQKRTOUM.js";import{g as H,j as X}from"./chunk-OLDPWYQ6.js";import"./chunk-SUU2CJAS.js";import{a as B}from"./chunk-CLWH3GUL.js";import{x as z}from"./chunk-LVLQ6W55.js";import{$c as U,Bc as l,Cc as S,Db as I,Ea as f,Fc as N,Gc as J,Hc as R,Qb as d,Rb as g,Vb as s,Wb as n,Wc as j,Xb as r,Yb as D,_c as O,a as M,ac as E,bc as w,ec as b,ha as P,jb as a,jc as y,ma as C,mc as c,sa as v,ta as x,u as F,uc as k,vc as A,yb as T}from"./chunk-JOM6ROGP.js";function ue(i,m){if(i&1){let e=b();n(0,"button",5),y("click",function(){v(e);let o=c(3);return x(o.togglePlayer())}),n(1,"mat-icon",6),l(2,"pause_circle"),r()()}}function pe(i,m){if(i&1){let e=b();n(0,"button",7),y("click",function(){v(e);let o=c(3);return x(o.togglePlayer())}),n(1,"mat-icon",8),l(2,"play_circle"),r()()}}function de(i,m){if(i&1&&(d(0,ue,3,0,"button",3),d(1,pe,3,0,"button",4)),i&2){let e=c(2);g(e.isPlayerRunning()?0:-1),a(),g(e.isPlayerRunning()?-1:1)}}function ge(i,m){if(i&1&&(n(0,"div",0)(1,"h2",2),l(2),r(),d(3,de,2,2),r()),i&2){let e,t=c();a(2),S((e=t.data())==null?null:e.heading),a(),g(t.images().length?3:-1)}}function he(i,m){if(i&1&&(n(0,"div",11)(1,"span",14),l(2),r()()),i&2){let e=c().$implicit;a(2),S(e==null||e.args==null?null:e.args.title)}}function Ce(i,m){if(i&1&&(E(0),d(1,he,3,1,"div",11),n(2,"div",12)(3,"p",13),l(4),r()(),w()),i&2){let e=m.$implicit;a(),g(!(e==null||e.args==null)&&e.args.title?1:-1),a(3),S(e==null||e.args==null?null:e.args.caption)}}function ye(i,m){if(i&1){let e=b();n(0,"gallery",9),y("itemClick",function(){v(e);let o=c();return x(o.togglePlayer())}),I(1,Ce,5,2,"ng-container",10),r()}if(i&2){let e=c();s("items",e.images())("thumbs",!1)("imageSize","contain")("bullets",!0)("autoplayInterval",3e3)("loop",!0)("scrollDuration",500)("autoplay",!0)}}function fe(i,m){i&1&&(n(0,"div")(1,"p",15),l(2,"No events found."),r()())}function _e(i){return new K({src:i.src,args:M({caption:i.caption,title:i.title},i.args)})}var me=(()=>{class i{constructor(){this.data=O.required(),this.images=j(()=>this.data()?.images?.map(_e)??[]),this.galleryComponent=U.required(_),this.isPlayerRunning=f(!0)}togglePlayer(){this.isPlayerRunning()?(this.galleryComponent().stop(),this.isPlayerRunning.set(!1)):(this.galleryComponent().next(),this.galleryComponent().play(),this.isPlayerRunning.set(!0))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["app-timeline"]],viewQuery:function(t,o){t&1&&k(o.galleryComponent,_,5),t&2&&A()},inputs:{data:[1,"data"]},decls:3,vars:2,consts:[[1,"inline-flex","mb-2"],[1,"gallery",3,"items","thumbs","imageSize","bullets","autoplayInterval","loop","scrollDuration","autoplay"],[1,"gradient-text","me-2"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Pause"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Play"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Pause",3,"click"],[1,"text-danger"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Play",3,"click"],[1,"text-success"],[1,"gallery",3,"itemClick","items","thumbs","imageSize","bullets","autoplayInterval","loop","scrollDuration","autoplay"],[4,"galleryImageDef"],[1,"w-full","text-start","flex","flex-row"],[1,"h-full","w-full","text-end","flex","flex-col","justify-end","p-2","mb-4"],[1,"text-center","bg-black/50"],[1,"me-2","m-2","border-2","ps-2","pe-2","bg-black/25"],[1,"text-primary"]],template:function(t,o){if(t&1&&(d(0,ge,4,2,"div",0),d(1,ye,2,8,"gallery",1)(2,fe,3,0,"div")),t&2){let p;g((p=o.data())!=null&&p.heading?0:-1),a(),g(o.images()&&o.images().length>0?1:2)}},dependencies:[ee,_,Z,Q,G,q,X,H],encapsulation:2,changeDetection:0})}}return i})();var ce=(()=>{class i{constructor(){this.httpClient=C(z),this.authService=C(Y)}getTimelineForUpcomingJourniversaries(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{upcoming:e}})}getTimelineForJourney(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{IDs:e}})}getTimelineForCity(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{city:e}})}getTimelineForCountry(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{country:e}})}getTimelineForYear(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{year:e}})}getTimelineForCategory(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{category:e}})}getTimelineForToday(){let e=this.authService.getCurrentUserContext();return e.isAuthenticated?this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`,"X-Async-Process":"true"},params:{today:!0}}):F()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ze=(()=>{class i{constructor(){this.TIMELINE_PAGE_INFO=V,this.timelineService=C(ce),this.activatedRoute=C(B),this.numberOfDaysJourniversaries=f(7),this.timelineData=f(void 0)}ngOnInit(){let e=this.activatedRoute.snapshot.queryParams.id,t=this.activatedRoute.snapshot.queryParams.city,o=this.activatedRoute.snapshot.queryParams.country,p=this.activatedRoute.snapshot.queryParams.year,h=this.activatedRoute.snapshot.queryParams.category;e?this.getDataForJourney(e):t?this.getDataForCity(t):o?this.getDataForCountry(o):p?this.getDataForYear(p):h?this.getDataForCategory(h):this.getDataForUpcomingJourniversaries()}getDataForJourney(e){this.timelineService.getTimelineForJourney(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForCity(e){this.timelineService.getTimelineForCity(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForCountry(e){this.timelineService.getTimelineForCountry(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForYear(e){this.timelineService.getTimelineForYear(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForCategory(e){this.timelineService.getTimelineForCategory(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForUpcomingJourniversaries(){this.timelineService.getTimelineForUpcomingJourniversaries(this.numberOfDaysJourniversaries()).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=T({type:i,selectors:[["app-timeline-page"]],decls:24,vars:10,consts:[[3,"pageInfo"],[1,"mt-2","container","flex","flex-col"],["appearance","fill"],[1,"!outline-offset-0","!border-0",3,"ngModelChange","selectionChange","ngModel"],[3,"value"],[1,"flex","flex-col"],[3,"data"]],template:function(t,o){t&1&&(n(0,"header"),D(1,"app-page-header",0),r(),n(2,"main")(3,"section",1)(4,"mat-form-field",2)(5,"mat-label"),l(6,"Choose interval to display Journiversaries"),r(),n(7,"mat-select",3),R("ngModelChange",function(h){return J(o.numberOfDaysJourniversaries,h)||(o.numberOfDaysJourniversaries=h),h}),y("selectionChange",function(){return o.getDataForUpcomingJourniversaries()}),n(8,"mat-option",4),l(9,"Tomorrow"),r(),n(10,"mat-option",4),l(11,"Next One Week"),r(),n(12,"mat-option",4),l(13,"Next Two Week"),r(),n(14,"mat-option",4),l(15,"Next Three Week"),r(),n(16,"mat-option",4),l(17,"Next One Month"),r(),n(18,"mat-option",4),l(19,"Next Two Months"),r(),n(20,"mat-option",4),l(21,"Next Three Months"),r()()()(),n(22,"section",5),D(23,"app-timeline",6),r()()),t&2&&(a(),s("pageInfo",o.TIMELINE_PAGE_INFO),a(6),N("ngModel",o.numberOfDaysJourniversaries),a(),s("value",1),a(2),s("value",7),a(2),s("value",14),a(2),s("value",21),a(2),s("value",30),a(2),s("value",60),a(2),s("value",90),a(3),s("data",o.timelineData()))},dependencies:[me,oe,L,$,W,ne,ie,te,le,ae,re],encapsulation:2,changeDetection:0})}}return i})();export{Ze as TimelinePageComponent};
