import{a as Me}from"./chunk-OEK3JCZ4.js";import{a as x}from"./chunk-PLHRQEMB.js";import"./chunk-PUR46DJJ.js";import{a as de,b as ue,c as ge,d as he,e as ye}from"./chunk-VJDHCBL2.js";import{b as _e,c as Ce,d as fe,f as we}from"./chunk-UBK7LWCJ.js";import{a as ce}from"./chunk-J7MQ2HFI.js";import{a as ee,b as te,c as ie,d as re}from"./chunk-LCADSW5P.js";import"./chunk-JEN23JFF.js";import"./chunk-2D5CULLG.js";import"./chunk-VLFPAXT2.js";import"./chunk-5QBTHPQF.js";import"./chunk-V3PIOFUL.js";import{b as oe}from"./chunk-V7VXL4BU.js";import{i as ae}from"./chunk-OZRZB2NL.js";import"./chunk-JGNHLCTH.js";import{h as Y}from"./chunk-YFHJRQYX.js";import{b as pe,c as me}from"./chunk-WKHLB3PJ.js";import{f as le,g as se}from"./chunk-75GNJC2Y.js";import"./chunk-LFVO5MKF.js";import"./chunk-3KUANOAV.js";import"./chunk-7QJ3VKEV.js";import"./chunk-4AXN5U6T.js";import{b as U,g as $,j as X,u as Z}from"./chunk-QAC2BFVE.js";import"./chunk-V7KP7MMP.js";import{b as K}from"./chunk-EB64ZGMI.js";import"./chunk-QMQK4DEO.js";import"./chunk-2CTIELUH.js";import{a as q}from"./chunk-AJBOIO4H.js";import{h as ne}from"./chunk-2IC3G6P5.js";import"./chunk-ESCCLKR7.js";import{c as H}from"./chunk-YXFPB3FV.js";import"./chunk-MBVDDYAL.js";import{p as J,q as Q}from"./chunk-SJLEDD4U.js";import{$ as j,Aa as m,Ab as O,Bc as W,Cc as N,Dc as V,Ec as u,Gb as R,Gc as y,I as B,Ic as M,Jc as v,Kc as b,L as P,Nc as z,Qa as I,Qc as S,Rc as E,Xb as h,ba as A,ca as L,cc as T,dc as _,ec as C,fc as i,gc as s,hc as F,lc as f,m as G,qc as d,sb as o,sc as w,u as k,xb as D,za as p}from"./chunk-6YGVGKRS.js";var ve=()=>[1,5,10,20,25],be=(l,g)=>g.id;function Se(l,g){if(l&1){let t=f();i(0,"mat-chip-row",25),d("removed",function(){let e=p(t).$implicit,n=w();return m(n.removeTag(e))}),u(1),i(2,"button",26),d("click",function(){let e=p(t).$implicit,n=w();return m(n.removeTag(e))}),i(3,"mat-icon"),u(4,"cancel"),s()()()}if(l&2){let t=g.$implicit;h("highlighted",!0)("editable",!1)("removable",!0),o(),y(" ",t," ")}}function Ee(l,g){if(l&1){let t=f();i(0,"button",27),d("click",function(){let e=p(t).$implicit,n=w();return m(n.sortingFieldChangedEvent.next(e))}),u(1),S(2,"titlecase"),s()}if(l&2){let t=g.$implicit;o(),y(" ",E(2,1,t.label)," ")}}function Ie(l,g){if(l&1){let t=f();i(0,"button",27),d("click",function(){let e=p(t).$implicit,n=w();return m(n.sortingDirectionChangedEvent.next(e))}),u(1),S(2,"uppercase"),s()}if(l&2){let t=g.$implicit;o(),y(" ",E(2,1,t)," ")}}function Te(l,g){if(l&1&&F(0,"app-journey-card-view",24),l&2){let t=g.$implicit;h("journey",t)}}var at=(()=>{class l{constructor(t,r){this.journeyService=t,this.sortableFields=[{label:"Journey Date",key:"journeyDate"},{label:"Journey Name",key:"name"},{label:"Geo Title",key:"geoDetails.title"},{label:"City",key:"geoDetails.city"},{label:"Country",key:"geoDetails.country"},{label:"Category",key:"geoDetails.category"},{label:"Geo Location",key:"geoDetails.location"}],this.sortingFieldChangedEvent=new G({label:"Journey Date",key:"journeyDate"}),this.sortableDirections=["asc","desc"],this.sortingDirectionChangedEvent=new G("desc"),this.defaultPageSize=10,this.separatorKeysCodes=[13,188,32],this.searchCriteria=I(new Me),this.paginator=O.required(x),this.tags=I([]),this.tagsObservable=K(this.tags),this.searchResult=I({totalElements:0,data:[]}),this.GALLERY_PAGE_INFO=Y,r.getCurrentNavigation()?.extras.state&&this.searchCriteria.set(r.getCurrentNavigation()?.extras.state)}ngAfterViewInit(){this.search()}search(){B(this.paginator().page,this.sortingFieldChangedEvent,this.sortingDirectionChangedEvent,this.tagsObservable).pipe(A(),L(()=>this.journeyService.findJourneyByQuery(this.searchCriteria(),this.sortingFieldChangedEvent.getValue().key,this.sortingDirectionChangedEvent.getValue(),this.paginator().pageIndex,this.paginator().pageSize,!0,this.tags()).pipe(j(1),P(()=>k(null))))).subscribe(t=>this.onSuccess(t))}onSuccess(t){this.searchResult.set({totalElements:t?.totalElements??0,data:t?.content??[]})}ngOnInit(){this.journeyService.findJourneyByQuery(this.searchCriteria(),"journeyDate","desc",0,this.defaultPageSize,!0).subscribe(t=>this.onSuccess(t))}addTag(t){let r=(t.value||"").trim();r&&this.tags.update(e=>[...e,r]),t.chipInput.clear()}removeTag(t){this.tags.update(r=>r.filter(e=>e!==t))}static{this.\u0275fac=function(r){return new(r||l)(D(ae),D(H))}}static{this.\u0275cmp=R({type:l,selectors:[["app-gallery"]],viewQuery:function(r,e){r&1&&W(e.paginator,x,5),r&2&&N()},decls:50,vars:21,consts:[["chipGrid",""],["sortingFieldMenu","matMenu"],["sortingDirectionMenu","matMenu"],[3,"pageInfo"],[1,"container","py-2"],["id","searchFields"],[1,"text-sm","font-normal"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mt-3"],["appearance","outline",1,"w-full"],["matInput","","type","text","id","categoryInput","placeholder","Category",3,"ngModelChange","change","ngModel"],["matInput","","type","text","id","cityInput","placeholder","City",3,"ngModelChange","change","ngModel"],["matInput","","type","text","id","countryInput","placeholder","Country",3,"ngModelChange","change","ngModel"],["matInput","","type","text","id","yearInput","placeholder","Year",3,"ngModelChange","change","ngModel"],[1,"container","p-0","m-0"],["aria-label","Tags",1,"w-full"],["matInput","","id","tagsInput","placeholder","Filter by Tags",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[1,"flex","flex-wrap","gap-1","m-0"],["color","primary",3,"highlighted","editable","removable"],[1,"m-0","p-0","flex","justify-center","max-sm:flex-col","text-center","content-center","items-center"],["aria-label","Select page","color","primary",1,"paginator",3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"inline-flex"],["mat-menu-item",""],["mat-button","",1,"text-primary","border","border-primary","bg-white","px-2","py-1","rounded-md","shadow-sm","hover:bg-gray-100",3,"matMenuTriggerFor"],[1,"container","flex","gap-2","items-center","justify-center","flex-wrap"],[1,"max-sm:w-full",3,"journey"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click"],["mat-menu-item","",3,"click"]],template:function(r,e){if(r&1){let n=f();i(0,"header"),F(1,"app-page-header",3),s(),i(2,"main")(3,"section",4)(4,"mat-expansion-panel",5)(5,"mat-expansion-panel-header")(6,"mat-panel-title",6)(7,"span"),u(8,"Filter"),s()()(),i(9,"div",7)(10,"mat-form-field",8)(11,"input",9),b("ngModelChange",function(a){return p(n),v(e.searchCriteria().category,a)||(e.searchCriteria().category=a),m(a)}),d("change",function(){return p(n),m(e.search())}),s()(),i(12,"mat-form-field",8)(13,"input",10),b("ngModelChange",function(a){return p(n),v(e.searchCriteria().city,a)||(e.searchCriteria().city=a),m(a)}),d("change",function(){return p(n),m(e.search())}),s()(),i(14,"mat-form-field",8)(15,"input",11),b("ngModelChange",function(a){return p(n),v(e.searchCriteria().country,a)||(e.searchCriteria().country=a),m(a)}),d("change",function(){return p(n),m(e.search())}),s()(),i(16,"mat-form-field",8)(17,"input",12),b("ngModelChange",function(a){return p(n),v(e.searchCriteria().year,a)||(e.searchCriteria().year=a),m(a)}),d("change",function(){return p(n),m(e.search())}),s()()(),i(18,"div",13)(19,"mat-chip-grid",14,0)(21,"mat-form-field",8)(22,"input",15),d("matChipInputTokenEnd",function(a){return p(n),m(e.addTag(a))}),s()(),i(23,"div",16),_(24,Se,5,4,"mat-chip-row",17,T),s()()()()(),i(26,"section",18),F(27,"mat-paginator",19),i(28,"div",20)(29,"mat-menu",null,1),_(31,Ee,3,3,"button",21,T),s(),i(33,"button",22),u(34),S(35,"titlecase"),i(36,"mat-icon"),u(37,"arrow_drop_down"),s()(),i(38,"mat-menu",null,2),_(40,Ie,3,3,"button",21,T),s(),i(42,"button",22),u(43),S(44,"uppercase"),i(45,"mat-icon"),u(46,"arrow_drop_down"),s()()()(),i(47,"section",23),_(48,Te,1,1,"app-journey-card-view",24,be),s()()}if(r&2){let n=V(20),c=V(30),a=V(39);o(),h("pageInfo",e.GALLERY_PAGE_INFO),o(10),M("ngModel",e.searchCriteria().category),o(2),M("ngModel",e.searchCriteria().city),o(2),M("ngModel",e.searchCriteria().country),o(2),M("ngModel",e.searchCriteria().year),o(5),h("matChipInputFor",n)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),o(2),C(e.tags()),o(3),h("length",e.searchResult().totalElements)("pageSize",e.defaultPageSize)("pageSizeOptions",z(20,ve))("showFirstLastButtons",!0),o(4),C(e.sortableFields),o(2),h("matMenuTriggerFor",c),o(),y(" ",E(35,16,e.sortingFieldChangedEvent.getValue().label)," "),o(6),C(e.sortableDirections),o(2),h("matMenuTriggerFor",a),o(),y(" ",E(44,18,e.sortingDirectionChangedEvent.getValue())," "),o(5),C(e.searchResult().data)}},dependencies:[x,J,Q,ye,ge,he,de,ue,q,Z,U,$,X,oe,se,le,me,pe,we,_e,Ce,fe,ne,re,te,ee,ie,ce],styles:[".paginator[_ngcontent-%COMP%]{text-align:center;align-items:center;justify-content:center!important;display:flex;font-weight:500}"],changeDetection:0})}}return l})();export{at as GalleryComponent};
