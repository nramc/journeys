import{a as ae,b as le}from"./chunk-KSLP6UOT.js";import{b as Z,d as ee,e as _,f as te}from"./chunk-N3NMTV6K.js";import{a as K}from"./chunk-GINOX4E4.js";import{a as ie}from"./chunk-M44OJ2YX.js";import{j as q}from"./chunk-WTO4EC35.js";import{a as ne,f as re,g as oe}from"./chunk-QPVUSXIX.js";import"./chunk-5FSI2IBM.js";import"./chunk-2KWCZQSF.js";import"./chunk-4SIJYGGU.js";import"./chunk-2PPFUFFT.js";import{g as W,j as L,u as Y}from"./chunk-ZWL263BF.js";import{a as u}from"./chunk-ATLBSCPE.js";import{a as G,b as $}from"./chunk-DDNICWYV.js";import{c as Q}from"./chunk-GKHTDWFE.js";import{e as H,f as X}from"./chunk-H4VMZNAY.js";import{fa as V}from"./chunk-HI24ZEE2.js";import{a as B}from"./chunk-IBLWUD3D.js";import{c as z}from"./chunk-6OB4FHE2.js";import{j as U}from"./chunk-65UXW6KM.js";import{Aa as v,Bc as A,Cc as N,Ec as s,Fb as x,Fc as b,Ic as J,Jc as j,Kc as R,Mb as f,Na as E,Xb as l,a as F,ad as O,bc as k,fc as r,gc as a,hc as S,ic as I,ja as P,jc as D,lc as T,pa as d,qb as o,qc as h,sc as c,t as M,yb as y,za as C,zb as w}from"./chunk-INLK7QV6.js";function ue(i,m){if(i&1){let e=T();r(0,"button",7),h("click",function(){C(e);let n=c(3);return v(n.togglePlayer())}),r(1,"mat-icon",8),s(2,"pause_circle"),a()()}}function pe(i,m){if(i&1){let e=T();r(0,"button",9),h("click",function(){C(e);let n=c(3);return v(n.togglePlayer())}),r(1,"mat-icon",10),s(2,"play_circle"),a()()}}function ge(i,m){if(i&1&&(I(0),f(1,ue,3,0,"button",5)(2,pe,3,0,"button",6),D()),i&2){let e=c(2);o(),l("ngIf",e.isPlayerRunning()),o(),l("ngIf",!e.isPlayerRunning())}}function de(i,m){if(i&1&&(r(0,"div",2)(1,"h2",3),s(2),a(),f(3,ge,3,2,"ng-container",4),a()),i&2){let e,t,n=c();o(2),b((e=n.data())==null?null:e.heading),o(),l("ngIf",(t=n.images())==null?null:t.length)}}function fe(i,m){if(i&1&&(r(0,"div",16)(1,"span",17),s(2),a()()),i&2){let e=c().$implicit;o(2),b(e==null||e.args==null?null:e.args.title)}}function he(i,m){if(i&1&&(I(0),f(1,fe,3,1,"div",13),r(2,"div",14)(3,"p",15),s(4),a()(),D()),i&2){let e=m.$implicit;o(),l("ngIf",e==null||e.args==null?null:e.args.title),o(3),b(e==null||e.args==null?null:e.args.caption)}}function ye(i,m){if(i&1){let e=T();r(0,"gallery",11),h("itemClick",function(){C(e);let n=c();return v(n.togglePlayer())}),f(1,he,5,2,"ng-container",12),a()}if(i&2){let e=c();l("items",e.images())("thumbs",!1)("imageSize","contain")("bullets",!0)("autoplayInterval",3e3)("loop",!0)("scrollDuration",500)("autoplay",!0)}}function _e(i,m){i&1&&(r(0,"div")(1,"p",18),s(2,"No events found."),a()())}function Ce(i){return new Z({src:i.src,args:F({caption:i.caption,title:i.title},i.args)})}var me=(()=>{class i{constructor(){this.data=E.required(),this.images=O(()=>this.data()?.images?.map(Ce)??[]),this.galleryComponent=w.required(_),this.isPlayerRunning=y(!0)}togglePlayer(){this.isPlayerRunning()?(this.galleryComponent().stop(),this.isPlayerRunning.set(!1)):(this.galleryComponent().next(),this.galleryComponent().play(),this.isPlayerRunning.set(!0))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=x({type:i,selectors:[["app-timeline"]],viewQuery:function(t,n){t&1&&A(n.galleryComponent,_,5),t&2&&N()},inputs:{data:[1,"data"]},decls:3,vars:2,consts:[["class","inline-flex mb-2",4,"ngIf"],[1,"gallery",3,"items","thumbs","imageSize","bullets","autoplayInterval","loop","scrollDuration","autoplay"],[1,"inline-flex","mb-2"],[1,"gradient-text","me-2"],[4,"ngIf"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Pause",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Play",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Pause",3,"click"],[1,"text-danger"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Play",3,"click"],[1,"text-success"],[1,"gallery",3,"itemClick","items","thumbs","imageSize","bullets","autoplayInterval","loop","scrollDuration","autoplay"],[4,"galleryImageDef"],["class","w-full text-start flex flex-row",4,"ngIf"],[1,"h-full","w-full","text-end","flex","flex-col","justify-end","p-2","mb-4"],[1,"text-center","bg-black","bg-opacity-20"],[1,"w-full","text-start","flex","flex-row"],[1,"me-2","m-2","border-2","ps-2","pe-2","bg-black","bg-opacity-25"],[1,"text-primary"]],template:function(t,n){if(t&1&&f(0,de,4,2,"div",0)(1,ye,2,8,"gallery",1)(2,_e,3,0,"div"),t&2){let p;l("ngIf",(p=n.data())==null?null:p.heading),o(),k(n.images()&&n.images().length>0?1:2)}},dependencies:[te,_,ee,U,K,$,G,X,H],encapsulation:2,changeDetection:0})}}return i})();var ce=(()=>{class i{constructor(){this.httpClient=d(z),this.authService=d(Q)}getTimelineForUpcomingJourniversaries(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{upcoming:e}})}getTimelineForJourney(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{IDs:e}})}getTimelineForCity(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{city:e}})}getTimelineForCountry(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{country:e}})}getTimelineForYear(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{year:e}})}getTimelineForCategory(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{category:e}})}getTimelineForToday(){let e=this.authService.getCurrentUserContext();return e.isAuthenticated?this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`,"X-Async-Process":"true"},params:{today:!0}}):M()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var tt=(()=>{class i{constructor(){this.TIMELINE_PAGE_INFO=q,this.timelineService=d(ce),this.activatedRoute=d(B),this.numberOfDaysJourniversaries=y(7),this.timelineData=y(void 0)}ngOnInit(){let e=this.activatedRoute.snapshot.queryParams.id,t=this.activatedRoute.snapshot.queryParams.city,n=this.activatedRoute.snapshot.queryParams.country,p=this.activatedRoute.snapshot.queryParams.year,g=this.activatedRoute.snapshot.queryParams.category;e?this.getDataForJourney(e):t?this.getDataForCity(t):n?this.getDataForCountry(n):p?this.getDataForYear(p):g?this.getDataForCategory(g):this.getDataForUpcomingJourniversaries()}getDataForJourney(e){this.timelineService.getTimelineForJourney(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForCity(e){this.timelineService.getTimelineForCity(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForCountry(e){this.timelineService.getTimelineForCountry(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForYear(e){this.timelineService.getTimelineForYear(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForCategory(e){this.timelineService.getTimelineForCategory(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForUpcomingJourniversaries(){this.timelineService.getTimelineForUpcomingJourniversaries(this.numberOfDaysJourniversaries()).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=x({type:i,selectors:[["app-timeline-page"]],decls:24,vars:10,consts:[[3,"pageInfo"],[1,"mt-2","container","flex","flex-col"],["appearance","fill"],[1,"!outline-offset-0","!border-0",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"flex","flex-col"],[3,"data"]],template:function(t,n){t&1&&(r(0,"header"),S(1,"app-page-header",0),a(),r(2,"main")(3,"section",1)(4,"mat-form-field",2)(5,"mat-label"),s(6,"Choose interval to display Journiversaries"),a(),r(7,"mat-select",3),R("ngModelChange",function(g){return j(n.numberOfDaysJourniversaries,g)||(n.numberOfDaysJourniversaries=g),g}),h("change",function(){return n.getDataForUpcomingJourniversaries()}),r(8,"mat-option",4),s(9,"Tomorrow"),a(),r(10,"mat-option",4),s(11,"Next One Week"),a(),r(12,"mat-option",4),s(13,"Next Two Week"),a(),r(14,"mat-option",4),s(15,"Next Three Week"),a(),r(16,"mat-option",4),s(17,"Next One Month"),a(),r(18,"mat-option",4),s(19,"Next Two Months"),a(),r(20,"mat-option",4),s(21,"Next Three Months"),a()()()(),r(22,"section",5),S(23,"app-timeline",6),a()()),t&2&&(o(),l("pageInfo",n.TIMELINE_PAGE_INFO),o(6),J("ngModel",n.numberOfDaysJourniversaries),o(),l("value",1),o(2),l("value",7),o(2),l("value",14),o(2),l("value",21),o(2),l("value",30),o(2),l("value",60),o(2),l("value",90),o(3),l("data",n.timelineData()))},dependencies:[me,ie,Y,W,L,oe,re,ne,le,ae,V],encapsulation:2,changeDetection:0})}}return i})();export{tt as TimelinePageComponent};
