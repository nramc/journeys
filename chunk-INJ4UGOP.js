import"./chunk-MS4AQ6UA.js";import{a as xe,b as Ce}from"./chunk-RQB4IQDK.js";import{a as Lt,b as Ot,c as At,d as Wt,e as ie,g as oe,h as qt}from"./chunk-J6QDRSYX.js";import"./chunk-GUUIMMRW.js";import{a as Ut,b as zt}from"./chunk-2KQNOXJF.js";import"./chunk-QNGBOY7V.js";import"./chunk-IHWDXRDC.js";import{a as Ht}from"./chunk-MMW6RCLH.js";import{a as Dt,b as kt,c as Tt,d as Vt}from"./chunk-X4YWCMOA.js";import"./chunk-USF5V5WN.js";import{c as ve}from"./chunk-HF4ID6BO.js";import"./chunk-DGYSEWX4.js";import"./chunk-PV4UDNM2.js";import{a as Bt}from"./chunk-LNUANG4S.js";import"./chunk-F5X5MWHG.js";import{a as be}from"./chunk-GC4JW6KG.js";import"./chunk-ULILULOE.js";import"./chunk-ZJJPAHRG.js";import{a as yt}from"./chunk-VAH4ZTPW.js";import{b as Rt}from"./chunk-BY6IVCEU.js";import{a as jt,b as Fe,c as Gt,d as Pe,e as Ne,f as le,g as Re,h as Ft,i as A}from"./chunk-SJWOULD4.js";import{a as Nt}from"./chunk-WBKCVS7C.js";import{a as Z}from"./chunk-BFBWKEVX.js";import{b as Y,c as U}from"./chunk-JJZM7JVF.js";import{a as W,b as te,c as ye,f as B,g as q}from"./chunk-GT7IT55J.js";import"./chunk-4TND24ZO.js";import"./chunk-D7XGIYVN.js";import"./chunk-KH7BRNI5.js";import"./chunk-ZAX7OA72.js";import"./chunk-7FVIKGCA.js";import{a as vt,b as X,g as H,h as N,i as R,j as Q,k as L,l as xt,n as Ct,o as It,p as $,r as wt,s as Et,u as J,v as St}from"./chunk-3C2RYE65.js";import{a as ee}from"./chunk-WRXHVNTC.js";import{b as ft}from"./chunk-ZJIA7AIR.js";import{k as Pt}from"./chunk-R2E2SYBS.js";import"./chunk-BLXKHFKW.js";import{a as V,b as F}from"./chunk-BRDESO4K.js";import{c as ht,d as bt,e as Mt,g as O,h as P,i as Jt,k as j}from"./chunk-7U2D3XMU.js";import{I as Ge,e as pt,m as _t,o as gt,x as je}from"./chunk-ODEESR7L.js";import{a as ct,c as he,d as ut}from"./chunk-5WRF2F2L.js";import"./chunk-LDTKISGV.js";import{g as fe,h as D,y as mt}from"./chunk-7WENEZDG.js";import{$c as M,Bc as v,Cb as h,Cc as x,Dc as C,Ea as E,Eb as De,Ec as at,Fb as Ye,Gb as Ze,Gc as lt,J as We,Ma as Me,Qb as ke,Rb as Ke,Sb as Xe,Tc as ae,Ub as me,Vb as ce,Vc as dt,Wb as m,Xb as n,Xc as ge,Yb as a,Zb as G,Zc as st,a as k,ad as Ve,b as T,bc as y,fd as z,gb as se,gc as _,gd as Je,ia as Be,ic as p,jc as $e,ka as qe,kb as s,kc as et,lc as tt,ma as Se,mc as Te,nc as ue,oa as b,ob as ze,oc as pe,qc as it,rc as ot,sc as I,tc as nt,ua as c,uc as re,va as u,wb as S,xb as He,xc as d,ya as Ue,yb as Qe,yc as _e,zc as rt}from"./chunk-NFRKRT64.js";function oi(o,l){o&1&&(n(0,"mat-error"),d(1,"Longitude is required."),a())}function ni(o,l){o&1&&(n(0,"mat-error"),d(1," Longitude must be between -180.0 and 180.0. "),a())}function ri(o,l){o&1&&(n(0,"mat-error"),d(1,"Latitude is required."),a())}function ai(o,l){o&1&&(n(0,"mat-error"),d(1," Latitude must be between -90.0 and 90.0. "),a())}var Qt=(()=>{let l=class l{constructor(){this.location=M(),this._location=E({type:"Point",coordinates:[]}),this.disabled=M(!1),this.location$=ft(this.location).pipe(We(t=>t?.coordinates!=null&&t.coordinates.length==2)),this.location$.subscribe(t=>{console.log(t),this._location.update(e=>T(k({},e),{coordinates:t.coordinates}))})}pasteClipboardCoordinates(){navigator.clipboard.readText().then(t=>{if(console.debug("Value copied from clipboard:",t),t&&t.split(",").length==2){let e=t.split(",");this._location.update(r=>T(k({},r),{coordinates:[Number(e[0]),Number(e[1])]})),this.fireChangeEvent()}})}pasteClipboardGoogleCoordinates(){navigator.clipboard.readText().then(t=>{if(console.debug("Value copied from clipboard:",t),t&&t.split(",").length==2){let e=t.split(",");this._location.update(r=>T(k({},r),{coordinates:[Number(e[1]),Number(e[0])]})),this.fireChangeEvent()}})}fireChangeEvent(){this._location().coordinates.filter(t=>t!==null).length==2&&(this.location.update(t=>({type:"Point",coordinates:this._location().coordinates})),console.log("fireChangeEvent:",this.location()))}};l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=S({type:l,selectors:[["app-edit-geo-location"]],inputs:{location:[1,"location"],disabled:[1,"disabled"]},outputs:{location:"locationChange",disabled:"disabledChange"},decls:24,vars:10,consts:[["longitude","ngModel"],["latitude","ngModel"],["pasteMenu","matMenu"],[1,"flex","items-center","gap-2","mt-2"],["appearance","outline",1,"w-1/2"],["matInput","","type","number","placeholder","Longitude","aria-label","Longitude","required","","min","-180","max","180",3,"ngModelChange","change","ngModel","readOnly"],[4,"ngIf"],["matInput","","type","number","placeholder","Latitude","aria-label","Latitude","required","","min","-90","max","90",3,"ngModelChange","change","ngModel","readOnly"],["mat-icon-button","","matTooltip","Paste Options","type","button",3,"matMenuTriggerFor","disabled"],["mat-menu-item","",3,"click"]],template:function(e,r){if(e&1){let f=y();n(0,"div",3)(1,"mat-form-field",4)(2,"mat-label"),d(3,"Longitude"),a(),n(4,"input",5,0),C("ngModelChange",function(w){return c(f),x(r._location().coordinates[0],w)||(r._location().coordinates[0]=w),u(w)}),_("change",function(){return c(f),u(r.fireChangeEvent())}),a(),h(6,oi,2,0,"mat-error",6)(7,ni,2,0,"mat-error",6),a(),n(8,"mat-form-field",4)(9,"mat-label"),d(10,"Latitude"),a(),n(11,"input",7,1),C("ngModelChange",function(w){return c(f),x(r._location().coordinates[1],w)||(r._location().coordinates[1]=w),u(w)}),_("change",function(){return c(f),u(r.fireChangeEvent())}),a(),h(13,ri,2,0,"mat-error",6)(14,ai,2,0,"mat-error",6),a(),n(15,"button",8)(16,"mat-icon"),d(17,"content_paste_go"),a()(),n(18,"mat-menu",null,2)(20,"button",9),_("click",function(){return c(f),u(r.pasteClipboardCoordinates())}),d(21," Clipboard "),a(),n(22,"button",9),_("click",function(){return c(f),u(r.pasteClipboardGoogleCoordinates())}),d(23," Clipboard (Copied from Google Map) "),a()()()}if(e&2){let f=I(5),g=I(12),w=I(19);s(4),v("ngModel",r._location().coordinates[0]),m("readOnly",r.disabled()),s(2),m("ngIf",f.errors==null?null:f.errors.required),s(),m("ngIf",(f.errors==null?null:f.errors.min)||(f.errors==null?null:f.errors.max)),s(4),v("ngModel",r._location().coordinates[1]),m("readOnly",r.disabled()),s(2),m("ngIf",g.errors==null?null:g.errors.required),s(),m("ngIf",(g.errors==null?null:g.errors.min)||(g.errors==null?null:g.errors.max)),s(),m("matMenuTriggerFor",w)("disabled",r.disabled())}},dependencies:[J,X,xt,H,$,It,Ct,Q,D,be,V,q,B,W,te,U,Y,Vt,kt,Dt,Tt,F,j,O],styles:["input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"],changeDetection:0});let o=l;return o})();function li(o,l){o&1&&(n(0,"p",11)(1,"span",12),d(2,"check_circle"),a(),d(3," GeoJSON valid "),a())}function di(o,l){o&1&&(n(0,"p",13)(1,"span",12),d(2,"cancel"),a(),d(3," GeoJSON is not valid "),a())}var Yt=(()=>{let l=class l{constructor(){this.geoJson=M(void 0),this.geoJsonString=ae(()=>JSON.stringify(this.geoJson(),null,2)),this.isGeoJsonValid=E(!0)}onGeoJsonChange(t){let r=t.target.value;try{let f=JSON.parse(r);f.type==="FeatureCollection"&&(this.geoJson.set(f),this.isGeoJsonValid.set(!0))}catch(f){this.isGeoJsonValid.set(!1),console.error("Invalid GeoJSON:",f)}}};l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=S({type:l,selectors:[["app-edit-geo-json"]],inputs:{geoJson:[1,"geoJson"]},outputs:{geoJson:"geoJsonChange"},decls:25,vars:3,consts:[["rawGeoJsonDialog",""],["type","button","mat-raised-button","",1,"w-full",3,"click"],[1,"w-[50%]","h-[75vh]","p-4","rounded-md","shadow-lg","border"],["type","button","mat-icon-button","",1,"float-right",3,"click"],[1,"flex","flex-col","h-full","gap-4"],[1,"text-xl","font-semibold","text-gradient","border-b-2","border-primary"],["placeholder","Paste GeoJSON data here",1,"resize-none","border","rounded-md","p-2","w-full","h-full","font-mono",3,"input","value"],["class","text-green-600 flex items-center gap-2",4,"ngIf"],["class","text-red-600 flex items-center gap-2",4,"ngIf"],["href","https://geojson.io/","target","_blank",1,"text-primary","flex","items-center","gap-1"],[1,"underline"],[1,"text-green-600","flex","items-center","gap-2"],[1,"material-icons"],[1,"text-red-600","flex","items-center","gap-2"]],template:function(e,r){if(e&1){let f=y();n(0,"section")(1,"button",1),_("click",function(){c(f);let w=I(4);return u(w.showModal())}),d(2," Raw GeoJSON Data "),a(),n(3,"dialog",2,0)(5,"button",3),_("click",function(){c(f);let w=I(4);return u(w.close())}),n(6,"mat-icon"),d(7,"close"),a()(),n(8,"div",4)(9,"h4",5),d(10,"Geo JSON"),a(),n(11,"textarea",6),_("input",function(w){return c(f),u(r.onGeoJsonChange(w))}),d(12,"      "),a(),n(13,"button",1),_("click",function(){c(f);let w=I(4);return u(w.close())}),d(14," Save "),a(),h(15,li,4,0,"p",7)(16,di,4,0,"p",8),n(17,"div")(18,"p"),d(19," Tip: "),n(20,"a",9)(21,"span",10),d(22,"Create GeoJSON"),a(),n(23,"mat-icon"),d(24,"open_in_new"),a()()()()()()()}e&2&&(s(11),m("value",r.geoJsonString()),s(4),m("ngIf",r.isGeoJsonValid()),s(),m("ngIf",!r.isGeoJsonValid()))},dependencies:[J,V,j,P,O,U,D],encapsulation:2});let o=l;return o})();var si=["input"],mi=["formField"],ci=["*"],we=class{source;value;constructor(l,i){this.source=l,this.value=i}},ui={provide:vt,useExisting:Be(()=>Oe),multi:!0},Zt=new Se("MatRadioGroup"),pi=new Se("mat-radio-default-options",{providedIn:"root",factory:_i});function _i(){return{color:"accent",disabledInteractive:!1}}var Oe=(()=>{class o{_changeDetector=b(Ve);_value=null;_name=b(je).getId("mat-radio-group-");_selected=null;_isInitialized=!1;_labelPosition="after";_disabled=!1;_required=!1;_buttonChanges;_controlValueAccessorChangeFn=()=>{};onTouched=()=>{};change=new De;_radios;color;get name(){return this._name}set name(i){this._name=i,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(i){this._labelPosition=i==="before"?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(i){this._value!==i&&(this._value=i,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(i){this._selected=i,this.value=i?i.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._markRadiosForCheck()}get required(){return this._required}set required(i){this._required=i,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(i){this._disabledInteractive=i,this._markRadiosForCheck()}_disabledInteractive=!1;constructor(){}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(i=>i===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(i=>{i.name=this.name,i._markForCheck()})}_updateSelectedRadioFromValue(){let i=this._selected!==null&&this._selected.value===this._value;this._radios&&!i&&(this._selected=null,this._radios.forEach(t=>{t.checked=this.value===t.value,t.checked&&(this._selected=t)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new we(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(i=>i._markForCheck())}writeValue(i){this.value=i,this._changeDetector.markForCheck()}registerOnChange(i){this._controlValueAccessorChangeFn=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled=i,this._changeDetector.markForCheck()}static \u0275fac=function(t){return new(t||o)};static \u0275dir=Qe({type:o,selectors:[["mat-radio-group"]],contentQueries:function(t,e,r){if(t&1&&tt(r,Ee,5),t&2){let f;ue(f=pe())&&(e._radios=f)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",z],required:[2,"required","required",z],disabledInteractive:[2,"disabledInteractive","disabledInteractive",z]},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[lt([ui,{provide:Zt,useExisting:o}])]})}return o})(),Ee=(()=>{class o{_elementRef=b(Me);_changeDetector=b(Ve);_focusMonitor=b(_t);_radioDispatcher=b(yt);_defaultOptions=b(pi,{optional:!0});_ngZone=b(Ye);_renderer=b(ze);_uniqueId=b(je).getId("mat-radio-");_cleanupClick;id=this._uniqueId;name;ariaLabel;ariaLabelledby;ariaDescribedby;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(i){this._checked!==i&&(this._checked=i,i&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!i&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),i&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(i){this._value!==i&&(this._value=i,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===i),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(i){this._labelPosition=i}_labelPosition;get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(i){this._setDisabled(i)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(i){i!==this._required&&this._changeDetector.markForCheck(),this._required=i}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(i){this._color=i}_color;get disabledInteractive(){return this._disabledInteractive||this.radioGroup!==null&&this.radioGroup.disabledInteractive}set disabledInteractive(i){this._disabledInteractive=i}_disabledInteractive;change=new De;radioGroup;get inputId(){return`${this.id||this._uniqueId}-input`}_checked=!1;_disabled;_required;_value=null;_removeUniqueSelectionListener=()=>{};_previousTabIndex;_inputElement;_rippleTrigger;_noopAnimations=pt();_injector=b(Ue);constructor(){b(gt).load(bt);let i=b(Zt,{optional:!0}),t=b(new dt("tabindex"),{optional:!0});this.radioGroup=i,this._disabledInteractive=this._defaultOptions?.disabledInteractive??!1,t&&(this.tabIndex=Je(t,0))}focus(i,t){t?this._focusMonitor.focusVia(this._inputElement,t,i):this._inputElement.nativeElement.focus(i)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((i,t)=>{i!==this.id&&t===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{!i&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._cleanupClick=this._renderer.listen(this._inputElement.nativeElement,"click",this._onInputClick)})}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new we(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(i){if(i.stopPropagation(),!this.checked&&!this.disabled){let t=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),t&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(i){this._onInputInteraction(i),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(i){this._disabled!==i&&(this._disabled=i,this._changeDetector.markForCheck())}_onInputClick=i=>{this.disabled&&this.disabledInteractive&&i.preventDefault()};_updateTabIndex(){let i=this.radioGroup,t;if(!i||!i.selected||this.disabled?t=this.tabIndex:t=i.selected===this?this.tabIndex:-1,t!==this._previousTabIndex){let e=this._inputElement?.nativeElement;e&&(e.setAttribute("tabindex",t+""),this._previousTabIndex=t,Ze(()=>{queueMicrotask(()=>{i&&i.selected&&i.selected!==this&&document.activeElement===e&&(i.selected?._inputElement.nativeElement.focus(),document.activeElement===e&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=S({type:o,selectors:[["mat-radio-button"]],viewQuery:function(t,e){if(t&1&&(Te(si,5),Te(mi,7,Me)),t&2){let r;ue(r=pe())&&(e._inputElement=r.first),ue(r=pe())&&(e._rippleTrigger=r.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(t,e){t&1&&_("focus",function(){return e._inputElement.nativeElement.focus()}),t&2&&(ke("id",e.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),re("mat-primary",e.color==="primary")("mat-accent",e.color==="accent")("mat-warn",e.color==="warn")("mat-mdc-radio-checked",e.checked)("mat-mdc-radio-disabled",e.disabled)("mat-mdc-radio-disabled-interactive",e.disabledInteractive)("_mat-animation-noopable",e._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",z],tabIndex:[2,"tabIndex","tabIndex",i=>i==null?0:Je(i)],checked:[2,"checked","checked",z],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",z],required:[2,"required","required",z],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",z]},outputs:{change:"change"},exportAs:["matRadioButton"],ngContentSelectors:ci,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio","aria-invalid","false",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(t,e){if(t&1){let r=y();$e(),n(0,"div",2,0)(2,"div",3)(3,"div",4),_("click",function(g){return c(r),u(e._onTouchTargetClick(g))}),a(),n(4,"input",5,1),_("change",function(g){return c(r),u(e._onInputInteraction(g))}),a(),n(6,"div",6),G(7,"div",7)(8,"div",8),a(),n(9,"div",9),G(10,"div",10),a()(),n(11,"label",11),et(12),a()()}t&2&&(m("labelPosition",e.labelPosition),s(2),re("mdc-radio--disabled",e.disabled),s(2),m("id",e.inputId)("checked",e.checked)("disabled",e.disabled&&!e.disabledInteractive)("required",e.required),ke("name",e.name)("value",e.value)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby)("aria-describedby",e.ariaDescribedby)("aria-disabled",e.disabled&&e.disabledInteractive?"true":null),s(5),m("matRippleTrigger",e._rippleTrigger.nativeElement)("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",!0),s(2),m("for",e.inputId))},dependencies:[ht,Bt],styles:[`.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mat-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled])~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-hover-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mat-radio-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-pressed-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mat-radio-selected-pressed-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mat-radio-state-layer-size, 40px);height:var(--mat-radio-state-layer-size, 40px);top:calc(-1*(var(--mat-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mat-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mat-radio-state-layer-size, 40px);height:var(--mat-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mat-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-sys-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple>.mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio>.mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.cdk-focused .mat-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display, block)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}
`],encapsulation:2,changeDetection:0})}return o})(),Kt=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=He({type:o});static \u0275inj=qe({imports:[Ge,Mt,Ee,Ge]})}return o})();function hi(o,l){o&1&&(n(0,"div"),d(1,"Title is required."),a())}function bi(o,l){o&1&&(n(0,"div"),d(1,"Title must be at least 10 characters long."),a())}function yi(o,l){o&1&&(n(0,"div"),d(1,"Title must be at most 100 characters long."),a())}function vi(o,l){o&1&&(n(0,"div"),d(1,"City is required."),a())}function xi(o,l){o&1&&(n(0,"div"),d(1,"City must be at least 3 characters long."),a())}function Ci(o,l){o&1&&(n(0,"div"),d(1,"City must be at most 50 characters long."),a())}function Ii(o,l){o&1&&(n(0,"div"),d(1,"Country is required."),a())}function wi(o,l){o&1&&(n(0,"div"),d(1,"Country must be at least 3 characters long."),a())}function Ei(o,l){o&1&&(n(0,"div"),d(1,"Country must be at most 50 characters long."),a())}function Si(o,l){if(o&1&&(n(0,"mat-option",28),d(1),a()),o&2){let i=l.$implicit;m("value",i),s(),_e(i)}}function Mi(o,l){o&1&&(n(0,"div"),d(1,"Category is required."),a())}function Di(o,l){if(o&1){let i=y();n(0,"form",6,0),_("ngSubmit",function(){c(i);let e=I(1),r=p();return u(r.save(e))}),n(2,"div",7)(3,"div",8)(4,"app-world-map",9),_("location",function(e){c(i);let r=p();return u(r.addGeoLocation(e))}),a()(),n(5,"div",10)(6,"div")(7,"app-edit-geo-location",11),C("locationChange",function(e){c(i);let r=p();return x(r.formData.location,e)||(r.formData.location=e),u(e)}),a()(),n(8,"mat-form-field",12)(9,"mat-label"),d(10,"Title"),a(),n(11,"input",13,1),C("ngModelChange",function(e){c(i);let r=p();return x(r.formData.title,e)||(r.formData.title=e),u(e)}),a(),n(13,"button",14),_("click",function(){c(i);let e=p();return u(e.formData.title.set(""))}),n(14,"mat-icon"),d(15,"clear"),a()(),n(16,"mat-error",15),h(17,hi,2,0,"div",16)(18,bi,2,0,"div",16)(19,yi,2,0,"div",16),a()(),n(20,"mat-form-field",12)(21,"mat-label"),d(22,"City"),a(),n(23,"input",17,2),C("ngModelChange",function(e){c(i);let r=p();return x(r.formData.city,e)||(r.formData.city=e),u(e)}),a(),n(25,"mat-error",15),h(26,vi,2,0,"div",16)(27,xi,2,0,"div",16)(28,Ci,2,0,"div",16),a()(),n(29,"mat-form-field",12)(30,"mat-label"),d(31,"Country"),a(),n(32,"input",18,3),C("ngModelChange",function(e){c(i);let r=p();return x(r.formData.country,e)||(r.formData.country=e),u(e)}),a(),n(34,"mat-error",15),h(35,Ii,2,0,"div",16)(36,wi,2,0,"div",16)(37,Ei,2,0,"div",16),a()(),n(38,"mat-form-field",12)(39,"mat-label"),d(40,"Category"),a(),n(41,"mat-select",19,4),C("ngModelChange",function(e){c(i);let r=p();return x(r.formData.category,e)||(r.formData.category=e),u(e)}),h(43,Si,2,2,"mat-option",20),a(),n(44,"mat-error",15),h(45,Mi,2,0,"div",16),a()(),n(46,"div")(47,"app-edit-geo-json",21),C("geoJsonChange",function(e){c(i);let r=p();return x(r.formData.geoJson,e)||(r.formData.geoJson=e),u(e)}),a()(),n(48,"mat-radio-group",22),C("ngModelChange",function(e){c(i);let r=p();return x(r.showMapOption,e)||(r.showMapOption=e),u(e)}),n(49,"mat-radio-button",23),d(50,"Location"),a(),n(51,"mat-radio-button",24),d(52,"GeoJson"),a()()()(),n(53,"div",25)(54,"button",26),d(55,"Save"),a(),n(56,"button",27),d(57,"Next"),a()()()}if(o&2){let i=I(1),t=I(12),e=I(24),r=I(33),f=I(42),g=p();s(4),m("geoJsonData",g.geoJsonData())("iconType",g.formData.category())("enableGeoCoding",!0),s(3),v("location",g.formData.location),s(4),v("ngModel",g.formData.title),m("readOnly",g.isReadOnly()),s(5),m("hidden",t.valid||t.pristine),s(),m("ngIf",t.errors==null?null:t.errors.required),s(),m("ngIf",t.errors==null?null:t.errors.minlength),s(),m("ngIf",t.errors==null?null:t.errors.maxlength),s(4),v("ngModel",g.formData.city),m("readOnly",g.isReadOnly()),s(2),m("hidden",e.valid||e.pristine),s(),m("ngIf",e.errors==null?null:e.errors.required),s(),m("ngIf",e.errors==null?null:e.errors.minlength),s(),m("ngIf",e.errors==null?null:e.errors.maxlength),s(4),v("ngModel",g.formData.country),m("readOnly",g.isReadOnly()),s(2),m("hidden",r.valid||r.pristine),s(),m("ngIf",r.errors==null?null:r.errors.required),s(),m("ngIf",r.errors==null?null:r.errors.minlength),s(),m("ngIf",r.errors==null?null:r.errors.maxlength),s(4),v("ngModel",g.formData.category),m("disabled",g.isReadOnly()),s(2),m("ngForOf",g.CATEGORIES),s(),m("hidden",f.valid||f.pristine),s(),m("ngIf",f.errors==null?null:f.errors.required),s(2),v("geoJson",g.formData.geoJson),s(),v("ngModel",g.showMapOption),s(6),m("disabled",!i.form.valid),s(2),m("disabled",!i.form.valid)}}var Xt=(()=>{let l=class l{constructor(){this.CATEGORIES=Ut,this.journeyService=b(A),this.notificationService=b(Z),this.journey=M.required(),this.formData={location:E(void 0),title:E(""),city:E(""),country:E(""),category:E(Fe),geoJson:E(void 0)},this.mode=M(oe.EDIT),this.isReadOnly=ae(()=>this.mode()===oe.VIEW),this.showMapOption=E("Location"),this.geoJsonData=ae(()=>this.showMapOption()=="Location"?this.formData.location():this.formData.geoJson())}ngOnInit(){this.copyToForm(this.journey().geoDetails??new Pe)}save(t){console.debug("submitted form:",t),this.journeyService.saveJourneyGeoDetails(this.journey(),this.copyDataFromForm()).subscribe({next:e=>this.onUpdateSuccess(e),error:e=>this.onError("Unexpected error while saving geo data",e)})}onUpdateSuccess(t){this.notificationService.showSuccess("Journey details saved successfully.")}onError(t,e){this.notificationService.showError(t),console.error(e)}copyToForm(t){this.formData.location.set(t.location),this.formData.title.set(t.title),this.formData.city.set(t.city),this.formData.country.set(t.country),this.formData.category.set(t.category||Fe),this.formData.geoJson.set(t.geoJson)}copyDataFromForm(){return new Pe(this.formData.title(),this.formData.city(),this.formData.country(),this.formData.category(),this.formData.location(),this.formData.geoJson()||this.formData.location())}addGeoLocation(t){this.formData.location.update(e=>t.location??e),this.formData.geoJson.update(e=>t.location??e),this.formData.title.update(e=>e||t.name),this.formData.city.update(e=>t.state??e),this.formData.country.update(e=>t.country??e)}};l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=S({type:l,selectors:[["app-edit-journey-geo-details"]],inputs:{journey:[1,"journey"],mode:[1,"mode"]},outputs:{journey:"journeyChange",mode:"modeChange"},decls:2,vars:1,consts:[["journeyForm","ngForm"],["title","ngModel"],["city","ngModel"],["country","ngModel"],["category","ngModel"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-12","gap-4","mb-6"],[1,"col-span-12","md:col-span-8","relative","min-h-[25vh]"],[1,"h-1/2",3,"location","geoJsonData","iconType","enableGeoCoding"],[1,"col-span-12","md:col-span-4","flex","flex-col","gap-2"],[3,"locationChange","location"],[1,"w-full"],["matInput","","id","title","name","title","required","","maxlength","100","minlength","10","placeholder","Title",3,"ngModelChange","ngModel","readOnly"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[3,"hidden"],[4,"ngIf"],["matInput","","id","city","name","city","required","","minlength","3","maxlength","50","placeholder","City or Region",3,"ngModelChange","ngModel","readOnly"],["matInput","","id","country","name","country","required","","minlength","3","maxlength","50","placeholder","Country",3,"ngModelChange","ngModel","readOnly"],["name","category","required","",3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"geoJsonChange","geoJson"],["name","mapOptions",1,"flex","justify-center","gap-2",3,"ngModelChange","ngModel"],["value","Location"],["value","GeoJson"],[1,"flex","justify-center","gap-2","mt-6"],["mat-flat-button","","type","submit",3,"disabled"],["mat-stroked-button","","type","button","matStepperNext","",3,"disabled"],[3,"value"]],template:function(e,r){e&1&&(n(0,"main"),h(1,Di,58,31,"form",5),a()),e&2&&(s(),m("ngIf",r.journey()))},dependencies:[J,L,X,H,N,$,wt,Et,Q,R,zt,ie,D,Qt,Yt,q,B,W,te,ye,U,Y,Ce,xe,ve,Kt,Oe,Ee,j,P,O,fe,F,V],encapsulation:2,changeDetection:0});let o=l;return o})();function ki(o,l){if(o&1){let i=y();n(0,"div",1)(1,"div",2)(2,"h6",3),d(3,"Edit Image Details"),a()(),n(4,"div",4)(5,"div",5)(6,"div",6),G(7,"img",7),a(),n(8,"div",8)(9,"form",9)(10,"mat-form-field",10)(11,"mat-label"),d(12,"Image URL"),a(),n(13,"input",11),C("ngModelChange",function(e){c(i);let r=p();return x(r.imageItem().url,e)||(r.imageItem().url=e),u(e)}),a()(),n(14,"mat-form-field",10)(15,"mat-label"),d(16,"Asset ID"),a(),n(17,"input",12),C("ngModelChange",function(e){c(i);let r=p();return x(r.imageItem().assetId,e)||(r.imageItem().assetId=e),u(e)}),a()(),n(18,"mat-form-field",10)(19,"mat-label"),d(20,"Public ID"),a(),n(21,"input",13),C("ngModelChange",function(e){c(i);let r=p();return x(r.imageItem().publicId,e)||(r.imageItem().publicId=e),u(e)}),a()(),n(22,"mat-form-field",10)(23,"mat-label"),d(24,"Title"),a(),n(25,"input",14),C("ngModelChange",function(e){c(i);let r=p();return x(r.imageItem().title,e)||(r.imageItem().title=e),u(e)}),a()(),n(26,"div",15)(27,"mat-checkbox",16),C("ngModelChange",function(e){c(i);let r=p();return x(r.imageItem().isFavorite,e)||(r.imageItem().isFavorite=e),u(e)}),d(28,"Make it my favorite "),a()(),n(29,"mat-form-field",10)(30,"mat-label"),d(31,"Event Date"),a(),n(32,"input",17),C("ngModelChange",function(e){c(i);let r=p();return x(r.imageItem().eventDate,e)||(r.imageItem().eventDate=e),u(e)}),a()(),n(33,"div",15)(34,"mat-checkbox",18),C("ngModelChange",function(e){c(i);let r=p();return x(r.imageItem().isThumbnail,e)||(r.imageItem().isThumbnail=e),u(e)}),d(35,"Make it a thumbnail "),a()(),n(36,"div",19)(37,"button",20),_("click",function(){c(i);let e=p();return u(e.saveItem.emit(e.imageItem()))}),d(38,"Save"),a(),n(39,"button",21),_("click",function(){c(i);let e=p();return u(e.removeItem.emit(e.imageItem()))}),d(40,"Remove"),a(),n(41,"button",22),_("click",function(){c(i);let e=p();return u(e.cancelItem.emit(e.imageItem()))}),d(42,"Cancel"),a()()()()()()()}if(o&2){let i=p();s(4),nt("background-image","url("+i.imageItem().url+")"),s(3),m("src",i.imageItem().url,se)("title",i.imageItem().assetId),s(6),v("ngModel",i.imageItem().url),s(4),v("ngModel",i.imageItem().assetId),s(4),v("ngModel",i.imageItem().publicId),s(4),v("ngModel",i.imageItem().title),s(2),v("ngModel",i.imageItem().isFavorite),s(5),v("ngModel",i.imageItem().eventDate),s(2),v("ngModel",i.imageItem().isThumbnail)}}var $t=(()=>{let l=class l{constructor(){this.imageItem=M(new le("","")),this.saveItem=ge(),this.cancelItem=ge(),this.removeItem=ge()}};l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=S({type:l,selectors:[["app-edit-journey-image-item"]],inputs:{imageItem:[1,"imageItem"]},outputs:{imageItem:"imageItemChange",saveItem:"saveItem",cancelItem:"cancelItem",removeItem:"removeItem"},decls:1,vars:1,consts:[["class","container mx-auto p-4 rounded-lg shadow-md",4,"ngIf"],[1,"container","mx-auto","p-4","rounded-lg","shadow-md"],[1,"border-b-2","mb-4"],[1,"text-lg","font-semibold","text-primary"],[1,"bg-cover","bg-no-repeat","bg-center","p-6","rounded-lg"],[1,"backdrop-blur-3xl","flex","flex-col","md:flex-row","justify-evenly","items-center","rounded-lg","p-4","inset-0","bg-white/50"],[1,"flex","justify-center","text-center","mb-4","md:mb-0","md:w-1/3"],["alt","thumbnail",1,"rounded-lg","border-2","border-primary","h-48","w-48","object-cover",3,"src","title"],[1,"flex-1"],[1,"flex","flex-col","gap-2"],["appearance","outline",1,"w-full"],["matInput","","type","text","id","imageUrl","name","imageUrl","readonly","",1,"rounded-lg","w-full","bg-gray-200","cursor-not-allowed",3,"ngModelChange","ngModel"],["matInput","","type","text","id","imageId","name","imageId","readonly","",1,"rounded-lg","w-full","bg-gray-200","cursor-not-allowed",3,"ngModelChange","ngModel"],["matInput","","type","text","id","publicId","name","publicId","readonly","",1,"rounded-lg","w-full","bg-gray-200","cursor-not-allowed",3,"ngModelChange","ngModel"],["matInput","","type","text","id","title","name","title",1,"rounded-lg","w-full",3,"ngModelChange","ngModel"],[1,"flex","items-center"],["id","favoriteFlag","name","favoriteFlag",3,"ngModelChange","ngModel"],["matInput","","type","date","id","eventDate","name","eventDate","placeholder","dd-mm-yyyy",1,"rounded-lg","w-full",3,"ngModelChange","ngModel"],["id","thumbnailFlag","name","thumbnailFlag",3,"ngModelChange","ngModel"],[1,"flex","justify-center","gap-2","rounded-lg"],["mat-flat-button","","type","button",1,"!bg-success","!text-white",3,"click"],["mat-flat-button","","type","button",1,"!bg-danger","!text-white",3,"click"],["mat-stroked-button","","type","button",3,"click"]],template:function(e,r){e&1&&h(0,ki,43,11,"div",0),e&2&&m("ngIf",r.imageItem())},dependencies:[J,L,X,H,N,Q,R,F,j,P,D,q,B,W,U,Y,Ht],encapsulation:2,changeDetection:0});let o=l;return o})();var Ti=["imageItemDetailDialog"],Vi=(o,l)=>l.assetId;function Ji(o,l){o&1&&(n(0,"div",15),d(1," Selected "),a())}function ji(o,l){if(o&1){let i=y();n(0,"div",12),_("click",function(){let e=c(i).$implicit,r=p(2);return u(r.openImageItem(e))})("keydown.enter",function(){let e=c(i).$implicit,r=p(2);return u(r.openImageItem(e))}),G(1,"img",13),h(2,Ji,2,0,"div",14),a()}if(o&2){let i=l.$implicit;re("border-success",i.isThumbnail)("border-primary",!i.isThumbnail),s(),m("title",at(i.assetId))("src",i.url,se),s(),m("ngIf",i.isThumbnail)}}function Gi(o,l){if(o&1){let i=y();n(0,"form",4),_("ngSubmit",function(){c(i);let e=p();return u(e.save())}),n(1,"div",5),me(2,ji,3,8,"div",6,Vi),a(),n(4,"div",7)(5,"button",8),_("click",function(){c(i);let e=p();return u(e.openUploadWidget(!0))}),n(6,"mat-icon"),d(7,"drive_folder_upload"),a(),d(8," Upload Image(s) "),a(),n(9,"button",8),_("click",function(){c(i);let e=p();return u(e.openUploadWidget(!1))}),n(10,"mat-icon"),d(11,"upload_file"),a(),d(12," Upload Image "),a(),n(13,"button",9),d(14,"Next"),a(),n(15,"a",10)(16,"span",11),d(17,"Reduce Image Size"),a(),n(18,"mat-icon"),d(19,"open_in_new"),a()()()()}if(o&2){let i=p();s(2),ce(i.formImageDetails().images)}}var ei=(()=>{let l=class l{constructor(){this.notificationService=b(Z),this.journeyService=b(A),this.journey=M.required(),this.formImageDetails=E(new Ne),this.imageItemDetail=M(new le("","")),this.imageItemDialog=st.required("imageItemDetailDialog")}ngOnInit(){this.formImageDetails.set(this.journey().imagesDetails??new Ne)}addImage(t){this.formImageDetails.update(e=>T(k({},e),{images:[...e.images,new le(t.secure_url,t.asset_id,t.public_id)]}))}getWidgetParams(t,e){return{cloudName:ee.cloudName,uploadPreset:e?ee.cloudinaryPreset:ee.cloudinarySingleImgPreset,folder:`${ee.cloudBaseDir}/${t.id}`,tags:t.tags,use_asset_folder_as_public_id_prefix:!0,context:{env:ee.stage,id:`${t.id}`},cropping:!e,showAdvancedOptions:!0,multiple:e}}onError(t,e){this.notificationService.showError(t),console.error(e)}onUpdateSuccess(t){this.notificationService.showSuccess("Image Details saved successfully."),this.journey.set(t)}save(){console.log("saving"),this.journeyService.saveJourneyImagesDetails(this.journey(),this.formImageDetails()).subscribe({next:t=>this.onUpdateSuccess(t),error:t=>this.onError("Unexpected error while saving images data",t)})}openUploadWidget(t=!0){cloudinary.createUploadWidget(this.getWidgetParams(this.journey(),t),(e,r)=>{!e&&r&&r.event==="success"&&this.addImage(r.info),!e&&r&&r.event==="close"&&this.save()}).open()}openImageItem(t){this.imageItemDetail.set(t),this.imageItemDialog().nativeElement.showModal()}saveImageItemDetail(t){this.formImageDetails.update(e=>T(k({},e),{images:[...e.images.map(r=>r.assetId==t.assetId?t:r)]})),this.save(),this.imageItemDialog().nativeElement.close()}deleteImageItemDetail(t){this.formImageDetails.update(e=>T(k({},e),{images:[...e.images.filter(r=>r.assetId!=t.assetId)]})),this.save(),this.imageItemDialog().nativeElement.close()}};l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=S({type:l,selectors:[["app-edit-journey-images-details"]],viewQuery:function(e,r){e&1&&it(r.imageItemDialog,Ti,5),e&2&&ot()},inputs:{journey:[1,"journey"],imageItemDetail:[1,"imageItemDetail"]},outputs:{journey:"journeyChange",imageItemDetail:"imageItemDetailChange"},decls:5,vars:2,consts:[["imageItemDetailDialog",""],[3,"ngSubmit",4,"ngIf"],[1,"w-full","md:w-3/4","p-4","rounded-lg","border","shadow-lg","dark:bg-black","mx-auto"],[3,"saveItem","removeItem","cancelItem","imageItem"],[3,"ngSubmit"],[1,"grid","grid-cols-3","sm:grid-cols-4","md:grid-cols-6","gap-4","mb-4"],["tabindex","-1",1,"relative","group","cursor-pointer","border","rounded-lg","overflow-hidden","transition-all","duration-300","hover:shadow-lg","focus-within:ring","focus-within:ring-offset-2",3,"border-success","border-primary"],[1,"flex","flex-col","md:flex-row","items-center","justify-center","content-center","gap-2"],["mat-fab","","extended","","type","button",3,"click"],["mat-stroked-button","","type","button","matStepperNext",""],["routerLink","/tools","target","_blank",1,"text-primary","flex","flex-row","justify-center"],[1,"hover:underline"],["tabindex","-1",1,"relative","group","cursor-pointer","border","rounded-lg","overflow-hidden","transition-all","duration-300","hover:shadow-lg","focus-within:ring","focus-within:ring-offset-2",3,"click","keydown.enter"],["loading","lazy","alt","Thumbnail",1,"h-24","w-full","object-contain",3,"src","title"],["class","absolute top-0 left-0 w-full h-full bg-black/30 flex items-center justify-center text-white font-bold text-sm",4,"ngIf"],[1,"absolute","top-0","left-0","w-full","h-full","bg-black/30","flex","items-center","justify-center","text-white","font-bold","text-sm"]],template:function(e,r){if(e&1){let f=y();n(0,"main"),h(1,Gi,20,0,"form",1),n(2,"dialog",2,0)(4,"app-edit-journey-image-item",3),_("saveItem",function(w){return c(f),u(r.saveImageItemDetail(w))})("removeItem",function(w){return c(f),u(r.deleteImageItemDetail(w))})("cancelItem",function(){return c(f),u(r.imageItemDialog().nativeElement.close())}),a()()()}e&2&&(s(),m("ngIf",r.journey()),s(3),m("imageItem",r.imageItemDetail()))},dependencies:[J,L,N,R,D,j,P,Jt,ie,F,V,ut,$t],styles:[".group[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}img[_ngcontent-%COMP%]{transition:transform .3s ease}"],changeDetection:0});let o=l;return o})();var Fi=(o,l)=>l.videoId;function Pi(o,l){if(o&1){let i=y();n(0,"div",9)(1,"button",13),_("click",function(){let e=c(i).$implicit,r=p(2);return u(r.removeVideoAndSaveJourney(e))}),n(2,"mat-icon",14),d(3," do_not_disturb_on "),a()(),G(4,"img",15),a()}if(o&2){let i=l.$implicit;s(4),m("ngSrc","https://img.youtube.com/vi/"+i.videoId+"/0.jpg")("alt",i.videoId)("title",i.videoId)}}function Ni(o,l){o&1&&(n(0,"p",10),d(1," No videos available for this journey. "),a())}function Ri(o,l){if(o&1){let i=y();n(0,"form",3)(1,"div")(2,"mat-form-field",4)(3,"mat-label"),d(4,"YouTube Video ID"),a(),G(5,"input",5,0),n(7,"button",6),_("click",function(){c(i);let e=I(6);return p().addVideo(e.value),u(e.value="")}),d(8," Upload "),a()()(),n(9,"div")(10,"h3",7),d(11,"Video List"),a(),n(12,"div",8),me(13,Pi,5,3,"div",9,Fi),Ke(15,Ni,2,0,"p",10),a()(),n(16,"div",11)(17,"button",12),d(18,"Next"),a()()()}if(o&2){let i=I(6),t=p();s(7),m("disabled",i.value===""),s(6),ce(t.formVideosDetails().videos),s(2),Xe(t.formVideosDetails().videos.length?-1:15)}}var ti=(()=>{let l=class l{constructor(){this.journeyService=b(A),this.notificationService=b(Z),this.journey=M.required(),this.formVideosDetails=E(new Re)}ngOnInit(){this.formVideosDetails.set(this.journey().videosDetails??new Re)}addVideo(t){this.formVideosDetails.update(e=>T(k({},e),{videos:[...e.videos,new Ft(t)]})),this.save()}removeVideoAndSaveJourney(t){this.formVideosDetails.update(e=>T(k({},e),{videos:e.videos.filter(r=>r.videoId!==t.videoId)})),this.save()}save(){this.journeyService.saveJourneyVideosDetails(this.journey(),this.formVideosDetails()).subscribe({next:t=>this.onUpdateSuccess(t),error:t=>this.onError("Unexpected error while saving videos data",t)})}onUpdateSuccess(t){this.notificationService.showSuccess("Video Details saved successfully."),this.journey.set(t)}onError(t,e){this.notificationService.showError(t),console.error(e)}};l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=S({type:l,selectors:[["app-edit-journey-videos-details"]],inputs:{journey:[1,"journey"]},outputs:{journey:"journeyChange"},decls:2,vars:1,consts:[["videoInput",""],[1,"rounded-lg","shadow-lg"],["class","container mx-auto p-6 flex flex-col gap-2",4,"ngIf"],[1,"container","mx-auto","p-6","flex","flex-col","gap-2"],["appearance","outline",1,"w-full"],["matInput","","placeholder","Enter YouTube Video ID"],["mat-flat-button","","matSuffix","","type","button",3,"click","disabled"],[1,"text-lg","font-semibold","text-gray-700","mb-4"],[1,"flex","flex-wrap","gap-4"],[1,"relative","w-48","h-48"],[1,"text-gray-500","italic"],[1,"text-center"],["mat-stroked-button","","type","button","matStepperNext",""],["mat-icon-button","","aria-label","Remove Video",1,"absolute","float-right","!z-10","!p-0",3,"click"],[1,"bg-white","rounded-full","text-red-400!","shadow-md","hover:text-red-600!","top-[-5px]","right-[-10px]"],["fill","",1,"rounded-lg","border","border-gray-300","shadow-sm","w-full","h-full","object-fill",3,"ngSrc","alt","title"]],template:function(e,r){e&1&&(n(0,"main",1),h(1,Ri,19,2,"form",2),a()),e&2&&(s(),m("ngIf",r.journey()))},dependencies:[J,L,N,R,D,St,ie,q,B,W,ye,U,Y,j,P,O,F,V,mt],encapsulation:2,changeDetection:0});let o=l;return o})();function Li(o,l){o&1&&(n(0,"mat-error"),d(1,"Please choose visibility"),a())}function Oi(o,l){o&1&&(n(0,"mat-icon",39),d(1,"check_circle"),a())}function Ai(o,l){o&1&&(n(0,"mat-icon",40),d(1,"cancel"),a())}function Wi(o,l){o&1&&(n(0,"mat-icon",39),d(1,"check_circle"),a())}function Bi(o,l){o&1&&(n(0,"mat-icon",40),d(1,"cancel"),a())}function qi(o,l){o&1&&(n(0,"mat-icon",39),d(1,"check_circle"),a())}function Ui(o,l){o&1&&(n(0,"mat-icon",40),d(1,"cancel"),a())}function zi(o,l){o&1&&(n(0,"mat-icon",39),d(1,"check_circle"),a())}function Hi(o,l){o&1&&(n(0,"mat-icon",40),d(1,"cancel"),a())}function Qi(o,l){if(o&1&&(n(0,"mat-option",26),d(1),a()),o&2){let i=l.$implicit;m("value",i.url),s(),rt(" ",i.assetId," ")}}function Yi(o,l){if(o&1){let i=y();n(0,"button",38),_("click",function(){c(i),p();let e=I(57);return u(e.showModal())}),d(1," Delete "),a()}}function Zi(o,l){if(o&1){let i=y();n(0,"button",41),_("click",function(){c(i),p();let e=I(1),r=p();return u(r.save(e))}),d(1," Draft "),a()}if(o&2){p();let i=I(1);m("disabled",!i.form.valid)}}function Ki(o,l){if(o&1&&(n(0,"button",42),d(1," Publish "),a()),o&2){p();let i=I(1);m("disabled",!i.form.valid)}}function Xi(o,l){if(o&1){let i=y();n(0,"form",4,0),_("ngSubmit",function(){c(i);let e=I(1),r=p();return u(r.publish(e))}),n(2,"div",5)(3,"mat-form-field",6)(4,"mat-label"),d(5,"Visibility"),a(),n(6,"mat-select",7,1),C("ngModelChange",function(e){c(i);let r=p();return x(r.journey().visibilities,e)||(r.journey().visibilities=e),u(e)}),n(8,"mat-option",8),d(9,"MYSELF"),a(),n(10,"mat-option",9),d(11,"ADMINISTRATOR"),a(),n(12,"mat-option",10),d(13,"MAINTAINER"),a(),n(14,"mat-option",11),d(15,"AUTHENTICATED_USER"),a(),n(16,"mat-option",12),d(17,"GUEST"),a()(),h(18,Li,2,0,"mat-error",13),a()(),n(19,"div",14)(20,"div",15)(21,"span",16),d(22,"Journey Preview"),a()(),n(23,"div",17)(24,"ul",18)(25,"li",19),d(26,"Basic Details "),h(27,Oi,2,0,"mat-icon",20)(28,Ai,2,0,"mat-icon",21),a(),n(29,"li",19),d(30,"Geo Details "),h(31,Wi,2,0,"mat-icon",20)(32,Bi,2,0,"mat-icon",21),a(),n(33,"li",19),d(34,"Images Details "),h(35,qi,2,0,"mat-icon",20)(36,Ui,2,0,"mat-icon",21),a(),n(37,"li",19),d(38,"Videos Details "),h(39,zi,2,0,"mat-icon",20)(40,Hi,2,0,"mat-icon",21),a()()(),n(41,"div",22)(42,"div",23)(43,"mat-form-field",24)(44,"mat-label"),d(45,"Thumbnail"),a(),n(46,"mat-select",25),C("ngModelChange",function(e){c(i);let r=p();return x(r.journey().thumbnail,e)||(r.journey().thumbnail=e),u(e)}),_("selectionChange",function(){c(i);let e=p();return u(e.onThumbnailChangedEvent())}),n(47,"mat-option",26),d(48,"Default"),a(),h(49,Qi,2,2,"mat-option",27),a()()(),n(50,"div",23),G(51,"app-journey-card-view",28),a()()(),n(52,"div",29),h(53,Yi,2,0,"button",30)(54,Zi,2,1,"button",31)(55,Ki,2,1,"button",32),a(),n(56,"dialog",33,2)(58,"div",34)(59,"mat-icon",35),d(60,"delete_forever"),a(),n(61,"p",36),d(62,"Are you sure you want to delete the journey?"),a(),n(63,"div",37)(64,"button",38),_("click",function(){c(i);let e=I(57);return u(e.close())}),d(65,"No, Keep it"),a(),n(66,"button",38),_("click",function(){c(i);let e=I(57),r=p();return e.close(),u(r.delete())}),d(67,"Yes, Delete forever "),a()()()()()}if(o&2){let i,t=I(7),e=p();s(6),v("ngModel",e.journey().visibilities),s(2),m("disabled",!0),s(10),m("ngIf",t.hasError("required")),s(9),m("ngIf",e.isBasicDetailsAvailableAndValid()),s(),m("ngIf",!e.isBasicDetailsAvailableAndValid()),s(3),m("ngIf",e.isGeoJsonAvailable()),s(),m("ngIf",!e.isGeoJsonAvailable()),s(3),m("ngIf",e.isImagesDetailsAvailable()),s(),m("ngIf",!e.isImagesDetailsAvailable()),s(3),m("ngIf",e.isVideosDetailsAvailable()),s(),m("ngIf",!e.isVideosDetailsAvailable()),s(6),v("ngModel",e.journey().thumbnail),s(),m("value",e.DEFAULT_THUMBNAIL),s(2),m("ngForOf",(i=e.journey().imagesDetails)==null?null:i.images),s(2),m("journey",e.journey())}}var ii=(()=>{let l=class l{constructor(){this.DEFAULT_THUMBNAIL=jt,this.router=b(he),this.journeyService=b(A),this.notificationService=b(Z),this.journey=M.required()}isBasicDetailsAvailableAndValid(){return this.journey().id!=""&&this.journey().name!=""&&this.journey().description!=""&&this.journey().journeyDate!=""&&this.journey().tags?.length>0}isGeoJsonAvailable(){return this.journey().geoDetails?.geoJson!=null}isImagesDetailsAvailable(){return this.journey().imagesDetails?.images?.length??!1}isVideosDetailsAvailable(){return this.journey().videosDetails?.videos?.length??!1}publish(t){console.debug("submitted form:",t),this.journey.update(e=>T(k({},e),{isPublished:!0})),this.journeyService.publishJourney(this.journey()).subscribe({next:e=>this.onUpdateSuccess(e),error:e=>this.onError("Unexpected error while publishing data",e)})}save(t){t.valid&&(this.journey.update(e=>T(k({},e),{isPublished:!1})),this.journeyService.publishJourney(this.journey()).subscribe({next:e=>this.onUpdateSuccess(e),error:e=>this.onError("Unexpected error while publishing data",e)}))}onError(t,e){this.notificationService.showError(t),console.error(e)}onUpdateSuccess(t){let e=t.isPublished?"Journey published successfully.":"Journey saved successfully";this.notificationService.showSuccess(e),this.journey.set(t)}delete(){this.journeyService.deleteJourney(this.journey()).subscribe({next:t=>this.onDeleteSuccess(),error:t=>this.onError("Unexpected error while publishing data",t)})}onDeleteSuccess(){this.notificationService.showSuccess("Journey deleted successfully"),setTimeout(()=>this.router.navigate(["journey"]),1e3)}onThumbnailChangedEvent(){this.journey.update(t=>k({},t))}};l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=S({type:l,selectors:[["app-edit-journey-publish-details"]],inputs:{journey:[1,"journey"]},outputs:{journey:"journeyChange"},decls:2,vars:1,consts:[["journeyForm","ngForm"],["visibilities","ngModel"],["deleteJourneyDialog",""],["class","flex flex-col gap-2",3,"ngSubmit",4,"ngIf"],[1,"flex","flex-col","gap-2",3,"ngSubmit"],[1,"grid","grid-cols-1","gap-4"],["appearance","outline","color","primary",1,"w-full"],["id","visibilities","name","visibilities","multiple","","required","",3,"ngModelChange","ngModel"],["value","MYSELF",3,"disabled"],["value","ADMINISTRATOR"],["value","MAINTAINER"],["value","AUTHENTICATED_USER"],["value","GUEST"],[4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"md:col-span-2","pb-3","border-b-2"],[1,"text-lg","font-semibold","text-current"],[1,"rounded-lg","shadow-md","p-4"],[1,"flex","flex-col","gap-2"],[1,"flex","items-center","justify-between"],["class","text-success!",4,"ngIf"],["class","text-danger!",4,"ngIf"],[1,"flex","flex-col","rounded-lg","shadow-md","p-4"],[1,"mb-4"],["appearance","outline",1,"w-full"],["id","thumbnail","name","thumbnail","ngModel","",3,"ngModelChange","selectionChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"journey"],[1,"flex","justify-center","gap-2","mt-6"],["mat-stroked-button","","type","button",3,"click",4,"appHasWriteAccess"],["mat-stroked-button","","type","button",3,"disabled","click",4,"appHasWriteAccess"],["mat-flat-button","","type","submit",3,"disabled",4,"appHasWriteAccess"],["id","deleteJourneyDialog",1,"border-0","rounded-lg","p-4","mx-auto"],[1,"text-center"],[1,"fs-3","text-danger"],[1,"text-danger","mt-2"],[1,"mt-4","flex","justify-center","gap-2"],["mat-stroked-button","","type","button",3,"click"],[1,"text-success!"],[1,"text-danger!"],["mat-stroked-button","","type","button",3,"click","disabled"],["mat-flat-button","","type","submit",3,"disabled"]],template:function(e,r){e&1&&(n(0,"main"),h(1,Xi,68,15,"form",3),a()),e&2&&(s(),m("ngIf",r.journey()))},dependencies:[V,J,L,H,N,$,Q,R,D,q,B,W,te,Ce,xe,ve,fe,Rt,Pt,Nt,P],encapsulation:2,changeDetection:0});let o=l;return o})();function $i(o,l){o&1&&d(0,"Memories")}function eo(o,l){if(o&1){let i=y();n(0,"app-edit-journey-memories-details",11),C("journeyChange",function(e){c(i);let r=p(2);return x(r.journey,e)||(r.journey=e),u(e)}),a()}if(o&2){let i=p(2);v("journey",i.journey),m("mode",i.mode())}}function to(o,l){o&1&&d(0,"Geography")}function io(o,l){if(o&1){let i=y();n(0,"app-edit-journey-geo-details",12),C("journeyChange",function(e){c(i);let r=p(2);return x(r.journey,e)||(r.journey=e),u(e)}),a()}if(o&2){let i=p(2);v("journey",i.journey)}}function oo(o,l){o&1&&d(0,"Images")}function no(o,l){if(o&1){let i=y();n(0,"app-edit-journey-images-details",12),C("journeyChange",function(e){c(i);let r=p(2);return x(r.journey,e)||(r.journey=e),u(e)}),a()}if(o&2){let i=p(2);v("journey",i.journey)}}function ro(o,l){o&1&&d(0,"Videos")}function ao(o,l){if(o&1){let i=y();n(0,"app-edit-journey-videos-details",12),C("journeyChange",function(e){c(i);let r=p(2);return x(r.journey,e)||(r.journey=e),u(e)}),a()}if(o&2){let i=p(2);v("journey",i.journey)}}function lo(o,l){o&1&&d(0,"Publish")}function so(o,l){if(o&1){let i=y();n(0,"app-edit-journey-publish-details",12),C("journeyChange",function(e){c(i);let r=p(2);return x(r.journey,e)||(r.journey=e),u(e)}),a()}if(o&2){let i=p(2);v("journey",i.journey)}}function mo(o,l){if(o&1){let i=y();n(0,"section",1)(1,"div",2)(2,"div",3)(3,"h4",4)(4,"span",5),d(5),a(),n(6,"button",6),_("click",function(){c(i);let e=p();return u(e.viewJourney(e.journey()))}),n(7,"mat-icon"),d(8,"visibility"),a()()()()(),n(9,"mat-stepper",7)(10,"mat-step",8),h(11,$i,1,0,"ng-template",9)(12,eo,1,2,"ng-template",10),a(),n(13,"mat-step"),h(14,to,1,0,"ng-template",9)(15,io,1,1,"ng-template",10),a(),n(16,"mat-step"),h(17,oo,1,0,"ng-template",9)(18,no,1,1,"ng-template",10),a(),n(19,"mat-step"),h(20,ro,1,0,"ng-template",9)(21,ao,1,1,"ng-template",10),a(),n(22,"mat-step"),h(23,lo,1,0,"ng-template",9)(24,so,1,1,"ng-template",10),a()()()}if(o&2){let i=p();s(5),_e(i.journey().name),s(),m("matTooltip","View Journey"),s(4),m("completed",i.journey().id)}}var Hr=(()=>{let l=class l{constructor(){this.route=b(ct),this.journeyService=b(A),this.router=b(he),this.journey=E(new Gt),this.mode=E(oe.EDIT),this.router.getCurrentNavigation()?.extras.state&&this.mode.set(this.router.getCurrentNavigation()?.extras.state?.mode??oe.EDIT)}ngOnInit(){this.journeyService.getJourneyById(this.route.snapshot.params.id).subscribe(t=>this.journey.set(t))}viewJourney(t){this.router.navigate(["/journey",t.id,"view"]).then()}};l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=S({type:l,selectors:[["app-edit-journey"]],decls:1,vars:1,consts:[["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"flex","m-2"],[1,"w-full"],[1,"flex","items-center"],[1,"text-primary","mr-2"],["mat-icon-button","",1,"border","border-primary","rounded-sm","hover:bg-primary","hover:text-white",3,"click","matTooltip"],["orientation","horizontal",1,"journey-edit-stepper"],[3,"completed"],["matStepLabel",""],["matStepContent",""],[3,"journeyChange","journey","mode"],[3,"journeyChange","journey"]],template:function(e,r){e&1&&h(0,mo,25,3,"section",0),e&2&&m("ngIf",r.journey)},dependencies:[Wt,At,Xt,ei,Lt,Ot,ti,ii,D,be,qt,j,O,F,V],encapsulation:2,changeDetection:0});let o=l;return o})();export{Hr as EditJourneyComponent};
