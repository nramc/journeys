import"./chunk-MS4AQ6UA.js";import{a as ae,b as le}from"./chunk-LQGY7OAE.js";import{a as re}from"./chunk-BUJTMDMM.js";import{m as K,o as Z,p as _,q as ee}from"./chunk-CUO5ETSI.js";import{c as oe}from"./chunk-2IINVUOZ.js";import"./chunk-F5X5MWHG.js";import{a as X}from"./chunk-V37MX7MR.js";import"./chunk-L5XFATSN.js";import"./chunk-XP6Z73TR.js";import"./chunk-UNDQFLSQ.js";import{j as V}from"./chunk-YFHJRQYX.js";import{a as te,f as ie,g as ne}from"./chunk-NILV4IFE.js";import"./chunk-NGPQ2GGJ.js";import"./chunk-EPSAGCW7.js";import"./chunk-KXD3RS2U.js";import"./chunk-V4GIWIP6.js";import{g as $,j as W,u as L}from"./chunk-WO3G5WWK.js";import{a as u}from"./chunk-BOFIAZKG.js";import{a as q,b as G}from"./chunk-GVTE5YWL.js";import{c as Y}from"./chunk-X2SCE2FH.js";import{g as Q,l as H}from"./chunk-HCZRYKRF.js";import"./chunk-ROY3IXJR.js";import{a as B}from"./chunk-V3Q3OSWB.js";import{f as z}from"./chunk-V4DUGJ4D.js";import{i as U}from"./chunk-WVRZXGKG.js";import{Aa as v,Ac as A,Bc as N,Dc as s,Ec as b,Fb as x,Hc as J,Ic as j,Jc as R,Lb as f,Na as E,Qa as y,Wb as l,a as F,ac as k,dd as O,ec as r,fc as a,gc as S,hc as I,ic as D,ja as P,kc as T,pa as d,pc as h,rb as o,rc as c,u as M,za as C,zb as w}from"./chunk-V2FZY2FE.js";function ue(i,m){if(i&1){let e=T();r(0,"button",7),h("click",function(){C(e);let n=c(3);return v(n.togglePlayer())}),r(1,"mat-icon",8),s(2,"pause_circle"),a()()}}function pe(i,m){if(i&1){let e=T();r(0,"button",9),h("click",function(){C(e);let n=c(3);return v(n.togglePlayer())}),r(1,"mat-icon",10),s(2,"play_circle"),a()()}}function ge(i,m){if(i&1&&(I(0),f(1,ue,3,0,"button",5)(2,pe,3,0,"button",6),D()),i&2){let e=c(2);o(),l("ngIf",e.isPlayerRunning()),o(),l("ngIf",!e.isPlayerRunning())}}function de(i,m){if(i&1&&(r(0,"div",2)(1,"h2",3),s(2),a(),f(3,ge,3,2,"ng-container",4),a()),i&2){let e,t,n=c();o(2),b((e=n.data())==null?null:e.heading),o(),l("ngIf",(t=n.images())==null?null:t.length)}}function fe(i,m){if(i&1&&(r(0,"div",16)(1,"span",17),s(2),a()()),i&2){let e=c().$implicit;o(2),b(e==null||e.args==null?null:e.args.title)}}function he(i,m){if(i&1&&(I(0),f(1,fe,3,1,"div",13),r(2,"div",14)(3,"p",15),s(4),a()(),D()),i&2){let e=m.$implicit;o(),l("ngIf",e==null||e.args==null?null:e.args.title),o(3),b(e==null||e.args==null?null:e.args.caption)}}function ye(i,m){if(i&1){let e=T();r(0,"gallery",11),h("itemClick",function(){C(e);let n=c();return v(n.togglePlayer())}),f(1,he,5,2,"ng-container",12),a()}if(i&2){let e=c();l("items",e.images())("thumbs",!1)("imageSize","contain")("bullets",!0)("autoplayInterval",3e3)("loop",!0)("scrollDuration",500)("autoplay",!0)}}function _e(i,m){i&1&&(r(0,"div")(1,"p",18),s(2,"No events found."),a()())}function Ce(i){return new K({src:i.src,args:F({caption:i.caption,title:i.title},i.args)})}var me=(()=>{class i{constructor(){this.data=E.required(),this.images=O(()=>this.data()?.images?.map(Ce)??[]),this.galleryComponent=w.required(_),this.isPlayerRunning=y(!0)}togglePlayer(){this.isPlayerRunning()?(this.galleryComponent().stop(),this.isPlayerRunning.set(!1)):(this.galleryComponent().next(),this.galleryComponent().play(),this.isPlayerRunning.set(!0))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=x({type:i,selectors:[["app-timeline"]],viewQuery:function(t,n){t&1&&A(n.galleryComponent,_,5),t&2&&N()},inputs:{data:[1,"data"]},decls:3,vars:2,consts:[["class","inline-flex mb-2",4,"ngIf"],[1,"gallery",3,"items","thumbs","imageSize","bullets","autoplayInterval","loop","scrollDuration","autoplay"],[1,"inline-flex","mb-2"],[1,"gradient-text","me-2"],[4,"ngIf"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Pause",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Play",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Pause",3,"click"],[1,"text-danger"],["mat-icon-button","","aria-label","Pause timeline","matTooltip","Play",3,"click"],[1,"text-success"],[1,"gallery",3,"itemClick","items","thumbs","imageSize","bullets","autoplayInterval","loop","scrollDuration","autoplay"],[4,"galleryImageDef"],["class","w-full text-start flex flex-row",4,"ngIf"],[1,"h-full","w-full","text-end","flex","flex-col","justify-end","p-2","mb-4"],[1,"text-center","bg-black/50"],[1,"w-full","text-start","flex","flex-row"],[1,"me-2","m-2","border-2","ps-2","pe-2","bg-black/25"],[1,"text-primary"]],template:function(t,n){if(t&1&&f(0,de,4,2,"div",0)(1,ye,2,8,"gallery",1)(2,_e,3,0,"div"),t&2){let p;l("ngIf",(p=n.data())==null?null:p.heading),o(),k(n.images()&&n.images().length>0?1:2)}},dependencies:[ee,_,Z,U,X,G,q,H,Q],encapsulation:2,changeDetection:0})}}return i})();var ce=(()=>{class i{constructor(){this.httpClient=d(z),this.authService=d(Y)}getTimelineForUpcomingJourniversaries(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{upcoming:e}})}getTimelineForJourney(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{IDs:e}})}getTimelineForCity(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{city:e}})}getTimelineForCountry(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{country:e}})}getTimelineForYear(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{year:e}})}getTimelineForCategory(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${t.accessToken}`},params:{category:e}})}getTimelineForToday(){let e=this.authService.getCurrentUserContext();return e.isAuthenticated?this.httpClient.get(u.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`,"X-Async-Process":"true"},params:{today:!0}}):M()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var et=(()=>{class i{constructor(){this.TIMELINE_PAGE_INFO=V,this.timelineService=d(ce),this.activatedRoute=d(B),this.numberOfDaysJourniversaries=y(7),this.timelineData=y(void 0)}ngOnInit(){let e=this.activatedRoute.snapshot.queryParams.id,t=this.activatedRoute.snapshot.queryParams.city,n=this.activatedRoute.snapshot.queryParams.country,p=this.activatedRoute.snapshot.queryParams.year,g=this.activatedRoute.snapshot.queryParams.category;e?this.getDataForJourney(e):t?this.getDataForCity(t):n?this.getDataForCountry(n):p?this.getDataForYear(p):g?this.getDataForCategory(g):this.getDataForUpcomingJourniversaries()}getDataForJourney(e){this.timelineService.getTimelineForJourney(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForCity(e){this.timelineService.getTimelineForCity(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForCountry(e){this.timelineService.getTimelineForCountry(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForYear(e){this.timelineService.getTimelineForYear(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForCategory(e){this.timelineService.getTimelineForCategory(e).subscribe({next:t=>this.timelineData.set(t),error:t=>console.error(t)})}getDataForUpcomingJourniversaries(){this.timelineService.getTimelineForUpcomingJourniversaries(this.numberOfDaysJourniversaries()).subscribe({next:e=>this.timelineData.set(e),error:e=>console.error(e)})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=x({type:i,selectors:[["app-timeline-page"]],decls:24,vars:10,consts:[[3,"pageInfo"],[1,"mt-2","container","flex","flex-col"],["appearance","fill"],[1,"!outline-offset-0","!border-0",3,"ngModelChange","selectionChange","ngModel"],[3,"value"],[1,"flex","flex-col"],[3,"data"]],template:function(t,n){t&1&&(r(0,"header"),S(1,"app-page-header",0),a(),r(2,"main")(3,"section",1)(4,"mat-form-field",2)(5,"mat-label"),s(6,"Choose interval to display Journiversaries"),a(),r(7,"mat-select",3),R("ngModelChange",function(g){return j(n.numberOfDaysJourniversaries,g)||(n.numberOfDaysJourniversaries=g),g}),h("selectionChange",function(){return n.getDataForUpcomingJourniversaries()}),r(8,"mat-option",4),s(9,"Tomorrow"),a(),r(10,"mat-option",4),s(11,"Next One Week"),a(),r(12,"mat-option",4),s(13,"Next Two Week"),a(),r(14,"mat-option",4),s(15,"Next Three Week"),a(),r(16,"mat-option",4),s(17,"Next One Month"),a(),r(18,"mat-option",4),s(19,"Next Two Months"),a(),r(20,"mat-option",4),s(21,"Next Three Months"),a()()()(),r(22,"section",5),S(23,"app-timeline",6),a()()),t&2&&(o(),l("pageInfo",n.TIMELINE_PAGE_INFO),o(6),J("ngModel",n.numberOfDaysJourniversaries),o(),l("value",1),o(2),l("value",7),o(2),l("value",14),o(2),l("value",21),o(2),l("value",30),o(2),l("value",60),o(2),l("value",90),o(3),l("data",n.timelineData()))},dependencies:[me,re,L,$,W,ne,ie,te,le,ae,oe],encapsulation:2,changeDetection:0})}}return i})();export{et as TimelinePageComponent};
