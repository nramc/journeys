import{a as Ce}from"./chunk-OEK3JCZ4.js";import{a as B}from"./chunk-YAT4ULIO.js";import"./chunk-HBX7LLKU.js";import"./chunk-YYKNHBGV.js";import{a as ue,b as he,c as ye,d as fe,e as _e}from"./chunk-RLXXQR5L.js";import"./chunk-NV3OXBN7.js";import"./chunk-XUXGEBV4.js";import{a as ge}from"./chunk-ZXZY3XPU.js";import{c as ae,d as le,e as se,f as de,g as ce}from"./chunk-QWPBZCLS.js";import{a as pe}from"./chunk-4HOOWDOM.js";import"./chunk-O74XJUOS.js";import"./chunk-VSQTGOJW.js";import{a as me}from"./chunk-PURFER6K.js";import{c as ie,g as ne,j as re,x as oe}from"./chunk-T3QMTVWU.js";import"./chunk-ZQZLPFK4.js";import"./chunk-RGNDWIHZ.js";import"./chunk-CBNGG2DO.js";import"./chunk-AUBER76A.js";import{a as te}from"./chunk-JJKKS25J.js";import"./chunk-ZWED4QT2.js";import"./chunk-2OUUPXAC.js";import"./chunk-OSDNJTLN.js";import{g as ee}from"./chunk-YUHWLLNB.js";import"./chunk-X3EEPMJD.js";import{n as q,u as U,v as X,w as Z}from"./chunk-Z66RIGB5.js";import{$b as _,Cc as b,Dc as E,Ec as $,Ga as m,Ha as g,I as j,Kb as v,Mb as f,N as O,Rb as L,Sb as T,Tb as k,Ub as F,Vb as t,Wb as r,Xb as V,da as W,ea as N,ec as h,gc as u,kb as A,kc as R,lc as J,mc as Q,ob as a,pb as D,pc as Y,q as I,qc as s,rc as y,sc as C,tc as w,uc as x,v as P,va as z,vc as S,xc as H,yc as K,z as G}from"./chunk-CACGWYQA.js";var be=()=>[1,5,10,20,25];function ve(l,d){if(l&1){let o=_();t(0,"mat-chip-row",36),h("removed",function(){let i=m(o).$implicit,e=u();return g(e.removeTag(i))}),s(1),t(2,"button",37),h("click",function(){let i=m(o).$implicit,e=u();return g(e.removeTag(i))}),t(3,"mat-icon"),s(4,"cancel"),r()()()}if(l&2){let o=d.$implicit;f("highlighted",!0)("editable",!1)("removable",!0),a(),C(" ",o," ")}}function we(l,d){if(l&1){let o=_();t(0,"button",38),h("click",function(){let i=m(o).$implicit,e=u();return g(e.sortingFieldChangedEvent.next(i))}),s(1),b(2,"titlecase"),r()}if(l&2){let o=d.$implicit;a(),C("",E(2,1,o)," ")}}function xe(l,d){if(l&1){let o=_();t(0,"button",38),h("click",function(){let i=m(o).$implicit,e=u();return g(e.sortingDirectionChangedEvent.next(i))}),s(1),b(2,"uppercase"),r()}if(l&2){let o=d.$implicit;a(),C("",E(2,1,o)," ")}}function Se(l,d){l&1&&(t(0,"div",33),V(1,"mat-spinner"),r())}function Ee(l,d){if(l&1&&(t(0,"span",51),s(1),r()),l&2){let o=d.$implicit;a(),y(o)}}function Me(l,d){if(l&1){let o=_();t(0,"button",50),h("click",function(i){m(o);let e=u().$implicit,c=u();return g(c.editDetails(e,i))}),s(1,"Edit "),r()}}function Ie(l,d){if(l&1){let o=_();t(0,"div",39)(1,"div",40),h("click",function(){let i=m(o).$implicit,e=u();return g(e.viewDetails(i))}),V(2,"img",41),t(3,"div",42)(4,"h5",43),s(5),r(),t(6,"p",44),s(7),r(),t(8,"p",44),v(9,Ee,2,1,"span",45),r(),t(10,"div",46)(11,"div",47)(12,"p",48)(13,"small"),s(14),b(15,"date"),r()(),t(16,"p",48)(17,"small"),s(18),r()(),t(19,"p",48)(20,"small"),s(21),r()(),t(22,"p",48)(23,"small"),s(24),r()()(),t(25,"small"),v(26,Me,2,0,"button",49),t(27,"button",50),h("click",function(i){let e=m(o).$implicit,c=u();return g(c.viewInTimeline(e,i))}),s(28,"Timeline "),r()()()()()()}if(l&2){let o=d.$implicit,n=u();a(2),f("src",o.thumbnail,A)("alt",o.thumbnail),a(3),y(o.name),a(2),y(o.title),a(2),f("ngForOf",o.tags)("ngForTrackBy",n.trackTagByFn),a(5),y($(15,10,o.journeyDate,"dd.MM.YYYY")),a(4),y(o.city),a(3),y(o.country),a(3),y(o.category)}}var Ze=(()=>{let d=class d{constructor(n,i){this.journeyService=n,this.router=i,this.sortableFields=["journeyDate","name","title","city","country","category","location"],this.sortingFieldChangedEvent=new I("journeyDate"),this.sortableDirections=["asc","desc"],this.sortingDirectionChangedEvent=new I("desc"),this.isLoadingResults=!1,this.defaultPageSize=10,this.totalElements=0,this.data=[],this.trackJourneyByFn=(e,c)=>c.id,this.trackTagByFn=(e,c)=>c,this.separatorKeysCodes=[13,188,32],this.tags=[],this.tagsCriteriaChange=new I([]),this.searchCriteria=new Ce,i.getCurrentNavigation()?.extras.state&&(this.searchCriteria=i.getCurrentNavigation()?.extras.state)}ngAfterViewInit(){j(this.paginator.page,this.sortingFieldChangedEvent,this.sortingDirectionChangedEvent,this.tagsCriteriaChange).pipe(W(),N(()=>(this.isLoadingResults=!0,this.journeyService.findJourneyByQuery(this.searchCriteria,this.sortingFieldChangedEvent.getValue(),this.sortingDirectionChangedEvent.getValue(),this.paginator.pageIndex,this.paginator.pageSize,!0,this.tags).pipe(O(()=>P(null))))),G(n=>(this.isLoadingResults=!1,n))).subscribe(n=>this.onSuccess(n))}onSuccess(n){this.totalElements=n?.totalElements??0,this.data=n?.content??[]}ngOnInit(){this.journeyService.findJourneyByQuery(this.searchCriteria,"journeyDate","desc",0,this.defaultPageSize,!0).subscribe(n=>this.onSuccess(n))}viewDetails(n){this.router.navigate(["/journey",n.id,"view"]).then(console.log)}editDetails(n,i){return i.stopPropagation(),this.router.navigate(["/journey",n.id,"edit"]).then(console.log),!1}viewInTimeline(n,i){return i.stopPropagation(),this.router.navigate(["/timeline"],{queryParams:{id:n.id}}).then(console.log),!1}addTag(n){let i=(n.value||"").trim();i&&(this.tags.push(i),this.tagsCriteriaChange.next(this.tags)),n.chipInput.clear()}removeTag(n){let i=this.tags.indexOf(n);i>=0&&(this.tags.splice(i,1),this.tagsCriteriaChange.next(this.tags))}};d.\u0275fac=function(i){return new(i||d)(D(ge),D(ee))},d.\u0275cmp=z({type:d,selectors:[["app-gallery"]],viewQuery:function(i,e){if(i&1&&R(B,5),i&2){let c;J(c=Q())&&(e.paginator=c.first)}},standalone:!0,features:[H],decls:58,vars:21,consts:[["chipGrid",""],[1,"container","advanced-search"],[1,"d-flex","justify-content-end"],["data-bs-toggle","collapse","href","#searchFields","role","link","aria-expanded","false","aria-controls","searchFields",1,"text-decoration-none"],["id","searchFields",1,"row","g-2","mb-3","collapse"],[1,"col-sm"],[1,"form-floating","border","border-primary"],["type","text","id","categoryInput","placeholder","Category",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","categoryInput"],["type","text","id","cityInput","placeholder","City",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","cityInput"],["type","text","id","countryInput","placeholder","Country",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","countryInput"],["type","text","id","yearInput","placeholder","Year",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","yearInput"],[1,"container"],[1,"row"],["aria-label","Tags"],[1,"col-12"],[1,"form-floating"],["placeholder","Filter by Tags","autocomplete","off","id","tagsInput",1,"form-control","border","border-2","border-primary","rounded-4",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],["for","tagsInput"],["color","primary",3,"highlighted","editable","removable"],[1,"col-12","col-md-8","mb-md-3","me-0","pe-0"],["aria-label","Select page","color","primary",1,"paginator","me-0",3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"col-12","col-md-4","sorting","mb-3","me-0"],["ngbDropdown","",1,"d-inline-block","me-1"],["type","button","id","dropdownSortingField","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingField"],["ngbDropdownItem",""],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownSortingDirection","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingDirection"],[1,"loading-shade"],[1,"card-group","justify-content-center","align-items-center"],["class","m-0",4,"ngFor","ngForOf","ngForTrackBy"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click"],["ngbDropdownItem","",3,"click"],[1,"m-0"],["role","link",1,"card","bg-dark","text-bg-dark","text-white",3,"click"],[1,"card-img",3,"src","alt"],[1,"card-img-overlay","d-flex","flex-column","align-self-stretch","card-text-wrapper"],[1,"card-title"],[1,"card-text"],["class","badge bg-dark bg-opacity-25 border-dark rounded-pill border me-1 fw-normal",4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-inline-flex","footer-wrapper","mt-auto","flex-nowrap","flex-row","justify-content-between"],[1,"d-inline-flex","gap-1"],[1,"small","border","border-light","border-1","rounded-2","ps-1","pe-1","border-opacity-50"],["type","button","class","btn btn-sm btn-outline-success ms-1",3,"click",4,"hasWriteAccess"],["type","button",1,"btn","btn-sm","btn-outline-success","ms-1",3,"click"],[1,"badge","bg-dark","bg-opacity-25","border-dark","rounded-pill","border","me-1","fw-normal"]],template:function(i,e){if(i&1){let c=_();t(0,"section",1)(1,"div",2)(2,"a",3),s(3," Advanced Search "),r()(),t(4,"div",4)(5,"div",5)(6,"div",6)(7,"input",7),S("ngModelChange",function(p){return m(c),x(e.searchCriteria.category,p)||(e.searchCriteria.category=p),g(p)}),r(),t(8,"label",8),s(9,"Category"),r()()(),t(10,"div",5)(11,"div",6)(12,"input",9),S("ngModelChange",function(p){return m(c),x(e.searchCriteria.city,p)||(e.searchCriteria.city=p),g(p)}),r(),t(13,"label",10),s(14,"City"),r()()(),t(15,"div",5)(16,"div",6)(17,"input",11),S("ngModelChange",function(p){return m(c),x(e.searchCriteria.country,p)||(e.searchCriteria.country=p),g(p)}),r(),t(18,"label",12),s(19,"Country"),r()()(),t(20,"div",5)(21,"div",6)(22,"input",13),S("ngModelChange",function(p){return m(c),x(e.searchCriteria.year,p)||(e.searchCriteria.year=p),g(p)}),r(),t(23,"label",14),s(24,"Year"),r()()()()(),t(25,"section",15)(26,"div",16)(27,"mat-chip-grid",17,0)(29,"div",18)(30,"div",19)(31,"input",20),h("matChipInputTokenEnd",function(p){return m(c),g(e.addTag(p))}),r(),t(32,"label",21),s(33,"Filter by Tags"),r()()(),t(34,"div",18),k(35,ve,5,4,"mat-chip-row",22,T),r()()(),t(37,"div",16)(38,"div",23),V(39,"mat-paginator",24),r(),t(40,"div",25)(41,"div",26)(42,"button",27),s(43),b(44,"titlecase"),r(),t(45,"div",28),k(46,we,3,3,"button",29,T),r()(),t(48,"div",30)(49,"button",31),s(50),b(51,"uppercase"),r(),t(52,"div",32),k(53,xe,3,3,"button",29,T),r()()()(),v(55,Se,2,0,"div",33),t(56,"div",34),v(57,Ie,29,13,"div",35),r()()}if(i&2){let c=Y(28);a(7),w("ngModel",e.searchCriteria.category),a(5),w("ngModel",e.searchCriteria.city),a(5),w("ngModel",e.searchCriteria.country),a(5),w("ngModel",e.searchCriteria.year),a(9),f("matChipInputFor",c)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),a(4),F(e.tags),a(4),f("length",e.totalElements)("pageSize",e.defaultPageSize)("pageSizeOptions",K(20,be))("showFirstLastButtons",!0),a(4),C(" ",E(44,16,e.sortingFieldChangedEvent.getValue())," "),a(3),F(e.sortableFields),a(4),C(" ",E(51,18,e.sortingDirectionChangedEvent.getValue())," "),a(3),F(e.sortableDirections),a(2),L(e.isLoadingResults?55:-1),a(2),f("ngForOf",e.data)("ngForTrackBy",e.trackJourneyByFn)}},dependencies:[q,B,Z,ce,de,se,le,ae,U,X,pe,_e,ye,fe,ue,he,te,oe,ie,ne,re,me],styles:[".sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#4246d7a6 1%,#f8f9fa1a 80%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.paginator[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.mat-mdc-select[_ngcontent-%COMP%]{color:#f5f5f5!important}.card[_ngcontent-%COMP%]{width:30rem;height:15rem;margin:0 .5rem .5rem 0!important;cursor:pointer}.card-img[_ngcontent-%COMP%]{opacity:75%;width:100%;height:100%}.card-text-wrapper[_ngcontent-%COMP%]{background:#0003}@media (max-width: 575.98px){.card[_ngcontent-%COMP%]{width:100%;height:15rem;margin:0 0 .5rem!important}.sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%)}}"]});let l=d;return l})();export{Ze as GalleryComponent};
