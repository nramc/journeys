import{a as be}from"./chunk-OEK3JCZ4.js";import{a as k}from"./chunk-ZJYXGZ4H.js";import"./chunk-SZVEL322.js";import{a as ye,b as he,c as fe,d as Ce,e as _e}from"./chunk-6HYXABCR.js";import"./chunk-ZNXAFIVS.js";import"./chunk-T32BUXSF.js";import{a as ue}from"./chunk-6LD5JPCR.js";import{c as le,d as pe,e as de,f as ce,g as se,h as me}from"./chunk-7JMWHQAY.js";import{a as ge}from"./chunk-4XDKHIKE.js";import"./chunk-573XPIHF.js";import"./chunk-3Y5ODF3N.js";import"./chunk-VSQTGOJW.js";import"./chunk-5CP2CCEE.js";import{b as te}from"./chunk-ARYB63DG.js";import"./chunk-DV5GUR4T.js";import{c as ne,h as re,k as oe,z as ae}from"./chunk-QRSDOWPC.js";import"./chunk-HWGXPR67.js";import{a as ie}from"./chunk-LPUQZJVA.js";import"./chunk-MLFE2CIA.js";import"./chunk-DRY26C2R.js";import{c as V}from"./chunk-A5BAHEOC.js";import"./chunk-GGW32R6S.js";import"./chunk-DUQER7DB.js";import{k as $,q as U,r as X,s as Z,z as ee}from"./chunk-IVYRUNV3.js";import{$b as x,Ab as B,Ac as M,Bb as H,Cc as j,Dc as q,Fa as s,Ga as m,Gc as b,H as N,Hc as T,Ic as K,Jb as O,L as W,Ob as g,Sa as R,Wb as w,Xb as f,Yb as C,Zb as i,_b as r,aa as J,ba as z,dc as _,ic as u,kc as y,o as F,qa as A,qb as o,rb as P,sc as L,t as G,tc as Y,ua as D,uc as Q,vc as l,wc as h,xc as S,yc as I,zc as E}from"./chunk-4YTPSGIK.js";function Se(n,c){if(n&1&&(i(0,"span",6),l(1),r()),n&2){let t=c.$implicit;o(),h(t)}}function xe(n,c){if(n&1&&(i(0,"p",9)(1,"small"),l(2),r()()),n&2){let t=y();o(2),h(t.journey().city)}}function Ie(n,c){if(n&1&&(i(0,"p",9)(1,"small"),l(2),r()()),n&2){let t=y();o(2),h(t.journey().country)}}function Ee(n,c){if(n&1&&(i(0,"p",9)(1,"small"),l(2),r()()),n&2){let t=y();o(2),h(t.journey().category)}}function Me(n,c){if(n&1){let t=_();i(0,"button",13),u("click",function(e){s(t);let p=y();return m(p.editDetails(e))}),l(1,"Edit "),r()}}var ve=(()=>{class n{constructor(){this.router=A(V),this.journey=R.required()}viewDetails(){this.router.navigate(["/journey",this.journey().id,"view"]).then(console.log)}editDetails(t){return t.stopPropagation(),this.router.navigate(["/journey",this.journey().id,"edit"]).then(console.log),!1}viewInTimeline(t){return t.stopPropagation(),this.router.navigate(["/timeline"],{queryParams:{id:this.journey().id}}).then(console.log),!1}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275cmp=D({type:n,selectors:[["app-journey-card-view"]],inputs:{journey:[1,"journey"]},standalone:!0,features:[j],decls:24,vars:11,consts:[[1,"m-0"],["tabindex","0",1,"card","bg-dark","text-bg-dark","text-white",3,"click","keyup.enter"],["fill","","priority","",1,"card-img",3,"ngSrc","alt"],[1,"card-img-overlay","d-flex","flex-column","align-self-stretch","card-text-wrapper"],[1,"card-title"],[1,"card-text"],[1,"badge","bg-dark","bg-opacity-25","border-dark","rounded-pill","border","me-1","fw-normal"],[1,"d-flex","footer-wrapper","mt-auto","flex-nowrap","flex-column","flex-md-row","justify-content-between"],[1,"d-inline-flex","gap-1"],[1,"small","border","border-light","border-1","rounded-2","ps-1","pe-1","border-opacity-50"],["class","small border border-light border-1 rounded-2 ps-1 pe-1 border-opacity-50",4,"ngIf"],[1,"d-inline-flex","gap-1","justify-content-end"],["type","button","class","btn btn-sm btn-primary ms-1 small",3,"click",4,"appHasWriteAccess"],["type","button",1,"btn","btn-sm","btn-primary","ms-1","small",3,"click"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"a",1),u("click",function(){return e.viewDetails()})("keyup.enter",function(){return e.viewDetails()}),x(2,"img",2),i(3,"div",3)(4,"h5",4),l(5),r(),i(6,"p",5),l(7),r(),i(8,"p",5),f(9,Se,2,1,"span",6,w),r(),i(11,"div",7)(12,"div",8)(13,"p",9)(14,"small"),l(15),b(16,"date"),r()(),O(17,xe,3,1,"p",10)(18,Ie,3,1,"p",10)(19,Ee,3,1,"p",10),r(),i(20,"div",11),O(21,Me,2,0,"button",12),i(22,"button",13),u("click",function(v){return e.viewInTimeline(v)}),l(23,"Timeline "),r()()()()()()),a&2&&(o(2),g("ngSrc",e.journey().thumbnail)("alt",e.journey().thumbnail),o(3),h(e.journey().name),o(2),h(e.journey().title),o(2),C(e.journey().tags),o(6),h(K(16,8,e.journey().journeyDate,"dd.MM.YYYY")),o(2),g("ngIf",e.journey().city),o(),g("ngIf",e.journey().country),o(),g("ngIf",e.journey().country))},dependencies:[Z,ee,ge,$],styles:[".card[_ngcontent-%COMP%]{width:30rem;height:15rem;margin:0 .5rem .5rem 0!important;cursor:pointer}.card-img[_ngcontent-%COMP%]{opacity:75%;width:100%;height:100%}.card-text-wrapper[_ngcontent-%COMP%]{background:#0003}@media (max-width: 575.98px){.card[_ngcontent-%COMP%]{width:100%;height:15rem;margin:0 0 .5rem!important}}.card[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px 5px #0000ff59}"],changeDetection:0})}}return n})();var Te=(n,c)=>c.id,De=()=>[1,5,10,20,25];function je(n,c){if(n&1){let t=_();i(0,"mat-chip-row",35),u("removed",function(){let e=s(t).$implicit,p=y();return m(p.removeTag(e))}),l(1),i(2,"button",36),u("click",function(){let e=s(t).$implicit,p=y();return m(p.removeTag(e))}),i(3,"mat-icon"),l(4,"cancel"),r()()()}if(n&2){let t=c.$implicit;g("highlighted",!0)("editable",!1)("removable",!0),o(),S(" ",t," ")}}function Ve(n,c){if(n&1){let t=_();i(0,"button",37),u("click",function(){let e=s(t).$implicit,p=y();return m(p.sortingFieldChangedEvent.next(e))}),l(1),b(2,"titlecase"),r()}if(n&2){let t=c.$implicit;o(),S("",T(2,1,t)," ")}}function ke(n,c){if(n&1){let t=_();i(0,"button",37),u("click",function(){let e=s(t).$implicit,p=y();return m(p.sortingDirectionChangedEvent.next(e))}),l(1),b(2,"uppercase"),r()}if(n&2){let t=c.$implicit;o(),S("",T(2,1,t)," ")}}function Fe(n,c){if(n&1&&x(0,"app-journey-card-view",34),n&2){let t=c.$implicit;g("journey",t)}}var ht=(()=>{class n{constructor(t,a){this.journeyService=t,this.sortableFields=["journeyDate","name","title","city","country","category","location"],this.sortingFieldChangedEvent=new F("journeyDate"),this.sortableDirections=["asc","desc"],this.sortingDirectionChangedEvent=new F("desc"),this.defaultPageSize=10,this.separatorKeysCodes=[13,188,32],this.searchCriteria=new be,this.paginator=H.required(k),this.tags=B([]),this.tagsObservable=te(this.tags),this.searchResult=B({totalElements:0,data:[]}),a.getCurrentNavigation()?.extras.state&&(this.searchCriteria=a.getCurrentNavigation()?.extras.state)}ngAfterViewInit(){N(this.paginator().page,this.sortingFieldChangedEvent,this.sortingDirectionChangedEvent,this.tagsObservable).pipe(J(),z(()=>this.journeyService.findJourneyByQuery(this.searchCriteria,this.sortingFieldChangedEvent.getValue(),this.sortingDirectionChangedEvent.getValue(),this.paginator().pageIndex,this.paginator().pageSize,!0,this.tags()).pipe(W(()=>G(null))))).subscribe(t=>this.onSuccess(t))}onSuccess(t){this.searchResult.set({totalElements:t?.totalElements??0,data:t?.content??[]})}ngOnInit(){this.journeyService.findJourneyByQuery(this.searchCriteria,"journeyDate","desc",0,this.defaultPageSize,!0).subscribe(t=>this.onSuccess(t))}addTag(t){let a=(t.value||"").trim();a&&this.tags.update(e=>[...e,a]),t.chipInput.clear()}removeTag(t){this.tags.update(a=>a.filter(e=>e!==t))}static{this.\u0275fac=function(a){return new(a||n)(P(ue),P(V))}}static{this.\u0275cmp=D({type:n,selectors:[["app-gallery"]],viewQuery:function(a,e){a&1&&L(e.paginator,k,5),a&2&&Y()},standalone:!0,features:[j],decls:58,vars:18,consts:[["chipGrid",""],[1,"container","advanced-search"],[1,"d-flex","justify-content-end"],["data-bs-toggle","collapse","href","#searchFields","aria-expanded","false","aria-controls","searchFields",1,"text-decoration-none"],["id","searchFields",1,"row","g-2","mb-3","collapse"],[1,"col-sm"],[1,"form-floating","border","border-primary"],["type","text","id","categoryInput","placeholder","Category",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","categoryInput"],["type","text","id","cityInput","placeholder","City",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","cityInput"],["type","text","id","countryInput","placeholder","Country",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","countryInput"],["type","text","id","yearInput","placeholder","Year",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","yearInput"],[1,"container"],[1,"row"],["aria-label","Tags"],[1,"col-12"],[1,"form-floating"],["placeholder","Filter by Tags","autocomplete","off","id","tagsInput",1,"form-control","border","border-2","border-primary","rounded-4",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],["for","tagsInput"],["color","primary",3,"highlighted","editable","removable"],[1,"col-12","col-md-8","mb-md-3","me-0","pe-0"],["aria-label","Select page","color","primary",1,"paginator","me-0",3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"col-12","col-md-4","sorting","mb-3","me-0"],["ngbDropdown","",1,"d-inline-block","me-1"],["type","button","id","dropdownSortingField","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingField"],["ngbDropdownItem",""],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownSortingDirection","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingDirection"],[1,"card-group","justify-content-center","align-items-center"],[3,"journey"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click"],["ngbDropdownItem","",3,"click"]],template:function(a,e){if(a&1){let p=_();i(0,"section",1)(1,"div",2)(2,"a",3),l(3," Advanced Search "),r()(),i(4,"div",4)(5,"div",5)(6,"div",6)(7,"input",7),M("ngModelChange",function(d){return s(p),E(e.searchCriteria.category,d)||(e.searchCriteria.category=d),m(d)}),r(),i(8,"label",8),l(9,"Category"),r()()(),i(10,"div",5)(11,"div",6)(12,"input",9),M("ngModelChange",function(d){return s(p),E(e.searchCriteria.city,d)||(e.searchCriteria.city=d),m(d)}),r(),i(13,"label",10),l(14,"City"),r()()(),i(15,"div",5)(16,"div",6)(17,"input",11),M("ngModelChange",function(d){return s(p),E(e.searchCriteria.country,d)||(e.searchCriteria.country=d),m(d)}),r(),i(18,"label",12),l(19,"Country"),r()()(),i(20,"div",5)(21,"div",6)(22,"input",13),M("ngModelChange",function(d){return s(p),E(e.searchCriteria.year,d)||(e.searchCriteria.year=d),m(d)}),r(),i(23,"label",14),l(24,"Year"),r()()()()(),i(25,"section",15)(26,"div",16)(27,"mat-chip-grid",17,0)(29,"div",18)(30,"div",19)(31,"input",20),u("matChipInputTokenEnd",function(d){return s(p),m(e.addTag(d))}),r(),i(32,"label",21),l(33,"Filter by Tags"),r()()(),i(34,"div",18),f(35,je,5,4,"mat-chip-row",22,w),r()()(),i(37,"div",16)(38,"div",23),x(39,"mat-paginator",24),r(),i(40,"div",25)(41,"div",26)(42,"button",27),l(43),b(44,"titlecase"),r(),i(45,"div",28),f(46,Ve,3,3,"button",29,w),r()(),i(48,"div",30)(49,"button",31),l(50),b(51,"uppercase"),r(),i(52,"div",32),f(53,ke,3,3,"button",29,w),r()()()(),i(55,"div",33),f(56,Fe,1,1,"app-journey-card-view",34,Te),r()()}if(a&2){let p=Q(28);o(7),I("ngModel",e.searchCriteria.category),o(5),I("ngModel",e.searchCriteria.city),o(5),I("ngModel",e.searchCriteria.country),o(5),I("ngModel",e.searchCriteria.year),o(9),g("matChipInputFor",p)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),o(4),C(e.tags()),o(4),g("length",e.searchResult().totalElements)("pageSize",e.defaultPageSize)("pageSizeOptions",q(17,De))("showFirstLastButtons",!0),o(4),S(" ",T(44,13,e.sortingFieldChangedEvent.getValue())," "),o(3),C(e.sortableFields),o(4),S(" ",T(51,15,e.sortingDirectionChangedEvent.getValue())," "),o(3),C(e.sortableDirections),o(3),C(e.searchResult().data)}},dependencies:[k,me,se,ce,de,le,pe,U,X,_e,fe,Ce,ye,he,ie,ae,ne,re,oe,ve],styles:[".sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#4246d7a6 1%,#f8f9fa1a 80%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.paginator[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.mat-mdc-select[_ngcontent-%COMP%]{color:#f5f5f5!important}@media (max-width: 575.98px){.sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%)}}"],changeDetection:0})}}return n})();export{ht as GalleryComponent};
