import"./chunk-ZQMSMYR7.js";import{a as j}from"./chunk-UMTTWNF4.js";import{a as U}from"./chunk-FPF4O6PW.js";import{a as h}from"./chunk-VSQTGOJW.js";import{a as Y}from"./chunk-GNQ7HQXT.js";import"./chunk-YWHW2ZKJ.js";import{n as F}from"./chunk-W6IR7XEV.js";import{a as q}from"./chunk-MVYSCQGC.js";import{c as I}from"./chunk-QQPV2QV6.js";import"./chunk-TT75TPET.js";import{c as R,h as T,i as V,j as O,k as W,l as H,u as G,z as L}from"./chunk-ET22MTXY.js";import"./chunk-6WCMIU77.js";import{b as w}from"./chunk-FVZWZKWT.js";import"./chunk-2YMU56OM.js";import{g as N}from"./chunk-A3QWJMVV.js";import"./chunk-CBUXQRBC.js";import{j as M,k}from"./chunk-LBCNPZTN.js";import{$b as m,Ac as E,Cc as D,Fa as u,Ga as y,Jb as _,Ob as a,Zb as e,_b as r,ad as A,dc as b,ic as v,kc as s,qa as f,qb as c,ua as x,uc as g,vc as l,xc as P,yc as S,zc as C}from"./chunk-QA4KX23A.js";function B(o,p){if(o&1&&(e(0,"div",10),m(1,"input",23),e(2,"label",24),l(3),r()()),o&2){let t=p.$implicit;c(3),P(" ",t," ")}}function z(o,p){if(o&1&&(e(0,"button",25),l(1,"Save"),r()),o&2){s();let t=g(1);a("disabled",!t.valid)}}function J(o,p){if(o&1){let t=b();e(0,"button",26),v("click",function(){u(t);let n=s(2);return y(n.cancel())}),l(1,"Cancel"),r()}}function K(o,p){if(o&1){let t=b();e(0,"form",4,0),v("submit",function(){u(t);let n=g(1),d=s();return y(d.save(n))}),e(2,"div",5)(3,"label",6),l(4,"Username"),r(),e(5,"div",7),m(6,"input",8),r()(),e(7,"div",5)(8,"div",9)(9,"div",10),m(10,"input",11),e(11,"label",12),l(12," Active "),r()()()(),e(13,"fieldset",5)(14,"legend",13),l(15,"Role(s)"),r(),e(16,"div",14),_(17,B,4,1,"div",15),r()(),e(18,"div",5)(19,"label",16),l(20,"Created"),r(),e(21,"div",7),m(22,"input",17),r()(),e(23,"div",5)(24,"label",18),l(25,"Name"),r(),e(26,"div",7)(27,"input",19),E("ngModelChange",function(n){u(t);let d=s();return C(d.myProfileData().name,n)||(d.myProfileData().name=n),y(n)}),r()()(),e(28,"div",5)(29,"div",20),_(30,z,2,1,"button",21)(31,J,2,0,"button",22),r()()()}if(o&2){let t,i=s();c(6),a("value",i.myProfileData().username),c(4),a("checked",i.myProfileData().enabled),c(7),a("ngForOf",(t=i.myProfileData())==null?null:t.roles),c(5),a("value",i.myProfileData().createdDate),c(5),S("ngModel",i.myProfileData().name),a("disabled",!i.hasAccess())}}var ue=(()=>{class o{constructor(){this.MY_PROFILE_PAGE_INFO=F,this.Role=h,this.notificationService=f(Y),this.myAccountService=f(q),this.router=f(N),this.authService=f(w),this.myProfileData=I(this.myAccountService.getProfileData()),this.hasAccess=A(()=>this.authService.hasAnyRole([h.AUTHENTICATED_USER]))}save(t){t.valid&&t.dirty&&this.myAccountService.saveProfileData(this.myProfileData()).subscribe({next:i=>this.onSuccessCallback(),error:i=>this.onErrorCallback()})}onSuccessCallback(){this.notificationService.showSuccess("Profile data saved successfully")}onErrorCallback(){this.notificationService.showError("Update failed. Please check data.")}cancel(){this.router.navigate(["/"]).then(console.log)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=x({type:o,selectors:[["app-my-profile-page"]],standalone:!0,features:[D],decls:3,vars:2,consts:[["profileForm","ngForm"],[3,"pageInfo"],[1,"container","d-flex","justify-content-start"],["class","col-12 col-lg-8",3,"submit",4,"ngIf"],[1,"col-12","col-lg-8",3,"submit"],[1,"row","mb-3"],["for","username",1,"col-sm-2","col-form-label","text-primary"],[1,"col-sm-10"],["type","text","id","username","disabled","",1,"form-control",3,"value"],[1,"col-sm-10","offset-sm-2"],[1,"form-check"],["type","checkbox","id","isAccountActive","name","isAccountActive","disabled","",1,"form-check-input",3,"checked"],["for","isAccountActive",1,"form-check-label","text-primary"],[1,"col-form-label","col-sm-2","pt-0","text-primary"],[1,"col-sm-10","text-primary"],["class","form-check",4,"ngFor","ngForOf"],["for","createdDate",1,"col-sm-2","col-form-label","text-primary"],["type","datetime-local","id","createdDate","name","createdDate","disabled","","readonly","",1,"form-control",3,"value"],["for","name",1,"col-sm-2","col-form-label","text-primary"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"col","text-center","d-flex","gap-3","justify-content-center"],["type","submit","class","btn btn-primary",3,"disabled",4,"appHasWriteAccess"],["type","button","class","btn btn-primary",3,"click",4,"appHasWriteAccess"],["type","checkbox","name","roleName","id","roleName","checked","","disabled","",1,"form-check-input"],["for","roleName",1,"form-check-label"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(i,n){i&1&&(m(0,"app-page-header",1),e(1,"section",2),_(2,K,32,6,"form",3),r()),i&2&&(a("pageInfo",n.MY_PROFILE_PAGE_INFO),c(2),a("ngIf",n.myProfileData()))},dependencies:[U,k,L,H,R,T,V,G,W,O,M,j],encapsulation:2,changeDetection:0})}}return o})();export{ue as MyProfilePageComponent};
