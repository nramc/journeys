import{a as Me}from"./chunk-OEK3JCZ4.js";import{a as G}from"./chunk-UFIL5FSS.js";import"./chunk-YLMLV73O.js";import{a as de,b as ue,c as ge,d as he,e as ye}from"./chunk-5CGMKHPA.js";import{b as _e,c as Ce,d as fe,f as we}from"./chunk-TTVKJFFM.js";import{a as ce}from"./chunk-27PCVP3V.js";import{a as ee,b as te,c as ie,d as re}from"./chunk-7Q7KFL6D.js";import"./chunk-O5U4W7AK.js";import"./chunk-ZNGQLO3Y.js";import"./chunk-D2BHERBO.js";import"./chunk-YAN4QSMW.js";import"./chunk-ZXYR6PBL.js";import"./chunk-RUSKA3BB.js";import{b as ae}from"./chunk-MF5VF6HO.js";import{i as oe}from"./chunk-UGH5MF6Q.js";import"./chunk-E7Z5KKUE.js";import{h as Y}from"./chunk-BS35BKX7.js";import{b as pe,c as me}from"./chunk-M74F7FOJ.js";import{f as le,g as se}from"./chunk-YC3KMESZ.js";import"./chunk-XOGMMBEO.js";import"./chunk-XGCQEQWX.js";import"./chunk-2NNL6LPC.js";import"./chunk-7B2XB3GF.js";import{b as U,g as $,j as X,u as Z}from"./chunk-CY4KTKAJ.js";import"./chunk-THLS4DYU.js";import{b as K}from"./chunk-D22SR3MY.js";import"./chunk-K76EUE7G.js";import"./chunk-AAVN2GU7.js";import{a as q}from"./chunk-OMGPJQVT.js";import{h as ne}from"./chunk-AXFFOUUB.js";import"./chunk-GSBQVZFY.js";import{c as H}from"./chunk-YZBIOJLP.js";import{m as J,n as Q}from"./chunk-SWPVFP3X.js";import{$ as A,$c as z,Bc as u,Dc as y,Ea as I,Fc as M,Gc as v,Hc as b,I as B,L as P,Lc as N,Pc as S,Qc as E,Sb as T,Tb as _,Ub as C,Vb as h,Wb as i,Xb as o,Y as j,Yb as F,_ as R,ec as f,jb as a,jc as d,l as x,ma as D,mc as w,sa as p,ta as m,u as k,uc as O,vc as W,wc as V,yb as L}from"./chunk-LCXKQEMN.js";var ve=()=>[1,5,10,15,20,25],be=(l,g)=>g.id;function Se(l,g){if(l&1){let t=f();i(0,"mat-chip-row",25),d("removed",function(){let e=p(t).$implicit,r=w();return m(r.removeTag(e))}),u(1),i(2,"button",26),d("click",function(){let e=p(t).$implicit,r=w();return m(r.removeTag(e))}),i(3,"mat-icon"),u(4,"cancel"),o()()()}if(l&2){let t=g.$implicit;h("highlighted",!0)("editable",!1)("removable",!0),a(),y(" ",t," ")}}function Ee(l,g){if(l&1){let t=f();i(0,"button",27),d("click",function(){let e=p(t).$implicit,r=w();return m(r.sortingFieldChangedEvent.next(e))}),u(1),S(2,"titlecase"),o()}if(l&2){let t=g.$implicit;a(),y(" ",E(2,1,t.label)," ")}}function Ie(l,g){if(l&1){let t=f();i(0,"button",27),d("click",function(){let e=p(t).$implicit,r=w();return m(r.sortingDirectionChangedEvent.next(e))}),u(1),S(2,"uppercase"),o()}if(l&2){let t=g.$implicit;a(),y(" ",E(2,1,t)," ")}}function Te(l,g){if(l&1&&F(0,"app-journey-card-view",23),l&2){let t=g.$implicit;h("journey",t)}}var at=(()=>{class l{constructor(){this.journeyService=D(oe),this.sortableFields=[{label:"Journey Date",key:"journeyDate"},{label:"Journey Name",key:"name"},{label:"Geo Title",key:"geoDetails.title"},{label:"City",key:"geoDetails.city"},{label:"Country",key:"geoDetails.country"},{label:"Category",key:"geoDetails.category"},{label:"Geo Location",key:"geoDetails.location"}],this.sortingFieldChangedEvent=new x({label:"Journey Date",key:"journeyDate"}),this.sortableDirections=["asc","desc"],this.sortingDirectionChangedEvent=new x("desc"),this.defaultPageSize=15,this.separatorKeysCodes=[13,188,32],this.searchCriteria=I(new Me),this.paginator=z.required(G),this.tags=I([]),this.tagsObservable=K(this.tags),this.searchResult=I({totalElements:0,data:[]}),this.GALLERY_PAGE_INFO=Y;let t=D(H);t.currentNavigation()?.extras.state&&this.searchCriteria.set(t.currentNavigation()?.extras.state)}ngAfterViewInit(){this.search()}search(){B(this.paginator().page,this.sortingFieldChangedEvent,this.sortingDirectionChangedEvent,this.tagsObservable).pipe(R(),A(()=>this.journeyService.findJourneyByQuery(this.searchCriteria(),this.sortingFieldChangedEvent.getValue().key,this.sortingDirectionChangedEvent.getValue(),this.paginator().pageIndex,this.paginator().pageSize,!0,this.tags()).pipe(j(1),P(()=>k(null))))).subscribe(t=>this.onSuccess(t))}onSuccess(t){this.searchResult.set({totalElements:t?.totalElements??0,data:t?.content??[]})}ngOnInit(){this.journeyService.findJourneyByQuery(this.searchCriteria(),"journeyDate","desc",0,this.defaultPageSize,!0).subscribe(t=>this.onSuccess(t))}addTag(t){let s=(t.value||"").trim();s&&this.tags.update(e=>[...e,s]),t.chipInput.clear()}removeTag(t){this.tags.update(s=>s.filter(e=>e!==t))}static{this.\u0275fac=function(s){return new(s||l)}}static{this.\u0275cmp=L({type:l,selectors:[["app-gallery"]],viewQuery:function(s,e){s&1&&O(e.paginator,G,5),s&2&&W()},decls:51,vars:21,consts:[["chipGrid",""],["sortingFieldMenu","matMenu"],["sortingDirectionMenu","matMenu"],[3,"pageInfo"],[1,"container","py-2"],["id","searchFields"],[1,"text-sm","font-normal"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mt-3"],["appearance","outline",1,"w-full"],["matInput","","type","text","id","categoryInput","placeholder","Category",3,"ngModelChange","change","ngModel"],["matInput","","type","text","id","cityInput","placeholder","City",3,"ngModelChange","change","ngModel"],["matInput","","type","text","id","countryInput","placeholder","Country",3,"ngModelChange","change","ngModel"],["matInput","","type","text","id","yearInput","placeholder","Year",3,"ngModelChange","change","ngModel"],[1,"container","p-0","m-0"],["aria-label","Tags",1,"w-full"],["matInput","","id","tagsInput","placeholder","Filter by Tags",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[1,"flex","flex-wrap","gap-1","m-0"],["color","primary",3,"highlighted","editable","removable"],[1,"m-0","p-0","flex","max-sm:justify-center","justify-end","gap-2"],[1,"inline-flex"],["mat-menu-item",""],["mat-button","",1,"text-primary","border","border-primary","bg-white","px-2","py-1","rounded-md","shadow-sm","hover:bg-gray-100",3,"matMenuTriggerFor"],[1,"container","flex","gap-2","items-center","justify-center","flex-wrap"],[1,"max-sm:w-full",3,"journey"],["aria-label","Select page","color","primary",1,"paginator",3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click"],["mat-menu-item","",3,"click"]],template:function(s,e){if(s&1){let r=f();i(0,"header"),F(1,"app-page-header",3),o(),i(2,"main")(3,"section",4)(4,"mat-expansion-panel",5)(5,"mat-expansion-panel-header")(6,"mat-panel-title",6)(7,"span"),u(8,"Filter"),o()()(),i(9,"div",7)(10,"mat-form-field",8)(11,"input",9),b("ngModelChange",function(n){return p(r),v(e.searchCriteria().category,n)||(e.searchCriteria().category=n),m(n)}),d("change",function(){return p(r),m(e.search())}),o()(),i(12,"mat-form-field",8)(13,"input",10),b("ngModelChange",function(n){return p(r),v(e.searchCriteria().city,n)||(e.searchCriteria().city=n),m(n)}),d("change",function(){return p(r),m(e.search())}),o()(),i(14,"mat-form-field",8)(15,"input",11),b("ngModelChange",function(n){return p(r),v(e.searchCriteria().country,n)||(e.searchCriteria().country=n),m(n)}),d("change",function(){return p(r),m(e.search())}),o()(),i(16,"mat-form-field",8)(17,"input",12),b("ngModelChange",function(n){return p(r),v(e.searchCriteria().year,n)||(e.searchCriteria().year=n),m(n)}),d("change",function(){return p(r),m(e.search())}),o()()(),i(18,"div",13)(19,"mat-chip-grid",14,0)(21,"mat-form-field",8)(22,"input",15),d("matChipInputTokenEnd",function(n){return p(r),m(e.addTag(n))}),o()(),i(23,"div",16),_(24,Se,5,4,"mat-chip-row",17,T),o()()()()(),i(26,"section",18)(27,"div",19)(28,"mat-menu",null,1),_(30,Ee,3,3,"button",20,T),o(),i(32,"button",21),u(33),S(34,"titlecase"),i(35,"mat-icon"),u(36,"arrow_drop_down"),o()(),i(37,"mat-menu",null,2),_(39,Ie,3,3,"button",20,T),o(),i(41,"button",21),u(42),S(43,"uppercase"),i(44,"mat-icon"),u(45,"arrow_drop_down"),o()()()(),i(46,"section",22),_(47,Te,1,1,"app-journey-card-view",23,be),o(),i(49,"section"),F(50,"mat-paginator",24),o()()}if(s&2){let r=V(20),c=V(29),n=V(38);a(),h("pageInfo",e.GALLERY_PAGE_INFO),a(10),M("ngModel",e.searchCriteria().category),a(2),M("ngModel",e.searchCriteria().city),a(2),M("ngModel",e.searchCriteria().country),a(2),M("ngModel",e.searchCriteria().year),a(5),h("matChipInputFor",r)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),a(2),C(e.tags()),a(6),C(e.sortableFields),a(2),h("matMenuTriggerFor",c),a(),y(" ",E(34,16,e.sortingFieldChangedEvent.getValue().label)," "),a(6),C(e.sortableDirections),a(2),h("matMenuTriggerFor",n),a(),y(" ",E(43,18,e.sortingDirectionChangedEvent.getValue())," "),a(5),C(e.searchResult().data),a(3),h("length",e.searchResult().totalElements)("pageSize",e.defaultPageSize)("pageSizeOptions",N(20,ve))("showFirstLastButtons",!0)}},dependencies:[G,ye,ge,he,de,ue,q,Z,U,$,X,ae,se,le,me,pe,we,_e,Ce,fe,ne,re,te,ee,ie,ce,J,Q],styles:[".paginator[_ngcontent-%COMP%]{text-align:center;align-items:center;justify-content:center!important;display:flex;font-weight:500}"],changeDetection:0})}}return l})();export{at as GalleryComponent};
