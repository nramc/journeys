import{a as X}from"./chunk-Y4L5CPLT.js";import{a as Q}from"./chunk-J4YQZSR7.js";import{c as P}from"./chunk-BS35BKX7.js";import{b as q,g as D,h as G,i as R,j as W,k as j,p as B,q as U,r as z,s as H,u as J,v as K}from"./chunk-YQ2IFANT.js";import"./chunk-UYEVJUVR.js";import{a as L}from"./chunk-WSECCEV3.js";import{a as V,d as I}from"./chunk-46BTBU6F.js";import"./chunk-TVRC5D5R.js";import"./chunk-6Z5N4UCC.js";import{B as T,Ba as k,Dc as r,Fa as x,Hc as C,Ic as y,J as w,Jc as S,Sb as s,Tb as m,Xb as p,Yb as t,Zb as i,_b as F,gc as O,lb as a,lc as N,oc as A,pa as g,va as h,wa as b,xb as M,yc as u}from"./chunk-LHMNFXGQ.js";function Y(e,o){if(e&1&&(t(0,"div",8)(1,"div",21),r(2,"Account activated successfully!"),i(),t(3,"p"),r(4,"Please "),t(5,"a",22),r(6,"Sign In"),i(),r(7," with your credentials and start your journey with us."),i()()),e&2){let n=A();a(5),p("routerLink",n.LOGIN_PAGE_INFO.path)}}function Z(e,o){e&1&&(t(0,"div",9),r(1," Activation failed. Please check and correct data. If the issue still persists, try again later. "),i())}function $(e,o){e&1&&(t(0,"div"),r(1,"Email Address is required."),i())}function ee(e,o){e&1&&(t(0,"div"),r(1,"Email Address must be at most 50 characters long."),i())}function te(e,o){e&1&&(t(0,"div"),r(1,"Email Address must have at least 8 characters."),i())}function ie(e,o){e&1&&(t(0,"div"),r(1,"Invalid Email Address."),i())}function ne(e,o){if(e&1&&(t(0,"div",13),s(1,$,2,0,"div"),s(2,ee,2,0,"div"),s(3,te,2,0,"div"),s(4,ie,2,0,"div"),i()),e&2){A();let n=u(14);a(),m(n.errors!=null&&n.errors.required?1:-1),a(),m(n.errors!=null&&n.errors.maxlength?2:-1),a(),m(n.errors!=null&&n.errors.minlength&&!(n.errors!=null&&n.errors.email)?3:-1),a(),m(n.errors!=null&&n.errors.email&&!(n.errors!=null&&n.errors.email)?4:-1)}}function oe(e,o){e&1&&(t(0,"div"),r(1,"Token is required."),i())}function re(e,o){if(e&1&&(t(0,"div",13),s(1,oe,2,0,"div"),i()),e&2){A();let n=u(20);a(),m(n.errors!=null&&n.errors.required?1:-1)}}var E=class{constructor(o="",n=""){this.username=o,this.emailToken=n}},he=(()=>{let o=class o{constructor(){this.LOGIN_PAGE_INFO=P,this.destroyRef=g(k),this.bffService=g(Q),this.registrationService=g(X),this.isSuccessful=x(!1),this.isErrorOccurred=x(!1);let l=g(V);this.accountActivationForm=new E(l.snapshot.queryParamMap.get("identifier"),l.snapshot.queryParamMap.get("token"))}activate(l){l.valid?this.activateAccount():this.onError(new Error("Invalid data"))}ngOnInit(){this.activateAccount()}activateAccount(){this.bffService.getVersion().pipe(L(this.destroyRef),w(l=>this.accountActivationForm.username!=null&&this.accountActivationForm.emailToken!=null),T(l=>this.registrationService.activate({username:this.accountActivationForm.username,emailToken:this.accountActivationForm.emailToken,apiVersion:l.version}))).subscribe({next:l=>this.onSuccess(),error:l=>this.onError(l)})}onSuccess(){this.isSuccessful.set(!0),this.isErrorOccurred.set(!1)}onError(l){console.log(l),this.isErrorOccurred.set(!0),this.isSuccessful.set(!1)}};o.\u0275fac=function(_){return new(_||o)},o.\u0275cmp=M({type:o,selectors:[["app-account-activation"]],decls:31,vars:10,consts:[["activationForm","ngForm"],["username","ngModel"],["emailToken","ngModel"],[1,"h-full","flex","items-center","justify-center"],[1,"p-6","w-full","max-w-2xl"],[1,"border","border-blue-500","rounded-lg","shadow-lg"],[1,"bg-gradient-to-r","from-blue-500","to-blue-700","text-white","text-xl","font-semibold","p-4","rounded-t-lg"],[1,"p-6"],[1,"p-4","border-2","border-green-500","bg-green-50","text-green-700","text-center","rounded-lg","shadow-md"],[1,"p-4","border-2","border-red-500","bg-red-50","text-red-700","rounded-lg","shadow-md"],[1,"flex","flex-col","gap-2","mt-6",3,"ngSubmit"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","username","name","username","required","","minlength","8","maxlength","50","email","","placeholder","Email Address","autocomplete","off",1,"w-full","mt-1","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel","readOnly"],[1,"text-red-500","text-sm","mt-1"],["for","emailToken",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","emailToken","name","emailToken","required","","placeholder","Token","autocomplete","off",1,"w-full","mt-1","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel","readOnly"],["type","submit",1,"w-full","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","disabled:opacity-50",3,"disabled"],[1,"mt-6"],[1,"border-t-2","border-blue-500","my-4"],[1,"text-center","text-gray-600"],[1,"text-blue-600","font-bold",3,"routerLink"],[1,"text-lg","font-bold","mb-2"],[1,"text-blue-500","underline",3,"routerLink"]],template:function(_,c){if(_&1){let f=O();t(0,"div",3)(1,"section",4)(2,"div",5)(3,"div",6),r(4," Account Activation "),i(),t(5,"div",7),s(6,Y,8,1,"div",8),s(7,Z,2,0,"div",9),t(8,"form",10,0),N("ngSubmit",function(){h(f);let d=u(9);return b(c.activate(d))}),t(10,"div")(11,"label",11),r(12,"Email Address"),i(),t(13,"input",12,1),S("ngModelChange",function(d){return h(f),y(c.accountActivationForm.username,d)||(c.accountActivationForm.username=d),b(d)}),i(),s(15,ne,5,4,"div",13),i(),t(16,"div")(17,"label",14),r(18,"Token"),i(),t(19,"input",15,2),S("ngModelChange",function(d){return h(f),y(c.accountActivationForm.emailToken,d)||(c.accountActivationForm.emailToken=d),b(d)}),i(),s(21,re,2,1,"div",13),i(),t(22,"div")(23,"button",16),r(24," Activate "),i()()(),t(25,"div",17),F(26,"hr",18),t(27,"p",19),r(28," Already have an account? "),t(29,"a",20),r(30,"Sign in"),i()()()()()()()}if(_&2){let f=u(9),v=u(14),d=u(20);a(6),m(c.isSuccessful()?6:-1),a(),m(c.isErrorOccurred()?7:-1),a(6),C("ngModel",c.accountActivationForm.username),p("readOnly",c.isSuccessful()),a(2),m(v.invalid&&(v.dirty||f.submitted)?15:-1),a(4),C("ngModel",c.accountActivationForm.emailToken),p("readOnly",c.isSuccessful()),a(2),m(d.invalid&&(d.dirty||f.submitted)?21:-1),a(2),p("disabled",c.isSuccessful()),a(6),p("routerLink",c.LOGIN_PAGE_INFO.path)}},dependencies:[J,j,q,D,G,B,z,H,U,W,R,K,I],encapsulation:2,changeDetection:0});let e=o;return e})();export{he as AccountActivationComponent,E as AccountActivationForm};
