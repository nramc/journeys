import{a as X}from"./chunk-2VJUHYBB.js";import{a as Q}from"./chunk-3PTAYB5A.js";import{c as P}from"./chunk-WTO4EC35.js";import{b as q,g as G,h as R,i as D,j as W,k as j,p as B,q as U,r as z,s as H,u as J,v as K}from"./chunk-PODERBXZ.js";import"./chunk-4LLZG76X.js";import{a as L}from"./chunk-IW2GAWP7.js";import{a as N,d as V}from"./chunk-LQN5CMFJ.js";import"./chunk-ERLK7P4W.js";import{j as O}from"./chunk-YXES3AF5.js";import{Ac as r,Cb as I,Ea as C,Ec as y,Fc as A,G as w,Gc as x,Ib as u,Na as b,Tb as a,bc as i,cc as n,dc as k,hc as F,ma as v,mc as M,ob as o,oc as h,tb as T,wa as g,xa as _,y as E,zc as s}from"./chunk-GBVRZGL7.js";function Y(t,d){if(t&1&&(i(0,"div",21)(1,"div",22),r(2,"Account activated successfully!"),n(),i(3,"p"),r(4,"Please "),i(5,"a",23),r(6,"Sign In"),n(),r(7," with your credentials and start your journey with us."),n()()),t&2){let e=h();o(5),a("routerLink",e.LOGIN_PAGE_INFO.path)}}function Z(t,d){t&1&&(i(0,"div",24),r(1," Activation failed. Please check and correct data. If the issue still persists, try again later. "),n())}function $(t,d){t&1&&(i(0,"div"),r(1,"Email Address is required."),n())}function ee(t,d){t&1&&(i(0,"div"),r(1,"Email Address must be at most 50 characters long."),n())}function te(t,d){t&1&&(i(0,"div"),r(1,"Email Address must have at least 8 characters. "),n())}function ie(t,d){t&1&&(i(0,"div"),r(1,"Invalid Email Address."),n())}function ne(t,d){if(t&1&&(i(0,"div",25),u(1,$,2,0,"div",26)(2,ee,2,0,"div",26)(3,te,2,0,"div",26)(4,ie,2,0,"div",26),n()),t&2){h();let e=s(14);o(),a("ngIf",e.errors==null?null:e.errors.required),o(),a("ngIf",e.errors==null?null:e.errors.maxlength),o(),a("ngIf",(e.errors==null?null:e.errors.minlength)&&!(e.errors!=null&&e.errors.email)),o(),a("ngIf",(e.errors==null?null:e.errors.email)&&!(e.errors!=null&&e.errors.email))}}function re(t,d){t&1&&(i(0,"div"),r(1,"Token is required."),n())}function oe(t,d){if(t&1&&(i(0,"div",25),u(1,re,2,0,"div",26),n()),t&2){h();let e=s(20);o(),a("ngIf",e.errors==null?null:e.errors.required)}}var S=class{constructor(d="",e=""){this.username=d,this.emailToken=e}},ye=(()=>{class t{constructor(e){this.LOGIN_PAGE_INFO=P,this.destroyRef=v(C),this.bffService=v(Q),this.registrationService=v(X),this.isSuccessful=b(!1),this.isErrorOccurred=b(!1),this.accountActivationForm=new S(e.snapshot.queryParamMap.get("identifier"),e.snapshot.queryParamMap.get("token"))}activate(e){e.valid?this.activateAccount():this.onError(new Error("Invalid data"))}ngOnInit(){this.activateAccount()}activateAccount(){this.bffService.getVersion().pipe(L(this.destroyRef),w(e=>this.accountActivationForm.username!=null&&this.accountActivationForm.emailToken!=null),E(e=>this.registrationService.activate({username:this.accountActivationForm.username,emailToken:this.accountActivationForm.emailToken,apiVersion:e.version}))).subscribe({next:e=>this.onSuccess(),error:e=>this.onError(e)})}onSuccess(){this.isSuccessful.set(!0),this.isErrorOccurred.set(!1)}onError(e){console.log(e),this.isErrorOccurred.set(!0),this.isSuccessful.set(!1)}static{this.\u0275fac=function(f){return new(f||t)(T(N))}}static{this.\u0275cmp=I({type:t,selectors:[["app-account-activation"]],decls:31,vars:10,consts:[["activationForm","ngForm"],["username","ngModel"],["emailToken","ngModel"],[1,"h-full","flex","items-center","justify-center"],[1,"p-6","w-full","max-w-2xl"],[1,"border","border-blue-500","rounded-lg","shadow-lg"],[1,"bg-gradient-to-r","from-blue-500","to-blue-700","text-white","text-xl","font-semibold","p-4","rounded-t-lg"],[1,"p-6"],["class","p-4 border-2 border-green-500 bg-green-50 text-green-700 text-center rounded-lg shadow-md",4,"ngIf"],["class","p-4 border-2 border-red-500 bg-red-50 text-red-700 rounded-lg shadow-md",4,"ngIf"],[1,"flex","flex-col","gap-2","mt-6",3,"ngSubmit"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","username","name","username","required","","minlength","8","maxlength","50","email","","placeholder","Email Address","autocomplete","off",1,"w-full","mt-1","px-4","py-2","border","border-gray-300","rounded-lg","shadow-sm","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel","readOnly"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","emailToken",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","emailToken","name","emailToken","required","","placeholder","Token","autocomplete","off",1,"w-full","mt-1","px-4","py-2","border","border-gray-300","rounded-lg","shadow-sm","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel","readOnly"],["type","submit",1,"w-full","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","disabled:opacity-50",3,"disabled"],[1,"mt-6"],[1,"border-t-2","border-blue-500","my-4"],[1,"text-center","text-gray-600"],[1,"text-blue-600","font-bold",3,"routerLink"],[1,"p-4","border-2","border-green-500","bg-green-50","text-green-700","text-center","rounded-lg","shadow-md"],[1,"text-lg","font-bold","mb-2"],[1,"text-blue-500","underline",3,"routerLink"],[1,"p-4","border-2","border-red-500","bg-red-50","text-red-700","rounded-lg","shadow-md"],[1,"text-red-500","text-sm","mt-1"],[4,"ngIf"]],template:function(f,l){if(f&1){let m=F();i(0,"div",3)(1,"section",4)(2,"div",5)(3,"div",6),r(4," Account Activation "),n(),i(5,"div",7),u(6,Y,8,1,"div",8)(7,Z,2,0,"div",9),i(8,"form",10,0),M("ngSubmit",function(){g(m);let c=s(9);return _(l.activate(c))}),i(10,"div")(11,"label",11),r(12,"Email Address"),n(),i(13,"input",12,1),x("ngModelChange",function(c){return g(m),A(l.accountActivationForm.username,c)||(l.accountActivationForm.username=c),_(c)}),n(),u(15,ne,5,4,"div",13),n(),i(16,"div")(17,"label",14),r(18,"Token"),n(),i(19,"input",15,2),x("ngModelChange",function(c){return g(m),A(l.accountActivationForm.emailToken,c)||(l.accountActivationForm.emailToken=c),_(c)}),n(),u(21,oe,2,1,"div",13),n(),i(22,"div")(23,"button",16),r(24," Activate "),n()()(),i(25,"div",17),k(26,"hr",18),i(27,"p",19),r(28," Already have an account? "),i(29,"a",20),r(30,"Sign in"),n()()()()()()()}if(f&2){let m=s(9),p=s(14),c=s(20);o(6),a("ngIf",l.isSuccessful()),o(),a("ngIf",l.isErrorOccurred()),o(6),y("ngModel",l.accountActivationForm.username),a("readOnly",l.isSuccessful()),o(2),a("ngIf",p.invalid&&(p.dirty||m.submitted)),o(4),y("ngModel",l.accountActivationForm.emailToken),a("readOnly",l.isSuccessful()),o(2),a("ngIf",c.invalid&&(c.dirty||m.submitted)),o(2),a("disabled",l.isSuccessful()),o(6),a("routerLink",l.LOGIN_PAGE_INFO.path)}},dependencies:[J,j,q,G,R,B,z,H,U,W,D,O,K,V],encapsulation:2,changeDetection:0})}}return t})();export{ye as AccountActivationComponent,S as AccountActivationForm};
