import{a as ve}from"./chunk-OEK3JCZ4.js";import{a as V}from"./chunk-G62LNWG7.js";import"./chunk-PU57GITJ.js";import{a as he,b as fe,c as _e,d as Ce,e as be}from"./chunk-HNDBVHCE.js";import"./chunk-WDIKRYKU.js";import"./chunk-VTZCPPXM.js";import{a as ye}from"./chunk-5KJMJWBT.js";import{c as pe,d as de,e as se,f as ce,g as me,h as ue}from"./chunk-GNEXLH2Q.js";import{a as ge}from"./chunk-UMTTWNF4.js";import"./chunk-FPF4O6PW.js";import"./chunk-DTKJQCO3.js";import"./chunk-VSQTGOJW.js";import"./chunk-YWHW2ZKJ.js";import{b as ie}from"./chunk-QQPV2QV6.js";import"./chunk-TT75TPET.js";import{c as re,h as oe,k as ae,z as le}from"./chunk-ET22MTXY.js";import"./chunk-6WCMIU77.js";import{a as ne}from"./chunk-ICZJ2FQK.js";import"./chunk-FVZWZKWT.js";import"./chunk-2YMU56OM.js";import{g as j}from"./chunk-A3QWJMVV.js";import"./chunk-CBUXQRBC.js";import{k as U,q as X,r as Z,s as ee,z as te}from"./chunk-LBCNPZTN.js";import{$b as x,Ab as B,Ac as E,Bb as H,Cc as T,Dc as K,Fa as c,Ga as m,Gc as v,H as N,Hc as M,Ic as $,Jb as G,L as W,Ob as u,Sa as L,Wb as w,Xb as _,Yb as C,Zb as i,_b as r,aa as z,ba as A,dc as b,ic as g,kc as y,o as F,qa as R,qb as a,rb as P,sc as Y,t as J,tc as Q,ua as k,uc as q,vc as p,wc as f,xc as S,yc as D,zc as I}from"./chunk-QA4KX23A.js";function xe(n,s){if(n&1&&(i(0,"span",6),p(1),r()),n&2){let t=s.$implicit;a(),f(t)}}function De(n,s){if(n&1&&(i(0,"p",9)(1,"small"),p(2),r()()),n&2){let t,o=y();a(2),f((t=o.journey().geoDetails)==null?null:t.city)}}function Ie(n,s){if(n&1&&(i(0,"p",9)(1,"small"),p(2),r()()),n&2){let t,o=y();a(2),f((t=o.journey().geoDetails)==null?null:t.country)}}function Ee(n,s){if(n&1&&(i(0,"p",9)(1,"small"),p(2),r()()),n&2){let t,o=y();a(2),f((t=o.journey().geoDetails)==null?null:t.category)}}function Me(n,s){if(n&1){let t=b();i(0,"button",13),g("click",function(e){c(t);let l=y();return m(l.editDetails(e))}),p(1,"Edit "),r()}}var we=(()=>{class n{constructor(){this.router=R(j),this.journey=L.required()}viewDetails(){this.router.navigate(["/journey",this.journey().id,"view"]).then(console.log)}editDetails(t){return t.stopPropagation(),this.router.navigate(["/journey",this.journey().id,"edit"]).then(console.log),!1}viewInTimeline(t){return t.stopPropagation(),this.router.navigate(["/timeline"],{queryParams:{id:this.journey().id}}).then(console.log),!1}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=k({type:n,selectors:[["app-journey-card-view"]],inputs:{journey:[1,"journey"]},standalone:!0,features:[T],decls:24,vars:11,consts:[[1,"m-0"],["tabindex","0",1,"card","bg-dark","text-bg-dark","text-white","highlight-on-hover","border-primary",3,"click","keyup.enter"],["fill","","priority","",1,"card-img",3,"ngSrc","alt"],[1,"card-img-overlay","d-flex","flex-column","align-self-stretch","card-text-wrapper"],[1,"card-title"],[1,"card-text"],[1,"badge","bg-dark","bg-opacity-25","border-dark","rounded-pill","border","me-1","fw-normal"],[1,"d-flex","footer-wrapper","mt-auto","flex-nowrap","flex-column","flex-md-row","justify-content-between"],[1,"d-inline-flex","gap-1"],[1,"small","border","border-light","border-1","rounded-2","ps-1","pe-1","border-opacity-50"],["class","small border border-light border-1 rounded-2 ps-1 pe-1 border-opacity-50",4,"ngIf"],[1,"d-inline-flex","gap-1","justify-content-end"],["type","button","class","btn btn-sm btn-primary ms-1 small",3,"click",4,"appHasWriteAccess"],["type","button",1,"btn","btn-sm","btn-primary","ms-1","small",3,"click"]],template:function(o,e){if(o&1&&(i(0,"div",0)(1,"a",1),g("click",function(){return e.viewDetails()})("keyup.enter",function(){return e.viewDetails()}),x(2,"img",2),i(3,"div",3)(4,"h5",4),p(5),r(),i(6,"p",5),p(7),r(),i(8,"p",5),_(9,xe,2,1,"span",6,w),r(),i(11,"div",7)(12,"div",8)(13,"p",9)(14,"small"),p(15),v(16,"date"),r()(),G(17,De,3,1,"p",10)(18,Ie,3,1,"p",10)(19,Ee,3,1,"p",10),r(),i(20,"div",11),G(21,Me,2,0,"button",12),i(22,"button",13),g("click",function(h){return e.viewInTimeline(h)}),p(23,"Timeline "),r()()()()()()),o&2){let l,h,d,O;a(2),u("ngSrc",e.journey().thumbnail)("alt",e.journey().thumbnail),a(3),f(e.journey().name),a(2),f((l=e.journey().geoDetails)==null?null:l.title),a(2),C(e.journey().tags),a(6),f($(16,8,e.journey().journeyDate,"dd.MM.YYYY")),a(2),u("ngIf",(h=e.journey().geoDetails)==null?null:h.city),a(),u("ngIf",(d=e.journey().geoDetails)==null?null:d.country),a(),u("ngIf",(O=e.journey().geoDetails)==null?null:O.country)}},dependencies:[ee,te,ge,U],styles:[".card[_ngcontent-%COMP%]{width:30rem;height:15rem;margin:0 .5rem .5rem 0!important;cursor:pointer}.card-img[_ngcontent-%COMP%]{opacity:75%;width:100%;height:100%}.card-title[_ngcontent-%COMP%]{text-shadow:1px 2px 10px blue}.card-text-wrapper[_ngcontent-%COMP%]{background:#3459e61a}@media (max-width: 575.98px){.card[_ngcontent-%COMP%]{width:100%;height:15rem;margin:0 0 .5rem!important}}"],changeDetection:0})}}return n})();var ke=(n,s)=>s.id,Te=()=>[1,5,10,20,25];function je(n,s){if(n&1){let t=b();i(0,"mat-chip-row",35),g("removed",function(){let e=c(t).$implicit,l=y();return m(l.removeTag(e))}),p(1),i(2,"button",36),g("click",function(){let e=c(t).$implicit,l=y();return m(l.removeTag(e))}),i(3,"mat-icon"),p(4,"cancel"),r()()()}if(n&2){let t=s.$implicit;u("highlighted",!0)("editable",!1)("removable",!0),a(),S(" ",t," ")}}function Ve(n,s){if(n&1){let t=b();i(0,"button",37),g("click",function(){let e=c(t).$implicit,l=y();return m(l.sortingFieldChangedEvent.next(e))}),p(1),v(2,"titlecase"),r()}if(n&2){let t=s.$implicit;a(),S("",M(2,1,t.label)," ")}}function Fe(n,s){if(n&1){let t=b();i(0,"button",37),g("click",function(){let e=c(t).$implicit,l=y();return m(l.sortingDirectionChangedEvent.next(e))}),p(1),v(2,"uppercase"),r()}if(n&2){let t=s.$implicit;a(),S("",M(2,1,t)," ")}}function Pe(n,s){if(n&1&&x(0,"app-journey-card-view",34),n&2){let t=s.$implicit;u("journey",t)}}var ft=(()=>{class n{constructor(t,o){this.journeyService=t,this.sortableFields=[{label:"Journey Date",key:"journeyDate"},{label:"Journey Name",key:"name"},{label:"Geo Title",key:"geoDetails.title"},{label:"City",key:"geoDetails.city"},{label:"Country",key:"geoDetails.country"},{label:"Category",key:"geoDetails.category"},{label:"Geo Location",key:"geoDetails.location"}],this.sortingFieldChangedEvent=new F({label:"Journey Date",key:"journeyDate"}),this.sortableDirections=["asc","desc"],this.sortingDirectionChangedEvent=new F("desc"),this.defaultPageSize=10,this.separatorKeysCodes=[13,188,32],this.searchCriteria=new ve,this.paginator=H.required(V),this.tags=B([]),this.tagsObservable=ie(this.tags),this.searchResult=B({totalElements:0,data:[]}),o.getCurrentNavigation()?.extras.state&&(this.searchCriteria=o.getCurrentNavigation()?.extras.state)}ngAfterViewInit(){N(this.paginator().page,this.sortingFieldChangedEvent,this.sortingDirectionChangedEvent,this.tagsObservable).pipe(z(),A(()=>this.journeyService.findJourneyByQuery(this.searchCriteria,this.sortingFieldChangedEvent.getValue().key,this.sortingDirectionChangedEvent.getValue(),this.paginator().pageIndex,this.paginator().pageSize,!0,this.tags()).pipe(W(()=>J(null))))).subscribe(t=>this.onSuccess(t))}onSuccess(t){this.searchResult.set({totalElements:t?.totalElements??0,data:t?.content??[]})}ngOnInit(){this.journeyService.findJourneyByQuery(this.searchCriteria,"journeyDate","desc",0,this.defaultPageSize,!0).subscribe(t=>this.onSuccess(t))}addTag(t){let o=(t.value||"").trim();o&&this.tags.update(e=>[...e,o]),t.chipInput.clear()}removeTag(t){this.tags.update(o=>o.filter(e=>e!==t))}static{this.\u0275fac=function(o){return new(o||n)(P(ye),P(j))}}static{this.\u0275cmp=k({type:n,selectors:[["app-gallery"]],viewQuery:function(o,e){o&1&&Y(e.paginator,V,5),o&2&&Q()},standalone:!0,features:[T],decls:58,vars:18,consts:[["chipGrid",""],[1,"container","advanced-search"],[1,"d-flex","justify-content-end"],["data-bs-toggle","collapse","href","#searchFields","aria-expanded","false","aria-controls","searchFields",1,"text-decoration-none"],["id","searchFields",1,"row","g-2","mb-3","collapse"],[1,"col-sm"],[1,"form-floating","border","border-primary"],["type","text","id","categoryInput","placeholder","Category",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","categoryInput"],["type","text","id","cityInput","placeholder","City",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","cityInput"],["type","text","id","countryInput","placeholder","Country",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","countryInput"],["type","text","id","yearInput","placeholder","Year",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","yearInput"],[1,"container"],[1,"row"],["aria-label","Tags"],[1,"col-12"],[1,"form-floating"],["placeholder","Filter by Tags","autocomplete","off","id","tagsInput",1,"form-control","border","border-2","border-primary","rounded-4",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],["for","tagsInput"],["color","primary",3,"highlighted","editable","removable"],[1,"col-12","col-md-8","mb-md-3","me-0","pe-0"],["aria-label","Select page","color","primary",1,"paginator","me-0",3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"col-12","col-md-4","sorting","mb-3","me-0"],["ngbDropdown","",1,"d-inline-block","me-1"],["type","button","id","dropdownSortingField","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingField"],["ngbDropdownItem",""],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownSortingDirection","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingDirection"],[1,"card-group","justify-content-center","align-items-center"],[3,"journey"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click"],["ngbDropdownItem","",3,"click"]],template:function(o,e){if(o&1){let l=b();i(0,"section",1)(1,"div",2)(2,"a",3),p(3," Advanced Search "),r()(),i(4,"div",4)(5,"div",5)(6,"div",6)(7,"input",7),E("ngModelChange",function(d){return c(l),I(e.searchCriteria.category,d)||(e.searchCriteria.category=d),m(d)}),r(),i(8,"label",8),p(9,"Category"),r()()(),i(10,"div",5)(11,"div",6)(12,"input",9),E("ngModelChange",function(d){return c(l),I(e.searchCriteria.city,d)||(e.searchCriteria.city=d),m(d)}),r(),i(13,"label",10),p(14,"City"),r()()(),i(15,"div",5)(16,"div",6)(17,"input",11),E("ngModelChange",function(d){return c(l),I(e.searchCriteria.country,d)||(e.searchCriteria.country=d),m(d)}),r(),i(18,"label",12),p(19,"Country"),r()()(),i(20,"div",5)(21,"div",6)(22,"input",13),E("ngModelChange",function(d){return c(l),I(e.searchCriteria.year,d)||(e.searchCriteria.year=d),m(d)}),r(),i(23,"label",14),p(24,"Year"),r()()()()(),i(25,"section",15)(26,"div",16)(27,"mat-chip-grid",17,0)(29,"div",18)(30,"div",19)(31,"input",20),g("matChipInputTokenEnd",function(d){return c(l),m(e.addTag(d))}),r(),i(32,"label",21),p(33,"Filter by Tags"),r()()(),i(34,"div",18),_(35,je,5,4,"mat-chip-row",22,w),r()()(),i(37,"div",16)(38,"div",23),x(39,"mat-paginator",24),r(),i(40,"div",25)(41,"div",26)(42,"button",27),p(43),v(44,"titlecase"),r(),i(45,"div",28),_(46,Ve,3,3,"button",29,w),r()(),i(48,"div",30)(49,"button",31),p(50),v(51,"uppercase"),r(),i(52,"div",32),_(53,Fe,3,3,"button",29,w),r()()()(),i(55,"div",33),_(56,Pe,1,1,"app-journey-card-view",34,ke),r()()}if(o&2){let l=q(28);a(7),D("ngModel",e.searchCriteria.category),a(5),D("ngModel",e.searchCriteria.city),a(5),D("ngModel",e.searchCriteria.country),a(5),D("ngModel",e.searchCriteria.year),a(9),u("matChipInputFor",l)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),a(4),C(e.tags()),a(4),u("length",e.searchResult().totalElements)("pageSize",e.defaultPageSize)("pageSizeOptions",K(17,Te))("showFirstLastButtons",!0),a(4),S(" ",M(44,13,e.sortingFieldChangedEvent.getValue().label)," "),a(3),C(e.sortableFields),a(4),S(" ",M(51,15,e.sortingDirectionChangedEvent.getValue())," "),a(3),C(e.sortableDirections),a(3),C(e.searchResult().data)}},dependencies:[V,ue,me,ce,se,pe,de,X,Z,be,_e,Ce,he,fe,ne,le,re,oe,ae,we],styles:[".sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#4246d7a6 1%,#f8f9fa1a 80%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.paginator[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.mat-mdc-select[_ngcontent-%COMP%]{color:#f5f5f5!important}@media (max-width: 575.98px){.sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%)}}"],changeDetection:0})}}return n})();export{ft as GalleryComponent};
