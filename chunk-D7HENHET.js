import{a as Y}from"./chunk-JPEGB6GV.js";import{a as X}from"./chunk-JTLKT5PD.js";import{c as q}from"./chunk-YFHJRQYX.js";import{b as G,g as R,h as D,i as W,j,k as B,p as U,q as z,r as H,s as J,u as K,v as Q}from"./chunk-WYEMPCIW.js";import"./chunk-4H6KTJAK.js";import{a as P}from"./chunk-DNEPPB4M.js";import{a as V,d as L}from"./chunk-G3CP2NQH.js";import"./chunk-CGJVCASA.js";import{h as N}from"./chunk-T257ZYH5.js";import{Aa as I,B as w,Bc as x,Cb as p,Cc as A,Dc as S,Ea as y,J as T,Wb as l,Xb as t,Yb as i,Zb as F,bc as M,gc as O,ic as b,kb as a,oa as g,pb as C,sc as m,ua as _,va as h,wb as k,xc as o}from"./chunk-BQWC7YH4.js";function Z(e,r){if(e&1&&(t(0,"div",21)(1,"div",22),o(2,"Account activated successfully!"),i(),t(3,"p"),o(4,"Please "),t(5,"a",23),o(6,"Sign In"),i(),o(7," with your credentials and start your journey with us."),i()()),e&2){let n=b();a(5),l("routerLink",n.LOGIN_PAGE_INFO.path)}}function $(e,r){e&1&&(t(0,"div",24),o(1," Activation failed. Please check and correct data. If the issue still persists, try again later. "),i())}function ee(e,r){e&1&&(t(0,"div"),o(1,"Email Address is required."),i())}function te(e,r){e&1&&(t(0,"div"),o(1,"Email Address must be at most 50 characters long."),i())}function ie(e,r){e&1&&(t(0,"div"),o(1,"Email Address must have at least 8 characters. "),i())}function ne(e,r){e&1&&(t(0,"div"),o(1,"Invalid Email Address."),i())}function re(e,r){if(e&1&&(t(0,"div",25),p(1,ee,2,0,"div",26)(2,te,2,0,"div",26)(3,ie,2,0,"div",26)(4,ne,2,0,"div",26),i()),e&2){b();let n=m(14);a(),l("ngIf",n.errors==null?null:n.errors.required),a(),l("ngIf",n.errors==null?null:n.errors.maxlength),a(),l("ngIf",(n.errors==null?null:n.errors.minlength)&&!(n.errors!=null&&n.errors.email)),a(),l("ngIf",(n.errors==null?null:n.errors.email)&&!(n.errors!=null&&n.errors.email))}}function oe(e,r){e&1&&(t(0,"div"),o(1,"Token is required."),i())}function ae(e,r){if(e&1&&(t(0,"div",25),p(1,oe,2,0,"div",26),i()),e&2){b();let n=m(20);a(),l("ngIf",n.errors==null?null:n.errors.required)}}var E=class{constructor(r="",n=""){this.username=r,this.emailToken=n}},xe=(()=>{let r=class r{constructor(c){this.LOGIN_PAGE_INFO=q,this.destroyRef=g(I),this.bffService=g(X),this.registrationService=g(Y),this.isSuccessful=y(!1),this.isErrorOccurred=y(!1),this.accountActivationForm=new E(c.snapshot.queryParamMap.get("identifier"),c.snapshot.queryParamMap.get("token"))}activate(c){c.valid?this.activateAccount():this.onError(new Error("Invalid data"))}ngOnInit(){this.activateAccount()}activateAccount(){this.bffService.getVersion().pipe(P(this.destroyRef),T(c=>this.accountActivationForm.username!=null&&this.accountActivationForm.emailToken!=null),w(c=>this.registrationService.activate({username:this.accountActivationForm.username,emailToken:this.accountActivationForm.emailToken,apiVersion:c.version}))).subscribe({next:c=>this.onSuccess(),error:c=>this.onError(c)})}onSuccess(){this.isSuccessful.set(!0),this.isErrorOccurred.set(!1)}onError(c){console.log(c),this.isErrorOccurred.set(!0),this.isSuccessful.set(!1)}};r.\u0275fac=function(v){return new(v||r)(C(V))},r.\u0275cmp=k({type:r,selectors:[["app-account-activation"]],decls:31,vars:10,consts:[["activationForm","ngForm"],["username","ngModel"],["emailToken","ngModel"],[1,"h-full","flex","items-center","justify-center"],[1,"p-6","w-full","max-w-2xl"],[1,"border","border-blue-500","rounded-lg","shadow-lg"],[1,"bg-gradient-to-r","from-blue-500","to-blue-700","text-white","text-xl","font-semibold","p-4","rounded-t-lg"],[1,"p-6"],["class","p-4 border-2 border-green-500 bg-green-50 text-green-700 text-center rounded-lg shadow-md",4,"ngIf"],["class","p-4 border-2 border-red-500 bg-red-50 text-red-700 rounded-lg shadow-md",4,"ngIf"],[1,"flex","flex-col","gap-2","mt-6",3,"ngSubmit"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","username","name","username","required","","minlength","8","maxlength","50","email","","placeholder","Email Address","autocomplete","off",1,"w-full","mt-1","px-4","py-2","border","border-gray-300","rounded-lg","shadow-sm","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel","readOnly"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","emailToken",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","emailToken","name","emailToken","required","","placeholder","Token","autocomplete","off",1,"w-full","mt-1","px-4","py-2","border","border-gray-300","rounded-lg","shadow-sm","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel","readOnly"],["type","submit",1,"w-full","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","disabled:opacity-50",3,"disabled"],[1,"mt-6"],[1,"border-t-2","border-blue-500","my-4"],[1,"text-center","text-gray-600"],[1,"text-blue-600","font-bold",3,"routerLink"],[1,"p-4","border-2","border-green-500","bg-green-50","text-green-700","text-center","rounded-lg","shadow-md"],[1,"text-lg","font-bold","mb-2"],[1,"text-blue-500","underline",3,"routerLink"],[1,"p-4","border-2","border-red-500","bg-red-50","text-red-700","rounded-lg","shadow-md"],[1,"text-red-500","text-sm","mt-1"],[4,"ngIf"]],template:function(v,d){if(v&1){let u=M();t(0,"div",3)(1,"section",4)(2,"div",5)(3,"div",6),o(4," Account Activation "),i(),t(5,"div",7),p(6,Z,8,1,"div",8)(7,$,2,0,"div",9),t(8,"form",10,0),O("ngSubmit",function(){_(u);let s=m(9);return h(d.activate(s))}),t(10,"div")(11,"label",11),o(12,"Email Address"),i(),t(13,"input",12,1),S("ngModelChange",function(s){return _(u),A(d.accountActivationForm.username,s)||(d.accountActivationForm.username=s),h(s)}),i(),p(15,re,5,4,"div",13),i(),t(16,"div")(17,"label",14),o(18,"Token"),i(),t(19,"input",15,2),S("ngModelChange",function(s){return _(u),A(d.accountActivationForm.emailToken,s)||(d.accountActivationForm.emailToken=s),h(s)}),i(),p(21,ae,2,1,"div",13),i(),t(22,"div")(23,"button",16),o(24," Activate "),i()()(),t(25,"div",17),F(26,"hr",18),t(27,"p",19),o(28," Already have an account? "),t(29,"a",20),o(30,"Sign in"),i()()()()()()()}if(v&2){let u=m(9),f=m(14),s=m(20);a(6),l("ngIf",d.isSuccessful()),a(),l("ngIf",d.isErrorOccurred()),a(6),x("ngModel",d.accountActivationForm.username),l("readOnly",d.isSuccessful()),a(2),l("ngIf",f.invalid&&(f.dirty||u.submitted)),a(4),x("ngModel",d.accountActivationForm.emailToken),l("readOnly",d.isSuccessful()),a(2),l("ngIf",s.invalid&&(s.dirty||u.submitted)),a(2),l("disabled",d.isSuccessful()),a(6),l("routerLink",d.LOGIN_PAGE_INFO.path)}},dependencies:[K,B,G,R,D,U,H,J,z,j,W,N,Q,L],encapsulation:2,changeDetection:0});let e=r;return e})();export{xe as AccountActivationComponent,E as AccountActivationForm};
