import{a as K}from"./chunk-45ZUDZUP.js";import{a as W}from"./chunk-5CBQWKAO.js";import{c as L,g as U,h as B,i as G,j as q,k as Y,s as z,t as H,w as J}from"./chunk-EJDL6C4J.js";import{a as R}from"./chunk-6NMX424Q.js";import{n as T}from"./chunk-6IY7YVM2.js";import{a as S,b as O}from"./chunk-3TVQIQ7Q.js";import{c as j,l as D}from"./chunk-FIKRSNUT.js";import{q as N,r as V}from"./chunk-6TOOB3QO.js";import{$b as F,Db as A,Ia as f,Ja as u,Kb as v,Mb as c,Qa as E,Vb as i,Wb as n,Xb as d,ec as h,gc as p,nc as b,oa as k,oc as m,qb as a,qc as w,rb as g,rc as _,sc as x,ta as y,tc as C,ua as M,vc as I,ya as P}from"./chunk-ZMWQM3UH.js";var Q=(()=>{let r=class r{constructor(e,t){this.httpClient=e,this.authService=t}getProfileData(){let e=this.authService.getCurrentUserContext();return this.httpClient.get(S.journeyApi+"/my-account",{headers:{Authorization:`Bearer ${e.accessToken}`}})}saveProfileData(e){console.log(e);let t=this.authService.getCurrentUserContext();return this.httpClient.post(S.journeyApi+"/my-account",e,{headers:{Authorization:`Bearer ${t.accessToken}`,"Content-Type":"application/json"}})}};r.\u0275fac=function(t){return new(t||r)(y(j),y(O))},r.\u0275prov=k({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();function $(o,r){if(o&1&&(i(0,"div",12),d(1,"input",27),i(2,"label",28),m(3),n()()),o&2){let s=r.$implicit;a(3),w(" ",s," ")}}function ee(o,r){if(o&1){let s=F();i(0,"form",4,0),h("submit",function(){f(s);let t=b(1),l=p();return u(l.save(t))}),i(2,"div",5)(3,"div",6),d(4,"app-feedback-message",7),n()(),i(5,"div",5)(6,"label",8),m(7,"Username"),n(),i(8,"div",9),d(9,"input",10),n()(),i(10,"div",5)(11,"div",11)(12,"div",12),d(13,"input",13),i(14,"label",14),m(15," Active "),n()()()(),i(16,"fieldset",5)(17,"legend",15),m(18,"Role(s)"),n(),i(19,"div",16),v(20,$,4,1,"div",17),n()(),i(21,"div",5)(22,"label",18),m(23,"Created"),n(),i(24,"div",9),d(25,"input",19),n()(),i(26,"div",5)(27,"label",20),m(28,"Name"),n(),i(29,"div",9)(30,"input",21),C("ngModelChange",function(t){f(s);let l=p();return x(l.mydata.name,t)||(l.mydata.name=t),u(t)}),n()()(),i(31,"div",5)(32,"label",22),m(33,"Email"),n(),i(34,"div",9)(35,"input",23),C("ngModelChange",function(t){f(s);let l=p();return x(l.mydata.emailAddress,t)||(l.mydata.emailAddress=t),u(t)}),n()()(),i(36,"div",5)(37,"div",24)(38,"button",25),m(39,"Save"),n(),i(40,"button",26),h("click",function(){f(s);let t=p();return u(t.cancel())}),m(41,"Cancel"),n()()()()}if(o&2){let s=b(1),e=p();a(4),c("message",e.feedbackMessage()),a(5),c("value",e.mydata.username),a(4),c("checked",e.mydata.enabled),a(7),c("ngForOf",e.mydata.roles),a(5),c("value",e.mydata.createdDate),a(5),_("ngModel",e.mydata.name),a(5),_("ngModel",e.mydata.emailAddress),a(3),c("disabled",!s.valid)}}var ue=(()=>{let r=class r{constructor(e,t){this.myAccountService=e,this.router=t,this.MY_PROFILE_PAGE_INFO=T,this.destroyRef=M(E),this.feedbackMessage=A({})}ngOnInit(){this.myAccountService.getProfileData().pipe(W(this.destroyRef)).subscribe({next:e=>this.mydata=e,error:e=>console.error(e)})}save(e){e.valid&&e.dirty&&this.myAccountService.saveProfileData(this.mydata).subscribe({next:t=>this.onSuccessCallback(),error:t=>this.onErrorCallback()})}onSuccessCallback(){this.feedbackMessage.set({success:"Profile data saved successfully"})}onErrorCallback(){this.feedbackMessage.set({error:"Update failed. Please check data."})}cancel(){this.router.navigate(["/"]).then(console.log)}};r.\u0275fac=function(t){return new(t||r)(g(Q),g(D))},r.\u0275cmp=P({type:r,selectors:[["app-my-profile-page"]],standalone:!0,features:[I],decls:3,vars:2,consts:[["profileForm","ngForm"],[3,"pageInfo"],[1,"container","d-flex","justify-content-start"],["class","col-12 col-lg-8",3,"submit",4,"ngIf"],[1,"col-12","col-lg-8",3,"submit"],[1,"row","mb-3"],[1,"col-12"],[3,"message"],["for","username",1,"col-sm-2","col-form-label","text-primary"],[1,"col-sm-10"],["type","text","id","username","disabled","",1,"form-control",3,"value"],[1,"col-sm-10","offset-sm-2"],[1,"form-check"],["type","checkbox","id","isAccountActive","name","isAccountActive","disabled","",1,"form-check-input",3,"checked"],["for","isAccountActive",1,"form-check-label","text-primary"],[1,"col-form-label","col-sm-2","pt-0","text-primary"],[1,"col-sm-10","text-primary"],["class","form-check",4,"ngFor","ngForOf"],["for","createdDate",1,"col-sm-2","col-form-label","text-primary"],["type","datetime-local","id","createdDate","name","createdDate","disabled","","readonly","",1,"form-control",3,"value"],["for","name",1,"col-sm-2","col-form-label","text-primary"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","emailAddress",1,"col-sm-2","col-form-label","text-primary"],["type","email","id","emailAddress","name","emailAddress","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col","text-center","d-flex","gap-3","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"],["type","checkbox","name","roleName","id","roleName","checked","","disabled","",1,"form-check-input"],["for","roleName",1,"form-check-label"]],template:function(t,l){t&1&&(d(0,"app-page-header",1),i(1,"section",2),v(2,ee,42,8,"form",3),n()),t&2&&(c("pageInfo",l.MY_PROFILE_PAGE_INFO),a(2),c("ngIf",l.mydata))},dependencies:[R,V,J,Y,L,U,B,z,H,q,G,N,K]});let o=r;return o})();export{ue as MyProfilePageComponent};
