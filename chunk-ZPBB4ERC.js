import{a as Me}from"./chunk-OEK3JCZ4.js";import{a as x}from"./chunk-KNPODCEU.js";import"./chunk-EP2JUAZZ.js";import{a as ce,b as de,c as ue,d as ge,e as he}from"./chunk-VQIXRJUR.js";import{a as ye,b as Ce,c as _e,d as fe}from"./chunk-EIEM5SGM.js";import{a as me}from"./chunk-V3XPYBTQ.js";import{a as Z,b as ee,c as te,d as ie}from"./chunk-WDHKPE2Z.js";import"./chunk-F2MYKX3W.js";import{b as ae}from"./chunk-E5QCM6A7.js";import{i as ne}from"./chunk-42K4P2AR.js";import"./chunk-T3OIREQZ.js";import{h as K}from"./chunk-WTO4EC35.js";import{b as se,c as pe}from"./chunk-YUWLRQ2A.js";import{f as oe,g as le}from"./chunk-3L7FTIZC.js";import"./chunk-BFKDL6AO.js";import"./chunk-3W4XQ2AS.js";import"./chunk-ESNPP4F3.js";import"./chunk-2PPFUFFT.js";import{b as q,g as U,j as $,u as X}from"./chunk-6V4FY2EC.js";import"./chunk-P4C6YQ3V.js";import{b as H}from"./chunk-GX5PCDDC.js";import"./chunk-U6VOSXN3.js";import{a as Y}from"./chunk-WMLNNED6.js";import"./chunk-G6LWCROE.js";import{a as re}from"./chunk-UVG5L6RS.js";import"./chunk-OO6UETQH.js";import{c as Q}from"./chunk-OBJFDV2T.js";import"./chunk-INCHVP6V.js";import{p as z,q as J}from"./chunk-TJFKVA4M.js";import{$ as A,Ac as R,Bc as T,Cc as c,Db as O,Ec as y,F as B,Gc as w,Hc as v,I as P,Ic as b,Kc as N,Nc as S,Oc as E,Pa as G,Vb as u,_ as j,ac as I,bc as C,cc as _,dc as i,ec as l,fc as F,jc as f,m as V,oc as h,pb as a,qb as D,qc as M,r as k,xa as p,xb as L,ya as m,zc as W}from"./chunk-BGW2GSJU.js";var we=(o,d)=>d.id,ve=()=>[1,5,10,20,25];function be(o,d){if(o&1){let t=f();i(0,"mat-chip-row",25),h("removed",function(){let e=p(t).$implicit,s=M();return m(s.removeTag(e))}),c(1),i(2,"button",26),h("click",function(){let e=p(t).$implicit,s=M();return m(s.removeTag(e))}),i(3,"mat-icon"),c(4,"cancel"),l()()()}if(o&2){let t=d.$implicit;u("highlighted",!0)("editable",!1)("removable",!0),a(),y(" ",t," ")}}function Se(o,d){if(o&1){let t=f();i(0,"button",27),h("click",function(){let e=p(t).$implicit,s=M();return m(s.sortingFieldChangedEvent.next(e))}),c(1),S(2,"titlecase"),l()}if(o&2){let t=d.$implicit;a(),y(" ",E(2,1,t.label)," ")}}function Ee(o,d){if(o&1){let t=f();i(0,"button",27),h("click",function(){let e=p(t).$implicit,s=M();return m(s.sortingDirectionChangedEvent.next(e))}),c(1),S(2,"uppercase"),l()}if(o&2){let t=d.$implicit;a(),y(" ",E(2,1,t)," ")}}function Ie(o,d){if(o&1&&F(0,"app-journey-card-view",24),o&2){let t=d.$implicit;u("journey",t)}}var nt=(()=>{class o{constructor(t,r){this.journeyService=t,this.sortableFields=[{label:"Journey Date",key:"journeyDate"},{label:"Journey Name",key:"name"},{label:"Geo Title",key:"geoDetails.title"},{label:"City",key:"geoDetails.city"},{label:"Country",key:"geoDetails.country"},{label:"Category",key:"geoDetails.category"},{label:"Geo Location",key:"geoDetails.location"}],this.sortingFieldChangedEvent=new V({label:"Journey Date",key:"journeyDate"}),this.sortableDirections=["asc","desc"],this.sortingDirectionChangedEvent=new V("desc"),this.defaultPageSize=10,this.separatorKeysCodes=[13,188,32],this.searchCriteria=new Me,this.paginator=L.required(x),this.tags=G([]),this.tagsObservable=H(this.tags),this.searchResult=G({totalElements:0,data:[]}),this.GALLERY_PAGE_INFO=K,r.getCurrentNavigation()?.extras.state&&(this.searchCriteria=r.getCurrentNavigation()?.extras.state)}ngAfterViewInit(){B(this.paginator().page,this.sortingFieldChangedEvent,this.sortingDirectionChangedEvent,this.tagsObservable).pipe(j(),A(()=>this.journeyService.findJourneyByQuery(this.searchCriteria,this.sortingFieldChangedEvent.getValue().key,this.sortingDirectionChangedEvent.getValue(),this.paginator().pageIndex,this.paginator().pageSize,!0,this.tags()).pipe(P(()=>k(null))))).subscribe(t=>this.onSuccess(t))}onSuccess(t){this.searchResult.set({totalElements:t?.totalElements??0,data:t?.content??[]})}ngOnInit(){this.journeyService.findJourneyByQuery(this.searchCriteria,"journeyDate","desc",0,this.defaultPageSize,!0).subscribe(t=>this.onSuccess(t))}addTag(t){let r=(t.value||"").trim();r&&this.tags.update(e=>[...e,r]),t.chipInput.clear()}removeTag(t){this.tags.update(r=>r.filter(e=>e!==t))}static{this.\u0275fac=function(r){return new(r||o)(D(ne),D(Q))}}static{this.\u0275cmp=O({type:o,selectors:[["app-gallery"]],viewQuery:function(r,e){r&1&&W(e.paginator,x,5),r&2&&R()},decls:50,vars:21,consts:[["chipGrid",""],["sortingFieldMenu","matMenu"],["sortingDirectionMenu","matMenu"],[3,"pageInfo"],[1,"container","py-2"],["id","searchFields"],[1,"text-sm","font-normal"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mt-3"],["appearance","outline",1,"w-full"],["matInput","","type","text","id","categoryInput","placeholder","Category",3,"ngModelChange","ngModel"],["matInput","","type","text","id","cityInput","placeholder","City",3,"ngModelChange","ngModel"],["matInput","","type","text","id","countryInput","placeholder","Country",3,"ngModelChange","ngModel"],["matInput","","type","text","id","yearInput","placeholder","Year",3,"ngModelChange","ngModel"],[1,"container","p-0","m-0"],["aria-label","Tags",1,"w-full"],["matInput","","id","tagsInput","placeholder","Filter by Tags",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[1,"flex","flex-wrap","gap-1","m-0"],["color","primary",3,"highlighted","editable","removable"],[1,"m-0","p-0","flex","justify-center","max-sm:flex-col","text-center","content-center","items-center"],["aria-label","Select page","color","primary",1,"paginator",3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"inline-flex"],["mat-menu-item",""],["mat-button","",1,"text-primary","border","border-primary","bg-white","px-2","py-1","rounded-md","shadow-sm","hover:bg-gray-100",3,"matMenuTriggerFor"],[1,"container","flex","gap-2","items-center","justify-center","flex-wrap"],[1,"max-sm:w-full",3,"journey"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click"],["mat-menu-item","",3,"click"]],template:function(r,e){if(r&1){let s=f();i(0,"header"),F(1,"app-page-header",3),l(),i(2,"main")(3,"section",4)(4,"mat-expansion-panel",5)(5,"mat-expansion-panel-header")(6,"mat-panel-title",6)(7,"span"),c(8,"Filter"),l()()(),i(9,"div",7)(10,"mat-form-field",8)(11,"input",9),b("ngModelChange",function(n){return p(s),v(e.searchCriteria.category,n)||(e.searchCriteria.category=n),m(n)}),l()(),i(12,"mat-form-field",8)(13,"input",10),b("ngModelChange",function(n){return p(s),v(e.searchCriteria.city,n)||(e.searchCriteria.city=n),m(n)}),l()(),i(14,"mat-form-field",8)(15,"input",11),b("ngModelChange",function(n){return p(s),v(e.searchCriteria.country,n)||(e.searchCriteria.country=n),m(n)}),l()(),i(16,"mat-form-field",8)(17,"input",12),b("ngModelChange",function(n){return p(s),v(e.searchCriteria.year,n)||(e.searchCriteria.year=n),m(n)}),l()()(),i(18,"div",13)(19,"mat-chip-grid",14,0)(21,"mat-form-field",8)(22,"input",15),h("matChipInputTokenEnd",function(n){return p(s),m(e.addTag(n))}),l()(),i(23,"div",16),C(24,be,5,4,"mat-chip-row",17,I),l()()()()(),i(26,"section",18),F(27,"mat-paginator",19),i(28,"div",20)(29,"mat-menu",null,1),C(31,Se,3,3,"button",21,I),l(),i(33,"button",22),c(34),S(35,"titlecase"),i(36,"mat-icon"),c(37,"arrow_drop_down"),l()(),i(38,"mat-menu",null,2),C(40,Ee,3,3,"button",21,I),l(),i(42,"button",22),c(43),S(44,"uppercase"),i(45,"mat-icon"),c(46,"arrow_drop_down"),l()()()(),i(47,"section",23),C(48,Ie,1,1,"app-journey-card-view",24,we),l()()}if(r&2){let s=T(20),g=T(30),n=T(39);a(),u("pageInfo",e.GALLERY_PAGE_INFO),a(10),w("ngModel",e.searchCriteria.category),a(2),w("ngModel",e.searchCriteria.city),a(2),w("ngModel",e.searchCriteria.country),a(2),w("ngModel",e.searchCriteria.year),a(5),u("matChipInputFor",s)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),a(2),_(e.tags()),a(3),u("length",e.searchResult().totalElements)("pageSize",e.defaultPageSize)("pageSizeOptions",N(20,ve))("showFirstLastButtons",!0),a(4),_(e.sortableFields),a(2),u("matMenuTriggerFor",g),a(),y(" ",E(35,16,e.sortingFieldChangedEvent.getValue().label)," "),a(6),_(e.sortableDirections),a(2),u("matMenuTriggerFor",n),a(),y(" ",E(44,18,e.sortingDirectionChangedEvent.getValue())," "),a(5),_(e.searchResult().data)}},dependencies:[x,z,J,he,ue,ge,ce,de,Y,X,q,U,$,ae,le,oe,pe,se,fe,ye,Ce,_e,re,ie,ee,Z,te,me],styles:[".paginator[_ngcontent-%COMP%]{text-align:center;align-items:center;justify-content:center!important;display:flex;font-weight:500}"],changeDetection:0})}}return o})();export{nt as GalleryComponent};
