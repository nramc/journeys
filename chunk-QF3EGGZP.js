import{a as D}from"./chunk-ZQRNXEES.js";import"./chunk-U6UEU34B.js";import"./chunk-ZOU6NFRL.js";import{c as k,g as P,h as A,i as B,j as W,k as G,s as R,u as j,v as Y}from"./chunk-BFFUODEK.js";import{b as q}from"./chunk-2X3CKBFO.js";import{j as N,l as F}from"./chunk-W2LWCVAC.js";import{r as V}from"./chunk-RZVCQHV5.js";import{Ia as g,Ib as b,Ja as f,Kb as c,Pb as L,Tb as t,Ub as i,Vb as p,Zb as E,cc as w,ec as I,lc as h,mc as s,pb as l,pc as S,qb as _,qc as y,rc as x,tc as T,ya as C}from"./chunk-K63RDP6Q.js";function U(e,n){if(e&1&&p(0,"app-feedback-message",6),e&2){let v=I();c("successMessage",v.successMessage)("errorMessage",v.errorMessage)}}function O(e,n){e&1&&(t(0,"div",7),p(1,"i",26),s(2," Identity Yourself to access secured resource..! "),i())}function z(e,n){e&1&&(t(0,"div",8),p(1,"i",26),s(2," You have been successfully logged out! "),i())}function H(e,n){e&1&&(t(0,"div",9),p(1,"i",26),s(2," Identity Yourself to access more exciting features..! "),i())}function J(e,n){e&1&&(t(0,"div"),s(1,"Username is required."),i())}function K(e,n){e&1&&(t(0,"div"),s(1,"Username must be at most 50 characters long."),i())}function Q(e,n){e&1&&(t(0,"div"),s(1,"Password is required."),i())}function X(e,n){e&1&&(t(0,"div"),s(1,"Password must be at most 50 characters long."),i())}var oe=(()=>{let n=class n{constructor(o,d,a){this.authService=o,this.router=d,this.activatedRoute=a,this.successMessage="",this.errorMessage="",this.form=new M,this.messageBanner=""}ngOnInit(){this.messageBanner=this.activatedRoute.snapshot.queryParams.q}login(o){o.valid&&this.authService.login(this.form.userName,this.form.password).subscribe({next:d=>this.onLoginSuccess(d),error:d=>{o.resetForm(),this.onLoginFailed(d)}})}onLoginSuccess(o){this.successMessage="Login successful for "+o.name,this.router.navigate(["/home"]).then()}onLoginFailed(o){console.error(o),this.errorMessage="Login failed. "+o.message}loginAsGuest(){this.authService.loginAsGuest().subscribe({next:o=>this.onLoginSuccess(o),error:o=>this.onLoginFailed(o)})}};n.\u0275fac=function(d){return new(d||n)(_(q),_(F),_(N))},n.\u0275cmp=C({type:n,selectors:[["app-login"]],standalone:!0,features:[T],decls:39,vars:10,consts:[["loginForm","ngForm"],["username","ngModel"],["password","ngModel"],[1,"container","h-100","mt-3","mt-md-0"],[1,"row","d-flex","justify-content-center","align-items-center","h-100","m-auto"],[1,"col-12","col-md-6","mt-sm-0"],[3,"successMessage","errorMessage"],["role","alert",1,"alert","alert-warning"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-primary"],[1,"card","login-card","text-white","border","border-2","border-primary","border-opacity-50",2,"border-radius","1rem"],[1,"card-body","p-5","text-center"],[3,"ngSubmit"],[1,"fw-bold","mb-2"],[1,"text-white-50","mb-5"],[1,"form-outline","form-white","mb-4"],["type","email","id","username","name","username","required","","maxlength","50",1,"form-control","form-control-lg",3,"ngModelChange","ngModel"],["for","username",1,"form-label"],[1,"form-text","text-danger",3,"hidden"],[4,"ngIf"],["type","password","id","password","name","password","required","","maxlength","50",1,"form-control","form-control-lg",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],[1,"d-flex","flex-column","gap-1"],["type","submit",1,"btn","btn-outline-dark","btn-lg",3,"disabled"],[1,"text-light"],["type","button",1,"btn","btn-success","btn-lg",3,"click"],[1,"bi","bi-info-circle","pe-none","me-2"]],template:function(d,a){if(d&1){let u=E();t(0,"div",3)(1,"div",4)(2,"div",5)(3,"div"),b(4,U,1,2,"app-feedback-message",6)(5,O,3,0,"div",7)(6,z,3,0,"div",8)(7,H,3,0,"div",9),i(),t(8,"div",10)(9,"div",11)(10,"form",12,0),w("ngSubmit",function(){g(u);let r=h(11);return f(a.login(r))}),t(12,"h2",13),s(13,"Login"),i(),t(14,"p",14),s(15,"Please Identify Yourself!"),i(),t(16,"div",15)(17,"input",16,1),x("ngModelChange",function(r){return g(u),y(a.form.userName,r)||(a.form.userName=r),f(r)}),i(),t(19,"label",17),s(20,"Username"),i(),t(21,"div",18),b(22,J,2,0,"div",19)(23,K,2,0,"div",19),i()(),t(24,"div",15)(25,"input",20,2),x("ngModelChange",function(r){return g(u),y(a.form.password,r)||(a.form.password=r),f(r)}),i(),t(27,"label",21),s(28,"Password"),i(),t(29,"div",18),b(30,Q,2,0,"div",19)(31,X,2,0,"div",19),i()(),t(32,"div",22)(33,"button",23),s(34,"Submit"),i(),t(35,"small",24),s(36,"or"),i(),t(37,"button",25),w("click",function(){return g(u),f(a.loginAsGuest())}),s(38,"Login as Guest"),i()()()()()()()()}if(d&2){let u=h(11),m=h(18),r=h(26);l(4),L(a.successMessage||a.errorMessage?4:a.messageBanner==="unauthenticated"?5:a.messageBanner==="logoutSuccessful"?6:7),l(13),S("ngModel",a.form.userName),l(4),c("hidden",m.valid||m.pristine),l(),c("ngIf",m.errors==null?null:m.errors.required),l(),c("ngIf",m.errors==null?null:m.errors.maxlength),l(2),S("ngModel",a.form.password),l(4),c("hidden",r.valid||r.pristine),l(),c("ngIf",r.errors==null?null:r.errors.required),l(),c("ngIf",r.errors==null?null:r.errors.maxlength),l(2),c("disabled",!u.form.valid||u.submitted)}},dependencies:[Y,G,k,P,A,R,j,W,B,D,V],styles:[".login-card[_ngcontent-%COMP%]{background-image:linear-gradient(to right top,#fff,#e2ddfb,#c3bdf7,#a29df2,#7d7fed,#686fea,#4f5fe6,#2c4fe2,#2647df,#203fdc,#1a37d9,#152ed5)}"]});let e=n;return e})(),M=class{constructor(n="",v=""){this.userName=n,this.password=v}};export{oe as LoginComponent};
