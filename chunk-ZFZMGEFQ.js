import{b as G,d as M,e as p,f as q}from"./chunk-VUXBQOTO.js";import{a as R}from"./chunk-3Y5ODF3N.js";import{a as c}from"./chunk-HWGXPR67.js";import{b as B}from"./chunk-MLFE2CIA.js";import{c as U}from"./chunk-DUQER7DB.js";import{k as $}from"./chunk-IVYRUNV3.js";import{$b as d,Ab as D,Bb as P,Cc as F,Fa as g,Ga as _,Jb as u,Ob as r,Sa as A,Ub as j,Zb as a,_b as s,a as I,ac as x,ad as V,bc as v,dc as C,ic as y,ka as w,kc as m,qa as h,qb as o,sc as z,t as S,tc as E,ua as k,vc as f,wc as T}from"./chunk-4YTPSGIK.js";var oe=(()=>{class t{constructor(){this.httpClient=h(U),this.authService=h(B)}getTimelineForUpcomingJourniversaries(e){let n=this.authService.getCurrentUserContext();return this.httpClient.get(c.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${n.accessToken}`},params:{upcoming:e}})}getTimelineForJourney(e){let n=this.authService.getCurrentUserContext();return this.httpClient.get(c.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${n.accessToken}`},params:{IDs:e}})}getTimelineForCity(e){let n=this.authService.getCurrentUserContext();return this.httpClient.get(c.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${n.accessToken}`},params:{city:e}})}getTimelineForCountry(e){let n=this.authService.getCurrentUserContext();return this.httpClient.get(c.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${n.accessToken}`},params:{country:e}})}getTimelineForYear(e){let n=this.authService.getCurrentUserContext();return this.httpClient.get(c.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${n.accessToken}`},params:{year:e}})}getTimelineForCategory(e){let n=this.authService.getCurrentUserContext();return this.httpClient.get(c.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${n.accessToken}`},params:{category:e}})}getTimelineForToday(){let e=this.authService.getCurrentUserContext();return e.isAuthenticated?this.httpClient.get(c.journeyApi+"/timeline",{headers:{Authorization:`Bearer ${e.accessToken}`,"X-Async-Process":"true"},params:{today:!0}}):S()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function J(t,l){if(t&1){let e=C();a(0,"button",6),y("click",function(){g(e);let i=m(3);return _(i.togglePlayer())}),d(1,"i",7),s()}t&2&&r("matTooltip","Pause")}function N(t,l){if(t&1){let e=C();a(0,"button",6),y("click",function(){g(e);let i=m(3);return _(i.togglePlayer())}),d(1,"i",8),s()}t&2&&r("matTooltip","Play")}function H(t,l){if(t&1&&(x(0),u(1,J,2,1,"button",5)(2,N,2,1,"button",5),v()),t&2){let e=m(2);o(),r("ngIf",e.isPlayerRunning()),o(),r("ngIf",!e.isPlayerRunning())}}function X(t,l){if(t&1&&(a(0,"div",2)(1,"p"),d(2,"span",3),u(3,H,3,2,"ng-container",4),s()()),t&2){let e,n,i=m();o(2),r("textContent",(e=i.timelineData())==null?null:e.heading),o(),r("ngIf",(n=i.images())==null?null:n.length)}}function Y(t,l){if(t&1&&(a(0,"div",14)(1,"span",15),f(2),s()()),t&2){let e=m().$implicit;o(2),T(e==null||e.args==null?null:e.args.title)}}function K(t,l){if(t&1&&(x(0),u(1,Y,3,1,"div",11),a(2,"div",12)(3,"p",13),f(4),s()(),v()),t&2){let e=l.$implicit;o(),r("ngIf",e==null||e.args==null?null:e.args.title),o(3),T(e==null||e.args==null?null:e.args.caption)}}function L(t,l){if(t&1){let e=C();a(0,"gallery",9),y("itemClick",function(){g(e);let i=m();return _(i.togglePlayer())}),u(1,K,5,2,"ng-container",10),s()}if(t&2){let e=m();r("items",e.images())("thumbs",!1)("imageSize","contain")("bullets",!0)("autoplayInterval",3e3)("loop",!0)("scrollDuration",500)("autoplay",!0)}}function O(t,l){t&1&&(a(0,"div")(1,"p",16),f(2,"No events found."),s()())}function W(t){return new G({src:t.src,args:I({caption:t.caption,title:t.title},t.args)})}var _e=(()=>{class t{constructor(){this.timelineData=A.required({alias:"data"}),this.images=V(()=>this.timelineData()?.images?.map(W)??[]),this.galleryComponent=P.required(p),this.isPlayerRunning=D(!0)}togglePlayer(){this.isPlayerRunning()?(this.galleryComponent().stop(),this.isPlayerRunning.set(!1)):(this.galleryComponent().next(),this.galleryComponent().play(),this.isPlayerRunning.set(!0))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=k({type:t,selectors:[["app-timeline"]],viewQuery:function(n,i){n&1&&z(i.galleryComponent,p,5),n&2&&E()},inputs:{timelineData:[1,"data","timelineData"]},standalone:!0,features:[F],decls:3,vars:2,consts:[["class","fs-5",4,"ngIf"],[1,"gallery",3,"items","thumbs","imageSize","bullets","autoplayInterval","loop","scrollDuration","autoplay"],[1,"fs-5"],[1,"gradient-text","me-2",3,"textContent"],[4,"ngIf"],["class","btn btn-sm btn-outline-primary",3,"matTooltip","click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary",3,"click","matTooltip"],[1,"bi","bi-pause-circle"],[1,"bi","bi-play-circle"],[1,"gallery",3,"itemClick","items","thumbs","imageSize","bullets","autoplayInterval","loop","scrollDuration","autoplay"],[4,"galleryImageDef"],["class","text-start d-flex flex-row w-100",4,"ngIf"],[1,"h-100","w-100","text-end","d-flex","flex-column","justify-content-end","mb-2","fs-5"],[1,"text-center","bg-light","bg-opacity-25"],[1,"text-start","d-flex","flex-row","w-100"],[1,"text-light","me-2","fs-5","bg-dark","bg-opacity-50","m-2","border","border-2","border-light","ps-2","pe-2","rounded-2"],[1,"gradient-text"]],template:function(n,i){if(n&1&&u(0,X,4,2,"div",0)(1,L,2,8,"gallery",1)(2,O,3,0,"div"),n&2){let b;r("ngIf",(b=i.timelineData())==null?null:b.heading),o(),j(i.images()&&i.images().length>0?1:2)}},dependencies:[q,p,M,$,R],encapsulation:2,changeDetection:0})}}return t})();export{oe as a,_e as b};
