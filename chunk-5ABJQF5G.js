import{a as o}from"./chunk-3OIMTH46.js";import{c as m}from"./chunk-UJZZXKND.js";import{d as A,f as x}from"./chunk-CGJVCASA.js";import{ja as v,oa as y,u as j,z as g}from"./chunk-BQWC7YH4.js";var b="https://res.cloudinary.com/journeytogether/image/upload/v1712604194/journey/readonly/aeqhy3zwrwko7ba2rinr.jpg",k="default",U=(i,s)=>Date.parse(i.journeyDate)-Date.parse(s.journeyDate),f=class{constructor(s="",u="",e="",t="",n=[],a=b,h=new l,c=new d,p=new C,r=!1,D=[]){this.id=s,this.name=u,this.description=e,this.journeyDate=t,this.tags=n,this.thumbnail=a,this.geoDetails=h,this.imagesDetails=c,this.videosDetails=p,this.isPublished=r,this.visibilities=D}},l=class{constructor(s="",u="",e="",t=k,n=void 0,a=void 0){this.title=s,this.city=u,this.country=e,this.category=t,this.location=n,this.geoJson=a}},d=class{constructor(s=[]){this.images=s}},T=class{constructor(s,u,e="",t="",n=!1,a=!1,h=""){this.url=s,this.assetId=u,this.publicId=e,this.title=t,this.isFavorite=n,this.isThumbnail=a,this.eventDate=h}},C=class{constructor(s=[]){this.videos=s}},B=class{constructor(s){this.videoId=s}};var L=(()=>{let s=class s{constructor(){this.httpClient=y(x),this.authService=y(m)}createJourney(e){let t=this.authService.getCurrentUserContext();return this.httpClient.post(o.journeyApi+"/journey",e,{headers:{Authorization:`Bearer ${t.accessToken}`}})}findJourneyByQuery(e,t,n,a,h,c,p=[]){let r=new A;return r=r.set("q",e.text??""),r=r.set("city",e.city??""),r=r.set("country",e.country??""),r=r.set("category",e.category??""),r=r.set("year",e.year??""),r=r.set("sort",t),r=r.set("order",n.toUpperCase()),r=r.set("pageIndex",a),r=r.set("pageSize",h),r=r.set("publishedOnly",c),r=r.set("tags",p.join(",")),this.getAllJourneys(r)}getAllJourneys(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(o.journeyApi+"/journeys",{params:e,headers:{Authorization:`Bearer ${t.accessToken}`}})}getUpcomingAnniversary(){let e=this.authService.getCurrentUserContext();return e.isAuthenticated?this.httpClient.get(o.journeyApi+"/journeys/upcomingAnniversary",{headers:{Authorization:`Bearer ${e.accessToken}`}}).pipe(g(t=>[...t].sort(U))):j()}getAllJourneysAsGeoJson(){let e=this.authService.getCurrentUserContext();return this.httpClient.get(o.journeyApi+"/journeys/published",{headers:{Accept:"application/geo+json",Authorization:`Bearer ${e.accessToken}`}})}getJourneyById(e){let t=this.authService.getCurrentUserContext();return this.httpClient.get(o.journeyApi+"/journey/"+e,{headers:{Authorization:`Bearer ${t.accessToken}`}})}saveJourneyBasicDetails(e){let t=this.authService.getCurrentUserContext();return this.httpClient.put(o.journeyApi+"/journey/"+e.id,e,{headers:{"Content-Type":"application/vnd.journey.api.basic.v1+json",Authorization:`Bearer ${t.accessToken}`}})}saveJourneyGeoDetails(e,t){let n=this.authService.getCurrentUserContext();return this.httpClient.put(o.journeyApi+"/journey/"+e.id,t,{headers:{"Content-Type":"application/vnd.journey.api.geo.v1+json",Authorization:`Bearer ${n.accessToken}`}})}saveJourneyImagesDetails(e,t){let n=this.authService.getCurrentUserContext();return this.httpClient.put(o.journeyApi+"/journey/"+e.id,t,{headers:{"Content-Type":"application/vnd.journey.api.images.v1+json",Authorization:`Bearer ${n.accessToken}`}})}saveJourneyVideosDetails(e,t){let n=this.authService.getCurrentUserContext();return this.httpClient.put(o.journeyApi+"/journey/"+e.id,t,{headers:{"Content-Type":"application/vnd.journey.api.videos.v1+json",Authorization:`Bearer ${n.accessToken}`}})}publishJourney(e){let t=this.authService.getCurrentUserContext();return this.httpClient.put(o.journeyApi+"/journey/"+e.id,e,{headers:{"Content-Type":"application/vnd.journey.api.publish.v1+json",Authorization:`Bearer ${t.accessToken}`}})}deleteJourney(e){let t=this.authService.getCurrentUserContext();return this.httpClient.delete(o.journeyApi+"/journey/"+e.id,{headers:{Authorization:`Bearer ${t.accessToken}`}})}};s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=v({token:s,factory:s.\u0275fac,providedIn:"root"});let i=s;return i})();export{b as a,k as b,f as c,l as d,d as e,T as f,C as g,B as h,L as i};
