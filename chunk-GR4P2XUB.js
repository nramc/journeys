import{a as Z}from"./chunk-MNAZZNOV.js";import{a as ee}from"./chunk-W6XGTRYH.js";import{a as $}from"./chunk-EFSDVRKM.js";import{c as W,g as D,h as j,i as B,j as J,k as U,s as z,t as H,u as K,v as Q,x as X,y as Y}from"./chunk-5J5H5FZW.js";import{c as G}from"./chunk-SNVCUL6N.js";import{a as R}from"./chunk-FUSGHHWI.js";import"./chunk-JLMH4Y5A.js";import{e as P,h as q}from"./chunk-F5TIGKWS.js";import"./chunk-FSWGUYTL.js";import"./chunk-IUL4I26V.js";import"./chunk-OU45453G.js";import{k as O}from"./chunk-MIMT4L35.js";import{A as C,Ab as h,Bc as V,Fa as g,Ga as _,I as T,Jb as u,Ma as k,Ob as a,Tb as M,Yb as i,Zb as n,_b as y,cc as L,ga as w,hc as N,jc as A,qb as o,rb as F,sa as f,tc as d,ua as I,uc as r,xc as S,yc as x,zc as b}from"./chunk-Y7SRRAOL.js";function te(t,c){t&1&&(i(0,"div",8)(1,"div",26),r(2,"Please wait while progressing your request..."),n(),i(3,"div"),y(4,"mat-spinner"),n()())}function ie(t,c){if(t&1&&(i(0,"div",27)(1,"div",28),r(2,"Account activated successfully!"),n(),i(3,"p",29),r(4,"Please "),i(5,"a",30),r(6,"SignIn"),n(),r(7," with your credentials and start your Journey with us."),n()()),t&2){let e=A();o(5),a("routerLink",e.LOGIN_PAGE_INFO.path)}}function ne(t,c){t&1&&(i(0,"div")(1,"p",31),r(2,"Activation failed. Please check and correct data. If issue still persists, then please try again later."),n()())}function re(t,c){t&1&&(i(0,"div"),r(1,"Email Address is required."),n())}function oe(t,c){t&1&&(i(0,"div"),r(1,"Email Address must be at most 50 characters long."),n())}function ae(t,c){t&1&&(i(0,"div"),r(1," Email Address must have at least 8 characters long. "),n())}function se(t,c){t&1&&(i(0,"div"),r(1,"Email Address invalid."),n())}function le(t,c){if(t&1&&(i(0,"div",32),u(1,re,2,0,"div",10)(2,oe,2,0,"div",10)(3,ae,2,0,"div",10)(4,se,2,0,"div",10),n()),t&2){A();let e=d(15);o(),a("ngIf",e.errors==null?null:e.errors.required),o(),a("ngIf",e.errors==null?null:e.errors.maxlength),o(),a("ngIf",(e.errors==null?null:e.errors.minlength)&&!(e.errors!=null&&e.errors.email)),o(),a("ngIf",(e.errors==null?null:e.errors.email)&&!(e.errors!=null&&e.errors.email))}}function ce(t,c){t&1&&(i(0,"div"),r(1,"Token is required."),n())}function de(t,c){if(t&1&&(i(0,"div",32),u(1,ce,2,0,"div",10),n()),t&2){A();let e=d(22);o(),a("ngIf",e.errors==null?null:e.errors.required)}}var E=class{constructor(c="",e=""){this.username=c,this.emailToken=e}},Ce=(()=>{class t{constructor(e){this.LOGIN_PAGE_INFO=G,this.destroyRef=f(k),this.bffService=f(Z),this.registrationService=f(ee),this.isSuccessful=h(!1),this.isErrorOccurred=h(!1),this.isLoading=h(!1),this.accountActivationForm=new E(e.snapshot.queryParamMap.get("identifier"),e.snapshot.queryParamMap.get("token"))}activate(e){e.valid?this.activateAccount():this.onError("Invalid data")}ngOnInit(){this.activateAccount()}activateAccount(){this.bffService.getVersion().pipe(R(this.destroyRef),T(e=>this.accountActivationForm.username!=null&&this.accountActivationForm.emailToken!=null),w(e=>this.isLoading.set(!0)),C(e=>this.registrationService.activate({username:this.accountActivationForm.username,emailToken:this.accountActivationForm.emailToken,apiVersion:e.version}))).subscribe({next:e=>this.onSuccess(),error:e=>this.onError(e)})}onSuccess(){this.isSuccessful.set(!0),this.isLoading.set(!1),this.isErrorOccurred.set(!1)}onError(e){console.log(e),this.isErrorOccurred.set(!0),this.isLoading.set(!1),this.isSuccessful.set(!1)}static{this.\u0275fac=function(v){return new(v||t)(F(P))}}static{this.\u0275cmp=I({type:t,selectors:[["app-account-activation"]],standalone:!0,features:[V],decls:37,vars:11,consts:[["activationForm","ngForm"],["username","ngModel"],["emailToken","ngModel"],[1,"h-100","d-flex","justify-content-center","align-items-center"],[1,"p-3","p-md-4","p-xl-5","col-md-6"],[1,"card","border-primary","shadow-lg"],[1,"card-header","gradient-bg","text-light","fs-4"],[1,"card-body","p-3","p-md-4","p-xl-5"],[1,"loading-shade","text-center"],["class","card-title small p-2 border border-success border-2 shadow-lg rounded-2 bg-transparent text-success text-center",4,"ngIf"],[4,"ngIf"],[3,"ngSubmit"],[1,"row","gy-3","gy-md-2","overflow-hidden"],[1,"col-12"],[1,"form-floating","mb-3"],["type","email","id","username","name","username","placeholder","Email Address","autocomplete","off","required","","minlength","8","maxlength","50","email","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","disabled"],["for","username"],["class","form-text text-danger",4,"ngIf"],["type","text","id","emailToken","name","emailToken","placeholder","Email Token","autocomplete","off","required","",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","disabled"],["for","emailToken"],[1,"d-grid"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"row"],[1,"mt-5","mb-4","text-primary"],[1,"m-0","text-center","text-primary","small"],[1,"fw-bold",3,"routerLink"],[1,"w-100","text-center","text-bg-primary"],[1,"card-title","small","p-2","border","border-success","border-2","shadow-lg","rounded-2","bg-transparent","text-success","text-center"],[1,"fs-6","mb-2","fw-bold"],[1,"fs-6"],[3,"routerLink"],[1,"text-danger","p-2","border","border-danger","border-2","shadow-lg","rounded-1","bg-transparent"],[1,"form-text","text-danger"]],template:function(v,s){if(v&1){let m=L();i(0,"div",3)(1,"section",4)(2,"div",5)(3,"div",6),r(4,"Account Activation"),n(),i(5,"div",7),u(6,te,5,0,"div",8)(7,ie,8,1,"div",9)(8,ne,3,0,"div",10),i(9,"form",11,0),N("ngSubmit",function(){g(m);let l=d(10);return _(s.activate(l))}),i(11,"div",12)(12,"div",13)(13,"div",14)(14,"input",15,1),b("ngModelChange",function(l){return g(m),x(s.accountActivationForm.username,l)||(s.accountActivationForm.username=l),_(l)}),n(),i(16,"label",16),r(17,"Email Address"),n(),u(18,le,5,4,"div",17),n()(),i(19,"div",13)(20,"div",14)(21,"input",18,2),b("ngModelChange",function(l){return g(m),x(s.accountActivationForm.emailToken,l)||(s.accountActivationForm.emailToken=l),_(l)}),n(),i(23,"label",19),r(24,"Token"),n(),u(25,de,2,1,"div",17),n()(),i(26,"div",13)(27,"div",20)(28,"button",21),r(29,"Activate"),n()()()()(),i(30,"div",22)(31,"div",13),y(32,"hr",23),i(33,"p",24),r(34,"Already have an account? "),i(35,"a",25),r(36,"Sign in"),n()()()()()()()()}if(v&2){let m=d(10),p=d(15),l=d(22);o(6),M(s.isLoading()?6:-1),o(),a("ngIf",s.isSuccessful()),o(),a("ngIf",s.isErrorOccurred()),o(6),S("ngModel",s.accountActivationForm.username),a("disabled",s.isSuccessful()),o(4),a("ngIf",p.invalid&&(p.dirty||m.submitted)),o(3),S("ngModel",s.accountActivationForm.emailToken),a("disabled",s.isSuccessful()),o(4),a("ngIf",l.invalid&&(l.dirty||m.submitted)),o(3),a("disabled",s.isSuccessful()),o(7),a("routerLink",s.LOGIN_PAGE_INFO.path)}},dependencies:[X,U,W,D,j,z,K,Q,H,J,B,O,Y,q,$]})}}return t})();export{Ce as AccountActivationComponent,E as AccountActivationForm};
