import{a as be}from"./chunk-OEK3JCZ4.js";import{a as F}from"./chunk-DSNJWEJO.js";import"./chunk-5RO2B4QG.js";import"./chunk-HTXTQMJF.js";import{a as he,b as ye,c as fe,d as _e,e as Ce}from"./chunk-ZCMK6QCY.js";import"./chunk-U6CIP253.js";import"./chunk-S22G4Z2A.js";import{a as ue}from"./chunk-WRW3HQVK.js";import{c as le,d as se,e as ce,f as de,g as pe}from"./chunk-ND4E7NXK.js";import{a as me}from"./chunk-UJW6R6WQ.js";import"./chunk-OOZEX554.js";import"./chunk-VSQTGOJW.js";import{a as ge}from"./chunk-UFELB56A.js";import{c as ne,g as re,j as ae,x as oe}from"./chunk-L7TBAEGZ.js";import"./chunk-WBXSIVPM.js";import"./chunk-VHCH2OWW.js";import"./chunk-RGNDWIHZ.js";import{b as te}from"./chunk-TJQDN4JZ.js";import"./chunk-LIE6DVSM.js";import{a as ie}from"./chunk-I4GWFW3R.js";import"./chunk-DD3DGY4R.js";import{g as ee}from"./chunk-KSKSUK6M.js";import"./chunk-K22UJB6U.js";import"./chunk-Z5ZYU6WP.js";import"./chunk-ITVK7XTE.js";import{E as Z,u as J,v as U,w as X}from"./chunk-IJXI7AEK.js";import{Cb as G,Db as A,Dc as v,Ec as M,Fc as q,Ga as p,Ha as m,I as O,Lb as j,N as W,Nb as w,Sb as L,Tb as S,Ub as _,Vb as C,Wb as t,Xb as n,Yb as k,ac as f,da as N,ea as R,fc as u,ha as V,hc as h,oc as Y,pb as o,pc as Q,q as D,qb as P,qc as $,rc as s,sc as y,tc as b,uc as x,v as B,va as z,vc as E,wc as I,yc as H,zc as K}from"./chunk-BS3IBH43.js";var ve=(l,c)=>c.id,we=()=>[1,5,10,20,25];function Se(l,c){if(l&1){let a=f();t(0,"mat-chip-row",36),u("removed",function(){let i=p(a).$implicit,e=h();return m(e.removeTag(i))}),s(1),t(2,"button",37),u("click",function(){let i=p(a).$implicit,e=h();return m(e.removeTag(i))}),t(3,"mat-icon"),s(4,"cancel"),n()()()}if(l&2){let a=c.$implicit;w("highlighted",!0)("editable",!1)("removable",!0),o(),b(" ",a," ")}}function xe(l,c){if(l&1){let a=f();t(0,"button",38),u("click",function(){let i=p(a).$implicit,e=h();return m(e.sortingFieldChangedEvent.next(i))}),s(1),v(2,"titlecase"),n()}if(l&2){let a=c.$implicit;o(),b("",M(2,1,a)," ")}}function Ee(l,c){if(l&1){let a=f();t(0,"button",38),u("click",function(){let i=p(a).$implicit,e=h();return m(e.sortingDirectionChangedEvent.next(i))}),s(1),v(2,"uppercase"),n()}if(l&2){let a=c.$implicit;o(),b("",M(2,1,a)," ")}}function Ie(l,c){l&1&&(t(0,"div",33),k(1,"mat-spinner"),n())}function Me(l,c){if(l&1&&(t(0,"span",44),s(1),n()),l&2){let a=c.$implicit;o(),y(a)}}function Te(l,c){if(l&1){let a=f();t(0,"button",49),u("click",function(i){p(a);let e=h().$implicit,g=h();return m(g.editDetails(e,i))}),s(1,"Edit "),n()}}function ke(l,c){if(l&1){let a=f();t(0,"div",35)(1,"a",39),u("click",function(){let i=p(a).$implicit,e=h();return m(e.viewDetails(i))}),k(2,"img",40),t(3,"div",41)(4,"h5",42),s(5),n(),t(6,"p",43),s(7),n(),t(8,"p",43),_(9,Me,2,1,"span",44,S),n(),t(11,"div",45)(12,"div",46)(13,"p",47)(14,"small"),s(15),v(16,"date"),n()(),t(17,"p",47)(18,"small"),s(19),n()(),t(20,"p",47)(21,"small"),s(22),n()(),t(23,"p",47)(24,"small"),s(25),n()()(),t(26,"small"),j(27,Te,2,0,"button",48),t(28,"button",49),u("click",function(i){let e=p(a).$implicit,g=h();return m(g.viewInTimeline(e,i))}),s(29,"Timeline "),n()()()()()()}if(l&2){let a=c.$implicit;o(2),w("ngSrc",a.thumbnail)("alt",a.thumbnail),o(3),y(a.name),o(2),y(a.title),o(2),C(a.tags),o(6),y(q(16,8,a.journeyDate,"dd.MM.YYYY")),o(4),y(a.city),o(3),y(a.country),o(3),y(a.category)}}var it=(()=>{let c=class c{constructor(r,i){this.journeyService=r,this.router=i,this.sortableFields=["journeyDate","name","title","city","country","category","location"],this.sortingFieldChangedEvent=new D("journeyDate"),this.sortableDirections=["asc","desc"],this.sortingDirectionChangedEvent=new D("desc"),this.isLoadingResults=!1,this.defaultPageSize=10,this.separatorKeysCodes=[13,188,32],this.searchCriteria=new be,this.paginator=A.required(F),this.tags=G([]),this.tagsObservable=te(this.tags),this.searchResult=G({totalElements:0,data:[]}),i.getCurrentNavigation()?.extras.state&&(this.searchCriteria=i.getCurrentNavigation()?.extras.state)}ngAfterViewInit(){O(this.paginator().page,this.sortingFieldChangedEvent,this.sortingDirectionChangedEvent,this.tagsObservable).pipe(N(),V(()=>this.isLoadingResults=!0),R(()=>this.journeyService.findJourneyByQuery(this.searchCriteria,this.sortingFieldChangedEvent.getValue(),this.sortingDirectionChangedEvent.getValue(),this.paginator().pageIndex,this.paginator().pageSize,!0,this.tags()).pipe(W(()=>B(null)))),V(r=>this.isLoadingResults=!1)).subscribe(r=>this.onSuccess(r))}onSuccess(r){this.searchResult.set({totalElements:r?.totalElements??0,data:r?.content??[]})}ngOnInit(){this.journeyService.findJourneyByQuery(this.searchCriteria,"journeyDate","desc",0,this.defaultPageSize,!0).subscribe(r=>this.onSuccess(r))}viewDetails(r){this.router.navigate(["/journey",r.id,"view"]).then(console.log)}editDetails(r,i){return i.stopPropagation(),this.router.navigate(["/journey",r.id,"edit"]).then(console.log),!1}viewInTimeline(r,i){return i.stopPropagation(),this.router.navigate(["/timeline"],{queryParams:{id:r.id}}).then(console.log),!1}addTag(r){let i=(r.value||"").trim();i&&this.tags.update(e=>[...e,i]),r.chipInput.clear()}removeTag(r){this.tags.update(i=>i.filter(e=>e!==r))}};c.\u0275fac=function(i){return new(i||c)(P(ue),P(ee))},c.\u0275cmp=z({type:c,selectors:[["app-gallery"]],viewQuery:function(i,e){i&1&&Y(e.paginator,F,5),i&2&&Q()},standalone:!0,features:[H],decls:59,vars:19,consts:[["chipGrid",""],[1,"container","advanced-search"],[1,"d-flex","justify-content-end"],["data-bs-toggle","collapse","href","#searchFields","aria-expanded","false","aria-controls","searchFields",1,"text-decoration-none"],["id","searchFields",1,"row","g-2","mb-3","collapse"],[1,"col-sm"],[1,"form-floating","border","border-primary"],["type","text","id","categoryInput","placeholder","Category",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","categoryInput"],["type","text","id","cityInput","placeholder","City",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","cityInput"],["type","text","id","countryInput","placeholder","Country",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","countryInput"],["type","text","id","yearInput","placeholder","Year",1,"form-control","form-control-sm","ignore-highlight",3,"ngModelChange","ngModel"],["for","yearInput"],[1,"container"],[1,"row"],["aria-label","Tags"],[1,"col-12"],[1,"form-floating"],["placeholder","Filter by Tags","autocomplete","off","id","tagsInput",1,"form-control","border","border-2","border-primary","rounded-4",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],["for","tagsInput"],["color","primary",3,"highlighted","editable","removable"],[1,"col-12","col-md-8","mb-md-3","me-0","pe-0"],["aria-label","Select page","color","primary",1,"paginator","me-0",3,"length","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"col-12","col-md-4","sorting","mb-3","me-0"],["ngbDropdown","",1,"d-inline-block","me-1"],["type","button","id","dropdownSortingField","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingField"],["ngbDropdownItem",""],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownSortingDirection","ngbDropdownToggle","",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu","","aria-labelledby","dropdownSortingDirection"],[1,"loading-shade"],[1,"card-group","justify-content-center","align-items-center"],[1,"m-0"],["color","primary",3,"removed","highlighted","editable","removable"],["matChipRemove","",3,"click"],["ngbDropdownItem","",3,"click"],[1,"card","bg-dark","text-bg-dark","text-white",3,"click"],["fill","","priority","",1,"card-img",3,"ngSrc","alt"],[1,"card-img-overlay","d-flex","flex-column","align-self-stretch","card-text-wrapper"],[1,"card-title"],[1,"card-text"],[1,"badge","bg-dark","bg-opacity-25","border-dark","rounded-pill","border","me-1","fw-normal"],[1,"d-inline-flex","footer-wrapper","mt-auto","flex-nowrap","flex-row","justify-content-between"],[1,"d-inline-flex","gap-1"],[1,"small","border","border-light","border-1","rounded-2","ps-1","pe-1","border-opacity-50"],["type","button","class","btn btn-sm btn-outline-success ms-1",3,"click",4,"hasWriteAccess"],["type","button",1,"btn","btn-sm","btn-outline-success","ms-1",3,"click"]],template:function(i,e){if(i&1){let g=f();t(0,"section",1)(1,"div",2)(2,"a",3),s(3," Advanced Search "),n()(),t(4,"div",4)(5,"div",5)(6,"div",6)(7,"input",7),I("ngModelChange",function(d){return p(g),E(e.searchCriteria.category,d)||(e.searchCriteria.category=d),m(d)}),n(),t(8,"label",8),s(9,"Category"),n()()(),t(10,"div",5)(11,"div",6)(12,"input",9),I("ngModelChange",function(d){return p(g),E(e.searchCriteria.city,d)||(e.searchCriteria.city=d),m(d)}),n(),t(13,"label",10),s(14,"City"),n()()(),t(15,"div",5)(16,"div",6)(17,"input",11),I("ngModelChange",function(d){return p(g),E(e.searchCriteria.country,d)||(e.searchCriteria.country=d),m(d)}),n(),t(18,"label",12),s(19,"Country"),n()()(),t(20,"div",5)(21,"div",6)(22,"input",13),I("ngModelChange",function(d){return p(g),E(e.searchCriteria.year,d)||(e.searchCriteria.year=d),m(d)}),n(),t(23,"label",14),s(24,"Year"),n()()()()(),t(25,"section",15)(26,"div",16)(27,"mat-chip-grid",17,0)(29,"div",18)(30,"div",19)(31,"input",20),u("matChipInputTokenEnd",function(d){return p(g),m(e.addTag(d))}),n(),t(32,"label",21),s(33,"Filter by Tags"),n()()(),t(34,"div",18),_(35,Se,5,4,"mat-chip-row",22,S),n()()(),t(37,"div",16)(38,"div",23),k(39,"mat-paginator",24),n(),t(40,"div",25)(41,"div",26)(42,"button",27),s(43),v(44,"titlecase"),n(),t(45,"div",28),_(46,xe,3,3,"button",29,S),n()(),t(48,"div",30)(49,"button",31),s(50),v(51,"uppercase"),n(),t(52,"div",32),_(53,Ee,3,3,"button",29,S),n()()()(),j(55,Ie,2,0,"div",33),t(56,"div",34),_(57,ke,30,11,"div",35,ve),n()()}if(i&2){let g=$(28);o(7),x("ngModel",e.searchCriteria.category),o(5),x("ngModel",e.searchCriteria.city),o(5),x("ngModel",e.searchCriteria.country),o(5),x("ngModel",e.searchCriteria.year),o(9),w("matChipInputFor",g)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),o(4),C(e.tags()),o(4),w("length",e.searchResult().totalElements)("pageSize",e.defaultPageSize)("pageSizeOptions",K(18,we))("showFirstLastButtons",!0),o(4),b(" ",M(44,14,e.sortingFieldChangedEvent.getValue())," "),o(3),C(e.sortableFields),o(4),b(" ",M(51,16,e.sortingDirectionChangedEvent.getValue())," "),o(3),C(e.sortableDirections),o(2),L(e.isLoadingResults?55:-1),o(2),C(e.searchResult().data)}},dependencies:[F,Z,X,pe,de,ce,se,le,J,U,me,Ce,fe,_e,he,ye,ie,oe,ne,re,ae,ge],styles:[".sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#4246d7a6 1%,#f8f9fa1a 80%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.paginator[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%);font-weight:400;font-size:.9em!important;vertical-align:center;text-align:center;align-items:center;justify-content:center!important;display:flex;color:#000}.mat-mdc-select[_ngcontent-%COMP%]{color:#f5f5f5!important}.card[_ngcontent-%COMP%]{width:30rem;height:15rem;margin:0 .5rem .5rem 0!important;cursor:pointer}.card-img[_ngcontent-%COMP%]{opacity:75%;width:100%;height:100%}.card-text-wrapper[_ngcontent-%COMP%]{background:#0003}@media (max-width: 575.98px){.card[_ngcontent-%COMP%]{width:100%;height:15rem;margin:0 0 .5rem!important}.sorting[_ngcontent-%COMP%]{background:#f8f9fa;background:linear-gradient(90deg,#f8f9fa80 1%,#4246d7a6 45%)}}"]});let l=c;return l})();export{it as GalleryComponent};
